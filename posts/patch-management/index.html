<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="AWS - SSM - Patch Manager" /><meta property="og:locale" content="en" /><meta name="description" content="AWS Systems Manager Patch Manager Patch Manager prerequisites SSM Agent version Connectivity to the patch source S3 endpoint access Supported OSs How security patches are selected [ Amazon Linux and Amazon Linux 2 ] [ CentOS ] [ Debian Server ] [ Oracle Linux ] [ RHEL ] [ SLES ] [ Ubuntu Server ] [ Windows ] Linux: specify an alternative patch source repository considerations for alternative repositories Sample uses for alternative patch source repositories How patches are installed [ Amazon Linux and Amazon Linux 2 ] predefined and custom patch baselines How patch baseline rules work on Linux-based systems patch baseline rules work on Amazon Linux and Amazon Linux 2 Key differences between Linux and Windows patching patching operations patching configurations SSM documents for patching instances SSM documents recommended for patching instances AWS-ConfigureWindowsUpdate AWS-InstallWindowsUpdates AWS-RunPatchBaseline AWS-RunPatchBaselineAssociation AWS-RunPatchBaselineWithHooks Legacy SSM documents for patching instances AWS-ApplyPatchBaseline AWS-InstallMissingWindowsUpdates AWS-InstallSpecificWindowsUpdates Patch baselines predefined and custom patch baselines predefined baselines custom baselines patch groups How it works" /><meta property="og:description" content="AWS Systems Manager Patch Manager Patch Manager prerequisites SSM Agent version Connectivity to the patch source S3 endpoint access Supported OSs How security patches are selected [ Amazon Linux and Amazon Linux 2 ] [ CentOS ] [ Debian Server ] [ Oracle Linux ] [ RHEL ] [ SLES ] [ Ubuntu Server ] [ Windows ] Linux: specify an alternative patch source repository considerations for alternative repositories Sample uses for alternative patch source repositories How patches are installed [ Amazon Linux and Amazon Linux 2 ] predefined and custom patch baselines How patch baseline rules work on Linux-based systems patch baseline rules work on Amazon Linux and Amazon Linux 2 Key differences between Linux and Windows patching patching operations patching configurations SSM documents for patching instances SSM documents recommended for patching instances AWS-ConfigureWindowsUpdate AWS-InstallWindowsUpdates AWS-RunPatchBaseline AWS-RunPatchBaselineAssociation AWS-RunPatchBaselineWithHooks Legacy SSM documents for patching instances AWS-ApplyPatchBaseline AWS-InstallMissingWindowsUpdates AWS-InstallSpecificWindowsUpdates Patch baselines predefined and custom patch baselines predefined baselines custom baselines patch groups How it works" /><link rel="canonical" href="https://ocholuo.github.io//posts/patch-management/" /><meta property="og:url" content="https://ocholuo.github.io//posts/patch-management/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-05-23T11:11:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="AWS - SSM - Patch Manager" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-30T21:02:21-04:00","datePublished":"2020-05-23T11:11:11-04:00","description":"AWS Systems Manager Patch Manager Patch Manager prerequisites SSM Agent version Connectivity to the patch source S3 endpoint access Supported OSs How security patches are selected [ Amazon Linux and Amazon Linux 2 ] [ CentOS ] [ Debian Server ] [ Oracle Linux ] [ RHEL ] [ SLES ] [ Ubuntu Server ] [ Windows ] Linux: specify an alternative patch source repository considerations for alternative repositories Sample uses for alternative patch source repositories How patches are installed [ Amazon Linux and Amazon Linux 2 ] predefined and custom patch baselines How patch baseline rules work on Linux-based systems patch baseline rules work on Amazon Linux and Amazon Linux 2 Key differences between Linux and Windows patching patching operations patching configurations SSM documents for patching instances SSM documents recommended for patching instances AWS-ConfigureWindowsUpdate AWS-InstallWindowsUpdates AWS-RunPatchBaseline AWS-RunPatchBaselineAssociation AWS-RunPatchBaselineWithHooks Legacy SSM documents for patching instances AWS-ApplyPatchBaseline AWS-InstallMissingWindowsUpdates AWS-InstallSpecificWindowsUpdates Patch baselines predefined and custom patch baselines predefined baselines custom baselines patch groups How it works","headline":"AWS - SSM - Patch Manager","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/patch-management/"},"url":"https://ocholuo.github.io//posts/patch-management/"}</script><title>AWS - SSM - Patch Manager | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>AWS - SSM - Patch Manager</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>AWS - SSM - Patch Manager</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, May 23, 2020, 11:11 AM -0400" >May 23, 2020<i class="unloaded">2020-05-23T11:11:11-04:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Oct 30, 2022, 6:02 PM -0700" >Oct 30, 2022<i class="unloaded">2022-10-30T21:02:21-04:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="9215 words">51 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><ul><li><a href="#aws-systems-manager-patch-manager">AWS Systems Manager Patch Manager</a><ul><li><a href="#patch-manager-prerequisites">Patch Manager prerequisites</a><ul><li><a href="#ssm-agent-version">SSM Agent version</a><li><a href="#connectivity-to-the-patch-source">Connectivity to the patch source</a><li><a href="#s3-endpoint-access">S3 endpoint access</a><li><a href="#supported-oss">Supported OSs</a></ul><li><a href="#how-security-patches-are-selected">How security patches are selected</a><ul><li><a href="#-amazon-linux-and-amazon-linux-2-">[ Amazon Linux and Amazon Linux 2 ]</a><li><a href="#-centos-">[ CentOS ]</a><li><a href="#-debian-server-">[ Debian Server ]</a><li><a href="#-oracle-linux-">[ Oracle Linux ]</a><li><a href="#-rhel-">[ RHEL ]</a><li><a href="#-sles-">[ SLES ]</a><li><a href="#-ubuntu-server-">[ Ubuntu Server ]</a><li><a href="#-windows-">[ Windows ]</a></ul><li><a href="#linux-specify-an-alternative-patch-source-repository">Linux: specify an alternative patch source repository</a><ul><li><a href="#considerations-for-alternative-repositories">considerations for alternative repositories</a><li><a href="#sample-uses-for-alternative-patch-source-repositories">Sample uses for alternative patch source repositories</a></ul><li><a href="#how-patches-are-installed">How patches are installed</a><ul><li><a href="#-amazon-linux-and-amazon-linux-2--1">[ Amazon Linux and Amazon Linux 2 ]</a></ul><li><a href="#predefined-and-custom-patch-baselines">predefined and custom patch baselines</a><li><a href="#how-patch-baseline-rules-work-on-linux-based-systems">How patch baseline rules work on Linux-based systems</a><ul><li><a href="#patch-baseline-rules-work-on-amazon-linux-and-amazon-linux-2">patch baseline rules work on Amazon Linux and Amazon Linux 2</a><li><a href="#key-differences-between-linux-and-windows-patching">Key differences between Linux and Windows patching</a></ul></ul><li><a href="#patching-operations">patching operations</a><ul><li><a href="#patching-configurations">patching configurations</a><li><a href="#ssm-documents-for-patching-instances">SSM documents for patching instances</a><ul><li><a href="#ssm-documents-recommended-for-patching-instances">SSM documents recommended for patching instances</a><ul><li><a href="#aws-configurewindowsupdate">AWS-ConfigureWindowsUpdate</a><li><a href="#aws-installwindowsupdates">AWS-InstallWindowsUpdates</a><li><a href="#aws-runpatchbaseline">AWS-RunPatchBaseline</a><li><a href="#aws-runpatchbaselineassociation">AWS-RunPatchBaselineAssociation</a><li><a href="#aws-runpatchbaselinewithhooks">AWS-RunPatchBaselineWithHooks</a></ul><li><a href="#legacy-ssm-documents-for-patching-instances">Legacy SSM documents for patching instances</a><ul><li><a href="#aws-applypatchbaseline">AWS-ApplyPatchBaseline</a><li><a href="#aws-installmissingwindowsupdates">AWS-InstallMissingWindowsUpdates</a><li><a href="#aws-installspecificwindowsupdates">AWS-InstallSpecificWindowsUpdates</a></ul></ul></ul><li><a href="#patch-baselines">Patch baselines</a><ul><li><a href="#predefined-and-custom-patch-baselines-1">predefined and custom patch baselines</a><li><a href="#predefined-baselines">predefined baselines</a><li><a href="#custom-baselines">custom baselines</a></ul><li><a href="#patch-groups">patch groups</a><ul><li><a href="#how-it-works">How it works</a></ul></ul><hr /><h1 id="aws-systems-manager-patch-manager">AWS Systems Manager Patch Manager</h1><p>Patch Manager</p><ul><li>a capability of AWS Systems Manager<li>automates the process of patching managed instances with both security related and other types of updates.<li>can use Patch Manager to<ul><li><strong>apply patches for both OSs and applications</strong><ul><li>On Windows Server, application support is limited to updates for Microsoft applications.</ul><li>install <strong>Service Packs</strong> on Windows instances and perform <strong>minor version upgrades</strong> on Linux instances.<li><strong>patch fleets of Amazon EC2 instances, on-premises servers and VMs</strong> by OS type.<ul><li>This includes supported versions of Amazon Linux, Amazon Linux 2, CentOS, Debian Server, macOS, Oracle Linux, Red Hat Enterprise Linux (RHEL), SUSE Linux Enterprise Server (SLES), Ubuntu Server, and Windows Server.</ul><li><strong>scan instances</strong> to see only a report of missing patches, or automatically install all missing patches.<ul><li>Patch Manager provides options to<ul><li>scan the instances, report compliance, install available patches on a schedule<li>or patch or scan instances on demand</ul><li>generate patch compliance reports that are sent to an S3 bucket<ul><li>generate one-time reports, or generate reports on a regular schedule.<li>For a single instance, reports include details of all patches for the instance.<li>For a report on all instances, only a summary of how many patches are missing is provided.</ul></ul></ul></ul><p><strong>Important</strong></p><ul><li>AWS does not test patches for Windows Server or Linux <font color="blue"> before making them available in Patch Manager </font>.<li>Patch Manager doesn’t support <font color="blue"> upgrading major versions of OSs </font><ul><li>such as Windows Server 2016 to Windows Server 2019,<li>or SUSE Linux Enterprise Server (SLES) 12.0 to SLES 15.0.</ul></ul><p>Patch Manager uses <font color="red"> patch baselines </font></p><ul><li>which include rules for <code class="language-plaintext highlighter-rouge">auto-approving patches</code> within days of their release, as well as a <code class="language-plaintext highlighter-rouge">list of approved and rejected patches</code>.<li>You can install patches<ul><li>on a regular basis by scheduling patching to run as a Systems Manager maintenance window task.<li>or individually or to large groups of instances by using Amazon EC2 tags.<ul><li>Tags are keys that help identify and sort the resources within the organization.<li>add tags to the patch baselines themselves when you create or update them.</ul></ul></ul><blockquote><p>Patch Manager integrates with IAM, AWS CloudTrail, and Amazon EventBridge to provide a secure patching experience that includes event notifications and the ability to audit usage.</p></blockquote><h2 id="patch-manager-prerequisites">Patch Manager prerequisites</h2><h3 id="ssm-agent-version">SSM Agent version</h3><p>Version 2.0.834.0 or later of SSM Agent is running on the instances you want to manage with Patch Manager.</p><ul><li>An updated version of SSM Agent<li>If an older version of the agent is running on an instance, some SSM Agent processes can fail.<li>recommend automate install SSM Agent up-to-date.<li>Subscribe to the <a href="https://github.com/aws/amazon-ssm-agent/blob/mainline/RELEASENOTES.md">SSM Agent Release Notes</a> page on GitHub to get notifications about SSM Agent updates.</ul><h3 id="connectivity-to-the-patch-source">Connectivity to the patch source</h3><p>If the instances don’t have a direct connection to the Internet and you are using an Amazon VPC with a VPC endpoint, you must ensure that the instances have access to the <strong>source patch repositories (repos)</strong>.</p><ol><li>On Linux instances<ul><li>patch updates are typically downloaded from the <strong>remote repos</strong> configured on the instance.<li>instance must be able to connect to the repos so the patching can be performed.<li>For more information, see <strong>How security patches are selected</strong></ul><li>Windows Server instances<ul><li>must be able to connect to the <strong>Windows Update Catalog or Windows Server Update Services (WSUS)</strong>.<li>Confirm that the instances have connectivity to the <a href="https://www.catalog.update.microsoft.com/home.aspx">Microsoft Update Catalog</a> through an <code class="language-plaintext highlighter-rouge">internet gateway, NAT gateway, or NAT instance</code>.<li>If you are using WSUS, confirm that the instance has connectivity to the WSUS server in the environment. For more information, see [Troubleshooting instance does not have access to Windows Update Catalog or WSUS].</ul></ol><h3 id="s3-endpoint-access">S3 endpoint access</h3><p>Whether the instances operate in a private or public network, without access to the required AWS managed Amazon S3 buckets, patching operations fail.</p><ul><li>For information about the S3 buckets the managed instances must be able to access, see [About minimum S3 Bucket permissions for SSM Agent] and [Step 6: (Optional) Create a Virtual Private Cloud endpoint].</ul><h3 id="supported-oss">Supported OSs</h3><p>The Patch Manager capability does not support all the same OSs versions that are supported by other Systems Manager capabilities.</p><p>For example, Patch Manager does not support CentOS 6.3 or Raspbian Stretch.</p><ul><li>full list of Systems Manager-supported OSs, see <a href="https://github.com/awsdocs/aws-systems-manager-user-guide/blob/main/doc_source/systems-manager-prereqs.md">Systems Manager prerequisites</a><li>Therefore, ensure that the instances you want to use with Patch Manager are running one of the OSs listed in the following table.</ul><p>OS</p><ol><li>Linux<ul><li>Amazon Linux 2012.03 - 2018.03<li>Amazon Linux 2 2 - 2.0<li>CentOS 6.5 - 7.9, 8.0-8.2<li>Debian Server 8.x, 9.x, and 10.x<li>Oracle Linux 7.5 - 8.3<li>Red Hat Enterprise Linux (RHEL) 6.5 - 8.3<li>SUSE Linux Enterprise Server (SLES) 12.0 and later 12.x versions, 15.0 and 15.1<li>Ubuntu Server 14.04 LTS, 16.04 LTS, 18.04 LTS, 20.04 LTS, and 20.10 STR<li>Instances created from an Amazon Linux AMI that are using a proxy must be running a current version of the Python <code class="language-plaintext highlighter-rouge">requests</code> module in order to support Patch Manager operations.<li><a href="https://github.com/awsdocs/aws-systems-manager-user-guide/blob/main/doc_source/sysman-proxy-with-ssm-agent-al-python-requests.md">Upgrade the Python requests module on Amazon Linux instances that use a proxy server</a></ul><li>macOS<ul><li>macOS 10.14.x (Mojave) and 10.15.x (Catalina)</ul><li>Windows<ul><li>Windows Server 2008 through Windows Server 2019, including R2 versions.<li>As of January 14, 2020, Windows Server 2008 is no longer supported for feature or security updates from Microsoft.<li>Legacy AMIs for Windows Server 2008 and 2008 R2 still include version 2 of SSM Agent preinstalled<ul><li>but Systems Manager no longer officially supports 2008 versions<li>and no longer updates the agent for these versions of Windows Server.<li>SSM Agent version 3.0 may not be compatible with all operations on Windows Server 2008 and 2008 R2.<li>The final officially supported version of SSM Agent for Windows Server 2008 versions is 2.3.1644.0</ul></ul></ol><h2 id="how-security-patches-are-selected">How security patches are selected</h2><p>The primary focus of Patch Manager is on installing OSs <strong>security-related updates</strong> on instances.</p><ul><li>By default, Patch Manager doesn’t install all available patches, but rather a smaller set of patches focused on security.<ul><li>On all Linux-based systems supported by Patch Manager, you can choose a different source repository configured for the instance, typically to install nonsecurity updates.</ul></ul><h3 id="-amazon-linux-and-amazon-linux-2-">[ Amazon Linux and Amazon Linux 2 ]</h3><p>On Amazon Linux and Amazon Linux 2, the Systems Manager patch baseline service uses preconfigured repositories on the instance.</p><p>There are usually two <strong>preconfigured repositories (repos)</strong> on an instance:</p><div class="table-wrapper"><table><thead><tr><th><strong>Repo ID</strong><th><strong>Repo name</strong><tbody><tr><td><code class="language-plaintext highlighter-rouge">amzn-main/latest</code><td><code class="language-plaintext highlighter-rouge">amzn-main-Base</code><tr><td><code class="language-plaintext highlighter-rouge">amzn-updates/latest</code><td><code class="language-plaintext highlighter-rouge">amzn-updates-Base</code></table></div><p><strong>Note</strong></p><ul><li>All updates are downloaded from the remote repos configured on the instance.<ul><li>so the instance must be able to connect to the repos so the patching can be performed.</ul><li>Amazon Linux and Amazon Linux 2 instances use Yum as the package manager, and Yum uses the concept of an <strong>update notice as a file</strong> named <code class="language-plaintext highlighter-rouge">updateinfo.xml</code>.<ul><li>An <strong>update notice</strong>: a collection of packages that fix specific problems.<li>All packages that are in an update notice are considered Security by Patch Manager.<li>Individual packages are not assigned classifications or severity levels.<ul><li>For this reason, Patch Manager assigns the attributes of an update notice to the related packages.</ul><li>select the <strong>Approved patches include non-security updates</strong> check box in the <strong>Create patch baseline</strong> page<ul><li>packages that are not classified in an <code class="language-plaintext highlighter-rouge">updateinfo.xml</code> file (package that contains a file without properly formatted Classification, Severity, and Date values) can be included in the prefiltered list of patches.<li>However, in order for a patch to be applied, the patch must still meet the user-specified patch baseline rules.</ul></ul></ul><h3 id="-centos-">[ CentOS ]</h3><p>On CentOS, the Systems Manager patch baseline service uses preconfigured repositories (repos) on the instance. The following list provides examples for a fictitious CentOS 8.2 Amazon Machine Image (AMI):</p><div class="table-wrapper"><table><thead><tr><th><strong>Repo ID</strong><th><strong>Repo name</strong><tbody><tr><td><code class="language-plaintext highlighter-rouge">example-centos-8.2-base</code><td><code class="language-plaintext highlighter-rouge">Example CentOS-8.2 - Base</code><tr><td><code class="language-plaintext highlighter-rouge">example-centos-8.2-extras</code><td><code class="language-plaintext highlighter-rouge">Example CentOS-8.2 - Extras</code><tr><td><code class="language-plaintext highlighter-rouge">example-centos-8.2-updates</code><td><code class="language-plaintext highlighter-rouge">Example CentOS-8.2 - Updates</code><tr><td><code class="language-plaintext highlighter-rouge">example-centos-8.x-examplerepo</code><td><code class="language-plaintext highlighter-rouge">Example CentOS-8.x – Example Repo Packages</code></table></div><ul><li>All updates are downloaded from the remote repos configured on the instance.<ul><li>so the instance must be able to connect to the repos so the patching can be performed.</ul><li>CentOS 6 and 7 instances use Yum as the package manager.<li>CentOS 8 instances use DNF as the package manager.<li>Both package managers use the concept of an <strong>update notice</strong>.<li>However, CentOS default repos aren’t configured with an update notice.<ul><li>This means that Patch Manager does not detect packages on a default CentOS repo.<li>To enable Patch Manager to process packages that aren’t contained in an update notice, must enable the <code class="language-plaintext highlighter-rouge">EnableNonSecurity</code> flag in the patch baseline rules.</ul><li>CentOS update notices are supported. Repos with update notices can be downloaded after launch.</ul><h3 id="-debian-server-">[ Debian Server ]</h3><p>On Debian Server, the Systems Manager patch baseline service uses preconfigured repositories (repos) on the instance.</p><ul><li>These preconfigured repos are used to pull an <strong>updated list of available package upgrades</strong>.<ul><li>For this, Systems Manager performs the equivalent of a <code class="language-plaintext highlighter-rouge">sudo apt-get update</code> command</ul><li>Packages are then filtered from <code class="language-plaintext highlighter-rouge">debian-security codename</code> repos. This means that<ul><li>on Debian Server 8, Patch Manager only identifies upgrades that are part of <code class="language-plaintext highlighter-rouge">debian-security jessie</code>.<ul><li>On Debian Server 8 only: Because some Debian <code class="language-plaintext highlighter-rouge">Server 8.*</code> instances refer to an obsolete package repository (<code class="language-plaintext highlighter-rouge">jessie-backports</code>), Patch Manager performs additional steps to ensure that patching operations succeed.</ul><li>On Debian Server 9, only upgrades that are part of <code class="language-plaintext highlighter-rouge">debian-security stretch</code> are identified.<li>On Debian Server 10, only upgrades that are part of <code class="language-plaintext highlighter-rouge">debian-security buster</code> are identified.</ul></ul><h3 id="-oracle-linux-">[ Oracle Linux ]</h3><p>On Oracle Linux, the Systems Manager patch baseline service uses preconfigured repositories (repos) on the instance.</p><p>There are usually two preconfigured repos on an instance.</p><p><strong>Oracle Linux 7</strong>:</p><div class="table-wrapper"><table><thead><tr><th><strong>Repo ID</strong><th><strong>Repo name</strong><tbody><tr><td><code class="language-plaintext highlighter-rouge">ol7_UEKR5/x86_64</code><td><code class="language-plaintext highlighter-rouge">Latest Unbreakable Enterprise Kernel Release 5 for Oracle Linux 7Server (x86_64)</code><tr><td><code class="language-plaintext highlighter-rouge">ol7_latest/x86_64</code><td><code class="language-plaintext highlighter-rouge">Oracle Linux 7Server Latest (x86_64)</code></table></div><p><strong>Oracle Linux 8</strong>:</p><div class="table-wrapper"><table><thead><tr><th><strong>Repo ID</strong><th><strong>Repo name</strong><tbody><tr><td><code class="language-plaintext highlighter-rouge">ol8_baseos_latest</code><td><code class="language-plaintext highlighter-rouge">Oracle Linux 8 BaseOS Latest (x86_64)</code><tr><td><code class="language-plaintext highlighter-rouge">ol8_appstream</code><td><code class="language-plaintext highlighter-rouge">Oracle Linux 8 Application Stream (x86_64)</code><tr><td><code class="language-plaintext highlighter-rouge">ol8_UEKR6</code><td><code class="language-plaintext highlighter-rouge">Latest Unbreakable Enterprise Kernel Release 6 for Oracle Linux 8 (x86_64)</code></table></div><ul><li>All updates are downloaded from the remote repos configured on the instance. so the instance must be able to connect to the repos so the patching can be performed.<li>Oracle Linux instances use Yum as the package manager, and Yum uses update notice <code class="language-plaintext highlighter-rouge">updateinfo.xml</code>.<ul><li>Individual packages are not assigned classifications or severity levels.<li>For this reason, Patch Manager assigns the attributes of an update notice to the related packages and installs packages based on the Classification filters specified in the patch baseline.<li>select the <strong>Approved patches include non-security updates</strong> check box in the <strong>Create patch baseline</strong> page<ul><li>then packages that are not classified in an <code class="language-plaintext highlighter-rouge">updateinfo.xml</code> file (or a package that contains a file without properly formatted Classification, Severity, and Date values) can be included in the prefiltered list of patches.<li>However, in order for a patch to be applied, the patch must still meet the <strong>user-specified patch baseline rules</strong>.</ul></ul></ul><h3 id="-rhel-">[ RHEL ]</h3><p>On Red Hat Enterprise Linux, the Systems Manager patch baseline service uses preconfigured repositories (repos) on the instance. There are usually three preconfigured repos on an instance.</p><ul><li><p>All updates are downloaded from the remote repos configured on the instance. so the instance must be able to connect to the repos so the patching can be performed.</p><li>Red Hat Enterprise Linux 7 instances use Yum as the package manager.<li>Red Hat Enterprise Linux 8 instances use DNF as the package manager.<li>Both package managers use the concept of an update notice as a file named <code class="language-plaintext highlighter-rouge">updateinfo.xml</code>.<ul><li>Individual packages are not assigned classifications or severity levels. For this reason, Patch Manager assigns the attributes of an update notice to the related packages and installs packages based on the Classification filters specified in the patch baseline.</ul><li>select the <strong>Approved patches include non-security updates</strong> check box in the <strong>Create patch baseline</strong> page<ul><li>then packages that are not classified in an <code class="language-plaintext highlighter-rouge">updateinfo.xml</code> file (or a package that contains a file without properly formatted Classification, Severity, and Date values) can be included in the prefiltered list of patches.<li>However, in order for a patch to be applied, the patch must still meet the <strong>user-specified patch baseline rules</strong>.</ul></ul><p>Note that repo locations differ between RHEL 7 and RHEL 8:</p><p>RHEL 7</p><p>The following repo IDs are associated with RHUI 2.</p><ul><li>RHUI 3 launched in December 2019 and introduced a different naming scheme for Yum repository IDs.<li>Depending on the RHEL-7 AMI you create the instances from, you might need to update the commands.</ul><div class="table-wrapper"><table><thead><tr><th><strong>Repo ID</strong><th><strong>Repo name</strong><tbody><tr><td><code class="language-plaintext highlighter-rouge">rhui-REGION-client-config-server-7/x86_64</code><td><code class="language-plaintext highlighter-rouge">Red Hat Update Infrastructure 2.0 Client Configuration Server 7</code><tr><td><code class="language-plaintext highlighter-rouge">rhui-REGION-rhel-server-releases/7Server/x86_64</code><td><code class="language-plaintext highlighter-rouge">Red Hat Enterprise Linux Server 7 (RPMs)</code><tr><td><code class="language-plaintext highlighter-rouge">rhui-REGION-rhel-server-rh-common/7Server/x86_64</code><td><code class="language-plaintext highlighter-rouge">Red Hat Enterprise Linux Server 7 RH Common (RPMs)</code></table></div><p>RHEL 8</p><div class="table-wrapper"><table><thead><tr><th><strong>Repo ID</strong><th><strong>Repo name</strong><tbody><tr><td><code class="language-plaintext highlighter-rouge">rhel-8-appstream-rhui-rpms</code><td><code class="language-plaintext highlighter-rouge">Red Hat Enterprise Linux 8 for x86_64 - AppStream from RHUI (RPMs)</code><tr><td><code class="language-plaintext highlighter-rouge">rhel-8-baseos-rhui-rpms</code><td><code class="language-plaintext highlighter-rouge">Red Hat Enterprise Linux 8 for x86_64 - BaseOS from RHUI (RPMs)</code><tr><td><code class="language-plaintext highlighter-rouge">rhui-client-config-server-8</code><td><code class="language-plaintext highlighter-rouge">Red Hat Update Infrastructure 3 Client Configuration Server 8</code></table></div><h3 id="-sles-">[ SLES ]</h3><p>On SUSE Linux Enterprise Server (SLES) instances, the ZYPP library gets the list of available patches (a collection of packages) from the following locations:</p><ul><li>List of repositories: <code class="language-plaintext highlighter-rouge">etc/zypp/repos.d/*</code><li>Package information: <code class="language-plaintext highlighter-rouge">/var/cache/zypp/raw/*</code></ul><p>SLES instances use Zypper as the package manager, and Zypper uses the concept of a patch. A patch is simply a collection of packages that fix a specific problem. Patch Manager handles all packages referenced in a patch as security-related. Because individual packages aren’t given classifications or severity, Patch Manager assigns the packages the attributes of the patch that they belong to.</p><h3 id="-ubuntu-server-">[ Ubuntu Server ]</h3><p>On Ubuntu Server, the Systems Manager patch baseline service uses preconfigured repositories (repos) on the instance. These preconfigured repos are used to pull an updated list of available package upgrades. For this, Systems Manager performs the equivalent of a <code class="language-plaintext highlighter-rouge">sudo apt-get update</code> command.</p><p>Packages are then filtered from <code class="language-plaintext highlighter-rouge">codename-security</code> repos, where the codename is unique to the release version, such as <code class="language-plaintext highlighter-rouge">trusty</code> for Ubuntu Server 14. Patch Manager only identifies upgrades that are part of these repos:</p><ul><li>Ubuntu Server 14.04 LTS: <code class="language-plaintext highlighter-rouge">trusty-security</code><li>Ubuntu Server 16.04 LTS: <code class="language-plaintext highlighter-rouge">xenial-security</code><li>Ubuntu Server 18.04 LTS: <code class="language-plaintext highlighter-rouge">bionic-security</code><li>Ubuntu Server 20.04 LTS: <code class="language-plaintext highlighter-rouge">focal-security</code><li>Ubuntu Server 20.10 STR: <code class="language-plaintext highlighter-rouge">groovy-gorilla</code></ul><h3 id="-windows-">[ Windows ]</h3><p>On Microsoft Windows OSs, Patch Manager retrieves a list of available updates that Microsoft publishes to Microsoft Update and are automatically available to Windows Server Update Services (WSUS).</p><p>Patch Manager continuously monitors for new updates in every AWS Region. The list of available updates is refreshed in each Region at least once per day. When the patch information from Microsoft is processed, Patch Manager removes updates that were replaced by later updates from its patch list . Therefore, only the most recent update is displayed and made available for installation. For example, if <code class="language-plaintext highlighter-rouge">KB4012214</code> replaces <code class="language-plaintext highlighter-rouge">KB3135456</code>, only <code class="language-plaintext highlighter-rouge">KB4012214</code> is made available as an update in Patch Manager.</p><p><strong>Note</strong> Patch Manager only makes available patches for Windows Server OS versions that are supported for Patch Manager. For example, Patch Manager can’t be used to patch Windows RT.</p><hr /><h2 id="linux-specify-an-alternative-patch-source-repository">Linux: specify an alternative patch source repository</h2><p><strong>use the default repositories configured</strong> on an instance for patching operations</p><ul><li>Patch Manager scans for or installs security-related patches. (the default behavior for Patch Manager)</ul><p>On Linux systems</p><ul><li>however, you can also use Patch Manager to<ul><li>install patches that are not related to security, or in a different source repository.<li>specify alternative patch source repositories when create a <font color="red"> custom patch baseline </font>.<li>In each custom patch baseline, specify <strong>patch source configurations for up to 20 versions of a supported Linux OS</strong>.</ul><li>Running a <strong>custom patch baseline</strong> that <code class="language-plaintext highlighter-rouge">specifies alternative patch repositories</code> on an instance doesn’t change the <strong>default repository</strong> configured for the instance.</ul><blockquote><p>For example, Ubuntu Server fleet includes both <code class="language-plaintext highlighter-rouge">Ubuntu Server 14.04</code> and <code class="language-plaintext highlighter-rouge">Ubuntu Server 16.04</code> instances. specify alternate repositories for each version in the <strong>same custom patch baseline</strong>. For each version, you provide a name, specify the OS version type (product), and provide a repository configuration. You can also specify a single alternative source repository that applies to all versions of a supported OS.</p></blockquote><p>To specify alternative patch source repositories</p><ol><li><strong>Example: Using the console</strong><ul><li>use the <strong>Patch sources</strong> section on the <strong>Create patch baseline</strong> page.<li>For information about using the <strong>Patch sources</strong> options, see <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/create-baseline-console-linux.html">Creating a custom patch baseline</a>.</ul><li><strong>Example: Using the AWS CLI</strong><ul><li>using the <code class="language-plaintext highlighter-rouge">--sources</code> option<li>see <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/patch-manager-cli-commands.html#patch-manager-cli-commands-create-patch-baseline-mult-sources">Create a patch baseline with custom repositories for different OS versions</a>.<li><code class="language-plaintext highlighter-rouge">aws ssm create-patch-baseline --cli-input-json file://my-patch-repository.json</code></ul></ol><h3 id="considerations-for-alternative-repositories">considerations for alternative repositories</h3><ol><li><strong>Only specified repositories are used for patching</strong><ul><li>Specifying alternative repositories doesn’t mean specifying <em>additional</em> repositories.<li>you must also specify the default repositories as part of the <strong>alternative patch source configuration</strong> if you want their updates to be applied.<li>Running a <strong>custom patch baseline</strong> that specifies <strong>alternative patch repositories</strong> for an instance doesn’t make those repositories the new default repositories.<ul><li>After the patching operation completes<li>the repositories previously defined as the defaults still remain the default repository configured for the instance.</ul></ul></ol><blockquote><p>For example on Amazon Linux 2 instances, the default repositories are <code class="language-plaintext highlighter-rouge">amzn-main</code> and <code class="language-plaintext highlighter-rouge">amzn-update</code>. If you want to include the <strong>Extra Packages for Enterprise Linux (EPEL) repository</strong> in the patching operations, you must specify all three repositories as alternative repositories.</p></blockquote><ol><li><strong>Patching behavior for YUM-based distributions depends on the updateinfo.xml manifest</strong><ul><li>When you specify <strong>alternative patch repositories</strong> for <code class="language-plaintext highlighter-rouge">YUM-based distributions</code>,<ul><li>such as Amazon Linux or Amazon Linux 2, Red Hat Enterprise Linux, or CentOS,</ul><li>patching behavior depends on whether the repository includes an update manifest in the form of a complete and correctly formatted <code class="language-plaintext highlighter-rouge">updateinfo.xml</code> file.<li>This file specifies the r<code class="language-plaintext highlighter-rouge">elease date, classifications, and severities</code> of the various packages.<li>Any of the following will affect the patching behavior:<ul><li>If you filter on <strong>Classification</strong> and <strong>Severity</strong>, but they aren’t specified in <code class="language-plaintext highlighter-rouge">updateinfo.xml</code><ul><li>the package will not be included by the filter.<li>This also means that packages without an <code class="language-plaintext highlighter-rouge">updateinfo.xml</code> file won’t be included in patching.</ul><li>If you filter on <strong>ApprovalAfterDays</strong>, but the package release date isn’t in Unix Epoch format (or has no release date specified)<ul><li>the package will not be included by the filter.</ul><li>Exception:<ul><li>select the <strong>Approved patches include non-security updates</strong> check box in the <strong>Create patch baseline</strong> page.<li>In this case, packages without an <code class="language-plaintext highlighter-rouge">updateinfo.xml</code> file or contains this file but without properly formatted <strong>Classification</strong>, <strong>Severity</strong>, and <strong>Date</strong> values <em>will</em> be included in the prefiltered list of patches.<li>They must still meet the other patch baseline rule requirements in order to be installed.</ul></ul></ul></ol><h3 id="sample-uses-for-alternative-patch-source-repositories">Sample uses for alternative patch source repositories</h3><p><strong>Example 1 – Nonsecurity Updates for Ubuntu Server</strong></p><ul><li>using Patch Manager to install security patches on a fleet of Ubuntu Server instances using the <code class="language-plaintext highlighter-rouge">AWS-provided predefined patch baseline</code> <strong>AWS-UbuntuDefaultPatchBaseline</strong>.<li>create a <code class="language-plaintext highlighter-rouge">new patch baseline</code> that is based on this default, but specify in the approval rules that you want <code class="language-plaintext highlighter-rouge">nonsecurity related updates</code> that are part of the default distribution to be installed as well.<li>When this patch baseline is run against the instances, patches for both security and nonsecurity issues are applied.<li>You can also choose to approve nonsecurity patches in the patch exceptions you specify for a baseline.</ul><p><strong>Example 2 - Personal Package Archives (PPA) for Ubuntu Server</strong></p><ul><li>Ubuntu Server instances are running software that is distributed through a <a href="https://launchpad.net/ubuntu/+ppas">Personal Package Archives (PPA) for Ubuntu</a>.<li>create a patch baseline that specifies a PPA repository that you have configured on the instance as the source repository for the patching operation.<li>Then use Run Command to run the <code class="language-plaintext highlighter-rouge">patch baseline document</code> on the instances.</ul><p><strong>Example 3 – Internal Corporate Applications on Amazon Linux</strong></p><ul><li>to run some applications needed for industry regulatory compliance on the Amazon Linux instances.<li>configure a repository for these applications on the instances, use YUM to initially install the applications, and then update or create a new patch baseline to include this new corporate repository.<li>After this you can use Run Command to run the <strong>AWS-RunPatchBaseline</strong> document with the <code class="language-plaintext highlighter-rouge">Scan</code> option to see if the corporate package is listed among the installed packages and is up to date on the instance.<li>If it isn’t up to date, you can run the document again using the <code class="language-plaintext highlighter-rouge">Install</code> option to update the applications.</ul><hr /><h2 id="how-patches-are-installed">How patches are installed</h2><p>Patch Manager uses the appropriate built-in mechanism for an OS type to install updates on an instance.</p><ul><li>on Windows Server, the <code class="language-plaintext highlighter-rouge">Windows Update API</code> is used<li>on Amazon Linux the <code class="language-plaintext highlighter-rouge">yum</code> package manager is used.</ul><h3 id="-amazon-linux-and-amazon-linux-2--1">[ Amazon Linux and Amazon Linux 2 ]</h3><p>On Amazon Linux and Amazon Linux 2 instances, the patch installation workflow is as follows:</p><ol><li><p>If a list of patches is specified using an <code class="language-plaintext highlighter-rouge">https/S3 URL</code> using the <code class="language-plaintext highlighter-rouge">InstallOverrideList</code> parameter for the <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code> or <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaselineAssociation</code> documents, the listed patches are installed and steps 2-7 are skipped.</p><li>Apply <a href="https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_CreatePatchBaseline.html#systemsmanager-CreatePatchBaseline-request-GlobalFilters">GlobalFilters</a> as specified in the <strong>patch baseline</strong><ul><li>keeping <font color="red"> only the qualified packages for further processing </font>.</ul><li>Apply <a href="https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_CreatePatchBaseline.html#EC2-CreatePatchBaseline-request-ApprovalRules">ApprovalRules</a> as specified in the <strong>patch baseline</strong>.<ul><li> <font color="red"> Each approval rule can define a package as approved </font><p>.</p><li>Approval rules are also subject to whether the <strong>Include nonsecurity updates</strong> check box was selected when create/update the patch baseline.<li>If <code class="language-plaintext highlighter-rouge">nonsecurity updates</code> are excluded<ul><li>an implicit rule is applied in order to select only packages with upgrades in security repos.<li>For each package, the candidate version of the package (which is typically the latest version) must be part of a security repo.</ul><li>If <code class="language-plaintext highlighter-rouge">nonsecurity updates</code> are included<ul><li>patches from other repositories are considered as well.</ul></ul><li>Apply <a href="https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_CreatePatchBaseline.html#EC2-CreatePatchBaseline-request-ApprovedPatches">ApprovedPatches</a> as specified in the <strong>patch baseline</strong>.<ul><li>The approved patches are approved for update<li>even if they are discarded by <code class="language-plaintext highlighter-rouge">GlobalFilters</code> or if no approval rule specified in <code class="language-plaintext highlighter-rouge">ApprovalRules</code> grants it approval.</ul><li>Apply <a href="https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_CreatePatchBaseline.html#EC2-CreatePatchBaseline-request-RejectedPatches">RejectedPatches</a> as specified in the <strong>patch baseline</strong><ul><li>The rejected patches are removed from the list of approved patches and will not be applied.</ul><li><p>If multiple versions of a patch are approved, the latest version is applied.</p><li>The YUM update API is applied to approved patches as follows:<ul><li>For <strong>predefined default patch baselines</strong> provided by AWS<li>and for <strong>custom patch baselines</strong> where the <code class="language-plaintext highlighter-rouge">Approved patches include non-security updates</code> check box is <em>not</em> selected<li>only patches specified in <code class="language-plaintext highlighter-rouge">updateinfo.xml</code> are applied (security updates only).</ul></ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># The equivalent yum command for this workflow is:</span>
<span class="nb">sudo </span>yum update-minimal <span class="nt">--sec-severity</span><span class="o">=</span>critical,important <span class="nt">--bugfix</span> <span class="nt">-y</span>
</pre></table></code></div></div><ul><li>For <strong>custom patch baselines</strong> where the <strong>Approved patches include non-security updates</strong> check box <em>is</em> selected<li>both patches in <code class="language-plaintext highlighter-rouge">updateinfo.xml</code> and those not in <code class="language-plaintext highlighter-rouge">updateinfo.xml</code> are applied (security and nonsecurity updates).</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># The equivalent yum command for this workflow is:</span>
<span class="nb">sudo </span>yum update <span class="nt">--security</span> <span class="nt">--bugfix</span>
</pre></table></code></div></div><ol><li>The instance is rebooted if any updates were installed.<ul><li>(Exception: If the <code class="language-plaintext highlighter-rouge">RebootOption</code> parameter is set to <code class="language-plaintext highlighter-rouge">NoReboot</code> in the <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code> document, the instance is not rebooted after Patch Manager runs.)</ul></ol><hr /><h2 id="predefined-and-custom-patch-baselines">predefined and custom patch baselines</h2><hr /><h2 id="how-patch-baseline-rules-work-on-linux-based-systems">How patch baseline rules work on Linux-based systems</h2><p><strong>The rules in a patch baseline</strong> for Linux distributions operate differently based on the distribution type.</p><ul><li>Unlike patch updates on Windows Server instances, rules are evaluated on each instance to take the configured repos on the instance into consideration.<li>Patch Manager uses the native package manager to drive the installation of patches approved by the patch baseline.</ul><h3 id="patch-baseline-rules-work-on-amazon-linux-and-amazon-linux-2">patch baseline rules work on Amazon Linux and Amazon Linux 2</h3><p>On Amazon Linux and Amazon Linux 2, the patch selection process is as follows:</p><ol><li>On the instance, the YUM library accesses the <code class="language-plaintext highlighter-rouge">updateinfo.xml</code> file for each configured repo.<ul><li>If no <code class="language-plaintext highlighter-rouge">updateinfo.xml</code> file is found, whether patches are installed depend on settings for <strong>Approved patches include non-security updates</strong> and <strong>Auto-approval</strong>.<li>For example, if non-security updates are permitted, they are installed when the auto-approval time arrives.</ul><li>Each <strong>update notice</strong> in <code class="language-plaintext highlighter-rouge">updateinfo.xml</code> includes <code class="language-plaintext highlighter-rouge">several attributes</code><ul><li>Update notice attributes: denote the properties of the packages in the notice, as described in the following table.<li>list of supported values: <code class="language-plaintext highlighter-rouge">describe-patch-properties</code><li> <font color="blue"> type </font><ul><li>Corresponds to the value of the <code class="language-plaintext highlighter-rouge">Classification key attribute</code> in the patch baseline’s PatchFilter data type.<li>Denotes the type of package included in the update notice.</ul><li> <font color="blue"> severity </font><ul><li>Corresponds to the value of the <code class="language-plaintext highlighter-rouge">Severity key attribute</code> patch baseline’s PatchFilter data type.<li>Denotes the severity of the packages included in the update notice. Usually only applicable for Security update notices.</ul><li> <font color="blue"> update_id </font><ul><li>Denotes the advisory ID, such as ALAS-2017-867.<li>The advisory ID can be used in the ApprovedPatches or RejectedPatches attribute in the patch baseline.</ul><li> <font color="blue"> references </font><ul><li>Contains additional information about the update notice, such as a CVE ID (format: CVE-2017-1234567).<li>The CVE ID can be used in the ApprovedPatches or RejectedPatches attribute in the patch baseline.</ul><li> <font color="blue"> updated </font><ul><li>Corresponds to <code class="language-plaintext highlighter-rouge">ApproveAfterDays</code> in the patch baseline.<li>Denotes the released date (updated date) of the packages included in the update notice.<li>A comparison between the current timestamp and the value of this attribute plus the ApproveAfterDays is used to determine if the patch is approved for deployment.</ul></ul><li>The product of the instance is determined by SSM Agent.<ul><li>This attribute corresponds to the value of the Product key attribute in the patch baseline’s <a href="https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_PatchFilter.html">PatchFilter</a> data type.</ul><li>Packages are selected for the update according to the following guidelines.<ul><li><strong>Pre-defined default patch baselines</strong> provided by AWS and <strong>custom patch baselines</strong> where the <code class="language-plaintext highlighter-rouge">Approved patches include non-security updates is not selected</code><ul><li>For each update notice in <code class="language-plaintext highlighter-rouge">updateinfo.xml</code><li>the patch baseline is used as a filter, allowing only the qualified packages to be included in the update.<li>If multiple packages are applicable after applying the patch baseline definition, the latest version is used.<li>The equivalent yum command for this workflow is:<li><code class="language-plaintext highlighter-rouge">sudo yum update-minimal --sec-severity=critical,important --bugfix -y</code></ul><li><strong>Custom patch baselines</strong> where the <code class="language-plaintext highlighter-rouge">Approved patches include non-security updates check box is selected</code><ul><li>In addition to applying the security updates that were selected from <code class="language-plaintext highlighter-rouge">updateinfo.xml</code>,<li>Patch Manager applies nonsecurity updates that otherwise meet the patch filtering rules.<li>The equivalent yum command for this workflow is:<li><code class="language-plaintext highlighter-rouge">sudo yum update --security --bugfix -y</code></ul></ul></ol><h3 id="key-differences-between-linux-and-windows-patching">Key differences between Linux and Windows patching</h3><p><strong>Difference 1: Patch evaluation</strong></p><ul><li><strong>Linux</strong><ul><li>Systems Manager evaluates <code class="language-plaintext highlighter-rouge">patch baseline rules</code> and the <code class="language-plaintext highlighter-rouge">list of approved and rejected patches</code> on <em>each</em> managed instance.<li>Systems Manager must evaluate patching on each instance because the service <code class="language-plaintext highlighter-rouge">retrieves the list of known patches and updates from the repositories</code> that are configured on the instance.</ul><li><strong>Windows</strong><ul><li>For Windows patching, Systems Manager evaluates <code class="language-plaintext highlighter-rouge">patch baseline rules</code> and the <code class="language-plaintext highlighter-rouge">list of approved and rejected patches</code> <em>directly in the service</em>.<li>It can do this because Windows patches are pulled from a single repository (Windows Update).</ul></ul><p><strong>Difference 2: <code class="language-plaintext highlighter-rouge">Not Applicable</code> patches</strong></p><ul><li>Due to the large number of available packages for Linux OSs, Systems Manager does not report details about patches in the <em>Not Applicable</em> state.<li>A <code class="language-plaintext highlighter-rouge">Not Applicable</code> patch is,<li>for example,<li>a patch for Apache software when the instance does not have Apache installed.<li>Systems Manager does report the number of <code class="language-plaintext highlighter-rouge">Not Applicable</code> patches in the summary, but if you call the <a href="https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_DescribeInstancePatches.html">DescribeInstancePatches</a> API for an instance, the returned data does not include patches with a state of <code class="language-plaintext highlighter-rouge">Not Applicable</code>. This behavior is different from Windows.</ul><p><strong>Difference 3: SSM document support</strong></p><ul><li>The <code class="language-plaintext highlighter-rouge">AWS-ApplyPatchBaseline</code> Systems Manager document (SSM document) doesn’t support Linux instances.<li>For applying patch baselines to <strong>Linux, macOS, and Windows Server managed instances</strong>, the recommended SSM document is <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code>.</ul><p><strong>Difference 4: Application patches</strong></p><ul><li>The primary focus of Patch Manager is applying patches to OSs.<li>However, you can also use Patch Manager to apply patches to some applications on the instances.<li><strong>Linux</strong><ul><li>Patch Manager uses the configured repositories for updates, and <font color="blue"> does not differentiate between OSs and application patches </font>.<li>use Patch Manager to define which repositories to fetch updates from.</ul><li><strong>Windows</strong><ul><li>apply approval rules, as well as <em>Approved</em> and <em>Rejected</em> patch exceptions, for applications released by Microsoft, s<li>uch as Microsoft Word 2016 and Microsoft Exchange Server 2016.</ul></ul><hr /><h1 id="patching-operations">patching operations</h1><h2 id="patching-configurations">patching configurations</h2><p>A <strong>patching configuration</strong> defines a <code class="language-plaintext highlighter-rouge">unique patching operation</code>.</p><ul><li>The configuration specifies<ul><li>the <strong>instances</strong> for patching,<li>which <strong>patch baseline</strong> is to be applied,<li>the <strong>schedule</strong> for patching,<li>and typically, the <strong>maintenance window</strong> that the configuration is to be associated with.</ul></ul><p>To create a patching configuration</p><ul><li>use the Configure patching page<li>or run a one-time manual patching operation on a set of instances.</ul><h2 id="ssm-documents-for-patching-instances">SSM documents for patching instances</h2><p>8 Systems Manager documents (SSM documents) currently available to keep the managed instances patched with the latest security-related updates.</p><p>recommend using just five of these documents in the patching operations.</p><ul><li>these five SSM documents provide you with a full range of patching options using AWS Systems Manager.<li>Four of these documents were released later than the four legacy SSM documents they replace and represent expansions or consolidations of functionality.</ul><p>The five recommended SSM documents include:</p><ul><li><strong>AWS-ConfigureWindowsUpdate</strong><li><strong>AWS-InstallWindowsUpdates</strong><li><strong>AWS-RunPatchBaseline</strong><li><strong>AWS-RunPatchBaselineAssociation</strong><li><strong>AWS-RunPatchBaselineWithHooks</strong></ul><p>The four legacy SSM documents that are still available for use in some AWS Regions, but might be deprecated in the future, include:</p><ul><li><strong>AWS-ApplyPatchBaseline</strong><li><strong>AWS-FindWindowsUpdates</strong><li><strong>AWS-InstallMissingWindowsUpdates</strong><li><strong>AWS-InstallSpecificWindowsUpdates</strong></ul><h3 id="ssm-documents-recommended-for-patching-instances">SSM documents recommended for patching instances</h3><h4 id="aws-configurewindowsupdate">AWS-ConfigureWindowsUpdate</h4><p>This SSM document prompts <strong>Windows Update to download and install the specified updates and reboot instances as needed</strong>.</p><ul><li>Supports configuring basic Windows Update functions and using them to install updates automatically (or to disable automatic updates).<ul><li>Use this document with State Manager to ensure Windows Update maintains its configuration.<li>run it manually using Run Command to change the Windows Update configuration.</ul><li>Available in all AWS Regions.<li>The available parameters in this document support<ul><li>specifying a category of updates to install (or whether to disable automatic updates),<li>specifying the day of the week and time of day to run patching operations.</ul></ul><p>This SSM document is most useful if you <font color="red"> don't need strict control over Windows updates and don't need to collect compliance information </font></p><h4 id="aws-installwindowsupdates">AWS-InstallWindowsUpdates</h4><p>This SSM document provides <strong>basic patching functionality</strong></p><ul><li>in cases where you either want to install a specific update (using the <code class="language-plaintext highlighter-rouge">Include Kbs</code> parameter),<li>or install patches with specific classifications or categories but don’t need patch compliance information.</ul><p><strong>Replaces legacy SSM documents:</strong></p><ul><li><strong>AWS-FindWindowsUpdates</strong><li><strong>AWS-InstallMissingWindowsUpdates</strong><li><strong>AWS-InstallSpecificWindowsUpdates</strong></ul><blockquote><p>The three legacy documents perform different functions</p><ul><li>can be achieve by using different parameter settings with the SSM document <strong>AWS-InstallWindowsUpdates</strong>.</ul></blockquote><hr /><h4 id="aws-runpatchbaseline">AWS-RunPatchBaseline</h4><blockquote><p>Replaces legacy documents: AWS-ApplyPatchBaseline The legacy document applies only to Windows Server instances and does not provide support for application patching.</p></blockquote><ol><li>Available in all AWS Regions.<li>This SSM document <strong>control patch approvals using the patch baseline currently specified as the “default” for an OS type</strong>.<ul><li>Installs patches on the instances or scans instances to determine whether any qualified patches are missing.<ul><li>This document supports Linux, macOS, and Windows Server instances.<li>The document will perform the appropriate actions for each platform.</ul><li>can apply patches for both OSs and applications.<ul><li>On Windows Server, application support is limited to updates for Microsoft applications.<li>For Linux OSs, compliance information is provided for patches from both the default source repository configured on an instance and from any alternative source repositories you specify in a custom patch baseline.</ul></ul><li>This SSM document performs patching operations on instances for <font color="red"> both security related and other types of updates </font>.<ul><li>When the document is run, it uses the <strong>patch baseline currently specified as the “default”</strong> for an OS type if no <strong>patch group</strong> is specified.<li>Otherwise, it uses the <strong>patch baseline that is associated with the patch group</strong></ul><li>Reports patch compliance information that you can view using the Systems Manager Compliance tools.<ul><li>These tools provide you with insights on the patch compliance state of the instances,<ul><li>such as which instances are missing patches and what those patches are.</ul></ul><li>When you use <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code>, patch compliance information is recorded using the <code class="language-plaintext highlighter-rouge">PutInventory</code> API command.</ol><p><strong>[ Windows ]</strong></p><p>On Windows Server instances, the <strong>AWS-RunPatchBaseline</strong> document</p><ul><li>downloads and invokes a PowerShell module<li>downloads a <strong>snapshot of the patch baseline</strong> that applies to the instance.<li>This <strong>patch baseline snapshot</strong> contains a <code class="language-plaintext highlighter-rouge">list of approved patches</code> that is compiled by querying the patch baseline against a Windows Server Update Services (WSUS) server.<li>this list is passed to the Windows Update API, which controls downloading and installing the approved patches as appropriate.</ul><p><strong>[ Linux ]</strong></p><p>On Linux instances, the <strong>AWS-RunPatchBaseline</strong> document</p><ul><li>invokes a Python module<li>downloads a <strong>snapshot of the patch baseline</strong> that applies to the instance.<li>This <strong>patch baseline snapshot</strong> uses the <code class="language-plaintext highlighter-rouge">defined rules and lists of approved and blocked patches</code> to drive the appropriate package manager for each instance type:<ul><li>Amazon Linux, Amazon Linux 2, CentOS, Oracle Linux, and RHEL 7 instances use YUM. For YUM operations, Patch Manager requires <code class="language-plaintext highlighter-rouge">Python 2.6</code> or later.<li>RHEL 8 instances use DNF. For DNF operations, Patch Manager requires <code class="language-plaintext highlighter-rouge">Python 2</code> or <code class="language-plaintext highlighter-rouge">Python 3</code>. (Neither version is installed by default on RHEL 8. You must install one or the other manually.)<li>Debian Server and Ubuntu Server instances use APT. For APT operations, Patch Manager requires <code class="language-plaintext highlighter-rouge">Python 3</code>.<li>SUSE Linux Enterprise Server instances use Zypper. For Zypper operations, Patch Manager requires <code class="language-plaintext highlighter-rouge">Python 2.6</code> or later.</ul></ul><p><strong>[ macOS ]</strong></p><p>On macOS instances, the <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code> document</p><ul><li>invokes a Python module<li>downloads a <strong>snapshot of the patch baseline</strong> that applies to the instance.<li>Next, a Python subprocess invokes the AWS Command Line Interface (AWS CLI) on the instance to <code class="language-plaintext highlighter-rouge">retrieve the installation and update information</code> for the specified package managers and to drive the appropriate package manager for each update package.</ul><p><strong>snapshot</strong></p><ul><li>Each snapshot is specific to an AWS account, patch group, OS, and snapshot ID.<li>The snapshot is delivered through a presigned S3 URL, which expires 24 hours after the snapshot is created.<li>After the URL expires, to apply the same snapshot content to other instances, generate a new presigned Amazon S3 URL up to three days after the snapshot was created.</ul><p>After all approved and applicable updates have been installed, with reboots performed as necessary, patch compliance information is generated on an instance and reported back to Patch Manager.</p><ul><li><code class="language-plaintext highlighter-rouge">RebootOption</code>: <code class="language-plaintext highlighter-rouge">NoReboot</code> in the <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code> document, the instance is not rebooted after Patch Manager runs.</ul><p><strong>AWS-RunPatchBaseline parameters</strong></p><ul><li>supports five parameters.<li>The <code class="language-plaintext highlighter-rouge">Operation</code> parameter is required.<li>The <code class="language-plaintext highlighter-rouge">InstallOverrideList</code>, <code class="language-plaintext highlighter-rouge">BaselineOverride</code>, and <code class="language-plaintext highlighter-rouge">RebootOption</code> parameters are optional.<li><code class="language-plaintext highlighter-rouge">Snapshot-ID</code> is technically optional, but we recommend that you supply a custom value for it when you run <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code> outside of a maintenance window.<li><h2 id="patch-manager-can-supply-the-custom-value-automatically-when-the-document-is-run-as-part-of-a-maintenance-window-operation">Patch Manager can supply the custom value automatically when the document is run as part of a maintenance window operation.</h2></ul><p>Parameter name: <code class="language-plaintext highlighter-rouge">Operation</code></p><ul><li><strong>Usage</strong>: Required.<li><strong>Options</strong>:<ul><li><code class="language-plaintext highlighter-rouge">Scan</code><ul><li><code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code> determines the patch compliance state of the instance and reports this information back to Patch Manager.<li><code class="language-plaintext highlighter-rouge">Scan</code> does not prompt updates to be installed or instances to be rebooted.<li>Instead, the operation identifies where updates are missing that are approved and applicable to the instance.</ul><li><code class="language-plaintext highlighter-rouge">Install</code><ul><li><code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code> attempts to install the approved and applicable updates that are missing from the instance.<li>Patch compliance information generated as part of an <code class="language-plaintext highlighter-rouge">Install</code> operation does not list any missing updates, but might report updates that are in a failed state if the installation of the update did not succeed for any reason.<li>Whenever an update is installed on an instance, the instance is rebooted to ensure the update is both installed and active.<li>Exception: If the <code class="language-plaintext highlighter-rouge">RebootOption</code> parameter is set to <code class="language-plaintext highlighter-rouge">NoReboot</code> in the <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code> document, the instance is not rebooted after Patch Manager runs.</ul></ul></ul><p>If a patch specified by the baseline rules is installed <em>before</em> Patch Manager updates the instance, the system might not reboot as expected. This can happen when a patch is installed manually by a user or installed automatically by another program, such as the <code class="language-plaintext highlighter-rouge">unattended-upgrades</code> package on Ubuntu Server.</p><p>Parameter name: <code class="language-plaintext highlighter-rouge">Snapshot ID</code></p><ul><li><strong>Usage</strong>: Optional.<li><code class="language-plaintext highlighter-rouge">Snapshot ID</code> is a unique ID (GUID) used by Patch Manager<li>to ensure that <font color="red"> a set of instances that are patched in a single operation all have the exact same set of approved patches </font><li>Although the parameter is defined as optional, our best practice recommendation depends on whether or not you are running <strong>AWS-RunPatchBaseline</strong> in a maintenance window, as described in the following table.</ul><p><strong>AWS-RunPatchBaseline best practices</strong></p><p>Running AWS-RunPatchBaseline inside a maintenance window</p><ul><li>Do not supply a Snapshot ID. Patch Manager will supply it for you.<li>Systems Manager provides a GUID value based on the <code class="language-plaintext highlighter-rouge">maintenance window execution ID</code>.<li>This ensures that a correct ID is used for all the invocations of <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code> in that maintenance window.<li>If you do specify a value in this scenario, note that the snapshot of the patch baseline might not remain in place for more than three days.<li>After that, a new snapshot will be generated even if you specify the same ID after the snapshot expires.</ul><p>Running AWS-RunPatchBaseline outside of a maintenance window</p><ul><li>Generate and specify a custom GUID value for the Snapshot ID.<li>When you are not using a maintenance window to run <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code>, we recommend that you generate and specify a unique Snapshot ID for each patch baseline, particularly if you are running the <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code> document on multiple instances in the same operation. If you do not specify an ID in this scenario, Systems Manager generates a different Snapshot ID for each instance the command is sent to. This might result in varying sets of patches being specified among the instances. For instance, say that you are running the <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code> document directly via Run Command, a capability of AWS Systems Manager, and targeting a group of 50 instances. Specifying a custom Snapshot ID results in the generation of a single baseline snapshot that is used to evaluate and patch all the instances, ensuring that they end up in a consistent state.</ul><blockquote><p>You can use any tool capable of generating a GUID to generate a value for the Snapshot ID parameter. For example, in PowerShell, you can use the <code class="language-plaintext highlighter-rouge">New-Guid</code> cmdlet to generate a GUID in the format of <code class="language-plaintext highlighter-rouge">12345699-9405-4f69-bc5e-9315aEXAMPLE</code>. |</p></blockquote><p>Parameter name: <code class="language-plaintext highlighter-rouge">InstallOverrideList</code></p><ul><li><strong>Usage</strong>: Optional.<li><code class="language-plaintext highlighter-rouge">InstallOverrideList</code> lets you specify an <code class="language-plaintext highlighter-rouge">https/S3 path-style URL</code> to a list of patches to be installed.<li>This patch installation list, in YAML format, <font color="blue"> overrides the patches specified by the current default patch baseline. </font><li>provides more granular control over which patches are installed on the instances.<li>Be aware that <strong>compliance reports</strong> reflect <code class="language-plaintext highlighter-rouge">patch states</code> according to what’s specified in the patch baseline, not what you specify in an <code class="language-plaintext highlighter-rouge">InstallOverrideList</code> list of patches.<ul><li>so Scan operations ignore the <code class="language-plaintext highlighter-rouge">InstallOverrideList</code> parameter.<li>This is to ensure that compliance reports consistently reflect patch states according to policy rather than what was approved for a specific patching operation.</ul></ul><p><strong>Valid URL formats</strong></p><ul><li><p><strong>https URL format</strong>:</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>https://s3.amazonaws.com/DOC-EXAMPLE-BUCKET/my-windows-override-list.yaml
</pre></table></code></div></div><li><p><strong>Amazon S3 path-style URL</strong>:</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>s3://DOC-EXAMPLE-BUCKET/my-windows-override-list.yaml
</pre></table></code></div></div><li><p>Valid YAML content formats</p><ul><li>The formats to specify patches in the list depends on the OS of the instance.<li><p>The general format, however, is as follows:</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>patches:
    -
        id: '{patch-d}'
        title: '{patch-title}'
        {additional-fields}:{values}
</pre></table></code></div></div></ul></ul><p>[ Linux ]</p><p><strong>id</strong> The <strong>id</strong> field is required. Use it to specify patches using the package name and architecture. For example: <code class="language-plaintext highlighter-rouge">'dhclient.x86_64'</code>. You can use wildcards in id to indicate multiple packages. For example: <code class="language-plaintext highlighter-rouge">'dhcp*'</code> and <code class="language-plaintext highlighter-rouge">'dhcp*1.*'</code>.</p><p><strong>Title</strong> The <strong>title</strong> field is optional, but on Linux systems it does provide additional filtering capabilities. If you use <strong>title</strong>, it should contain the package version information in the one of the following formats:</p><p>YUM/SUSE Linux Enterprise Server (SLES):</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>{name}.{architecture}:{epoch}:{version}-{release}
</pre></table></code></div></div><p>APT</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>{name}.{architecture}:{version}
</pre></table></code></div></div><p>For Linux patch titles, you can use one or more wildcards in any position to expand the number of package matches. For example: <code class="language-plaintext highlighter-rouge">'*32:9.8.2-0.*.rc1.57.amzn1'</code>.</p><p>For example:</p><ul><li>apt package version 1.2.25 is currently installed on the instance, but version 1.2.27 is now available.<li>You add apt.amd64 version 1.2.27 to the patch list. It depends on apt utils.amd64 version 1.2.27, but apt-utils.amd64 version 1.2.25 is specified in the list.</ul><p>In this case, apt version 1.2.27 will be blocked from installation and reported as “Failed-NonCompliant.”</p><p>Parameter name: <code class="language-plaintext highlighter-rouge">RebootOption</code></p><ul><li><strong>Usage</strong>: Optional.<li><strong>Options</strong>:<ul><li><code class="language-plaintext highlighter-rouge">RebootIfNeeded</code><ul><li>the instance is rebooted if<ul><li>Patch Manager installed new patches,<li>or if it detected any patches with a status of <code class="language-plaintext highlighter-rouge">INSTALLED_PENDING_REBOOT</code> during the <code class="language-plaintext highlighter-rouge">Install</code> operation.</ul><li>The <code class="language-plaintext highlighter-rouge">INSTALLED_PENDING_REBOOT</code> status can mean that the option <code class="language-plaintext highlighter-rouge">NoReboot</code> was selected the last time the <code class="language-plaintext highlighter-rouge">Install</code> operation was run.<li>(Patches installed outside of Patch Manager are never given a status of <code class="language-plaintext highlighter-rouge">INSTALLED_PENDING_REBOOT</code>.)<li>When you choose the <code class="language-plaintext highlighter-rouge">RebootIfNeeded</code> option, Patch Manager does not evaluate whether a reboot is <em>required</em> by the patch.<li>A reboot occurs whenever there are missing packages or packages with a status of <code class="language-plaintext highlighter-rouge">INSTALLED_PENDING_REBOOT</code>.</ul><li><code class="language-plaintext highlighter-rouge">NoReboot</code><ul><li>Patch Manager does not reboot an instance even if it installed patches during the <code class="language-plaintext highlighter-rouge">Install</code> operation.<li>This option is useful if you know that the instances don’t require rebooting after patches are applied, or you have applications or processes running on an instance that should not be disrupted by a patching operation reboot.<li>It is also useful when you want more control over the timing of instance reboots, such as by using a maintenance window.<li>If you choose the <code class="language-plaintext highlighter-rouge">NoReboot</code> option and a patch is installed, the patch is assigned a status of <code class="language-plaintext highlighter-rouge">InstalledPendingReboot</code>. The instance itself, however, is marked as <code class="language-plaintext highlighter-rouge">Non-Compliant</code>. After a reboot occurs and a <code class="language-plaintext highlighter-rouge">Scan</code> operation is run, the instance status is updated to <code class="language-plaintext highlighter-rouge">Compliant</code>.</ul></ul></ul><p><strong>Patch installation tracking file</strong>:</p><ul><li>To track patch installation, especially patches that were installed since the last system reboot,<li>Systems Manager maintains a file on the managed instance.<li>Do not delete or modify the tracking file. If this file is deleted or corrupted, the patch compliance report for the instance is inaccurate.<li>If this happens, reboot the instance and <font color="red"> run a patch Scan operation to restore the file </font></ul><p>This tracking file is stored in the following locations on the managed instances:</p><ul><li>Linux OSs:<ul><li><code class="language-plaintext highlighter-rouge">/var/log/amazon/ssm/patch-configuration/patch-states-configuration.json</code><li><code class="language-plaintext highlighter-rouge">/var/log/amazon/ssm/patch-configuration/patch-inventory-from-last-operation.json</code></ul><li>Windows Server OS:<ul><li><code class="language-plaintext highlighter-rouge">C:\ProgramData\Amazon\PatchBaselineOperations\State\PatchStatesConfiguration.json</code><li><code class="language-plaintext highlighter-rouge">C:\ProgramData\Amazon\PatchBaselineOperations\State\PatchInventoryFromLastOperation.json</code></ul></ul><p>Parameter name: <code class="language-plaintext highlighter-rouge">BaselineOverride</code></p><ul><li><strong>Usage</strong>: Optional.<li>define patching preferences at runtime using the <code class="language-plaintext highlighter-rouge">BaselineOverride</code> parameter.<li>This baseline override is maintained as a JSON object in an S3 bucket.<li>It ensures patching operations use the provided baselines that match the host OS instead of applying the rules from the default patch baseline</ul><hr /><h4 id="aws-runpatchbaselineassociation">AWS-RunPatchBaselineAssociation</h4><p>This SSM document <strong>Installs patches on the instances or scans instances</strong> to determine whether any qualified patches are missing.</p><ul><li>Available in all commercial AWS Regions.<li>differs from <strong>AWS-RunPatchBaseline</strong> as it supports the use of tags<ul><li>to identify which patch baseline to use with a set of targets when it runs.</ul><li>In addition, patch compliance data is compiled in terms of a specific State Manager association.<li>The patch compliance data collected by <strong>AWS-RunPatchBaselineAssociation</strong> is recorded using the <code class="language-plaintext highlighter-rouge">PutComplianceItems</code> API command instead of the <code class="language-plaintext highlighter-rouge">PutInventory</code> command.<li>This prevents compliance data that isn’t associated with this particular association from being overwritten.<li>For Linux OSs, compliance information is provided for patches from both the default source repository configured on an instance and from any alternative source repositories you specify in a custom patch baseline.</ul><p><strong>Replaces legacy documents:</strong></p><ul><li><strong>None</strong></ul><h4 id="aws-runpatchbaselinewithhooks">AWS-RunPatchBaselineWithHooks</h4><p>This SSM document, with optional hooks, can be used to run at three points during the patching cycle.</p><ul><li>Available in all commercial AWS Regions.<li>differs from <strong>AWS-RunPatchBaseline</strong> in its Install operation.<li>supports <strong>lifecycle hooks</strong> that run at designated points during instance patching.<ul><li>Because patch installations sometimes require instances to reboot, the patching operation is divided into two events, for a total of three hooks that support custom functionality.<li>The first hook is before the <code class="language-plaintext highlighter-rouge">Install with NoReboot</code> operation.<li>The second hook is after the <code class="language-plaintext highlighter-rouge">Install with NoReboot</code> operation.<li>The third hook is available after the reboot of the instance.</ul></ul><p><strong>Replaces legacy documents:</strong></p><ul><li><strong>None</strong></ul><h3 id="legacy-ssm-documents-for-patching-instances">Legacy SSM documents for patching instances</h3><p>The following four SSM documents are still available for use in the patching operations in some AWS Regions. However, they might be deprecated in the future, so we do not recommend their use.</p><h4 id="aws-applypatchbaseline">AWS-ApplyPatchBaseline</h4><h4 id="aws-installmissingwindowsupdates">AWS-InstallMissingWindowsUpdates</h4><h4 id="aws-installspecificwindowsupdates">AWS-InstallSpecificWindowsUpdates</h4><hr /><h1 id="patch-baselines">Patch baselines</h1><h2 id="predefined-and-custom-patch-baselines-1">predefined and custom patch baselines</h2><font color="red"> patch baseline </font><ul><li>defines which patches are approved for installation on the instances.<li>You can<ul><li>specify approved or rejected patches one by one.<li>create auto-approval rules to specify that certain types of updates (for example, critical updates) should be automatically approved.<li>The rejected list overrides both the rules and the approve list.</ul></ul><p>To use a list of approved patches to install specific packages</p><ul><li>first remove all auto-approval rules.<li>If you explicitly identify a patch as rejected, it will not be approved or installed, even if it matches all of the criteria in an auto-approval rule.<li>Also, a patch is installed on an instance only if it applies to the software on the instance, even if the patch has otherwise been approved for the instance.</ul><p>Patch Manager provides</p><ol><li> <font color="red"> predefined patch baselines </font><ul><li>for each of the OSs supported by Patch Manager.<li>use these baselines as they are currently configured (you can’t customize them)</ul><li> <font color="red"> create the own custom patch baselines </font><ul><li>for greater control over which patches are approved or rejected for the environment.<li>Also, the predefined baselines assign a compliance level of <code class="language-plaintext highlighter-rouge">Unspecified</code> to all patches installed using those baselines.<li>For compliance values to be assigned, you can create a copy of a predefined baseline and specify the compliance values you want to assign to patches.</ul></ol><h2 id="predefined-baselines">predefined baselines</h2><p>The following table describes the predefined patch baselines provided with Patch Manager.</p><ol><li><code class="language-plaintext highlighter-rouge">AWS-AmazonLinuxDefaultPatchBaseline</code> Amazon Linux<ul><li>Approves all OS patches that are<ul><li>classified as “Security” or “Bugfix”<li>and that have a severity level of “Critical” or “Important”.</ul><li>Patches are <strong>auto-approved seven days</strong> after release.</ul><li><code class="language-plaintext highlighter-rouge">AWS-AmazonLinux2DefaultPatchBaseline</code> Amazon Linux 2<ul><li>Approves all OS patches that are<ul><li>classified as “Security” or “Bugfix”<li>and that have a severity level of “Critical” or “Important”.</ul><li>Patches are <strong>auto-approved seven days</strong> after release.</ul><li><code class="language-plaintext highlighter-rouge">AWS-CentOSDefaultPatchBaseline</code> CentOS<ul><li>including <font color="red"> nonsecurity updates </font><li>Approves all updates <strong>seven days after they become available</strong></ul><li><code class="language-plaintext highlighter-rouge">AWS-DebianDefaultPatchBaseline</code> Debian Server<ul><li><strong>Immediately approves</strong> all OS security-related patches that have a priority of “Required”, “Important”, “Standard,” “Optional,” or “Extra.”<li>There is no wait before approval because reliable release dates are not available in the repos.</ul><li><code class="language-plaintext highlighter-rouge">AWS-MacOSDefaultPatchBaseline</code> macOS<ul><li>Approves all OS patches that are classified as “Security”. Also approves all packages with a current update.</ul><li><code class="language-plaintext highlighter-rouge">AWS-OracleLinuxDefaultPatchBaseline</code> Oracle Linux<ul><li>Approves all OS patches that are<ul><li>classified as “Security” or “Bugfix”<li>have a severity level of “Important” or “Moderate”.</ul><li>Patches are <strong>auto-approved seven days</strong> after release.</ul><li><code class="language-plaintext highlighter-rouge">AWS-RedHatDefaultPatchBaseline</code> Red Hat Enterprise Linux (RHEL)<ul><li>Approves all OS patches that are<ul><li>classified as “Security” or “Bugfix”<li>and that have a severity level of “Critical” or “Important”.</ul><li>Patches are <strong>auto-approved seven days</strong> after release.</ul><li><code class="language-plaintext highlighter-rouge">AWS-SuseDefaultPatchBaseline</code> SUSE Linux Enterprise Server (SLES)<ul><li>Approves all OS patches that are classified as “Security” and with a severity of “Critical” or “Important”.<li>Patches are <strong>auto-approved seven days</strong> after release.</ul><li><code class="language-plaintext highlighter-rouge">AWS-UbuntuDefaultPatchBaseline</code> Ubuntu Server<ul><li>Immediately approves all OS security-related patches that have a priority of “Required”, “Important”, “Standard,” “Optional,” or “Extra.”<li>There is no wait before approval because reliable release dates are not available in the repos.</ul><li><code class="language-plaintext highlighter-rouge">AWS-DefaultPatchBaseline</code> Windows Server<ul><li>Approves all Windows Server OS patches that are classified as “CriticalUpdates” or “SecurityUpdates” and that have an MSRC severity of “Critical” or “Important”.<li>Patches are <strong>auto-approved seven days</strong> after release.</ul><li><code class="language-plaintext highlighter-rouge">AWS-WindowsPredefinedPatchBaseline-OS</code> Windows Server<ul><li>Approves all Windows Server OS patches that are classified as “CriticalUpdates” or “SecurityUpdates” and that have an MSRC severity of “Critical” or “Important”.<li>Patches are <strong>auto-approved seven days</strong> after release.</ul><li><code class="language-plaintext highlighter-rouge">AWS-WindowsPredefinedPatchBaseline-OS-Applications</code> Windows Server<ul><li>For the Windows Server OS,<ul><li>approves all patches that are classified as “CriticalUpdates” or “SecurityUpdates”<li>and that have an MSRC severity of “Critical” or “Important”.</ul><li>For Microsoft applications,<ul><li>approves all patches.</ul><li>Patches for both OS and applications are <strong>auto-approved seven days</strong> after release.</ul></ol><h2 id="custom-baselines">custom baselines</h2><p>create the own patch baseline</p><ul><li>you can <font color="red"> choose which patches to auto-approve by using the following categories </font>.<ul><li> <font color="red"> OS </font><p>:</p><ul><li>Windows, Amazon Linux, Ubuntu Server, and so on.</ul><li> <font color="red"> Product name (for OSs) </font><p>:</p><ul><li>For example, RHEL 6.5, Amazon Linux 2014.09, Windows Server 2012, Windows Server 2012 R2, and so on.</ul><li> <font color="red"> Product name (for Microsoft applications on Windows Server only) </font><p>:</p><ul><li>For example, Word 2016, BizTalk Server, and so on.</ul><li> <font color="red"> Classification </font><p>:</p><ul><li>For example, critical updates, security updates, and so on.</ul><li> <font color="red"> Severity </font><p>:</p><ul><li>For example, critical, important, and so on.</ul></ul><li>For each approval rule, you can choose to specify an <strong>auto-approval delay</strong> or specify a <strong>patch approval cutoff date</strong>.<ul><li>Because it’s not possible to reliably determine the release dates of update packages for Ubuntu Server, the auto-approval options are not supported for this OS.<li>An <strong>auto-approval delay</strong>:<ul><li>the number of days to wait after the patch was released, before the patch is automatically approved for patching.<li>For example<ul><li>create a rule using the <code class="language-plaintext highlighter-rouge">CriticalUpdates</code> classification<li>and configure it for seven days auto-approval delay,<li>then a new critical patch released on July 7 is automatically approved on July 14.</ul><li>If a Linux repository doesn’t provide release date information for packages,<ul><li>Systems Manager uses the build time of the package as the auto-approval delay for Amazon Linux, Amazon Linux 2, RHEL, and CentOS.<li>If the system isn’t able to find the build time of the package, Systems Manager treats the auto-approval delay as having a value of zero.</ul></ul><li><strong>auto-approval cutoff date</strong>,<ul><li>Patch Manager automatically applies all patches released on or before that date.<li>For example<ul><li>specify July 7, 2020, as the cutoff date,<li>no patches released on or after July 8, 2020, are installed automatically.</ul></ul></ul><li>specify a compliance severity level.<ul><li>If an approved patch is reported as missing, <code class="language-plaintext highlighter-rouge">Compliance Level</code> is the severity of the compliance violation.</ul></ul><blockquote><p>multiple <strong>patch baselines</strong> - different <strong>auto-approval delays or cutoff dates</strong> deploy patches at different rates to different instances. For example create separate patch baselines, auto-approval delays, andcutoff dates for development and production environments. This enables you to test patches in the development environment before they get deployed in the production environment.</p></blockquote><p>to create a patch baseline:</p><ul><li>Patch Manager provides one predefined patch baseline for each supported OS.<ul><li>These predefined patch baselines are used as the default patch baselines for each OS type<li>unless you create the own patch baseline and designate it as the default for the corresponding OS type.</ul><li>For Windows Server, three predefined patch baselines are provided.<ul><li>The configuration settings in these two patch baselines are the same.<ul><li><code class="language-plaintext highlighter-rouge">AWS-DefaultPatchBaseline</code>: the default patch baseline for Windows Server instances, unless specify a different patch baseline.<li><code class="language-plaintext highlighter-rouge">AWS-WindowsPredefinedPatchBaseline-OS</code>, was created to distinguish it from the third predefined patch baseline for Windows Server.<li> <font color="red"> support only OS updates on the Windows OS itself </font><p>.</p></ul><li><code class="language-plaintext highlighter-rouge">AWS-WindowsPredefinedPatchBaseline-OS-Applications</code>, can be used to apply patches to both the Windows Server OS and supported Microsoft applications.</ul><li>For on-premises servers and virtual machines (VMs)<ul><li>Patch Manager attempts to use the custom default patch baseline.<li>If no custom default patch baseline exists, the system uses the <strong>predefined patch baseline</strong> for the corresponding OS.</ul><li><p>If a patch is listed as both approved and rejected in the same patch baseline, the patch is rejected.</p><li> <font color="red"> An instance can have only one patch baseline defined for it </font><li>The formats of <strong>package names add to lists of approved/rejected patches for a patch baseline</strong> depend on the type of OS you are patching.</ul><hr /><h1 id="patch-groups">patch groups</h1><p>use a <strong>patch group</strong> to associate instances with a specific patch baseline in Patch Manager.</p><ul><li>ensure deploying the appropriate patches, based on the associated patch baseline rules, to the correct set of instances.<li>avoid deploying patches before they have been adequately tested.<li>For example<ul><li>create patch groups for different environments (such as Development, Test, and Production)<li>and register each patch group to an appropriate patch baseline.</ul><li>A patch group can be registered with only one patch baseline for each operating system type.<li>An instance can only be in one patch group.</ul><p>run <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code></p><ul><li>target managed instances using <strong>instance ID or tags</strong>.<li>SSM Agent and Patch Manager then evaluate which patch baseline to use based on the patch group value that you added to the instance.</ul><p>create a patch group by using EC2 tags.</p><ul><li>unlike other tagging scenarios across Systems Manager, a patch group <em>must</em> be defined with the tag key: <strong>Patch Group</strong>.<li>Note that the key is case-sensitive.<li>You can specify any value, for example “web servers,” but the key must be <strong>Patch Group</strong>.</ul><p>After you create a patch group and tag instances</p><ul><li>register the patch group with a patch baseline.<li>Registering the patch group with a patch baseline ensures that the instances within the patch group use the rules defined in the associated patch baseline.</ul><h2 id="how-it-works">How it works</h2><p>when a maintenance window is configured to send a command to patch using Patch Manager.</p><ul><li>the system <code class="language-plaintext highlighter-rouge">runs the task to apply a patch baseline to an instance</code><li><strong>SSM Agent</strong> verifies that a <strong>patch group</strong> value is defined for the instance.<li>If the instance is assigned to a patch group<ul><li>Patch Manager then verifies which patch baseline is registered to that group.<li>if a patch baseline is found for that group, Patch Manager notifies SSM Agent to use the associated patch baseline.</ul><li>if an instance isn’t configured for a patch group<ul><li>Patch Manager automatically notifies SSM Agent to use the currently configured default patch baseline.</ul></ul><p><img data-proofer-ignore data-src="http://docs.aws.amazon.com/systems-manager/latest/userguide/images/patch-groups-how-it-works.png" alt="[Diagram showing how patch baselines are determined when performing patching operations.]" /></p><p>three groups of EC2 instances:</p><div class="table-wrapper"><table><thead><tr><th>EC2 instances group<th>Tags<tbody><tr><td>Group 1<td><code class="language-plaintext highlighter-rouge">key=OS,value=Windows</code> <code class="language-plaintext highlighter-rouge">key=Patch Group,value=DEV</code><tr><td>Group 2<td><code class="language-plaintext highlighter-rouge">key=OS,value=Windows</code><tr><td>Group 3<td><code class="language-plaintext highlighter-rouge">key=OS,value=Windows</code> <code class="language-plaintext highlighter-rouge">key=Patch Group,value=QA</code></table></div><p>two Windows Server patch baselines:</p><div class="table-wrapper"><table><thead><tr><th>Patch baseline ID<th>Default<th>Associated patch group<tbody><tr><td><code class="language-plaintext highlighter-rouge">pb-0123456789abcdef0</code><td>Yes<td><code class="language-plaintext highlighter-rouge">Default</code><tr><td><code class="language-plaintext highlighter-rouge">pb-9876543210abcdef0</code><td>No<td><code class="language-plaintext highlighter-rouge">DEV</code></table></div><p><strong>patching operations process flow</strong></p><p>The general process to scan or install patches using Run Command:</p><ol><li><strong>Send a command to patch</strong>:<ul><li>Use the Systems Manager console, SDK, AWS Command Line Interface (AWS CLI), or AWS Tools for Windows PowerShell<li>to send a Run Command task using the document <code class="language-plaintext highlighter-rouge">AWS-RunPatchBaseline</code>.<li>The diagram shows a <strong>Run Command task</strong>: to patch managed instances by targeting the tag <code class="language-plaintext highlighter-rouge">key=OS,value=Windows</code>.</ul><li><strong>Patch baseline determination</strong>:<ul><li><p>SSM Agent verifies the patch group tags applied to the EC2 instance and queries Patch Manager for the corresponding patch baseline.</p><li><p><strong>Matching patch group value associated with patch baseline:</strong></p><ol><li>SSM Agent receives the command issued in Step 1 to begin a patching operation.<li>SSM Agent validates that the EC2 instances have the <strong>patch group tag-value</strong> <code class="language-plaintext highlighter-rouge">DEV</code> applied<li>queries Patch Manager for an associated patch baseline.<li>Patch Manager verifies that patch baseline <code class="language-plaintext highlighter-rouge">pb-9876543210abcdef0</code> has the patch group <code class="language-plaintext highlighter-rouge">DEV</code> associated and notifies SSM Agent.<li>SSM Agent <code class="language-plaintext highlighter-rouge">retrieves a patch baseline snapshot</code> from Patch Manager based on the <strong>approval rules and exceptions</strong> configured in <code class="language-plaintext highlighter-rouge">pb-9876543210abcdef0</code> and proceeds to the next step.</ol><li><p><strong>No patch group tag added to instance:</strong></p><ol><li>SSM Agent receives the command issued in Step 1 to begin a patching operation.<li>SSM Agent validates that the EC2 instances don’t have a <code class="language-plaintext highlighter-rouge">Patch Group</code> tag applied<li>SSM Agent queries Patch Manager for the <strong>default Windows patch baseline</strong>.<li>Patch Manager verifies that the default Windows Server patch baseline is <code class="language-plaintext highlighter-rouge">pb-0123456789abcdef0</code> and notifies SSM Agent.<li>SSM Agent <code class="language-plaintext highlighter-rouge">retrieves a patch baseline snapshot</code> from Patch Manager based on the approval rules and exceptions configured in the default patch baseline <code class="language-plaintext highlighter-rouge">pb-0123456789abcdef0</code> and proceeds to the next step.</ol><li><p><strong>No matching patch group value associated with a patch baseline:</strong></p><ol><li>SSM Agent receives the command issued in Step 1 to begin a patching operation.<li>SSM Agent validates that the EC2 instances have the patch group tag-value <code class="language-plaintext highlighter-rouge">QA</code> applied<li>queries Patch Manager for an associated patch baseline.<li>Patch Manager does not find a patch baseline that has the patch group <code class="language-plaintext highlighter-rouge">QA</code> associated.<li>Patch Manager notifies SSM Agent to use the <strong>default Windows patch baseline</strong> <code class="language-plaintext highlighter-rouge">pb-0123456789abcdef0</code>.<li>SSM Agent <code class="language-plaintext highlighter-rouge">retrieves a patch baseline snapshot</code> from Patch Manager based on the approval rules and exceptions configured in the default patch baseline <code class="language-plaintext highlighter-rouge">pb-0123456789abcdef0</code> and proceeds to the next step.</ol></ul><li><strong>Patch scan or install</strong>:<ul><li>After determining the appropriate patch baseline to use<li>SSM Agent begins either <code class="language-plaintext highlighter-rouge">scanning for or installing patches</code> based on the operation value specified in Step 1.<li>The patches that are scanned for or installed are determined by the approval rules and patch exceptions defined in the <strong>patch baseline snapshot</strong> provided by Patch Manager.</ul></ol><p>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/01aws/'>01AWS</a>, <a href='/categories/ssm/'>SSM</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/aws/" class="post-tag no-text-decoration" >AWS</a> <a href="/tags/ssm/" class="post-tag no-text-decoration" >SSM</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AWS - SSM - Patch Manager - Grace&url=https://ocholuo.github.io//posts/patch-management/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AWS - SSM - Patch Manager - Grace&u=https://ocholuo.github.io//posts/patch-management/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=AWS - SSM - Patch Manager - Grace&url=https://ocholuo.github.io//posts/patch-management/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ELK-Setup/"><div class="card-body"> <span class="timeago small" >Feb 11, 2020<i class="unloaded">2020-02-11T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - ELK Setup</h3><div class="text-muted small"><p> ELK Setup basic Install ELK Environment specifications Configuration Filebeat Logstash collect data ...</p></div></div></a></div><div class="card"> <a href="/posts/API-Gateway/"><div class="card-body"> <span class="timeago small" >Feb 11, 2020<i class="unloaded">2020-02-11T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - VPC Gateway - API Gateway</h3><div class="text-muted small"><p> API Gateway background basic 安全性（身份验证和潜在的授权） 开源 APIGateway 单节点 API 网关 Backends for frontends 网关 AWS API Gateway Ali API Gateway ba...</p></div></div></a></div><div class="card"> <a href="/posts/AWS-ECS/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>VMyContainer - AWS - Amazon ECS</h3><div class="text-muted small"><p> AWS - Virtulization - Amazon ECS Elastic container service basic Benefits ECS VS EKS ECS LAUNCH TYPES Fargate Launch Type EC2 Launch Typ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/HTTP/" class="btn btn-outline-primary" prompt="Older"><p>HTTP - Method & Requests & Response</p></a> <a href="/posts/DNS-setup/" class="btn btn-outline-primary" prompt="Newer"><p>Linux - DNS Setup</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
