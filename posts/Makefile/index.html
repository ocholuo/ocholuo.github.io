<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Makefile" /><meta property="og:locale" content="en" /><meta name="description" content="Makefile basic Makefile Syntax Run Examples Variables Targets all target Multiple targets Automatic Variables and Wildcards Fancy Rules Static Pattern Rules Static Pattern Rules and Filter Implicit Rules Pattern Rules Functions for String Substitution and Analysis Double-Colon Rules :: Double pipeline || true Commands and execution Command Echoing/Silencing Command Execution Default Shell Error handling with -k, -i, and - Interrupting or killing make Recursive make Arguments to make Variables Pt. 2 Flavors of variables ?= space Use += to append Command line arguments and override List of commands and define Target-specific variables Pattern-specific variables Conditional part of Makefiles ifeq endif Conditional if/else $(nullstring) Check if a variable is empty ifdef endif Check if a variable is defined $(makeflags) Functions First Functions $(patsubst pattern,replacement, text) $(foreach var,list,text) $(if nonempty, action1 , action2) The call function $(shell ls -la) Other Features include Makefiles vpath &lt;pattern&gt; &lt;directories, space/colon separated&gt; Multiline \ .phony .delete_on_error Makefile Cookbook" /><meta property="og:description" content="Makefile basic Makefile Syntax Run Examples Variables Targets all target Multiple targets Automatic Variables and Wildcards Fancy Rules Static Pattern Rules Static Pattern Rules and Filter Implicit Rules Pattern Rules Functions for String Substitution and Analysis Double-Colon Rules :: Double pipeline || true Commands and execution Command Echoing/Silencing Command Execution Default Shell Error handling with -k, -i, and - Interrupting or killing make Recursive make Arguments to make Variables Pt. 2 Flavors of variables ?= space Use += to append Command line arguments and override List of commands and define Target-specific variables Pattern-specific variables Conditional part of Makefiles ifeq endif Conditional if/else $(nullstring) Check if a variable is empty ifdef endif Check if a variable is defined $(makeflags) Functions First Functions $(patsubst pattern,replacement, text) $(foreach var,list,text) $(if nonempty, action1 , action2) The call function $(shell ls -la) Other Features include Makefiles vpath &lt;pattern&gt; &lt;directories, space/colon separated&gt; Multiline \ .phony .delete_on_error Makefile Cookbook" /><link rel="canonical" href="https://ocholuo.github.io//posts/Makefile/" /><meta property="og:url" content="https://ocholuo.github.io//posts/Makefile/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-07-16T11:11:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Makefile" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-30T21:02:21-04:00","datePublished":"2020-07-16T11:11:11-04:00","description":"Makefile basic Makefile Syntax Run Examples Variables Targets all target Multiple targets Automatic Variables and Wildcards Fancy Rules Static Pattern Rules Static Pattern Rules and Filter Implicit Rules Pattern Rules Functions for String Substitution and Analysis Double-Colon Rules :: Double pipeline || true Commands and execution Command Echoing/Silencing Command Execution Default Shell Error handling with -k, -i, and - Interrupting or killing make Recursive make Arguments to make Variables Pt. 2 Flavors of variables ?= space Use += to append Command line arguments and override List of commands and define Target-specific variables Pattern-specific variables Conditional part of Makefiles ifeq endif Conditional if/else $(nullstring) Check if a variable is empty ifdef endif Check if a variable is defined $(makeflags) Functions First Functions $(patsubst pattern,replacement, text) $(foreach var,list,text) $(if nonempty, action1 , action2) The call function $(shell ls -la) Other Features include Makefiles vpath &lt;pattern&gt; &lt;directories, space/colon separated&gt; Multiline \\ .phony .delete_on_error Makefile Cookbook","headline":"Makefile","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/Makefile/"},"url":"https://ocholuo.github.io//posts/Makefile/"}</script><title>Makefile | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Makefile</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Makefile</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Jul 16, 2020, 11:11 AM -0400" >Jul 16, 2020<i class="unloaded">2020-07-16T11:11:11-04:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Oct 30, 2022, 6:02 PM -0700" >Oct 30, 2022<i class="unloaded">2022-10-30T21:02:21-04:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="5990 words">33 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><ul><li><a href="#makefile">Makefile</a><ul><li><a href="#basic">basic</a><li><a href="#makefile-syntax">Makefile Syntax</a><li><a href="#run-examples">Run Examples</a><li><a href="#variables">Variables</a><li><a href="#targets">Targets</a><ul><li><a href="#all-target"><code class="language-plaintext highlighter-rouge">all</code> target</a><li><a href="#multiple-targets">Multiple targets</a></ul><li><a href="#automatic-variables-and-wildcards">Automatic Variables and Wildcards</a><li><a href="#fancy-rules">Fancy Rules</a><ul><li><a href="#static-pattern-rules">Static Pattern Rules</a><li><a href="#static-pattern-rules-and-filter">Static Pattern Rules and Filter</a><li><a href="#implicit-rules">Implicit Rules</a><li><a href="#pattern-rules">Pattern Rules</a></ul><li><a href="#functions-for-string-substitution-and-analysis">Functions for String Substitution and Analysis</a><ul><li><a href="#double-colon-rules-">Double-Colon Rules <code class="language-plaintext highlighter-rouge">::</code></a><li><a href="#double-pipeline--true">Double pipeline <code class="language-plaintext highlighter-rouge">|| true</code></a></ul><li><a href="#commands-and-execution">Commands and execution</a><ul><li><a href="#command-echoingsilencing">Command Echoing/Silencing</a><li><a href="#command-execution">Command Execution</a><li><a href="#default-shell">Default Shell</a><li><a href="#error-handling-with--k--i-and--">Error handling with <code class="language-plaintext highlighter-rouge">-k</code>, <code class="language-plaintext highlighter-rouge">-i</code>, and <code class="language-plaintext highlighter-rouge">-</code></a><li><a href="#interrupting-or-killing-make">Interrupting or killing make</a><li><a href="#recursive-make">Recursive make</a><li><a href="#arguments-to-make">Arguments to make</a></ul><li><a href="#variables-pt-2">Variables Pt. 2</a><ul><li><a href="#flavors-of-variables">Flavors of variables</a><li><a href="#"><code class="language-plaintext highlighter-rouge">?=</code></a><li><a href="#space">space</a><li><a href="#use--to-append">Use <code class="language-plaintext highlighter-rouge">+=</code> to append</a><li><a href="#command-line-arguments-and-override">Command line arguments and override</a><li><a href="#list-of-commands-and-define">List of commands and define</a><li><a href="#target-specific-variables">Target-specific variables</a><li><a href="#pattern-specific-variables">Pattern-specific variables</a></ul><li><a href="#conditional-part-of-makefiles">Conditional part of Makefiles</a><ul><li><a href="#ifeq-endif-conditional-ifelse"><code class="language-plaintext highlighter-rouge">ifeq endif</code> Conditional if/else</a><li><a href="#nullstring-check-if-a-variable-is-empty"><code class="language-plaintext highlighter-rouge">$(nullstring)</code> Check if a variable is empty</a><li><a href="#ifdef-endif-check-if-a-variable-is-defined"><code class="language-plaintext highlighter-rouge">ifdef endif</code> Check if a variable is defined</a><li><a href="#makeflags"><code class="language-plaintext highlighter-rouge">$(makeflags)</code></a></ul><li><a href="#functions">Functions</a><ul><li><a href="#first-functions">First Functions</a><li><a href="#patsubst-patternreplacement-text"><code class="language-plaintext highlighter-rouge">$(patsubst pattern,replacement, text)</code></a><li><a href="#foreach-varlisttext"><code class="language-plaintext highlighter-rouge">$(foreach var,list,text)</code></a><li><a href="#if-nonempty-action1--action2"><code class="language-plaintext highlighter-rouge">$(if nonempty, action1 , action2)</code></a><li><a href="#the-call-function">The call function</a><li><a href="#shell-ls--la"><code class="language-plaintext highlighter-rouge">$(shell ls -la)</code></a></ul><li><a href="#other-features">Other Features</a><ul><li><a href="#include-makefiles"><code class="language-plaintext highlighter-rouge">include Makefiles</code></a><li><a href="#vpath-pattern-directories-spacecolon-separated"><code class="language-plaintext highlighter-rouge">vpath &lt;pattern&gt; &lt;directories, space/colon separated&gt;</code></a><li><a href="#multiline-">Multiline <code class="language-plaintext highlighter-rouge">\</code></a><li><a href="#phony"><code class="language-plaintext highlighter-rouge">.phony</code></a><li><a href="#delete_on_error"><code class="language-plaintext highlighter-rouge">.delete_on_error</code></a></ul><li><a href="#makefile-cookbook">Makefile Cookbook</a></ul><li>ref:<ul><li><a href="https://makefiletutorial.com/">Learn Makefiles With the tastiest examples</a><li><a href="https://www.gnu.org/software/make/manual/html_node/Text-Functions.html#Text-Functions">doc</a></ul></ul><hr /><h1 id="makefile">Makefile</h1><hr /><h2 id="basic">basic</h2><ul><li>Makefiles are used to help decide which parts of a large program need to be recompiled.<li>In the vast majority of cases, C or C++ files are compiled.<li>Other languages typically have their own tools that serve a similar purpose as Make.<li>It can be used beyond programs too, when you need a series of instructions to run depending on what files have changed. This tutorial will focus on the C/C++ compilation use case.</ul><p>Here’s an example dependency graph that you might build with Make. If any file’s dependencies changes, then the file will get recompiled:</p><p><img data-proofer-ignore data-src="https://i.imgur.com/058OIyS.png" alt="dependency_graph" /></p><p>alternatives to Make</p><ul><li>Popular C/C++ alternative build systems are <a href="https://scons.org/">SCons</a>, <a href="https://cmake.org/">CMake</a>, <a href="https://bazel.build/">Bazel</a>, and <a href="https://ninja-build.org/">Ninja</a>.<li>Some code editors like <a href="https://visualstudio.microsoft.com/">Microsoft Visual Studio</a> have their own built in build tools.<ul><li>For Java, there’s <a href="https://ant.apache.org/">Ant</a>, <a href="https://maven.apache.org/what-is-maven.html">Maven</a>, and <a href="https://gradle.org/">Gradle</a>.<li>Other languages like Go and Rust have their own build tools.</ul></ul><p>Interpreted languages like <code class="language-plaintext highlighter-rouge">Python, Ruby, and Javascript</code> don’t require an analogue to Makefiles.</p><ul><li>The goal of Makefiles is to compile whatever files need to be compiled, based on what files have changed.<li>But when files in interpreted languages change, nothing needs to get recompiled. When the program runs, the most recent version of the file is used.</ul><hr /><h2 id="makefile-syntax">Makefile Syntax</h2><p>A Makefile consists of a set of <font color="red"> rules </font></p><ul><li>The <font color="red"> targets </font><ul><li>are file names, separated by spaces.<li>Typically, there is only one per rule.<li>一个目标文件，可以是Object File，也可以是执行文件。还可以是一个标签（Label）</ul><li>The <font color="red"> prerequisites / dependencies </font><ul><li>are also file names, separated by spaces.<li>These files need to exist before the commands for the target are run.<li>要生成那个target所需要的文件或是目标。</ul><li>The <font color="red"> commands </font><ul><li>a series of steps typically used to make the target(s).<li>These <font color="blue"> need to start with a tab character </font>,<li>not spaces.<li>make需要执行的命令。（任意的Shell命令）</ul></ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="c"># A rule generally looks like this:</span>
targets: prerequisites
   <span class="nb">command
   command
   command
</span>clean:
   <span class="nb">command</span>
</pre></table></code></div></div><p>这是一个文件的依赖关系</p><ul><li>target这一个或多个的目标文件依赖于prerequisites中的文件，<li>其生成规则定义在command中。<li>prerequisites中如果有一个以上的文件比target文件要新的话，command所定义的命令就会被执行。<li>这就是Makefile的规则。也就是Makefile中最核心的内容。<li>make会一层又一层地去找文件的依赖关系，直到最终编译出第一个目标文件。在找寻的过程中，如果出现错误，比如最后被依赖的文件找不到，那么make就会直接退出，并报错，<li>对于所定义的命令的错误，或是编译不成功，make根本不理。<li>make只管文件的依赖性<ul><li>如果在找了依赖关系之后，冒号后面的文件还是不在，那么对不起，我就不工作啦。</ul></ul><p>clean不是一个文件，它只不过是一个动作名字</p><ul><li>其冒号后什么也没有，那么，make就不会自动去找文件的依赖性，也就不会自动执行其后所定义的命令。<li>要执行其后的命令，就要在make命令后明显得指出这个lable的名字。<li>这样的方法可以在一个makefile中定义不用的编译或是和编译无关的命令，比如程序的打包，程序的备份，等等。<li>像clean这种，没有被第一个目标文件直接或间接关联，那么它后面所定义的命令将不会被自动执行，<ul><li>要make执行。即命令——“make clean”</ul></ul><hr /><h2 id="run-examples">Run Examples</h2><p>put the contents in a file called <code class="language-plaintext highlighter-rouge">Makefile</code>, and in that directory run the command <code class="language-plaintext highlighter-rouge">make</code>.</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
</pre><td class="rouge-code"><pre>
<span class="c"># 1.</span>
<span class="c"># Makefile</span>
hello:
    <span class="nb">echo</span> <span class="s2">"hello world"</span>

<span class="nv">$ </span>make
<span class="c"># echo "hello world"</span>
<span class="c"># hello world</span>



<span class="c"># 2.</span>
<span class="c"># It have 3 separate rules,</span>
<span class="c"># - When you run `make blah` in the terminal, it will build a program called `blah` in a series of steps:</span>
<span class="c">#   - Make is given `blah` as the target, so it first searches for this target</span>
<span class="c">#   - `blah` requires `blah.o`, so make searches for the `blah.o` target</span>
<span class="c">#   - `blah.o` requires `blah.c`, so make searches for the `blah.c` target</span>
<span class="c">#   - `blah.c` has no dependencies, so the `echo` command is run</span>
<span class="c">#   - The `cc -c` command is then run, because all of the `blah.o` dependencies are finished</span>
<span class="c">#   - The top `cc` command is run, because all the `blah` dependencies are finished</span>
<span class="c">#   - That's it: `blah` is a compiled c program</span>
blah: blah.o
    cc blah.o <span class="nt">-o</span> blah <span class="c"># Runs third</span>
blah.o: blah.c
    cc <span class="nt">-c</span> blah.c <span class="nt">-o</span> blah.o <span class="c"># Runs second</span>
blah.c:
    <span class="nb">echo</span> <span class="s2">"int main() {return 0;}"</span> <span class="o">&gt;</span> blah.c <span class="c"># Runs first</span>
<span class="c"># echo "int main() {return 0;}" &gt; blah.c</span>
<span class="c"># cc -c blah.c -o blah.o</span>
<span class="c"># cc blah.o -o blah</span>


<span class="c"># 3.</span>
<span class="c"># This makefile has a single target, called `some_file`.</span>
<span class="c"># The default target is the first target, so in this case `some_file` will run.</span>
some_file:
    <span class="nb">echo</span> <span class="s2">"This line will always print"</span>
<span class="c"># first time: This file will make `some_file`</span>
<span class="c"># the second time notice run the made: `make: 'some_file' is up to date.`</span>

<span class="c"># 4.</span>
<span class="c"># Here, the target `some_file` "depends" on `other_file`.</span>
<span class="c"># When we run `make`, the default target (`some_file`) will get called.</span>
<span class="c"># It will first look at its list of dependencies, and if any of them are older, it will first run the targets for those dependencies, and then run itself.</span>
<span class="c"># The second time this is run, neither target will run because both targets exist.</span>

some_file: other_file
    <span class="nb">echo</span> <span class="s2">"This will run second, because it depends on other_file"</span>
    <span class="nb">touch </span>some_file

other_file:
    <span class="nb">echo</span> <span class="s2">"This will run first"</span>
    <span class="nb">touch </span>ot


<span class="c"># 5.</span>
<span class="c"># `clean` is often used as a target that removes the output of other targets, but it is not a special word in `make`.</span>

some_file:
    <span class="nb">touch </span>some_file

clean:
    <span class="nb">rm</span> <span class="nt">-f</span> some_file
</pre></table></code></div></div><hr /><h2 id="variables">Variables</h2><p>Variables can only be strings. Here’s an example of using them:</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre>files <span class="o">=</span> file1 file2

some_file: <span class="si">$(</span>files<span class="si">)</span>
    <span class="nb">echo</span> <span class="s2">"Look at this variable: "</span> <span class="si">$(</span>files<span class="si">)</span>
    <span class="nb">touch </span>some_file
file1:
    <span class="nb">touch </span>file1
file2:
    <span class="nb">touch </span>file2
clean:
    <span class="nb">rm</span> <span class="nt">-f</span> file1 file2 some_file
<span class="c"># touch file1</span>
<span class="c"># touch file2</span>
<span class="c"># echo "Look at this variable: " file1 file2</span>
<span class="c"># Look at this variable:  file1 file2</span>
<span class="c"># touch some_file</span>



<span class="c"># Reference variables using ${} or $()</span>
x <span class="o">=</span> dude
all:
    <span class="nb">echo</span> <span class="si">$(</span>x<span class="si">)</span>
    <span class="nb">echo</span> <span class="k">${</span><span class="nv">x</span><span class="k">}</span>

    <span class="c"># Bad practice, but works</span>
    <span class="nb">echo</span> <span class="nv">$x</span>
</pre></table></code></div></div><hr /><h2 id="targets">Targets</h2><h3 id="all-target"><code class="language-plaintext highlighter-rouge">all</code> target</h3><p>Make a <code class="language-plaintext highlighter-rouge">all</code> target.</p><ul><li>Making multiple targets and you want all of them to run</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>all: one two three

one:
    <span class="nb">touch </span>one
two:
    <span class="nb">touch </span>two
three:
    <span class="nb">touch </span>three

clean:
    <span class="nb">rm</span> <span class="nt">-f</span> one two three
</pre></table></code></div></div><h3 id="multiple-targets">Multiple targets</h3><p>Multiple targets</p><ul><li>When there are multiple targets for a rule<li>the commands will be run for each target<li><code class="language-plaintext highlighter-rouge">$@</code> is an automatic variable that contains the target name.</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>all: f1.o f2.o

f1.o f2.o:
    <span class="nb">echo</span> <span class="nv">$@</span>
<span class="c"># Equivalent to:</span>
<span class="c"># f1.o</span>
<span class="c">#     echo $@</span>
<span class="c"># f2.o</span>
<span class="c">#     echo $@</span>

<span class="c"># echo f1.o</span>
<span class="c"># f1.o</span>
<span class="c"># echo f2.o</span>
<span class="c"># f2.o</span>
</pre></table></code></div></div><hr /><h2 id="automatic-variables-and-wildcards">Automatic Variables and Wildcards</h2><blockquote><p>Both <code class="language-plaintext highlighter-rouge">*</code> and <code class="language-plaintext highlighter-rouge">%</code> are called wildcards in Make, but they mean entirely different things.</p></blockquote><p><code class="language-plaintext highlighter-rouge">*</code> Wildcard</p><ul><li><code class="language-plaintext highlighter-rouge">*</code> search your filesystem for matching filenames.<li>suggest that always wrap it in the <code class="language-plaintext highlighter-rouge">wildcard</code> function<li><code class="language-plaintext highlighter-rouge">*</code> may be used in the target, prerequisites, or in the <code class="language-plaintext highlighter-rouge">wildcard</code> function.<li>Danger:<ul><li><code class="language-plaintext highlighter-rouge">*</code> may not be directly used in a variable definitions<li>When <code class="language-plaintext highlighter-rouge">*</code> matches no files, it is left as it is (unless run in the <code class="language-plaintext highlighter-rouge">wildcard</code> function)</ul></ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="c"># Print out file information about every .c file</span>
print: <span class="si">$(</span>wildcard <span class="k">*</span>.c<span class="si">)</span>
    <span class="nb">ls</span> <span class="nt">-la</span>  <span class="nv">$?</span>

<span class="c"># Don't do this! '*' will not get expanded</span>
thing_wrong :<span class="o">=</span> <span class="k">*</span>.o
thing_right :<span class="o">=</span> <span class="si">$(</span>wildcard <span class="k">*</span>.o<span class="si">)</span>


all: one two three four

<span class="c"># Fails, because $(thing_wrong) is the string "*.o"</span>
one: <span class="si">$(</span>thing_wrong<span class="si">)</span>

<span class="c"># Stays as *.o if there are no files that match this pattern :(</span>
two: <span class="k">*</span>.o

<span class="c"># Works as you would expect! In this case, it does nothing.</span>
three: <span class="si">$(</span>thing_right<span class="si">)</span>

<span class="c"># Same as rule three</span>
four: <span class="si">$(</span>wildcard <span class="k">*</span>.o<span class="si">)</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">%</code> Wildcard</p><ul><li>“matching” mode<ul><li>it matches one or more characters in a string.<li>This match is called the stem.</ul><li>“replacing” mode,<ul><li>it takes the stem that was matched and replaces that in a string.</ul><li><code class="language-plaintext highlighter-rouge">%</code> is most often used in rule definitions and in some specific functions.</ul><p>See these sections on examples of it being used:</p><ul><li>Static Pattern Rules<li>Pattern Rules<li>String Substitution<li>The vpath Directive</ul><p>Automatic Variables</p><ul><li>There are many <a href="https://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html">automatic variables</a>, but often only a few show up:</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre>hey: one two
    <span class="c"># Outputs "hey", since this is the first target</span>
    <span class="nb">echo</span> <span class="nv">$@</span>
    <span class="c"># Outputs all prerequisites newer than the target</span>
    <span class="nb">echo</span> <span class="nv">$?</span>
    <span class="c"># Outputs all prerequisites</span>
    <span class="nb">echo</span> <span class="nv">$^</span>
    <span class="nb">touch </span>hey
one:
    <span class="nb">touch </span>one
two:
    <span class="nb">touch </span>two
clean:
    <span class="nb">rm</span> <span class="nt">-f</span> hey one two

<span class="c"># touch one</span>
<span class="c"># touch two</span>
<span class="c"># # Outputs "hey", since this is the first target</span>
<span class="c"># echo hey</span>
<span class="c"># hey</span>
<span class="c"># # Outputs all prerequisites newer than the target</span>
<span class="c"># echo one two</span>
<span class="c"># one two</span>
<span class="c"># # Outputs all prerequisites</span>
<span class="c"># echo one two</span>
<span class="c"># one two</span>
<span class="c"># touch hey</span>

</pre></table></code></div></div><hr /><h2 id="fancy-rules">Fancy Rules</h2><hr /><h3 id="static-pattern-rules">Static Pattern Rules</h3><ul><li>a new type of rule</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>targets ...: target-pattern: prereq-patterns ...
   commands

<span class="c"># the given target is matched by the target-pattern (via a `%` wildcard).</span>
<span class="c"># Whatever was matched is called the stem</span>
<span class="c"># The stem is then substituted into the prereq-pattern, to generate the target's prereqs.</span>
</pre></table></code></div></div><p>A typical use case is to compile <code class="language-plaintext highlighter-rouge">.c</code> files into <code class="language-plaintext highlighter-rouge">.o</code> files.</p><ol><li>Here’s the <font color="red"> manual way </font></ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre>objects <span class="o">=</span> foo.o bar.o all.o
all: <span class="si">$(</span>objects<span class="si">)</span>
<span class="c"># These files compile via implicit rules</span>
foo.o: foo.c
bar.o: bar.c
all.o: all.c

all.c:
    <span class="nb">echo</span> <span class="s2">"int main() { return 0; }"</span> <span class="o">&gt;</span> all.c
%.c:
    <span class="nb">touch</span> <span class="nv">$@</span>
clean:
    <span class="nb">rm</span> <span class="nt">-f</span> <span class="k">*</span>.c <span class="k">*</span>.o all
<span class="c"># echo "int main() { return 0; }" &gt; all.c</span>
<span class="c"># cc    -c -o all.o all.c</span>
<span class="c"># touch foo.c</span>
<span class="c"># cc    -c -o foo.o foo.c</span>
<span class="c"># touch bar.c</span>
<span class="c"># cc    -c -o bar.o bar.c</span>
<span class="c"># cc   all.o foo.o bar.o   -o all</span>

</pre></table></code></div></div><ol><li>more <font color="red"> efficient way </font>, using a static pattern rule:</ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre>objects <span class="o">=</span> foo.o bar.o all.o
all: <span class="si">$(</span>objects<span class="si">)</span>

<span class="c"># These files compile via implicit rules</span>
<span class="c"># Syntax - targets ...: target-pattern: prereq-patterns ...</span>
<span class="c"># In the case of the first target, foo.o, the target-pattern matches foo.o and sets the "stem" to be "foo".</span>
<span class="c"># It then replaces the '%' in prereq-patterns with that stem</span>
<span class="si">$(</span>objects<span class="si">)</span>: %.o: %.c

all.c:
    <span class="nb">echo</span> <span class="s2">"int main() { return 0; }"</span> <span class="o">&gt;</span> all.c
%.c:
    <span class="nb">touch</span> <span class="nv">$@</span>
clean:
    <span class="nb">rm</span> <span class="nt">-f</span> <span class="k">*</span>.c <span class="k">*</span>.o all
</pre></table></code></div></div><hr /><h3 id="static-pattern-rules-and-filter">Static Pattern Rules and Filter</h3><p>While I introduce functions later on, I’ll forshadow what you can do with them. The <code class="language-plaintext highlighter-rouge">filter</code> function can be used in Static pattern rules to match the correct files.</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>In this example, I made up the <span class="sb">`</span>.raw<span class="sb">`</span> and <span class="sb">`</span>.result<span class="sb">`</span> extensions.

obj_files <span class="o">=</span> foo.result bar.o lose.o
src_files <span class="o">=</span> foo.raw bar.c lose.c

all: <span class="si">$(</span>obj_files<span class="si">)</span>

<span class="si">$(</span>filter %.o,<span class="si">$(</span>obj_files<span class="si">))</span>: %.o: %.c
    <span class="nb">echo</span> <span class="s2">"target: </span><span class="nv">$@</span><span class="s2"> prereq: </span><span class="nv">$&lt;</span><span class="s2">"</span>
<span class="si">$(</span>filter %.result,<span class="si">$(</span>obj_files<span class="si">))</span>: %.result: %.raw
    <span class="nb">echo</span> <span class="s2">"target: </span><span class="nv">$@</span><span class="s2"> prereq: </span><span class="nv">$&lt;</span><span class="s2">"</span>

%.c %.raw:
    <span class="nb">touch</span> <span class="nv">$@</span>

clean:
    <span class="nb">rm</span> <span class="nt">-f</span> <span class="si">$(</span>src_files<span class="si">)</span>
</pre></table></code></div></div><hr /><h3 id="implicit-rules">Implicit Rules</h3><p>Perhaps the most confusing part of make is the magic rules and variables that are made. Here’s a list of implicit rules:</p><ul><li>Compiling a C program: <code class="language-plaintext highlighter-rouge">n.o</code> is made automatically from <code class="language-plaintext highlighter-rouge">n.c</code> with a command of the form <code class="language-plaintext highlighter-rouge">$(CC) -c $(CPPFLAGS) $(CFLAGS)</code><li>Compiling a C++ program: <code class="language-plaintext highlighter-rouge">n.o</code> is made automatically from <code class="language-plaintext highlighter-rouge">n.cc</code> or <code class="language-plaintext highlighter-rouge">n.cpp</code> with a command of the form <code class="language-plaintext highlighter-rouge">$(CXX) -c $(CPPFLAGS) $(CXXFLAGS)</code><li>Linking a single object file: <code class="language-plaintext highlighter-rouge">n</code> is made automatically from <code class="language-plaintext highlighter-rouge">n.o</code> by running the command <code class="language-plaintext highlighter-rouge">$(CC) $(LDFLAGS) n.o $(LOADLIBES) $(LDLIBS)</code></ul><p>As such, the important variables used by implicit rules are:</p><ul><li><code class="language-plaintext highlighter-rouge">CC</code>: Program for compiling C programs; default cc<li><code class="language-plaintext highlighter-rouge">CXX</code>: Program for compiling C++ programs; default G++<li><code class="language-plaintext highlighter-rouge">CFLAGS</code>: Extra flags to give to the C compiler<li><code class="language-plaintext highlighter-rouge">CXXFLAGS</code>: Extra flags to give to the C++ compiler<li><code class="language-plaintext highlighter-rouge">CPPFLAGS</code>: Extra flags to give to the C preprosessor<li><code class="language-plaintext highlighter-rouge">LDFLAGS</code>: Extra flags to give to compilers when they are supposed to invoke the linker</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>CC <span class="o">=</span> gcc <span class="c"># Flag for implicit rules</span>
CFLAGS <span class="o">=</span> <span class="nt">-g</span> <span class="c"># Flag for implicit rules. Turn on debug info</span>

<span class="c"># Implicit rule #1: blah is built via the C linker implicit rule</span>
<span class="c"># Implicit rule #2: blah.o is built via the C compilation implicit rule, because blah.c exists</span>
blah: blah.o

blah.c:
    <span class="nb">echo</span> <span class="s2">"int main() { return 0; }"</span> <span class="o">&gt;</span> blah.c

clean:
    <span class="nb">rm</span> <span class="nt">-f</span> blah<span class="k">*</span>
</pre></table></code></div></div><hr /><h3 id="pattern-rules">Pattern Rules</h3><p>Pattern rules</p><ul><li>A way to define your own implicit rules<li>A simpler form of static pattern rules<li>Pattern rules contain a <code class="language-plaintext highlighter-rouge">%</code> in the target.<ul><li><code class="language-plaintext highlighter-rouge">%</code> matches any nonempty string, and the other characters match themselves.<li><code class="language-plaintext highlighter-rouge">%</code> in a prerequisite of a pattern rule stands for the same stem that was matched by the <code class="language-plaintext highlighter-rouge">%</code> in the target.</ul></ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c"># Define a pattern rule that compiles every .c file into a .o file</span>
%.o : %.c
    <span class="si">$(</span>CC<span class="si">)</span> <span class="nt">-c</span> <span class="si">$(</span>CFLAGS<span class="si">)</span> <span class="si">$(</span>CPPFLAGS<span class="si">)</span> <span class="nv">$&lt;</span> <span class="nt">-o</span> <span class="nv">$@</span>

<span class="c"># Define a pattern rule that has no pattern in the prerequisites.</span>
<span class="c"># This just creates empty .c files when needed.</span>
%.c:
   <span class="nb">touch</span> <span class="nv">$@</span>
</pre></table></code></div></div><hr /><h2 id="functions-for-string-substitution-and-analysis">Functions for String Substitution and Analysis</h2><ol><li><code class="language-plaintext highlighter-rouge">$(subst from,to,text)</code><ul><li>textual replacement on the text text: each occurrence of from is replaced by to.<li>The result is substituted for the function call</ul></ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="si">$(</span>subst ee,EE,feet on the street<span class="si">)</span>
<span class="c"># produces the value `fEEt on the strEEt`.</span>
</pre></table></code></div></div><ol><li><code class="language-plaintext highlighter-rouge">$(patsubst pattern,replacement,text)</code><ul><li>Finds whitespace-separated words in text that match pattern and replaces them with replacement.<li>pattern may contain a <code class="language-plaintext highlighter-rouge">%</code> which acts as a wildcard, matching any number of any characters within a word.<li><p>If replacement also contains a <code class="language-plaintext highlighter-rouge">%</code>, the <code class="language-plaintext highlighter-rouge">%</code> is replaced by the text that matched the <code class="language-plaintext highlighter-rouge">%</code> in pattern. Only the first <code class="language-plaintext highlighter-rouge">%</code> in the pattern and replacement is treated this way; any subsequent <code class="language-plaintext highlighter-rouge">%</code> is unchanged.</p><li><code class="language-plaintext highlighter-rouge">%</code> characters in patsubst function invocations can be quoted with preceding backslashes (<code class="language-plaintext highlighter-rouge">\</code>). Backslashes that would otherwise quote <code class="language-plaintext highlighter-rouge">%</code> characters can be quoted with more backslashes.<li>Backslashes that quote <code class="language-plaintext highlighter-rouge">%</code> characters or other backslashes are removed from the pattern before it is compared file names or has a stem substituted into it.<li>Backslashes that are not in danger of quoting <code class="language-plaintext highlighter-rouge">%</code> characters go unmolested.<li>For example<li>the pattern<code class="language-plaintext highlighter-rouge"> the\%weird\\%pattern\\</code> has <code class="language-plaintext highlighter-rouge">the%weird\</code> preceding the operative <code class="language-plaintext highlighter-rouge">%</code> character, and <code class="language-plaintext highlighter-rouge">pattern\\</code> following it. The final two backslashes are left alone because they cannot affect any <code class="language-plaintext highlighter-rouge">%</code> character.<li>Whitespace between words is folded into single space characters; leading and trailing whitespace is discarded.</ul></ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="si">$(</span>patsubst %.c,%.o,x.c.c bar.c<span class="si">)</span>
<span class="c"># produces the value `x.c.o bar.o`.</span>
</pre></table></code></div></div><ol><li>Substitution references<ul><li>simpler way to get the effect of the patsubst function:</ul></ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="si">$(</span>var:pattern<span class="o">=</span>replacement<span class="si">)</span>
<span class="c"># is equivalent to</span>
<span class="si">$(</span>patsubst pattern,replacement,<span class="si">$(</span>var<span class="si">))</span>
The second shorthand simplifies one of the most common uses of patsubst: replacing the suffix at the end of file names.

<span class="si">$(</span>var:suffix<span class="o">=</span>replacement<span class="si">)</span>
<span class="c"># is equivalent to</span>
<span class="si">$(</span>patsubst %suffix,%replacement,<span class="si">$(</span>var<span class="si">))</span>


objects <span class="o">=</span> foo.o bar.o baz.o
<span class="c"># To get the list of corresponding source files, you could simply write:</span>
<span class="si">$(</span>objects:.o<span class="o">=</span>.c<span class="si">)</span>
<span class="c"># instead of using the general form:</span>
<span class="si">$(</span>patsubst %.o,%.c,<span class="si">$(</span>objects<span class="si">))</span>
</pre></table></code></div></div><hr /><h3 id="double-colon-rules-">Double-Colon Rules <code class="language-plaintext highlighter-rouge">::</code></h3><ul><li>allow multiple rules to be defined for the same target.<li>If these were single colons, a warning would be printed and only the second set of commands would run.</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>all: blah

blah::
    <span class="nb">echo</span> <span class="s2">"hello"</span>

blah::
    <span class="nb">echo</span> <span class="s2">"hello again"</span>
</pre></table></code></div></div><hr /><h3 id="double-pipeline--true">Double pipeline <code class="language-plaintext highlighter-rouge">|| true</code></h3><ul><li>It’s the opposite of <code class="language-plaintext highlighter-rouge">&amp;&amp;</code><li>the second command is executed only if the exit status of the preceding command is 0.</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">ls </span>this_file_does_not_exist.txt <span class="o">||</span> <span class="nb">echo </span>KO
<span class="c"># ls: cannot access this_file_does_not_exist.txt: No such file or directory</span>
<span class="c"># KO</span>

<span class="nv">$ </span><span class="nb">ls </span>this_file_exist.txt <span class="o">&amp;&amp;</span> <span class="nb">echo </span>OK
<span class="c"># this_file_exist.txt</span>
<span class="c"># OK</span>
</pre></table></code></div></div><hr /><h2 id="commands-and-execution">Commands and execution</h2><hr /><h3 id="command-echoingsilencing">Command Echoing/Silencing</h3><p>Add an <code class="language-plaintext highlighter-rouge">@</code> before a command to stop it from being printed You can also run make with <code class="language-plaintext highlighter-rouge">-s</code> to add an <code class="language-plaintext highlighter-rouge">@</code> before each line</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>all:
    @echo <span class="s2">"This make line will not be printed"</span>
    <span class="nb">echo</span> <span class="s2">"But this will"</span>
</pre></table></code></div></div><hr /><h3 id="command-execution">Command Execution</h3><ul><li>Each command is run in a new shell (or at least the effect is as such)</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre>all:
    <span class="nb">cd</span> ..
    <span class="c"># The cd above does not affect this line, because each command is effectively run in a new shell</span>
    <span class="nb">echo</span> <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
    <span class="c"># This cd command affects the next because they are on the same line</span>
    <span class="nb">cd</span> ..<span class="p">;</span> <span class="nb">echo</span> <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
    <span class="c"># Same as above</span>
    <span class="nb">cd</span> ..<span class="p">;</span> <span class="se">\</span>
    <span class="nb">echo</span> <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
<span class="c"># cd ..</span>
<span class="c"># # The cd above does not affect this line</span>
<span class="c"># echo `pwd`</span>
<span class="c"># /Users/luo/Documents/code/maketest</span>
<span class="c"># # This cd command affects the next because they are on the same line</span>
<span class="c"># cd ..; echo `pwd`</span>
<span class="c"># /Users/luo/Documents/code</span>
<span class="c"># # Same as above</span>
<span class="c"># cd ..; \</span>
<span class="c"># 	echo `pwd`</span>
<span class="c"># /Users/luo/Documents/code</span>
</pre></table></code></div></div><hr /><h3 id="default-shell">Default Shell</h3><ul><li>The default shell is <code class="language-plaintext highlighter-rouge">/bin/sh</code>.<li>change this by changing the variable SHELL:</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">SHELL</span><span class="o">=</span>/bin/bash

cool:
    <span class="nb">echo</span> <span class="s2">"Hello from bash"</span>
</pre></table></code></div></div><hr /><h3 id="error-handling-with--k--i-and--">Error handling with <code class="language-plaintext highlighter-rouge">-k</code>, <code class="language-plaintext highlighter-rouge">-i</code>, and <code class="language-plaintext highlighter-rouge">-</code></h3><ul><li>Add <code class="language-plaintext highlighter-rouge">-k</code><ul><li>when running make to continue running even in the face of errors.<li>Helpful if you want to see all the errors of Make at once.</ul><li>Add a <code class="language-plaintext highlighter-rouge">-</code><ul><li>before a command to suppress the error</ul><li>Add <code class="language-plaintext highlighter-rouge">-i</code><ul><li>to make to have this happen for every command.</ul></ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>one:
    <span class="c"># This error will be printed but ignored, and make will continue to run</span>
    <span class="nt">-false</span>
    <span class="nb">touch </span>one
</pre></table></code></div></div><hr /><h3 id="interrupting-or-killing-make">Interrupting or killing make</h3><p>Note only: If you <code class="language-plaintext highlighter-rouge">ctrl+c</code> make, it will delete the newer targets it just made.</p><hr /><h3 id="recursive-make">Recursive make</h3><p>To recursively call a makefile</p><ol><li>use the special <code class="language-plaintext highlighter-rouge">$(MAKE)</code> instead of <code class="language-plaintext highlighter-rouge">make</code><ul><li>because it will pass the make flags for you and won’t itself be affected by them.</ul></ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>new_contents <span class="o">=</span> <span class="s2">"hello:</span><span class="se">\n\t</span><span class="s2">touch inside_file"</span>
all:
    <span class="nb">mkdir</span> <span class="nt">-p</span> subdir
    <span class="nb">printf</span> <span class="si">$(</span>new_contents<span class="si">)</span> | <span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/^ //'</span> <span class="o">&gt;</span> subdir/makefile
    <span class="nb">cd </span>subdir <span class="o">&amp;&amp;</span> <span class="si">$(</span>MAKE<span class="si">)</span>
clean:
    <span class="nb">rm</span> <span class="nt">-rf</span> subdir
</pre></table></code></div></div><ol><li>Use export for recursive make<ul><li>the export directive takes a variable and makes it accessible to sub-make commands.<li>In this example, <code class="language-plaintext highlighter-rouge">cooly</code> is exported such that the makefile in subdir can use it.<li>Note: export has the same syntax as sh, but they aren’t related (although similar in function)</ul></ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre><td class="rouge-code"><pre>new_contents <span class="o">=</span> <span class="s2">"hello:</span><span class="se">\n\\</span><span class="s2">techo </span><span class="se">\$</span><span class="si">$(</span>cooly<span class="si">)</span><span class="s2">"</span>
all:
    <span class="nb">mkdir</span> <span class="nt">-p</span> subdir
    <span class="nb">echo</span> <span class="si">$(</span>new_contents<span class="si">)</span> | <span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/^ //'</span> <span class="o">&gt;</span> subdir/makefile
    @echo <span class="s2">"---MAKEFILE CONTENTS---"</span>
    @cd subdir <span class="o">&amp;&amp;</span> <span class="nb">cat </span>makefile
    @echo <span class="s2">"---END MAKEFILE CONTENTS---"</span>
    <span class="nb">cd </span>subdir <span class="o">&amp;&amp;</span> <span class="si">$(</span>MAKE<span class="si">)</span>
    @echo <span class="s2">"---NewLine---"</span>
<span class="c"># Note that variables and exports. They are set/affected globally.</span>
cooly <span class="o">=</span> <span class="s2">"The subdirectory can see me!"</span>
<span class="nb">export </span>cooly
<span class="c"># This would nullify the line above: unexport cooly</span>
clean:
    <span class="nb">rm</span> <span class="nt">-rf</span> subdir

<span class="c"># mkdir -p subdir</span>
<span class="c"># echo "hello:\n\\techo \$(cooly)" | sed -e 's/^ //' &gt; subdir/makefile</span>
<span class="c"># ---MAKEFILE CONTENTS---</span>
<span class="c"># hello:</span>
<span class="c"># 	echo $(cooly)</span>
<span class="c"># ---END MAKEFILE CONTENTS---</span>
<span class="c"># cd subdir &amp;&amp; /Applications/Xcode.app/Contents/Developer/usr/bin/make</span>
<span class="c"># echo "The subdirectory can see me!"</span>
<span class="c"># The subdirectory can see me!</span>
<span class="c"># ---NewLine---</span>



<span class="c"># need to export variables to have them run in the shell as well.</span>
<span class="nv">one</span><span class="o">=</span>this will only work locally
<span class="nb">export </span><span class="nv">two</span><span class="o">=</span>we can run subcommands with this
all:
    @echo <span class="si">$(</span>one<span class="si">)</span>
    @echo <span class="nv">$$</span>one
    @echo <span class="si">$(</span>two<span class="si">)</span>
    @echo <span class="nv">$$</span>two
<span class="c"># this will only work locally</span>
<span class="c">#</span>
<span class="c"># we can run subcommands with this</span>
<span class="c"># we can run subcommands with this</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">.EXPORT_ALL_VARIABLES</code> exports all variables for you.</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre>.EXPORT_ALL_VARIABLES:
new_contents <span class="o">=</span> <span class="s2">"hello:</span><span class="se">\n\t</span><span class="s2">echo </span><span class="se">\$</span><span class="si">$(</span>cooly<span class="si">)</span><span class="s2">"</span>
cooly <span class="o">=</span> <span class="s2">"The subdirectory can see me!"</span>
<span class="c"># This would nullify the line above: unexport cooly</span>
all:
    <span class="nb">mkdir</span> <span class="nt">-p</span> subdir
    <span class="nb">echo</span> <span class="si">$(</span>new_contents<span class="si">)</span> | <span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/^ //'</span> <span class="o">&gt;</span> subdir/makefile
    @echo <span class="s2">"---MAKEFILE CONTENTS---"</span>
    @cd subdir <span class="o">&amp;&amp;</span> <span class="nb">cat </span>makefile
    @echo <span class="s2">"---END MAKEFILE CONTENTS---"</span>
    <span class="nb">cd </span>subdir <span class="o">&amp;&amp;</span> <span class="si">$(</span>MAKE<span class="si">)</span>
clean:
    <span class="nb">rm</span> <span class="nt">-rf</span> subdir

<span class="c"># mkdir -p subdir</span>
<span class="c"># echo "hello:\n\techo \$(cooly)" | sed -e 's/^ //' &gt; subdir/makefile</span>
<span class="c"># ---MAKEFILE CONTENTS---</span>
<span class="c"># hello:</span>
<span class="c"># 	echo $(cooly)</span>
<span class="c"># ---END MAKEFILE CONTENTS---</span>
<span class="c"># cd subdir &amp;&amp; /Applications/Xcode.app/Contents/Developer/usr/bin/make</span>
<span class="c"># echo "The subdirectory can see me!"</span>
<span class="c"># The subdirectory can see me!</span>
</pre></table></code></div></div><hr /><h3 id="arguments-to-make">Arguments to make</h3><ul><li>a nice <a href="http://www.gnu.org/software/make/manual/make.html#Options-Summary">list of options</a> that can be run from make. Check out <code class="language-plaintext highlighter-rouge">--dry-run</code>, <code class="language-plaintext highlighter-rouge">--touch</code>, <code class="language-plaintext highlighter-rouge">--old-file</code>.<li>You can have multiple targets to make, i.e. <code class="language-plaintext highlighter-rouge">make clean run test</code> runs the <code class="language-plaintext highlighter-rouge">clean</code> goal, then <code class="language-plaintext highlighter-rouge">run</code>, and then <code class="language-plaintext highlighter-rouge">test</code>.</ul><hr /><h2 id="variables-pt-2">Variables Pt. 2</h2><hr /><h3 id="flavors-of-variables">Flavors of variables</h3><ul><li>recursive <code class="language-plaintext highlighter-rouge">=</code><ul><li>only looks for the variables when the command is <font color="red"> used </font><li>not when it’s <font color="red"> defined </font></ul><li>simply expanded <code class="language-plaintext highlighter-rouge">:=</code><ul><li>like normal imperative programming<li>only those defined so far get expanded</ul></ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="c"># Recursive variable. This will print "later" below</span>
one <span class="o">=</span> one <span class="k">${</span><span class="nv">later_variable</span><span class="k">}</span>
later_variable <span class="o">=</span> aloha
<span class="c"># Simply expanded variable. This will not print "later" below</span>
two :<span class="o">=</span> two <span class="k">${</span><span class="nv">later_variable</span><span class="k">}</span>
later_variable <span class="o">=</span> later
all:
    <span class="nb">echo</span> <span class="si">$(</span>one<span class="si">)</span>
    <span class="nb">echo</span> <span class="si">$(</span>two<span class="si">)</span>
<span class="c"># echo one later</span>
<span class="c"># one later</span>
<span class="c"># echo two</span>
<span class="c"># two</span>
<span class="c"># echo one later</span>
<span class="c"># one later</span>
<span class="c"># echo two aloha</span>
<span class="c"># two aloha</span>
</pre></table></code></div></div><p>Simply expanded (using <code class="language-plaintext highlighter-rouge">:=</code>) allows you to append to a variable. Recursive definitions will give an infinite loop error.</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>one <span class="o">=</span> hello
<span class="c"># one gets defined as a simply expanded variable (:=) and thus can handle appending</span>
one :<span class="o">=</span> <span class="k">${</span><span class="nv">one</span><span class="k">}</span> there
all:
    <span class="nb">echo</span> <span class="si">$(</span>one<span class="si">)</span>
<span class="c"># echo hello there</span>
<span class="c"># hello there</span>
</pre></table></code></div></div><hr /><h3><code class="language-plaintext highlighter-rouge">?=</code></h3><ul><li>only sets variables if they have not yet been set</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>one <span class="o">=</span> hello
one ?<span class="o">=</span> will not be <span class="nb">set
</span>two ?<span class="o">=</span> will be <span class="nb">set

</span>all:
    <span class="nb">echo</span> <span class="si">$(</span>one<span class="si">)</span>
    <span class="nb">echo</span> <span class="si">$(</span>two<span class="si">)</span>
</pre></table></code></div></div><hr /><h3 id="space">space</h3><ul><li>Spaces at the end of a line are not stripped, but those at the start are.<li>To make a variable with a single space, use <code class="language-plaintext highlighter-rouge">$(nullstring)</code></ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>with_spaces <span class="o">=</span> hello   <span class="c"># with_spaces has many spaces after "hello"</span>
after <span class="o">=</span> <span class="si">$(</span>with_spaces<span class="si">)</span>there
nullstring <span class="o">=</span>
space <span class="o">=</span> <span class="si">$(</span>nullstring<span class="si">)</span> <span class="c"># Make a variable with a single space.</span>
all:
    <span class="nb">echo</span> <span class="s2">"</span><span class="si">$(</span>after<span class="si">)</span><span class="s2">"</span>
    <span class="nb">echo </span>start<span class="s2">"</span><span class="si">$(</span>space<span class="si">)</span><span class="s2">"</span>end
<span class="c"># echo "hello   there"</span>
<span class="c"># hello   there</span>
<span class="c"># echo start" "end</span>
<span class="c"># start end</span>
</pre></table></code></div></div><p>An undefined variable is actually an empty string!</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>all:
    <span class="c"># Undefined variables are just empty strings!</span>
    <span class="nb">echo</span> <span class="si">$(</span>nowhere<span class="si">)</span>
</pre></table></code></div></div><h3 id="use--to-append">Use <code class="language-plaintext highlighter-rouge">+=</code> to append</h3><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>foo :<span class="o">=</span> start
foo +<span class="o">=</span> more

all:
    <span class="nb">echo</span> <span class="si">$(</span>foo<span class="si">)</span>
</pre></table></code></div></div><hr /><h3 id="command-line-arguments-and-override">Command line arguments and override</h3><ul><li>override variables that come from the command line by using <code class="language-plaintext highlighter-rouge">override</code>.<li>Here we ran make with <code class="language-plaintext highlighter-rouge">make option_one=hi</code></ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c"># Overrides command line arguments</span>
override option_one <span class="o">=</span> did_override
<span class="c"># Does not override command line arguments</span>
option_one <span class="o">=</span> not_override
all:
    <span class="nb">echo</span> <span class="si">$(</span>option_one<span class="si">)</span>
    <span class="nb">echo</span> <span class="si">$(</span>option_one<span class="si">)</span>
<span class="c"># echo did_override</span>
<span class="c"># did_override</span>
<span class="c"># echo did_override</span>
<span class="c"># did_override</span>
</pre></table></code></div></div><hr /><h3 id="list-of-commands-and-define">List of commands and define</h3><ul><li>“define” is actually just a list of commands.<li>It has nothing to do with being a function.<li>Note here that it’s a bit different than having a semi-colon between commands, because each is run in a separate shell, as expected.</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>one <span class="o">=</span> <span class="nb">export </span><span class="nv">blah</span><span class="o">=</span><span class="s2">"I was set!"</span><span class="p">;</span> <span class="nb">echo</span> <span class="nv">$$</span>blah

define two
<span class="nb">export </span><span class="nv">blah</span><span class="o">=</span><span class="nb">set
echo</span> <span class="nv">$$</span>blah
endef

<span class="c"># One and two are different.</span>
all:
    @echo <span class="s2">"This prints 'I was set'"</span>
    @<span class="si">$(</span>one<span class="si">)</span>
    @echo <span class="s2">"This does not print 'I was set' because each command runs in a separate shell"</span>
    @<span class="si">$(</span>two<span class="si">)</span>

<span class="c"># This prints 'I was set'</span>
<span class="c"># I was set!</span>
<span class="c"># This does not print 'I was set' because each command runs in a separate shell</span>
<span class="c">#</span>
</pre></table></code></div></div><hr /><h3 id="target-specific-variables">Target-specific variables</h3><p>Variables can be assigned for specific targets</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>all: one <span class="o">=</span> cool
all:
    <span class="nb">echo </span>one is defined: <span class="si">$(</span>one<span class="si">)</span>
other:
    <span class="nb">echo </span>one is nothing: <span class="si">$(</span>one<span class="si">)</span>
</pre></table></code></div></div><hr /><h3 id="pattern-specific-variables">Pattern-specific variables</h3><p>You can assign variables for specific target <font color="red"> patterns </font></p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>%.c: one <span class="o">=</span> cool
blah.c:
    <span class="nb">echo </span>one is defined: <span class="si">$(</span>one<span class="si">)</span>
other:
    <span class="nb">echo </span>one is nothing: <span class="si">$(</span>one<span class="si">)</span>
</pre></table></code></div></div><hr /><h2 id="conditional-part-of-makefiles">Conditional part of Makefiles</h2><hr /><h3 id="ifeq-endif-conditional-ifelse"><code class="language-plaintext highlighter-rouge">ifeq endif</code> Conditional if/else</h3><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>foo <span class="o">=</span> ok

all:
ifeq <span class="o">(</span><span class="si">$(</span>foo<span class="si">)</span>, ok<span class="o">)</span>
    <span class="nb">echo</span> <span class="s2">"foo equals ok"</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"nope"</span>
endif
</pre></table></code></div></div><hr /><h3 id="nullstring-check-if-a-variable-is-empty"><code class="language-plaintext highlighter-rouge">$(nullstring)</code> Check if a variable is empty</h3><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>nullstring <span class="o">=</span>
foo <span class="o">=</span> <span class="si">$(</span>nullstring<span class="si">)</span> <span class="c"># end of line; there is a space here</span>

all:
ifeq <span class="o">(</span><span class="si">$(</span>strip <span class="si">$(</span>foo<span class="si">))</span>,<span class="o">)</span>
    <span class="nb">echo</span> <span class="s2">"foo is empty after being stripped"</span>
endif

ifeq <span class="o">(</span><span class="si">$(</span>nullstring<span class="si">)</span>,<span class="o">)</span>
    <span class="nb">echo</span> <span class="s2">"nullstring doesn't even have spaces"</span>
endif
</pre></table></code></div></div><hr /><h3 id="ifdef-endif-check-if-a-variable-is-defined"><code class="language-plaintext highlighter-rouge">ifdef endif</code> Check if a variable is defined</h3><ul><li><code class="language-plaintext highlighter-rouge">ifdef</code> does not expand variable references;<li>it just sees if something is defined at all</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>bar <span class="o">=</span>
foo <span class="o">=</span> <span class="si">$(</span>bar<span class="si">)</span>

all:
ifdef foo
    <span class="nb">echo</span> <span class="s2">"foo is defined"</span>
endif
ifdef bar
    <span class="nb">echo</span> <span class="s2">"but bar is not"</span>
endif
</pre></table></code></div></div><hr /><h3 id="makeflags"><code class="language-plaintext highlighter-rouge">$(makeflags)</code></h3><ul><li>test make flags with <code class="language-plaintext highlighter-rouge">findstring</code> and <code class="language-plaintext highlighter-rouge">MAKEFLAGS</code>.<li>Run this example with <code class="language-plaintext highlighter-rouge">make -i</code> to see it print out the echo statement.</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>bar <span class="o">=</span>
foo <span class="o">=</span> <span class="si">$(</span>bar<span class="si">)</span>

all:
<span class="c"># Search for the "-i" flag.</span>
<span class="c"># MAKEFLAGS is just a list of single characters, one per flag. So look for "i" in this case.</span>
ifneq <span class="o">(</span>,<span class="si">$(</span>findstring i, <span class="si">$(</span>MAKEFLAGS<span class="si">))</span><span class="o">)</span>
    <span class="nb">echo</span> <span class="s2">"i was passed to MAKEFLAGS"</span>
endif
<span class="c"># echo "i was passed to MAKEFLAGS"</span>
<span class="c"># i was passed to MAKEFLAGS</span>
</pre></table></code></div></div><hr /><h2 id="functions">Functions</h2><hr /><h3 id="first-functions">First Functions</h3><font color="red"> Functions </font><p>are mainly just for text processing.</p><ul><li>Call functions with <code class="language-plaintext highlighter-rouge">$(fn, arguments)</code> or <code class="language-plaintext highlighter-rouge">${fn, arguments}</code>.<li>make your own using the <a href="https://www.gnu.org/software/make/manual/html_node/Call-Function.html#Call-Function">call</a> builtin function.<li>Make has a decent amount of <a href="https://www.gnu.org/software/make/manual/html_node/Functions.html">builtin functions</a>.</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre>bar :<span class="o">=</span> <span class="k">${</span><span class="nv">subst</span><span class="p"> not, totally, </span><span class="s2">"I am not superman"</span><span class="k">}</span>
all:
    @echo <span class="si">$(</span>bar<span class="si">)</span>
<span class="c"># I am  totally superman</span>


<span class="c"># If you want to replace spaces or commas, use variables</span>
comma :<span class="o">=</span> ,
empty:<span class="o">=</span>
space :<span class="o">=</span> <span class="si">$(</span>empty<span class="si">)</span> <span class="si">$(</span>empty<span class="si">)</span>
foo :<span class="o">=</span> a b c
bar :<span class="o">=</span> <span class="si">$(</span>subst <span class="si">$(</span>space<span class="si">)</span>,<span class="si">$(</span>comma<span class="si">)</span>,<span class="si">$(</span>foo<span class="si">))</span>
all:
    @echo <span class="si">$(</span>bar<span class="si">)</span>

<span class="c"># Do NOT include spaces in the arguments after the first.</span>
<span class="c"># That will be seen as part of the string.</span>
comma :<span class="o">=</span> ,
empty:<span class="o">=</span>
space :<span class="o">=</span> <span class="si">$(</span>empty<span class="si">)</span> <span class="si">$(</span>empty<span class="si">)</span>
foo :<span class="o">=</span> a b c
bar :<span class="o">=</span> <span class="si">$(</span>subst <span class="si">$(</span>space<span class="si">)</span>, <span class="si">$(</span>comma<span class="si">)</span> , <span class="si">$(</span>foo<span class="si">))</span>
all:
    <span class="c"># Output is ", a , b , c". Notice the spaces introduced</span>
    @echo <span class="si">$(</span>bar<span class="si">)</span>
</pre></table></code></div></div><hr /><h3 id="patsubst-patternreplacement-text"><code class="language-plaintext highlighter-rouge">$(patsubst pattern,replacement, text)</code></h3><ul><li>The substitution reference <code class="language-plaintext highlighter-rouge">$(text:pattern=replacement)</code><li>replaces only suffixes: <code class="language-plaintext highlighter-rouge">$(text:suffix=replacement)</code>.<ul><li>No <code class="language-plaintext highlighter-rouge">%</code> wildcard is used here.<li>Note: don’t add extra spaces for this shorthand. It will be seen as a search or replacement term.</ul></ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>foo :<span class="o">=</span> a.o b.o l.a c.o
<span class="c"># change %.o to %.c</span>
one :<span class="o">=</span> <span class="si">$(</span>patsubst %.o,%.c,<span class="si">$(</span>foo<span class="si">))</span>
<span class="c"># This is a shorthand for the above</span>
<span class="c"># change %.o to %.c</span>
two :<span class="o">=</span> <span class="si">$(</span>foo:%.o<span class="o">=</span>%.c<span class="si">)</span>
<span class="c"># This is the suffix-only shorthand, is also equivalent to the above.</span>
three :<span class="o">=</span> <span class="si">$(</span>foo:.o<span class="o">=</span>.c<span class="si">)</span>
all:
    <span class="nb">echo</span> <span class="si">$(</span>one<span class="si">)</span>
    <span class="nb">echo</span> <span class="si">$(</span>two<span class="si">)</span>
    <span class="nb">echo</span> <span class="si">$(</span>three<span class="si">)</span>
<span class="c"># echo a.c b.c l.a c.c</span>
<span class="c"># a.c b.c l.a c.c</span>
<span class="c"># echo a.c b.c l.a c.c</span>
<span class="c"># a.c b.c l.a c.c</span>
<span class="c"># echo a.c b.c l.a c.c</span>
<span class="c"># a.c b.c l.a c.c</span>
</pre></table></code></div></div><hr /><h3 id="foreach-varlisttext"><code class="language-plaintext highlighter-rouge">$(foreach var,list,text)</code></h3><ul><li>It converts one list of words (separated by spaces) to another.<li><code class="language-plaintext highlighter-rouge">var</code> is set to each word in list, and <code class="language-plaintext highlighter-rouge">text</code> is expanded for each word.<li>This appends an exclamation after each word:</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>foo :<span class="o">=</span> <span class="nb">who </span>are you
<span class="c"># For each "word" in foo, output that same word with an exclamation after</span>
bar :<span class="o">=</span> <span class="si">$(</span>foreach wrd, <span class="si">$(</span>foo<span class="si">)</span>, <span class="si">$(</span>wrd<span class="si">)</span><span class="o">!</span><span class="si">)</span>
all:
    <span class="c"># Output is "who! are! you!"</span>
    @echo <span class="si">$(</span>bar<span class="si">)</span>
</pre></table></code></div></div><hr /><h3 id="if-nonempty-action1--action2"><code class="language-plaintext highlighter-rouge">$(if nonempty, action1 , action2)</code></h3><ul><li><code class="language-plaintext highlighter-rouge">if</code> checks if the first argument is nonempty.<li>If so runs the second argument, otherwise runs the third.</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>foo :<span class="o">=</span> <span class="si">$(</span><span class="k">if </span>this-is-not-empty,then!,else!<span class="si">)</span>
empty :<span class="o">=</span>
bar :<span class="o">=</span> <span class="si">$(</span><span class="k">if</span> <span class="si">$(</span>empty<span class="si">)</span>,then!,else!<span class="si">)</span>
all:
    @echo <span class="si">$(</span>foo<span class="si">)</span>
    @echo <span class="si">$(</span>bar<span class="si">)</span>
<span class="c"># then!</span>
<span class="c"># else!</span>
</pre></table></code></div></div><hr /><h3 id="the-call-function">The call function</h3><ul><li>Make supports creating basic functions.<li>“define” the function just by creating a variable, but use the parameters <code class="language-plaintext highlighter-rouge">$(0)</code>, <code class="language-plaintext highlighter-rouge">$(1)</code>, etc.<li>then call the function with the special <code class="language-plaintext highlighter-rouge">call</code> function.<li>The syntax is <code class="language-plaintext highlighter-rouge">$(call variable,param,param)</code>.<li><code class="language-plaintext highlighter-rouge">$(0)</code> is the variable, while <code class="language-plaintext highlighter-rouge">$(1)</code>, <code class="language-plaintext highlighter-rouge">$(2)</code>, etc. are the params.</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>sweet_new_fn <span class="o">=</span> Variable Name: <span class="si">$(</span>0<span class="si">)</span> First: <span class="si">$(</span>1<span class="si">)</span> Second: <span class="si">$(</span>2<span class="si">)</span> Empty Variable: <span class="si">$(</span>3<span class="si">)</span>
all:
    @echo <span class="si">$(</span>call sweet_new_fn, go, tigers<span class="si">)</span>
<span class="c"># Outputs "Variable Name: sweet_new_fn First: go Second: tigers Empty Variable:"</span>
</pre></table></code></div></div><hr /><h3 id="shell-ls--la"><code class="language-plaintext highlighter-rouge">$(shell ls -la)</code></h3><ul><li>calls the shell, but it replaces newlines with spaces!</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>all:
    @echo <span class="si">$(</span>shell <span class="nb">ls</span> <span class="nt">-la</span><span class="si">)</span>
<span class="c"># Very ugly because the newlines are gone!</span>
</pre></table></code></div></div><hr /><h2 id="other-features">Other Features</h2><hr /><h3 id="include-makefiles"><code class="language-plaintext highlighter-rouge">include Makefiles</code></h3><ul><li>tells <code class="language-plaintext highlighter-rouge">make</code> to read one or more other <code class="language-plaintext highlighter-rouge">makefiles</code>.<li>particularly useful when use compiler flags like <code class="language-plaintext highlighter-rouge">-M</code> that create Makefiles based on the source.<li>make命令开始时，会把找寻include所指出的其它Makefile，并把其内容安置在当前的位置。就好像C/C++的#include指令一样。</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>include filenames...
</pre></table></code></div></div><p>Example,</p><ul><li>if some c files includes a header, that header will be added to a Makefile that’s written by gcc.</ul><hr /><h3 id="vpath-pattern-directories-spacecolon-separated"><code class="language-plaintext highlighter-rouge">vpath &lt;pattern&gt; &lt;directories, space/colon separated&gt;</code></h3><ul><li>Use vpath to specify where some set of prerequisites exist.<li>The format is <code class="language-plaintext highlighter-rouge">vpath &lt;pattern&gt; &lt;directories, space/colon separated&gt;</code><li><code class="language-plaintext highlighter-rouge">&lt;pattern&gt;</code> can have a <code class="language-plaintext highlighter-rouge">%</code>, which matches any zero or more characters.<li>can also do this globallyish with the variable VPATH</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>vpath %.h ../headers ../other-directory

some_binary: ../headers blah.h
    <span class="nb">touch </span>some_binary

../headers:
    <span class="nb">mkdir</span> ../headers

blah.h:
    <span class="nb">touch</span> ../headers/blah.h

clean:
    <span class="nb">rm</span> <span class="nt">-rf</span> ../headers
    <span class="nb">rm</span> <span class="nt">-f</span> some_binary
</pre></table></code></div></div><hr /><h3 id="multiline-">Multiline <code class="language-plaintext highlighter-rouge">\</code></h3><ul><li>use multiple lines when the commands are too long</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>some_file:
    <span class="nb">echo </span>This line is too long, so <span class="se">\</span>
        it is broken up into multiple lines
</pre></table></code></div></div><hr /><h3 id="phony"><code class="language-plaintext highlighter-rouge">.phony</code></h3><ul><li>Adding <code class="language-plaintext highlighter-rouge">.PHONY</code> to a target will prevent make from confusing the phony target with a file name.<li>In this example, if the file <code class="language-plaintext highlighter-rouge">clean</code> is created, <code class="language-plaintext highlighter-rouge">make clean</code> will still be run.<li><code class="language-plaintext highlighter-rouge">.PHONY</code> is great to use</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>some_file:
    <span class="nb">touch </span>some_file
    <span class="nb">touch </span>clean

.PHONY: clean
clean:
    <span class="nb">rm</span> <span class="nt">-f</span> some_file
    <span class="nb">rm</span> <span class="nt">-f</span> clean
</pre></table></code></div></div><hr /><h3 id="delete_on_error"><code class="language-plaintext highlighter-rouge">.delete_on_error</code></h3><ul><li>The make tool will stop running a rule (and will propogate back to prerequisites) if a command returns a nonzero exit status.<li><code class="language-plaintext highlighter-rouge">DELETE_ON_ERROR</code> will delete the target of a rule if the rule fails in this manner.<li>This will happen for all targets, not just the one it is before like PHONY.<li>It’s a good idea to always use this, even though make does not for historical reasons.</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>.DELETE_ON_ERROR:
all: one two

one:
    <span class="nb">touch </span>one
    <span class="nb">false

</span>two:
    <span class="nb">touch </span>two
    <span class="nb">false</span>
</pre></table></code></div></div><hr /><h2 id="makefile-cookbook">Makefile Cookbook</h2><blockquote><p>Job Vranish (https://spin.atomicobject.com/2016/08/26/makefile-c-projects/)</p></blockquote><ul><li>put your C/C++ files in the <code class="language-plaintext highlighter-rouge">src/</code> folder.</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre><td class="rouge-code"><pre>TARGET_EXEC :<span class="o">=</span> final_program

BUILD_DIR :<span class="o">=</span> ./build
SRC_DIRS :<span class="o">=</span> ./src

<span class="c"># Find all the C and C++ files we want to compile</span>
SRCS :<span class="o">=</span> <span class="si">$(</span>shell find <span class="si">$(</span>SRC_DIRS<span class="si">)</span> <span class="nt">-name</span> <span class="k">*</span>.cpp <span class="nt">-or</span> <span class="nt">-name</span> <span class="k">*</span>.c<span class="si">)</span>

<span class="c"># String substitution for every C/C++ file.</span>
<span class="c"># As an example, hello.cpp turns into ./build/hello.cpp.o</span>
OBJS :<span class="o">=</span> <span class="si">$(</span>SRCS:%<span class="o">=</span><span class="si">$(</span>BUILD_DIR<span class="si">)</span>/%.o<span class="si">)</span>

<span class="c"># String substitution (suffix version without %).</span>
<span class="c"># As an example, ./build/hello.cpp.o turns into ./build/hello.cpp.d</span>
DEPS :<span class="o">=</span> <span class="si">$(</span>OBJS:.o<span class="o">=</span>.d<span class="si">)</span>

<span class="c"># Every folder in ./src will need to be passed to GCC so that it can find header files</span>
INC_DIRS :<span class="o">=</span> <span class="si">$(</span>shell find <span class="si">$(</span>SRC_DIRS<span class="si">)</span> <span class="nt">-type</span> d<span class="si">)</span>
<span class="c"># Add a prefix to INC_DIRS. So moduleA would become -ImoduleA. GCC understands this -I flag</span>
INC_FLAGS :<span class="o">=</span> <span class="si">$(</span>addprefix <span class="nt">-I</span>,<span class="si">$(</span>INC_DIRS<span class="si">))</span>

<span class="c"># The -MMD and -MP flags together generate Makefiles for us!</span>
<span class="c"># These files will have .d instead of .o as the output.</span>
CPPFLAGS :<span class="o">=</span> <span class="si">$(</span>INC_FLAGS<span class="si">)</span> <span class="nt">-MMD</span> <span class="nt">-MP</span>

<span class="c"># The final build step.</span>
<span class="si">$(</span>BUILD_DIR<span class="si">)</span>/<span class="si">$(</span>TARGET_EXEC<span class="si">)</span>: <span class="si">$(</span>OBJS<span class="si">)</span>
    <span class="si">$(</span>CC<span class="si">)</span> <span class="si">$(</span>OBJS<span class="si">)</span> <span class="nt">-o</span> <span class="nv">$@</span> <span class="si">$(</span>LDFLAGS<span class="si">)</span>

<span class="c"># Build step for C source</span>
<span class="si">$(</span>BUILD_DIR<span class="si">)</span>/%.c.o: %.c
    <span class="nb">mkdir</span> <span class="nt">-p</span> <span class="si">$(</span><span class="nb">dir</span> <span class="nv">$@</span><span class="si">)</span>
    <span class="si">$(</span>CC<span class="si">)</span> <span class="si">$(</span>CPPFLAGS<span class="si">)</span> <span class="si">$(</span>CFLAGS<span class="si">)</span> <span class="nt">-c</span> <span class="nv">$&lt;</span> <span class="nt">-o</span> <span class="nv">$@</span>

<span class="c"># Build step for C++ source</span>
<span class="si">$(</span>BUILD_DIR<span class="si">)</span>/%.cpp.o: %.cpp
    <span class="nb">mkdir</span> <span class="nt">-p</span> <span class="si">$(</span><span class="nb">dir</span> <span class="nv">$@</span><span class="si">)</span>
    <span class="si">$(</span>CXX<span class="si">)</span> <span class="si">$(</span>CPPFLAGS<span class="si">)</span> <span class="si">$(</span>CXXFLAGS<span class="si">)</span> <span class="nt">-c</span> <span class="nv">$&lt;</span> <span class="nt">-o</span> <span class="nv">$@</span>


.PHONY: clean
clean:
    <span class="nb">rm</span> <span class="nt">-r</span> <span class="si">$(</span>BUILD_DIR<span class="si">)</span>

<span class="c"># Include the .d makefiles. The - at the front suppresses the errors of missing</span>
<span class="c"># Makefiles. Initially, all the .d files will be missing, and we don't want those</span>
<span class="c"># errors to show up.</span>
<span class="nt">-include</span> <span class="si">$(</span>DEPS<span class="si">)</span>
</pre></table></code></div></div><p>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/00codenote/'>00CodeNote</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/makefile/" class="post-tag no-text-decoration" >makefile</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Makefile - Grace&url=https://ocholuo.github.io//posts/Makefile/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Makefile - Grace&u=https://ocholuo.github.io//posts/Makefile/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Makefile - Grace&url=https://ocholuo.github.io//posts/Makefile/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Interview-Q/"><div class="card-body"> <span class="timeago small" >Feb 28, 2022<i class="unloaded">2022-02-28T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>遇到的 Interview Quetsions</h3><div class="text-muted small"><p> Question during interview AWS Streaming packet processing calculate number of 1s in the binary form. 1 亚麻order Apple ...</p></div></div></a></div><div class="card"> <a href="/posts/sql/"><div class="card-body"> <span class="timeago small" >Nov 1, 2020<i class="unloaded">2020-11-01T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>SQL Syntax</h3><div class="text-muted small"><p> SQL Syntax 4.1. Lexical Structure SQL input consists of a sequence of commands. A command is composed of a sequence of tokens, terminated by a semicolon (“;”). The end of the input stream a...</p></div></div></a></div><div class="card"> <a href="/posts/Github-model/"><div class="card-body"> <span class="timeago small" >Nov 11, 2020<i class="unloaded">2020-11-11T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>GitHub - A successful Git branching model</h3><div class="text-muted small"><p> A successful Git branching model The main branches Supporting branches Feature branches Release branches Hotfix branches ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Linux-BootProcessConcepts/" class="btn btn-outline-primary" prompt="Older"><p>Linux - Boot Process Concepts</p></a> <a href="/posts/shellscripts/" class="btn btn-outline-primary" prompt="Newer"><p>ShellScripts</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
