<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Virtualization - Container" /><meta property="og:locale" content="en" /><meta name="description" content="Virtualization - Container basic traditional virtualization containers virtualmachine (VM)-based vs container-based deployment. Container build and run containers containers component container image Docker file Container Registry software for container Best Practices for Securing AWS ECS Incident Readiness for Containers" /><meta property="og:description" content="Virtualization - Container basic traditional virtualization containers virtualmachine (VM)-based vs container-based deployment. Container build and run containers containers component container image Docker file Container Registry software for container Best Practices for Securing AWS ECS Incident Readiness for Containers" /><link rel="canonical" href="https://ocholuo.github.io//posts/Container/" /><meta property="og:url" content="https://ocholuo.github.io//posts/Container/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-11-26T10:11:11-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Virtualization - Container" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-30T21:02:21-04:00","datePublished":"2020-11-26T10:11:11-05:00","description":"Virtualization - Container basic traditional virtualization containers virtualmachine (VM)-based vs container-based deployment. Container build and run containers containers component container image Docker file Container Registry software for container Best Practices for Securing AWS ECS Incident Readiness for Containers","headline":"Virtualization - Container","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/Container/"},"url":"https://ocholuo.github.io//posts/Container/"}</script><title>Virtualization - Container | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Virtualization - Container</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Virtualization - Container</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Nov 26, 2020, 10:11 AM -0500" >Nov 26, 2020<i class="unloaded">2020-11-26T10:11:11-05:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Oct 30, 2022, 6:02 PM -0700" >Oct 30, 2022<i class="unloaded">2022-10-30T21:02:21-04:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2752 words">15 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><ul><li><a href="#virtualization---container">Virtualization - Container</a><ul><li><a href="#basic">basic</a><li><a href="#traditional">traditional</a><li><a href="#virtualization">virtualization</a><li><a href="#containers">containers</a><ul><li><a href="#virtualmachine-vm-based-vs-container-based-deployment">virtualmachine (VM)-based vs container-based deployment.</a></ul><li><a href="#container">Container</a><ul><li><a href="#build-and-run-containers">build and run containers</a></ul><li><a href="#containers-component">containers component</a><li><a href="#container-image">container image</a><li><a href="#docker-file">Docker file</a><li><a href="#container-registry">Container Registry</a><li><a href="#software-for-container">software for container</a><li><a href="#best-practices-for-securing-aws-ecs">Best Practices for Securing AWS ECS</a><li><a href="#incident-readiness-for-containers">Incident Readiness for Containers</a></ul></ul><hr /><h1 id="virtualization---container">Virtualization - Container</h1><hr /><h2 id="basic">basic</h2><p><img data-proofer-ignore data-src="https://i.imgur.com/iUnkAWY.png" alt="Screen Shot 2021-02-11 at 17.21.07" /></p><h2 id="traditional">traditional</h2><ul><li>deploy an application on its own physical computer.</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/KVMQ1Yk.png" alt="Screen Shot 2021-02-11 at 17.49.44" /></p><h2 id="virtualization">virtualization</h2><ul><li>takes less time to deploy new solutions<li>waste less of the resources on those physical computers<li>get some improved portability because virtual machines can be imaged and then moved around.</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/Edp2Re5.png" alt="Screen Shot 2021-02-11 at 17.49.28" /></p><h2 id="containers">containers</h2><ul><li>more efficient way to resolve the dependency problem<li>Implement abstraction at the level of the application and its dependencies.<li>not virtualize the entire machine /OS,<ul><li>but just the user space.<li>the user space is all the code that resides above the kernel, and includes the applications and their dependencies.</ul><li>An application and its dependencies are called an image.<ul><li>A container is simply a running instance of an image.<li>building software into Container images<li>and easily package and ship an application without worrying about the system it will be running on</ul></ul><hr /><h3 id="virtualmachine-vm-based-vs-container-based-deployment">virtualmachine (VM)-based vs container-based deployment.</h3><ul><li><img data-proofer-ignore data-src="https://i.imgur.com/xtbJiVc.png" alt="Container" /><li><img data-proofer-ignore data-src="https://i.imgur.com/SmOVHbs.png" alt="VM" /></ul><hr /><h2 id="container">Container</h2><p><img data-proofer-ignore data-src="https://i.imgur.com/pb2kD6d.png" width="400" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/IA6p81K.png" width="400" /></p><ul><li>a method of operating system virtualization<ul><li>give the environment independent scalability of workloads like PaaS<li>and an abstraction layer of the operating system and hardware, like IaaS</ul><li>fast, portable, and infrastructure-agnostic execution environment.<ul><li>next step in the evolution of managing code<li>containers as delivery vehicles for application code,<li>lightweight, stand-alone, resource efficient, portable execution packages.<li>an application-centric way to deliver <font color="blue"> high performance and scalable applications </font></ul><li>containers <font color="red"> share a virtualized operating system </font><ul><li> <font color="red"> run as resource-isolated processes </font><ul><li>smaller than virtual machines,<li>do not contain an entire operating system.</ul><li>starts as quickly as a new process.<ul><li>it visualize the os rather than the hardware.</ul></ul><li><p>isolated user spaces per running application code.</p><li><p>ensure <font color="red"> quick, reliable, and consistent deployments </font> of applications</p><ul><li>quick<ul><li>lightweight because they don’t carry a full operating system,<ul><li>can be scheduled or packed tightly onto the underlying system, which is very efficient.<li>can be created and shut down very quickly<ul><li>because just start/stop the processes that make up the application<li>not booting up an entire VM or initializing an OS for each application.</ul></ul><li>container images are usually an order of magnitude smaller than virtual machines.<li>Spinning up a container happens in hundreds of milliseconds.</ul><li>deliver <font color="red"> environmental consistency </font><ul><li>regardless of deployment environment.<li>makes the code very portable.<ul><li>treat the os and hardware as a black box.<li>can move the code from development, to staging, to production, or from the laptop to the Cloud without changing or rebuilding anything.</ul><li>all <font color="blue"> application's code, configurations, and dependencies </font> are packaged into a single object.<ul><li>a easy-to-use building blocks<li>Containers hold everything that the software needs to run,<ul><li> <font color="blue"> such as libraries, system tools, code, and the runtime </font></ul><li>the container’s the same and runs the same anywhere.</ul></ul></ul><li>operational efficiency,<ul><li>give more granular control over resources, which gives your infrastructure improved efficiency.</ul><li>developer productivity, and version control.<ul><li>You make incremental changes to a container based on a production image, you can deploy it very quickly with a single file copy, this speeds up your development process.</ul><li>execute your code on VMs without worrying about software dependencies<ul><li>like application run times, system tools, system libraries, and other settings.<li>package your code with all the dependencies it needs, and the engine that executes your container, is responsible for making them available at runtime.</ul><li>Microservices<ul><li>application are created using independent stateless components or microservices runningn in containers<li>loosely coupled, fine-grained components.<li>allows the operating system to scale and also upgrade components of an application without affecting the application as a whole.</ul></ul><p>use case:</p><ul><li>to scale a web server<ul><li>can do so in seconds<li>and deploy dozens or hundreds of them depending on the size of the workload on a single host.</ul><li>to build the applications using lots of Containers,<ul><li>each performing their own function, using the micro-services pattern.<li>The units of code running in these Containers can communicate with each other over a network fabric.</ul></ul><hr /><h3 id="build-and-run-containers">build and run containers</h3><blockquote><p>Google Cloud offers Cloud Build a managed service for building Containers.</p></blockquote><p>Docker</p><ul><li>to bundle an application and its dependencies into a Container.</ul><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="c1"># a Python web application
# uses the very popular Flask framework.
</span>
<span class="n">app</span><span class="p">.</span><span class="n">py</span>
<span class="kn">from</span> <span class="n">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="n">app</span> <span class="o">=</span> <span class="nc">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="c1"># - Whenever a web browser go to its top-most document, it replies "hello world".
</span><span class="nd">@app.route</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="k">return</span> <span class="s">"Hello World!</span><span class="se">\n</span><span class="s">"</span>
<span class="c1"># - Or if the browser instead appends/version to the request, the application replies with its version.
</span><span class="nd">@app.route</span><span class="p">(</span><span class="s">"/version"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="k">return</span> <span class="s">"Hello World!</span><span class="se">\n</span><span class="s">"</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">app</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s">'0.0.0.0'</span><span class="p">)</span>
</pre></table></code></div></div><ul><li>deploy this application</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>requirements.txt
<span class="c"># It needs a specific version of Python and a specific version of Flask, which we control using Python's requirements.txt file, together with its other dependencies too.</span>
<span class="nv">Flask</span><span class="o">==</span>0.12
<span class="nv">uwsgi</span><span class="o">==</span>2.0.15
</pre></table></code></div></div><ul><li>use a Docker file to specify how the code gets packaged into a Container.</ul><pre><code class="language-Docker">From ubuntu:18.10
RUN apt-get update -y
COPY requirement.txt /app/requirement.txt
WORKDIR /app
RUN pip3 install - r requirement.txt
COPY . /app
ENTRYPOINT ["python3", "app.py"]
</code></pre><ul><li>use the Docker build command to build the Container.</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># - builds the Container and stores it on the local system as a runnable image.</span>
docker build <span class="nt">-t</span> py-server <span class="nb">.</span>

<span class="c"># - to run the image.</span>
docker run <span class="nt">-d</span> py-server
</pre></table></code></div></div><hr /><h2 id="containers-component">containers component</h2><p>Containers power to isolate workloads is derived from the composition of several technologies.</p><ul><li>Linux process.<ul><li>One foundation is the Linux process.<li>Each Linux process has its own virtual memory address phase, separate from all others.<li>Linux processes are rapidly created and destroyed.</ul><li>Linux namespaces<ul><li>Containers use Linux namespaces to control what an application can see,<ul><li>process ID numbers, directory trees, IP addresses, and more.</ul><li>not the same thing as Kubernetes Namespaces</ul><li>Linux cgroups<ul><li>Containers use Linux cgroups to control what an application can use,<ul><li>its maximum consumption of CPU time, memory, IO bandwidth, other resources.</ul></ul><li>Union File Systems<ul><li>Containers use Union File Systems to efficiently encapsulate applications and their dependencies into a set of clean minimal layers.</ul></ul><hr /><h2 id="container-image">container image</h2><ul><li>A container image is structured in layers.<ul><li>The Container manifest:<ul><li>The file, tool to build the image reads instructions</ul><li>Docker formatted Container Image:<ul><li>Docker file.</ul></ul><li>Each instruction in the Docker file specifies a layer inside the container image.<ul><li>Each layer is, <code class="language-plaintext highlighter-rouge">Read only</code> When a Container runs from this image<li>have a writable ephemeral top-most layer.</ul></ul><p><img data-proofer-ignore data-src="https://i.imgur.com/idTIa2c.png" alt="Screen Shot 2021-02-11 at 19.22.35" /></p><hr /><h2 id="docker-file">Docker file</h2><p><img data-proofer-ignore data-src="https://i.imgur.com/Z1QHxsH.png" alt="Screen Shot 2021-02-11 at 19.24.35" /></p><ul><li>The From statement<ul><li>create a base layer pulled from a public repository.</ul><li>The Copy command<ul><li>adds a new layer<li>containing some files copied in from your build tools current directory.</ul><li>The Run command<ul><li>builds your application using the make command<li>and puts the result of the build into a third layer.</ul><li>CMD<ul><li>specifies what command to run within the container when it’s launched.</ul></ul><blockquote><p>the best practice is not to build your application in the very same container that you ship and run.</p></blockquote><ul><li>After all, your build tools are at best just cluttered and deployed Container and at worst, are an additional attack service.<ul><li>Today, Application Packaging relies on a multi-stage build process and one Container builds the final executable image.<li>A separate container receives only what’s needed to actually run the application.</ul></ul><p>Container layer</p><ul><li>When you launch a new container from an image, the Container Runtime adds a new writable layer on the top of the underlying layers.<ul><li>All changes made to the running container,<ul><li>such as writing new files, modifying existing files, and deleting files are written to this thin writable Container layer in their ephemeral</ul></ul><li>when the Containers deleted the contents of this writeable layer are lost forever.<ul><li>The underlying Container Image itself remains unchanged.</ul><li>to store data permanently<ul><li>do so somewhere other than a running container image.</ul><li>Because each Container has its own writable Container layer and all changes are stored in this layer.<ul><li>Multiple Containers can share access to the same underlying image and yet have their own data state.</ul><li>Because each layer is only a set of differences from the layer before it, you get smaller images.<ul><li>When you build a container<ul><li>instead of copying the whole image, it creates a layer with just the differences.</ul><li>When you run a container<ul><li>that Container Runtime pulls down the layers it needs.</ul><li>When you update<ul><li>only need to copy the difference<li>much faster than running a new virtual machine.</ul></ul></ul><hr /><h2 id="container-registry">Container Registry</h2><ol><li>download containerized software from a <font color="red"> container registry </font><ul><li>use publicly available open source Container images as a base for images or for unmodified use.<li>Google maintains a Container Registry, <code class="language-plaintext highlighter-rouge">gcr.Io</code>.<ul><li>contains many public, open source images<ul><li>find Container images and other public repositories, Docker Hub Registry, GitLab and others.</ul><li>Google Container Registry is integrated with Cloud IAM.<ul><li>can use it to store your images that aren’t public.<li>Instead, they’re private to your project.</ul></ul></ul><li>build your own container using <font color="red"> docker </font><ul><li>downside<ul><li>whoever building Containers with a Docker is that you must trust the computer that you do your builds on.<li>it doesn’t offer a way to orchestrate those applications at scale like Kubernetes does.</ul></ul><li>build your own container using <font color="red"> Cloud Build </font><ul><li>a managed service<li>for building Containers that’s also integrated with Cloud IAM.<li>Cloud build can retrieve the source code for your builds from a variety of different storage locations.<ul><li>Cloud Source Repositories, Cloud Storage, which is GCP is Object Storage service or git compatible repositories like GitHub and Bitbucket to generate a buildup Cloud Build, you define as series of steps.<li>example<ul><li>configure build steps to fetch dependencies, compile source code, run integration tests, or use tools such as Docker, Gradle, and Maven.<li>Each build step and Cloud build runs in a Docker container.<li>Then Cloud build can deliver your newly built images to various execution environments, not only GKE, but also App Engine and Cloud Functions.</ul></ul></ul></ol><p><img data-proofer-ignore data-src="https://i.imgur.com/Ks5ny3j.png" alt="Screen Shot 2021-02-11 at 22.23.06" /></p><hr /><h2 id="software-for-container">software for container</h2><p>software to build Container images and to run them.</p><ol><li>Docker for linux.<ul><li>open source technology<li>create and run applications in containers</ul><li><p>Windows Containers for win workloads.</p><li>Kubernetes<ul><li>make applications modular.<ul><li>They deploy it easily and scale independently across a group of hosts.</ul><li><p>The host can scale up and down, and start and stop Containers as demand for the application changes, or even as hosts fail and are replaced.</p><li>A tool that helps you do this well is Kubernetes.<ul><li>Kubernetes makes it easy to orchestrate many Containers on many hosts.<li>Scale them,<li>roll out new versions of them, and even roll back to the old version if things go wrong.</ul></ul></ol><hr /><h2 id="best-practices-for-securing-aws-ecs">Best Practices for Securing AWS ECS</h2><ol><li>Understand the AWS Shared Responsibility Model<li>Enforce a Zero-Trust Identity and Access Management (IAM) Policy<li>Ensure End-to-End Encryption for Secure Network Channels<li>Inject Secrets into Containers in Runtime<ol><li>Follow a zero-trust security policy in managing the Secrets definition parameters for AWS containers.<li>Secrets include login credentials, certificates and API keys used by applications and services to access other system components.<li>For example, use AWS Secrets manager for secure storage of Secrets credentials instead of baking them into the container.</ol><li>Regulatory Compliance as the Bare Minimum not target Security<ol><li>Follow the guidelines of the applicable security regulations in your country and industry, but treat them as a bare minimum and not an end-goal of your ECS security plan.<li>AWS helps deploy compliance-focused baseline environments especially focused on the following guidelines across most of the popular regulations such as HIPAA, PCI-DSS and GDPR, among others (some already mentioned) including understanding the shared responsibility model, enforcing strong IAM policy controls, leveraging the built-in tools / visibility provided by the cloud service provider and having the processes and technology in place to investigate and respond to incidents that may impact your ECS workloads.</ol><li>Gather the Right Data<ol><li>Configure your container environments to communicate relevant security data and log data to the built-in AWS monitoring tools such as CloudWatch and CloudTrail.<li>These tools can be used to collect data insights at the hardware, service, and cluster level.</ol><li>Best Practices for AWS Fargate:<ol><li>a serverless service that provides the option of fully managed and abstracted infrastructure for containerized applications managed using AWS ECS. The AWS Fargate service performs tasks such as provisioning, management, and security of the underlying container infrastructure while users simply specify the resource requirements for their containers.<li>The fully managed nature of Fargate is fantastic to reduce time and money spent worrying about failing drives or configuring operating systems, but this lack of infrastructure management comes with an equal lack of access. And this lack of access can add frustrations when it comes to security. Since AWS Fargate is a managed service, it offers no visibility and control into the underlying infrastructure. Due to this, it’s important that you leverage a third-party solution to allow for data collection from running containers should you need to investigate one.</ol><li>Construct Secure Container Images<ol><li>Container images consist of multiple layers, each defining the configurations, dependencies and libraries required to run a containerized application.<li>Security of container images should be seen as your first line of defense against cyberattacks or infringements facing your containerized applications. Constructing secure container images is critical to enforce container bounds and prevent adversaries from accessing the Host OS and Kernel.<li>A few ECS container image security best practices that should be considered include<ol><li>using minimal or distroless images,<li>image scanning for vulnerabilities,<li>and avoiding running containers as privileged.</ol></ol></ol><h2 id="incident-readiness-for-containers">Incident Readiness for Containers</h2><ul><li>When investigating an environment which utilizes containers, data collection needs to happen quickly before automatic cluster scaling destroys valuable evidence.<li>Additionally, you may have thousands of containers so the collection, processing, and enrichment of container data needs to be automated. Some of the key things to consider are:</ul><ol><li>Automated Data Collection<ol><li>Cloud scaling allows you to scale your investigation resources too, not just your applications. Collect and process container data in parallel triggered by an analyst or other detection or orchestration tool (e.g., SOAR) to get valuable information to analysts more quickly and reduce your time to incident containment and resolution.</ol><li>Level of Visibility<ol><li>While the visibility provided by built-in CSP tools (e.g. AWS CloudWatch and CloudTrail) is important, these data sources alone are not sufficient to perform an in-depth investigation.<li>Leveraging third-party incident and threat intelligence capabilities prove vital to gain a deeper level of visibility across container assets.<li>In this context, the useful data to include as part of your investigation are<ol><li>the system logs and files from within the container,<li>the containers running processes and active network connections,<li>the container host system and container runtime logs (if accessible),<li>the container host memory (if accessible) and the AWS VPC flow logs for the VPC the container is attached to.</ol><li>If data collection wasn’t baked into the container declaration before the need to investigate arose, you need to rely on data you can actively interrogate out of the container. Or if you’re using ECS on Fargate, taking an image of the running container or the container host isn’t an option as the underlying AWS infrastructure is shared with no access to the end customers.<li>In this case, the /proc directory gives us a snapshot of the volatile state of the container, much like a memory dump. Using this ‘snapshot’ we can build a basic picture of what is going on in the container at that time, such as running processes, active network connections, open files etc. This data provides a foundation of what you need to correlate with other data sources such as firewall logs, network subnet flows etc during an investigation to understand the actions carried out by an attacker.</ol><li>Container Asset Discovery<ol><li>Since containers operate as virtualized environments within a shared host kernel OS, it’s often challenging to keep track of <code class="language-plaintext highlighter-rouge">asset workloads</code> running across all containerized machines in a scaled environment.<li>An agentless discovery process that can efficiently discover and track container assets can be used to enforce appropriate security protocols across all container apps.</ol><li>Dedicated Investigation Tools and Environment<ol><li>Have a dedicated toolset or environment which automates as much of the investigative process as possible in place ahead of time so that you are ready to respond at a moment’s notice.</ol><li>Ability to Quickly Isolate<ol><li>In the event a container is compromised, it’s critical that you have the ability to quickly isolate it in order to stop the active attack and prevent further spread and damage. In some cases, isolation can be a good first step to take following initial detection. This will allow you to perform a more thorough investigation in the background and ensure proper remediation and containment steps are taken after you have a better understanding of the true scope and impact of the incident.</ol></ol><p>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/00basic/'>00Basic</a>, <a href='/categories/vmandcontainer/'>VMandContainer</a>, <a href='/categories/containers/'>Containers</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/linux/" class="post-tag no-text-decoration" >Linux</a> <a href="/tags/vms/" class="post-tag no-text-decoration" >VMs</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Virtualization - Container - Grace&url=https://ocholuo.github.io//posts/Container/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Virtualization - Container - Grace&u=https://ocholuo.github.io//posts/Container/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Virtualization - Container - Grace&url=https://ocholuo.github.io//posts/Container/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Docker-dev/"><div class="card-body"> <span class="timeago small" >Nov 26, 2020<i class="unloaded">2020-11-26T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Virtulization - DockerFile Develop</h3><div class="text-muted small"><p> DockerFile Develop Best practices for writing Dockerfiles General guidelines and recommendations Create ephemeral containers Understand build contex...</p></div></div></a></div><div class="card"> <a href="/posts/Docker-security/"><div class="card-body"> <span class="timeago small" >Nov 26, 2020<i class="unloaded">2020-11-26T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Virtulization - Docker security</h3><div class="text-muted small"><p> [toc] Docker security basic 评估 Docker 的安全性时，主要考虑三个方面: 由内核的命名空间和控制组机制提供的 容器内在安全 Docker 程序（特别是服务端）本身的抗攻击性 内核安全性的加强机制 对 容器安全性的影响 namespace Docker 容器和 LXC 容器很相似，所提供的安全特性也差不多。 当用 do...</p></div></div></a></div><div class="card"> <a href="/posts/kali-in-docker/"><div class="card-body"> <span class="timeago small" >Nov 26, 2020<i class="unloaded">2020-11-26T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Virtulization - Running Kali on Docker</h3><div class="text-muted small"><p> [toc] Running Kali on Docker 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 # Installing Docker on Linux $ sudo apt install docker.io # create folder # make a folder on our ho...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Docker-command/" class="btn btn-outline-primary" prompt="Older"><p>Docker Command</p></a> <a href="/posts/Docker-dev/" class="btn btn-outline-primary" prompt="Newer"><p>Virtulization - DockerFile Develop</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
