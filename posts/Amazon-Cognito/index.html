<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="AWS - IdenAccessManage - Amazon Cognito" /><meta property="og:locale" content="en" /><meta name="description" content="[toc]" /><meta property="og:description" content="[toc]" /><link rel="canonical" href="https://ocholuo.github.io//posts/Amazon-Cognito/" /><meta property="og:url" content="https://ocholuo.github.io//posts/Amazon-Cognito/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-07-18T11:11:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="AWS - IdenAccessManage - Amazon Cognito" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-01-02T18:36:22-05:00","datePublished":"2020-07-18T11:11:11-04:00","description":"[toc]","headline":"AWS - IdenAccessManage - Amazon Cognito","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/Amazon-Cognito/"},"url":"https://ocholuo.github.io//posts/Amazon-Cognito/"}</script><title>AWS - IdenAccessManage - Amazon Cognito | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>AWS - IdenAccessManage - Amazon Cognito</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>AWS - IdenAccessManage - Amazon Cognito</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Jul 18, 2020, 11:11 AM -0400" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Jan 2, 2023, 3:36 PM -0800" >Jan 2<i class="unloaded">2023-01-02T18:36:22-05:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2507 words">13 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><p>[toc]</p><hr /><h1 id="amazon-cognito">Amazon Cognito</h1><p><img data-proofer-ignore data-src="https://i.imgur.com/QqV5Uoe.png" alt="Cognito" /></p><font color="red"> web identity federation </font><ul><li>allows user to authenticate with a web identity ptovider (google, facebook)<li>the user authenticates first with the web id provider and receives and authentication token, and use it to exchanged for temporary AWS credenticals allowing them to assume an IAM role.</ul><p>Amazon Cognito provide <font color="red"> web identity federation </font> with the following features:</p><ol><li><p>Simple and Secure <font color="red"> User Sign-Up, Sign-In, and get access for guest users </font> to web and mobile apps.</p><li><p>provides <font color="red"> authentication, authorization, and user management </font> for web and mobile apps .</p><li>actes as an <font color="blue"> identity broker </font> between app and web id providers<ul><li>no additional code<li>no credentials is stored on the devices.</ul><li> <font color="red"> Access Control </font><p>to AWS resources from your application.</p><ul><li>define roles and map users to different roles,<li>so application can access only the resources that are authorized for each user.</ul><li> <font color="red"> seamless experience </font><p>across devices with Push Synchronization function.</p><ul><li>syncs user data for a seamless experience across your devices.<li>use Push Synchronization to send a silent push notification of user data updates to multiple devices associated with a user ID.</ul><li>uses common identity management standards, such as <font color="red"> Security Assertion Markup Language (SAML) 2.0 </font>.<ul><li>SAML: open standard for exchanging identity and security information with applications and service providers.<li>Applications and service providers that support SAML enable you to <code class="language-plaintext highlighter-rouge">sign in by using your corporate directory credentials</code> (user name and password from Microsoft Active Directory)<li>With SAML, you can use single sign-on (SSO) to sign in to all of your SAML-enabled applications by using a single set of credentials.</ul><li>meet multiple security and compliance requirements, including requirements for highly regulated organizations such as healthcare companies and merchants.<ul><li>eligible for use with the <code class="language-plaintext highlighter-rouge">US Health Insurance Portability and Accountability Act (HIPAA)</code>.<li>for workloads that are compliant with the <code class="language-plaintext highlighter-rouge">Payment Card Industry Data Security Standard(PCI DSS)</code>; <code class="language-plaintext highlighter-rouge">the American Institute of CPAs (AICPA)</code>, <code class="language-plaintext highlighter-rouge">Service Organization Control (SOC)</code>; <code class="language-plaintext highlighter-rouge">the International Organization for Standardization (ISO)</code> <code class="language-plaintext highlighter-rouge">and International Electrotechnical Commission (IEC)</code> <code class="language-plaintext highlighter-rouge">standardsISO/IEC 27001</code>, <code class="language-plaintext highlighter-rouge">ISO/IEC 27017</code>, and <code class="language-plaintext highlighter-rouge">ISO/IEC 27018</code>; and <code class="language-plaintext highlighter-rouge">ISO 9001</code></ul></ol><hr /><h2 id="-secure-and-scalable-user-directory-"><font color="red"> Secure and scalable user directory </font></h2><p><img data-proofer-ignore data-src="https://i.imgur.com/R0SLuZ1.png" alt="scenario-authentication-cup" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/UK7uxxF.png" alt="Screen Shot 2020-12-25 at 14.19.01" /></p><ul><li>The two main components of Amazon Cognito are <font color="red"> user pools and identity pools </font>.<ul><li>can use identity pools and user pools separately or together.<li><h2><img data-proofer-ignore data-src="https://i.imgur.com/nGMQv12.png" alt="Screen Shot 2020-12-25 at 14.10.07" /></h2></ul></ul><h3 id="user-pools">user pools</h3><ul><li> <font color="red"> secure user directories </font><ul><li>can scales to hundreds of millions of users.</ul><li> <font color="red"> provide sign-up and sign-in options </font><p>for web and mobile app users.</p><li>fully managed service, set up without any worries about standing up server infrastructure.<li>user can sign in directly to the user pool, or indirectly via an iderntity provider.</ul><ol><li>Getting Started with User Pools<ul><li>Prerequisite: Sign Up for an AWS Account<li>Step 1. Create a User Pool<ul><li><img data-proofer-ignore data-src="https://i.imgur.com/eSKnfun.png" alt="User Pool" /></ul><li>Step 2. Add an App to Enable the Hosted Web UI<ul><li><img data-proofer-ignore data-src="https://i.imgur.com/GewXuXa.png" alt="App client" /><li><code class="language-plaintext highlighter-rouge">callbackURL</code>: url redirect after user authentication.<li><code class="language-plaintext highlighter-rouge">Authorization code grant</code> cognito give back a authorization code which can provide back to the backend authorization process.<li><code class="language-plaintext highlighter-rouge">Implicit grant</code>: JWT token</ul><li>Step 3. Add Social Sign-in to a User Pool (Optional)<li>Step 4. Add Sign-in with a SAML Identity Provider to a User Pool (Optional)</ul></ol><hr /><h3 id="identity-pools-federated-identities">Identity pools (federated identities)</h3><ul><li> <font color="red"> create unique identities </font><p>for your users</p><li>and assign permissions for users.<li>and federate them with identity providers.<li>then obtain <font color="blue"> temporary, limited-privilege AWS credentials with permissions pre-define </font> to directly access other AWS services or to access resources through Amazon API Gateway.</ul><p>Identity pool can include:</p><ul><li>Users in an Amazon Cognito user pool<li>Users authenticate by external identity providers (Facebook, Google, Apple), or a SAML-based identity provider<li>Users authenticated via your own existing authentication process</ul><p>Amazon Cognito identity pools support the following identity providers:</p><ul><li>Public providers: Login with Amazon (Identity Pools), Facebook (Identity Pools), Google (Identity Pools), Sign in with Apple (Identity Pools).<li>Amazon Cognito User Pools<li>Open ID Connect Providers (Identity Pools)<li>SAML Identity Providers (Identity Pools)<li>Developer Authenticated Identities (Identity Pools)</ul><hr /><h4 id="identity-pools-federated-identities-authentication-flow">Identity Pools (Federated Identities) Authentication Flow</h4><p><strong>Enhanced (Simplified) Authflow</strong></p><ul><li>GetId<li>GetCredentialsForIdentity</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/d96X1nI.png" alt="amazon-cognito-ext-auth-enhanced-flow" /></p><p><strong>Basic (Classic) Authflow</strong></p><ul><li>GetId<li>GetOpenIdToken<li>AssumeRoleWithWebIdentity</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/yvlAZQW.png" alt="amazon-cognito-ext-auth-basic-flow" /></p><p><strong>Developer Authenticated Identities Authflow</strong></p><ul><li>When using Developer Authenticated Identities (Identity Pools), the client will use a different authflow that will include code outside of Amazon Cognito to validate the user in your own authentication system.<li>Code outside of Amazon Cognito is indicated as such.</ul><p>Enhanced Authflow</p><ul><li>Login via Developer Provider (code outside of Amazon Cognito)<li>Validate the user’s login (code outside of Amazon Cognito)<li>GetOpenIdTokenForDeveloperIdentity<li>GetCredentialsForIdentity</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/vamWrTi.png" alt="amazon-cognito-dev-auth-enhanced-flow" /></p><p>Basic Authflow</p><ul><li>Login via Developer Provider (code outside of Amazon Cognito)<li>Validate the user’s login (code outside of Amazon Cognito)<li>GetOpenIdTokenForDeveloperIdentity<li>AssumeRoleWithWebIdentity</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/6OkCmr9.png" alt="amazon-cognito-dev-auth-basic-flow" /></p><hr /><h2 id="amazon-cognito-sync">Amazon Cognito Sync</h2><p>Amazon Cognito Sync is an AWS service and client library that enables <font colore="red"> cross-device syncing </font> of application-related user data.</p><ul><li>You can synchronize user profile data across mobile and web without requiring your own backend.<li>Amazon Cognito Sync Server &amp; Client</ul><p>The client libraries cache data locally so your app can read and write data regardless of device connectivity status.</p><ul><li>When the device is online, you can synchronize data, and if you set up <code class="language-plaintext highlighter-rouge">push sync</code>, notify other devices immediately that an update is available.</ul><p>step:</p><ol><li>Sign Up for an AWS Account<li>Set Up an Identity Pool in Amazon Cognito<ul><li>Amazon Cognito Sync requires an Amazon Cognito identity pool to provide user identities. Thus you need to first set up an identity pool before using Amazon Cognito Sync.</ul><li>Store and Sync Data</ol><hr /><h3 id="synchronizing-data">Synchronizing Data</h3><p>Amazon Cognito lets you save end user data in datasets containing <font color="red"> key-value pairs </font>.</p><ul><li>This data is associated with an Amazon Cognito identity, so that it can be accessed across logins and devices.<li>To sync this data between the Amazon Cognito service and an end user’s devices, invoke the synchronize method.<li>Each dataset can have a maximum size of 1 MB. You can associate up to 20 datasets with an identity.</ul><p>The <code class="language-plaintext highlighter-rouge">Amazon Cognito Sync client</code> creates a <font color="red"> local cache </font> for the identity data.</p><ul><li>Your app talks to this local cache when it reads and writes keys.<ul><li>This guarantees that all changes on the device are immediately available on the device,<li>even when offline.</ul><li>When the synchronize method is called,<ul><li> <font color="blue"> changes from the service </font><p>are pulled to the device,</p><li>and <font color="blue"> any local changes </font> are pushed to the service.</ul><li>At this point the changes are available to other devices to synchronize.</ul><hr /><h3 id="setup-synchronize-code">setup Synchronize code</h3><ol><li> <font color="red"> Initializing </font><p>the Amazon Cognito Sync Client</p><ul><li>first need to create a <font color="blue"> credentials provider </font><li>The credentials provider acquires temporary AWS credentials to enable your app to access your AWS resources.<li>also need to import the required header files.</ul><li> <font color="red"> Understanding Datasets </font><ul><li>With Amazon Cognito, end user profile data is organized into <code class="language-plaintext highlighter-rouge">datasets</code>.<li>Each dataset can contain up to 1MB of data in the form of key-value pairs.<li>A dataset is the most granular entity on which you can perform a sync operation.<li>Read and write operations performed on a dataset only affect the local store until the synchronize method is invoked.<li>A dataset is identified by a unique string.<li>You can create a new dataset or open an existing one as shown in the following.</ul><li>delete a dataset<ul><li>first call the method to remove it from local storage,<li>then call the synchronize method to delete the dataset from Amazon Cognito:</ul><li>Reading and Writing Data in Datasets<ul><li>Amazon Cognito datasets function as dictionaries, with values accessible by key.<li>The keys and values of a dataset can be read, added, or modified just as if the dataset were a dictionary.<ul><li>that values written to a dataset only affect the local cached copy of the data until you call the synchronize method.</ul></ul><li>Synchronizing Local Data with the Sync Store Android<ul><li>The synchronize method compares <font color="blue"> local cached data </font> to the <font color="blue"> data stored in the Amazon Cognito Sync store </font><li>Remote changes are pulled from the <code class="language-plaintext highlighter-rouge">Amazon Cognito Sync store</code>;<li>conflict resolution is invoked if any conflicts occur;<li>and updated values on the device are pushed to the service.</ul></ol><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="c1">// Android</span>

<span class="c1">// to initialize the Amazon Cognito Sync client.</span>
<span class="kn">import</span> <span class="nn">com.amazonaws.mobileconnectors.cognito.*</span><span class="o">;</span>
<span class="nc">CognitoSyncManager</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CognitoSyncManager</span><span class="o">(</span>
    <span class="n">getApplicationContext</span><span class="o">(),</span>
    <span class="nc">Regions</span><span class="o">.</span><span class="na">YOUR_REGION</span><span class="o">,</span>
    <span class="n">credentialsProvider</span><span class="o">);</span>

<span class="c1">// setup Datasets</span>
<span class="nc">Dataset</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">openOrCreateDataset</span><span class="o">(</span><span class="s">"datasetname"</span><span class="o">);</span>

<span class="c1">// delete a dataset</span>
<span class="n">dataset</span><span class="o">.</span><span class="na">delete</span><span class="o">();</span>                  <span class="c1">// remove it from local storage,</span>
<span class="n">dataset</span><span class="o">.</span><span class="na">synchronize</span><span class="o">(</span><span class="n">syncCallback</span><span class="o">);</span> <span class="c1">//delete the dataset from Amazon Cognito:</span>

<span class="c1">// Reading and Writing Data in Datasets</span>
<span class="nc">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"myKey"</span><span class="o">);</span>
<span class="n">dataset</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"myKey"</span><span class="o">,</span> <span class="s">"my value"</span><span class="o">);</span>

<span class="c1">// synchronize a dataset</span>
<span class="n">dataset</span><span class="o">.</span><span class="na">synchronize</span><span class="o">(</span><span class="n">syncCallback</span><span class="o">);</span>
<span class="c1">// The synchronize method receives an implementation of the SyncCallback interface, discussed below.</span>
<span class="c1">// The synchronizeOnConnectivity() method attempts to synchronize when connectivity is available.</span>
<span class="c1">// If connectivity is immediately available, synchronizeOnConnectivity() behaves like synchronize().</span>
<span class="c1">// Otherwise it monitors for connectivity changes and performs a sync once connectivity is available.</span>
<span class="c1">// If synchronizeOnConnectivity()is called multiple times, only the last synchronize request is kept, and only the last callback will fire. If either the dataset or the callback is garbage-collected, this method won't perform a sync, and the callback won't fire.</span>



</pre></table></code></div></div><hr /><h3 id="push-sync">Push Sync</h3><p>Amazon Cognito automatically tracks the association between identity and devices. Using the push synchronization (push sync) feature</p><ul><li>ensure that every instance of a given identity is notified when identity data changes.<li>ensures that whenever the sync store data changes for a particular identity, all devices associated with that identity <font color-red=""> receive a silent push notification informing them of the change </font></ul><blockquote><p>Note: Push sync is not supported for JavaScript, Unity, or Xamarin.</p></blockquote><hr /><h4 id="setup-push-sync">setup push sync</h4><ol><li>Create an Amazon Simple Notification Service (Amazon SNS) App<li>Enable Push Sync in the Amazon Cognito console<ul><li><kbd>Amazon Cognito console</kbd> &gt; identity pool for which you want to enable push sync &gt; Dashboard &gt; <kbd>Manage Identity Pools</kbd><li>The <kbd>Federated Identities page</kbd> appears &gt; click <kbd>Push synchronization</kbd> to expand it &gt; <kbd>Service role</kbd> dropdown menu<ul><li>select IAM role that <font color="blue"> grants Cognito permission to send an SNS notification </font><ul><li>configure the IAM roles to have <code class="language-plaintext highlighter-rouge">full SNS access</code>,<li>or create a new role that <code class="language-plaintext highlighter-rouge">trusts cognito-sync</code> and has <code class="language-plaintext highlighter-rouge">full SNS access</code>.</ul></ul><li>Click Create role to create or modify the roles associated with your identity pool in the AWS IAM Console.<li>Select a platform application &gt; Save Changes.<li>Grant SNS Access to Your Application</ul></ol><blockquote><p>Amazon SNS is used to send a silent push notification to all the devies associated with a given user identity whenever data stored in the cloud changed.</p></blockquote><hr /><h2 id="aws-appsync">AWS AppSync</h2><p>If new to Amazon Cognito Sync, use AWS AppSync. Like Amazon Cognito Sync, AWS AppSync is a service for synchronizing application data across devices.</p><p>It enables user data like app preferences or game state to be synchronized. It also extends these capabilities by allowing multiple users to synchronize and collaborate in real time on shared data.</p><hr /><h2 id="security">security</h2><hr /><h3 id="data-protection">data protection</h3><p>For data protection purposes, recommend that</p><ul><li>protect AWS account credentials<li>set up individual user accounts with AWS IAM.<li>given only the permissions necessary for job duties<li>Use <font color="red"> multi-factor authentication (MFA) </font> with each account.<li>Use <font color="red"> SSL/TLS </font> to communicate with AWS resources.<li> <font color="red"> Set up API and user activity logging </font><p>with AWS CloudTrail.</p><li>Use AWS encryption solutions, along with all default security controls within AWS services.<li>Use advanced managed security services such as Amazon Macie, which assists in discovering and securing personal data that is stored in Amazon S3.<li>never put sensitive identifying information, such as customers’ account numbers, into free-form fields such as a Name field.<ul><li>This includes when you work with Amazon Cognito or other AWS services using the console, API, AWS CLI, or AWS SDKs.<li>Any data that you enter into Amazon Cognito or other services might get picked up for inclusion in diagnostic logs.<li>When you provide a URL to an external server, don’t include credentials information in the URL to validate your request to that server.</ul></ul><h3 id="use-amazon-resource-names-arns">use Amazon Resource Names (ARNs)</h3><ol><li>ARNs for Amazon Cognito Federated Identities<ul><li>restrict an IAM user’s access to a specific identity pool, using the Amazon Resource Name (ARN) format<li>arn:aws:<strong>cognito-identity</strong>:<code class="language-plaintext highlighter-rouge">REGION:ACCOUNT_ID</code>:identitypool/<code class="language-plaintext highlighter-rouge">IDENTITY_POOL_ID</code></ul><li>ARNs for Amazon Cognito Sync<ul><li>customers can also restrict access by the identity pool ID, identity ID, and dataset name.<li>For APIs that operate on an identity pool, the identity pool ARN format is the same as for Amazon Cognito Federated Identities, except that the service name is cognito-sync instead of cognito-identity:<ul><li>arn:aws:<strong>cognito-sync</strong>:<code class="language-plaintext highlighter-rouge">REGION:ACCOUNT_ID</code>:identitypool/<code class="language-plaintext highlighter-rouge">IDENTITY_POOL_ID</code></ul><li>For APIs that operate on a single identity, such as RegisterDevice, refer to the individual identity by the following ARN format:<ul><li>arn:aws:<strong>cognito-sync</strong>:<code class="language-plaintext highlighter-rouge">REGION:ACCOUNT_ID</code>:identitypool/<code class="language-plaintext highlighter-rouge">IDENTITY_POOL_ID</code>/identity/<code class="language-plaintext highlighter-rouge">IDENTITY_ID</code></ul><li>For APIs that operate on datasets, such as UpdateRecords and ListRecords, refer to the individual dataset using the following ARN format:<ul><li>arn:aws:<strong>cognito-sync</strong>:<code class="language-plaintext highlighter-rouge">REGION:ACCOUNT_ID</code>:identitypool/<code class="language-plaintext highlighter-rouge">IDENTITY_POOL_ID</code>/identity/<code class="language-plaintext highlighter-rouge">IDENTITY_ID</code>/dataset/<code class="language-plaintext highlighter-rouge">DATASET_NAME</code></ul></ul><li>ARNs for Amazon Cognito User Pools<ul><li>restrict an IAM user’s access to a specific user pool<li>arn:aws:<strong>cognito-idp</strong>:<code class="language-plaintext highlighter-rouge">REGION:ACCOUNT_ID</code>:userpool/<code class="language-plaintext highlighter-rouge">USER_POOL_ID</code></ul></ol><h3 id="logging-in-and-monitoring-in-amazon-cognito">Logging in and Monitoring in Amazon Cognito</h3><p>Monitoring is an important part of maintaining the reliability, availability, and performance of Amazon Cognito and your other AWS solutions.</p><p>Amazon Cognito currently supports the following two AWS services</p><ul><li>Amazon CloudWatch Metrics<ul><li>monitor, report and take automatic actions in case of an event in near real time.<li>For example<li>create CloudWatch dashboards on the provided metrics to monitor your Amazon Cognito user pools<li>create CloudWatch alarms on the provided metrics to notify you on breach of a set threshold.</ul><li>AWS CloudTrail<ul><li>capture API calls from the Amazon Cognito console and from code calls to the Amazon Cognito API operations.<li>For example<li>when a user authenticates, CloudTrail can record details such as the IP address in the request, who made the request, and when it was made.</ul></ul><h3 id="infrastructure-security-in-amazon-cognito">Infrastructure Security in Amazon Cognito</h3><p>use AWS published API calls to access Amazon Cognito through the network.</p><ul><li>Clients must support Transport Layer Security (TLS) 1.0 or later. We recommend TLS 1.2 or later.<li>Clients must also support cipher suites with perfect forward secrecy (PFS) such as Ephemeral Diffie-Hellman (DHE) or Elliptic Curve Ephemeral Diffie-Hellman (ECDHE).<li>Most modern systems such as Java 7 and later support these modes.<li>requests must be signed using an access key ID and a secret access key that is associated with an IAM principal.<li>Or use the AWS Security Token Service (AWS STS) to generate temporary security credentials to sign requests.</ul><h3 id="security-best-practices-for-amazon-cognito-user-pools">Security Best Practices for Amazon Cognito User Pools</h3><ul><li><p>add <font color="red"> multi-factor authentication (MFA) </font> to a user pool to protect the identity of your users. choose to use SMS text messages, or time-based one-time (TOTP) passwords</p><li>user pool <font color="red"> advanced security features </font><ul><li> <font color="red"> protections against compromised credentials </font><ul><li>detect if a user’s credentials (user name and password) have been compromised elsewhere.<li>This can happen when users reuse credentials at more than one site, or when they use passwords that are easy to guess.</ul><li> <font color="red"> adaptive authentication </font><ul><li>use adaptive authentication with its <font color="blue"> risk-based model </font> to predict when you might need another authentication factor.<li>configure user pool to block suspicious sign-ins or add second factor authentication in response to an increased risk level.<li>For each sign-in attempt, Amazon Cognito generates a risk score for how likely the sign-in request is to be from a compromised source.<ul><li>This risk score is based on many factors<li>including whether it detects a new device, user location, or IP address.</ul><li>Adaptive Authentication adds MFA based on risk level for users who don’t have an MFA type enabled at the user level.<ul><li>When an MFA type is enabled at the user level, those users will always receive the second factor challenge during authentication regardless of how you configured adaptive authentication.</ul></ul></ul><li>Amazon Cognito publishes sign-in attempts, their risk levels, and failed challenges to Amazon CloudWatch.</ul><p>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/01aws/'>01AWS</a>, <a href='/categories/idenaccessmanage/'>IdenAccessManage</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/aws/" class="post-tag no-text-decoration" >AWS</a> <a href="/tags/idenaccessmanage/" class="post-tag no-text-decoration" >IdenAccessManage</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AWS - IdenAccessManage - Amazon Cognito - Grace&url=https://ocholuo.github.io//posts/Amazon-Cognito/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AWS - IdenAccessManage - Amazon Cognito - Grace&u=https://ocholuo.github.io//posts/Amazon-Cognito/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=AWS - IdenAccessManage - Amazon Cognito - Grace&url=https://ocholuo.github.io//posts/Amazon-Cognito/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/IAM-Service/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - IdenAccessManage - AWS services that work with IAM</h3><div class="text-muted small"><p> AWS services that work with IAM Compute services Containers services Storage services Database services Developer tools services Security, identity, and ...</p></div></div></a></div><div class="card"> <a href="/posts/IAM-User-Login/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - IdenAccessManage - IAM User Login</h3><div class="text-muted small"><p> IAM User Login Console password: Security Token Service Server certificates: if your account compromised IAM User Login The following diagram shows th...</p></div></div></a></div><div class="card"> <a href="/posts/IAM/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - IdenAccessManage - IAM (Identity and Access Management)</h3><div class="text-muted small"><p> AWS - IAM Identity and Access Management IAM BEST PRACTICES basics to use AWS IAM essential components The IAM console IAM p...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/AWS-organizations/" class="btn btn-outline-primary" prompt="Older"><p>AWS - IdenAccessManage - AWS Organizations and SCP</p></a> <a href="/posts/Gsuite/" class="btn btn-outline-primary" prompt="Newer"><p>AWS - IdenAccessManage - Setup the GSuite for AWS SSO</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
