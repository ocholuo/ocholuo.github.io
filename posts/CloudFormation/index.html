<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="AWS - CodeDevelop - CloudFormation" /><meta property="og:locale" content="en" /><meta name="description" content="[toc]" /><meta property="og:description" content="[toc]" /><link rel="canonical" href="https://ocholuo.github.io//posts/CloudFormation/" /><meta property="og:url" content="https://ocholuo.github.io//posts/CloudFormation/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-07-18T11:11:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="AWS - CodeDevelop - CloudFormation" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-01-02T18:36:27-05:00","datePublished":"2020-07-18T11:11:11-04:00","description":"[toc]","headline":"AWS - CodeDevelop - CloudFormation","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/CloudFormation/"},"url":"https://ocholuo.github.io//posts/CloudFormation/"}</script><title>AWS - CodeDevelop - CloudFormation | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>AWS - CodeDevelop - CloudFormation</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>AWS - CodeDevelop - CloudFormation</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Jul 18, 2020, 11:11 AM -0400" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Jan 2, 2023, 3:36 PM -0800" >Jan 2<i class="unloaded">2023-01-02T18:36:27-05:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="7971 words">44 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><p>[toc]</p><hr /><h1 id="aws-cloudformation">AWS CloudFormation</h1><blockquote><p>Infrastructure as code solution.</p></blockquote><p><img data-proofer-ignore data-src="https://i.imgur.com/nt8tRpD.png" alt="Screen Shot 2021-01-18 at 16.28.28" /></p><hr /><h2 id="benefits">benefits</h2><ol><li> <font color="red"> manage, configure and provision the AWS infrastructure as code </font><ul><li>repeatedly and predictably model and provision resources<li>infrastructure is provisioned consistently<ul><li>fewer mistakes<li>less time and effort than configure manually</ul></ul><li> <font color="red"> Supports almost all the AWS services and programmable </font><ul><li>provision a broad range of AWS resources.<ul><li> <font color="blue"> compare </font><li> <font color="blue"> Elastic Beanstalk </font><ul><li>more focused on deploying web applications on EC2 <li>PaaS</ul><li> <font color="blue"> CloudFormation </font><ul><li>can deploy Elastic Beanstalk-hosted applications<li>however the reverse is not possible.</ul></ul></ul><li>resources are <font color="red"> defined by CloudFormation template </font><ul><li>Supports YAML and JSON<ul><li>Logical IDs: reference resources within the template.<li>Physical IDs: identify resources outside of AWS CloudFormation templates, but only after the resources have been created.</ul></ul><li><p>CloudFormation <font color="red"> interprets the template and makes the appropriate API calls </font> to create the resources defined.</p><li> <font color="red"> version control </font><p>and peer review the templates</p><ul><li>can be used to manage updates &amp; dependencies<li>can be used to rollback and delete the entire stack as well</ul><li>AWS CloudFormation provides 2 methods for <font color="red"> updating stacks </font><ul><li> <font color="red"> direct update a stack </font><ul><li>submit changes<li>AWS CloudFormation immediately deploys them.<li>Use direct updates to quickly deploy the updates.</ul><li>creating and executing <font color="red"> change sets </font><ul><li>preview the changes AWS CloudFormation will make to your stack<li>and then decide whether to apply those changes.</ul></ul><li>free service (resources created would be charged)</ol><hr /><h2 id="templates-stacks-and-change-sets">templates, stacks and change sets:</h2><p><img data-proofer-ignore data-src="https://i.imgur.com/zu1yJYA.png" alt="CloudFormation" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/71RbCIM.jpg" alt="Pasted Graphic" /></p><hr /><h3 id="template">Template</h3><p>template is used to <font color="red"> describe the endstate of the infrastructure either provisioning or changing </font></p><ol><li>after created, upload it to CloudFormation using S3<li>CloudFormation reads the template and makes the API calls<li>the resulting resources are called a <font color="red"> Stack </font></ol><p>CloudFormation template</p><ul><li>create templates to launch, configure, and connect AWS resources<ul><li>standard templates for deploying infrastructure</ul><li>template can be stored in CodeCommit<ul><li>maintain a history of the template and the infrastructure that has been deployed.</ul><li>CloudFormation determines the order of provisioning.<ul><li>easy way to create a collection of related AWS resources and provision them in an orderly and predictable fashion.<li>Don’t need to worry about dependencies.<li>Architectural designs.</ul><li>Treat it as code<ul><li>manage it by using version control, such as Gitor Subversion<li>Create, update and delete templates.</ul><li>is the <font color="red"> single source of truth </font> for cloud environment.<ul><li>Define an entire application stack (all the resources required for application) in a JSON template file.<li>provides a common language to to model, describe and provision all the infrastructure resources and properties in the cloud environment.<li>model and provision in an automated and secure manner all the resources needed for your applications across all regions and accounts.</ul><li>Define runtime parameters for a template<ul><li>such as EC2—Instance Size, Amazon EC2 Key Pair, etc.</ul></ul><p>Templates can be created by</p><ul><li>code editor supports JSON syntax, (Atom or Sublime Text)<li>third party WYSIWYG editor<li>build visually by CloudFormation Designer tool<ul><li>Available in AWS Management Console<li>allows visualize using a drag and drop interface.<li>drag and drop resources onto a design area to automatically generate a JSON/YAML-formatted CloudFormation template<li>edite properties of the JSON or YAML template on same page.<li>can open and edite Existing CloudFormation templates</ul></ul><p>YAML or JSON</p><ul><li>JavaScript Object Notation (JSON) / YAML-formatted templates.<li>Both YAML/JSON-formatted templates have the same structure, support all the same feature</ul><font color="red"> do not recommend </font><ul><li>build all of an application’s within one template<ul><li>Resources should be grouped into templates<li>based on the ownership and the place in the application lifecycle.<li>minimum should separate network, security, and application resources into own templates.</ul><li>test environment and production environment should not share same templates.<ul><li>Resources in a test environment need to change frequently<li>resources in a production environment should be relatively stable.</ul><li>sharing templates across management teams<ul><li>because different needs and standards can impact teams inappropriately.</ul></ul><p>Organizing template:</p><ul><li>Avoid sharing a single template across applications for resources of the same type<ul><li>unless you are deliberately centralizing control of that resource type.<li>no too many things inside of one template across numerous applications.<li>application template that supports several applications,<ul><li>changes to the template will affect several applications<li>changes can cause all of the applications to be retested.</ul></ul><li>share template could potentially break<ul><li>things that are specific to your environment,<ul><li>such as Amazon EC2 key pairs, security group names, subnet IDs, and EBS—snapshot IDs.</ul><li>It can be fixed by using parameters, mappings, and condition section in temple.</ul><li>storing templates contain security resources in a separate repository from other templates.</ul><p>Template elements:</p><ul><li>Mandatory:<ul><li>File format and version.<li>List of resources and associated configuration values.</ul><li>Not Mandatory:<ul><li>Template parameters (limited to 60).<li>Output values (limited to 60).<li>List of data tables.</ul></ul><hr /><h3 id="engine">Engine:</h3><ul><li>Aws service component<li>Interprets AWS cloudFormation template into stacks of AWS resources.</ul><hr /><h3 id="group">Group:</h3><p><img data-proofer-ignore data-src="https://i.imgur.com/k3VHJRq.png" alt="Screen Shot 2020-06-26 at 10.10.37" /></p><ul><li>allows you to quickly provision a test environment to investigate possible breaches into your EC2 instance.<li>Puppet and Chef integration is supported.<li>Can use bootstrap scripts.<li>Can define deletion policies.<li>Can create roles in IAM.<li>VPCs can be created and customized.<li>VPC peering in the same AWS account can be performed.<li>Route 53 is supported.</ul><hr /><h3 id="stack">Stack</h3><hr /><h4 id="stack-1">Stack</h4><ol><li> <font color="red"> A collection of resources </font><p>created by AWS cloudFormation templates</p><ul><li>All the resources in a stack are defined by the stack’s <code class="language-plaintext highlighter-rouge">AWS CloudFormation template</code>.<ul><li>Deployed resources based on templates.<li>Create, update and delete stacks using templates.<li>Deployed through the Management Console, CLI or APIs.<li>Tracked and reviewable in the AWS management console</ul></ul><li>a collection of AWS resources that can <font color="red"> manage as a single unit </font><ul><li>AWS CloudFormation treats the stack resources as a single unit<li>create, update, or delete a collection of resources by <font color="blue"> creating, updating, or deleting stacks </font><li>Example:<ul><li>A stack can include all the resources required to run a web application<ul><li>such as a web server, a database, and networking rules.</ul><li>If no longer require that web application, simply delete the stack, and all of its related resources are deleted.</ul></ul><li>AWS CloudFormation ensures all <code class="language-plaintext highlighter-rouge">stack resources</code> are created or deleted as appropriate.<ul><li>If a resource cannot be created, AWS CloudFormation rolls the stack back and automatically deletes any resources that were created.<li>If a resource cannot be deleted, any remaining resources are retained until the stack can be successfully deleted.<li>can work with stacks by using the AWS CloudFormation console, API, or AWS CLI.</ul><li>Stacks can’t create logical resources<ul><li>stack listens to the direction of a template containing logical resources.<ul><li>template describes a stack,<ul><li>a collection of AWS resources want to deploy together as a group.</ul><li>stack manages physical resources based on a logical resource template<li>stack making resources through the direction of a template.</ul><li>Actions to resources can be tracked in CloudFormation’s stack details.</ul><li>Stacks control resources<ul><li>if a stack is removed, the resource also be deleted, so are the resources that it created.<li>Stacks could disrupt a resource when performing updates to the resource.</ul><li>Stack creation errors:<ul><li>Automatic rollback on error is enabled by default.<li>will be charged for resources provisioned even if there is an error.</ul></ol><hr /><h4 id="nested-stacks">Nested stacks</h4><ol><li><p>Nested stacks are <font color="red"> stacks created as part of other stacks </font></p><li>Use nested stacks <font color="red"> to declare common components (best practice) </font><ul><li>allow <font color="blue"> re-use of CloudFormation code for common use cases </font><ul><li>such as standard configuration for load balancer, web server, application server, etc.</ul><li>As infrastructure grows, declare the same components in multiple templates<ul><li>separate out these common components and create a standard dedicated templates for each common use case<li>store it in S3<li>and refenrece it in the Resources section of other template using the Stack resource type<li><code class="language-plaintext highlighter-rouge">Resources: Type: AWS::CloudFormation::Stack</code></ul><li>Example:<ul><li>a load balancer configuration that use for most of the stacks.<li>Instead of copying and pasting the same configurations into the templates,<li>create a dedicated template for the load balancer.<li>Then, just use the resource to reference that template from within other templates.</ul></ul><li>Nested stacks can contain other nested stacks,<ul><li>resulting in a <font color="blue"> hierarchy of stacks </font></ul><li>Certain stack operations, such as stack updates, should be initiated from the <code class="language-plaintext highlighter-rouge">root stack</code> rather than performed directly on <code class="language-plaintext highlighter-rouge">nested stacks themselves</code>.</ol><hr /><p>Example:</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>Resources:
  Type: AWS::CloudFormation::Stack
  Properties:
    NotificationARNs:
      - String
    Parameters:
      AWS CloudFormation Stack Parameters
    Tags:
      - Resource Tag
    TemplateURL: https://s3.amazonaws.com/.../template.yml
    TimeoutInMinutes: Integer
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://i.imgur.com/TU6BesT.png" width="200" /></p><p>The <font color="red"> root stack </font></p><ul><li>the top-level stack to which all the nested stacks ultimately belong.<li>each nested stack has an immediate parent stack.<li>For the first level of nested stacks, the root stack is also the parent stack.</ul><blockquote><p>Stack A is the <code class="language-plaintext highlighter-rouge">root stack</code> for all the other, nested, stacks in the hierarchy. For stack B, stack A is both the <code class="language-plaintext highlighter-rouge">parent stack</code>, as well as the <code class="language-plaintext highlighter-rouge">root stack</code>. For stack D, stack C is the <code class="language-plaintext highlighter-rouge">parent stack</code>; for stack C, stack B is the <code class="language-plaintext highlighter-rouge">parent stack</code>.</p></blockquote><ol><li><kbd>AWS Management Console</kbd> -&gt; <kbd>AWS CloudFormation console</kbd> -&gt; Select the <kbd>stack</kbd><li>Nested stacks display <code class="language-plaintext highlighter-rouge">NESTED</code> next to the stack name.<li> <font color="red"> To view the root stack of a nested stack </font><ul><li><kbd>Overview tab</kbd>: click the stack name listed as <code class="language-plaintext highlighter-rouge">Root stack</code>.</ul><li> <font color="red"> To view the nested stacks that belong to a root stack </font><ul><li><kbd>AWS CloudFormation console</kbd> -&gt; Click the name of the root stack whose nested stacks want to view.<li>Expand the <kbd>Resources</kbd> section.<li>Look for resources of type <code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Stack</code>.</ul></ol><hr /><h4 id="cross-stack-references">Cross stack references</h4><ul><li>share outputs from one stack with another stack.<ul><li>share things like IAM—roles, VPC—information, and security groups.<li>Before, use AWS CloudFormation custom resources to accomplish these tasks.<li>Now, export values from one stack and import them to another stack by using the new ImportValueintrinsic function.</ul><li>useful for customers who<ul><li>separate their AWS infrastructure into logical components that grouped by stack<ul><li>such as a network stack, an application stack, etc.</ul><li>need a way to loosely couple stacks together as an alternative to nested stacks</ul></ul><hr /><h3 id="stacksets">StackSets.</h3><p>AWS CloudFormation StackSets</p><ul><li><p>extends the functionality of stacks by enabling <font color="red"> create, update, or delete stacks across multiple accounts and regions with a single operation </font></p><li>An administrator account<ul><li>the AWS account in which you create stack sets.<li>define and manage an AWS CloudFormation template<li>use the template as the basis for provisioning stacks into selected target accounts across specified regions.<li>A stack set is managed by signing in to the AWS administrator account in which it was created.</ul><li>A target account<ul><li>the account into which you create, update, or delete one or more stacks in your stack set.<li>Before use a stack set to create stacks in a target account, must set up a trust relationship between the administrator and target accounts.</ul></ul><hr /><h2 id="best-practices">Best Practices.</h2><ul><li>AWS provides Python “helper scripts” which can help you install software and start services on your EC2 instances.<li>Use CloudFormation to make changes to your landscape rather than going directly into the resources.<li>Make use of Change Sets to identify potential trouble spots in your updates.<li>Use Stack Policies to explicitly protect sensitive portions of your stack.<li>Use a version control system such as CodeCommit or GitHub to track changes to templates.</ul><hr /><h2 id="charges">Charges:</h2><ul><li>no additional charge for AWS CloudFormation.<li>pay for AWS resources (such as EC2 instances, ELB load balancers, etc.) created using AWS CloudFormation in the same manner as if you created them manually.<li>only pay for what you use, as you use it;<li>there are no minimum fees and no required upfront commitments.</ul><hr /><h1 id="setup">setup</h1><ol><li>cloudformation<li>create stack<ol><li>select template<li>stack name<li>keypaire<li>rollback on failure</ol><li>delete stack</ol><hr /><h1 id="cloudformationtemplateyml">CloudFormationTemplate.yml</h1><div class="language-yml highlighter-rouge"><div class="code-header" text-data="yml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
</pre><td class="rouge-code"><pre><span class="na">AWSTemplateFormatVersion</span><span class="pi">:</span> <span class="s">2010-09-09</span>

<span class="c1"># text string that describes the template</span>
<span class="na">Description</span><span class="pi">:</span> <span class="s">Template to create an EC2 instance and enable SSH</span>



<span class="c1"># data about the data, Some AWS CloudFormation features retrieve settings or configuration information that you define from the Metadata section.</span>
<span class="na">Metadata</span><span class="pi">:</span>



<span class="c1"># input custom values, pass the value of your template at runtime.</span>
<span class="na">Parameters</span><span class="pi">:</span>
  <span class="na">KeyName</span><span class="pi">:</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s">Name of SSH KeyPair</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS::EC2::KeyPair::KeyName'</span>
    <span class="na">ConstraintDescription</span><span class="pi">:</span> <span class="s">Provide the name of an existing SSH key pair</span>
  <span class="na">InstanceTypeParameter</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">String</span>
    <span class="na">Default</span><span class="pi">:</span> <span class="s">t2.micro</span>
    <span class="na">AllowedValues</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">t2.micro"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">m1.small"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">m1.large"</span><span class="pi">]</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Enter</span><span class="nv"> </span><span class="s">t2.micro,</span><span class="nv"> </span><span class="s">m1.small</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">m1.large'</span>



<span class="c1"># provision resources based on environment</span>
<span class="na">Conditions</span><span class="pi">:</span>



<span class="c1"># Mandatory</span>
<span class="c1"># the AWS resource be included / created in the stack</span>
<span class="na">Resources</span><span class="pi">:</span>
  <span class="c1"># Logical ID:</span>
  <span class="c1">#   Type: 'ARNs'</span>
  <span class="c1">#   Properties:</span>
  <span class="na">MyEC2Instance</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS::EC2::Instance'</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="c1"># InstanceType: t2.micro</span>
      <span class="na">InstanceType</span><span class="pi">:</span> <span class="s">('Ref'</span><span class="err">:</span> <span class="s">InstanceTypeParameter)</span>
      <span class="na">ImageId</span><span class="pi">:</span> <span class="s">ami-0bdb1d6c15a40392c</span>
      <span class="na">KeyName</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">KeyName</span>
      <span class="na">SecurityGroups</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="na">Ref</span><span class="pi">:</span> <span class="s">InstanceSecurityGroup</span>
      <span class="na">Tags</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">Key</span><span class="pi">:</span> <span class="s">Name</span>
          <span class="na">Value</span><span class="pi">:</span> <span class="s">My CF Instance</span>
      <span class="c1"># How AWS CloudFormation should wait to launch a resource</span>
      <span class="c1"># until a specific, different resource has finished being created.</span>
      <span class="na">DependsOn</span><span class="pi">:</span> <span class="s">myDB</span>
  <span class="na">InstanceSecurityGroup</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS::EC2::SecurityGroup'</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">GroupDescription</span><span class="pi">:</span> <span class="s">Enable SSH access via port </span><span class="m">22</span>
      <span class="na">SecurityGroupIngress</span><span class="pi">:</span>
        <span class="na">IpProtocol</span><span class="pi">:</span> <span class="s">tcp</span>
        <span class="na">FromPort</span><span class="pi">:</span> <span class="m">22</span>
        <span class="na">ToPort</span><span class="pi">:</span> <span class="m">22</span>
        <span class="na">CidrIp</span><span class="pi">:</span> <span class="s">0.0.0.0/0</span>


<span class="c1"># create custom mappings</span>
<span class="c1"># like different Region for different AMI</span>
<span class="c1"># customize the properties of a resource based on certain conditions, which enables you to have fine-grained control over how your templates are launched.</span>
<span class="na">Mappings</span><span class="pi">:</span>
  <span class="na">RegionMap</span><span class="pi">:</span>
    <span class="na">us-east-1: (t2.micro</span><span class="pi">:</span> <span class="s">ami-0bdb1d6c15a40392c)</span>
    <span class="na">us-west-1: (t2.micro</span><span class="pi">:</span> <span class="s">ami-0bdb1d6c15a40392c)</span>

<span class="c1"># reference code located in S3</span>
<span class="c1"># Lambda code or reusable snippets of CloudFormation code</span>
<span class="na">Transforms</span><span class="pi">:</span>


<span class="c1"># values that are returned whenever you view the properties of your stack.</span>
<span class="na">Outputs</span><span class="pi">:</span>
  <span class="na">InstanceID</span><span class="pi">:</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s">The Instance ID</span>
    <span class="na">Value</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">MyEC2Instance</span>
</pre></table></code></div></div><hr /><h1 id="template-section">template Section</h1><hr /><h2 id="intrinsic-function-reference">Intrinsic function reference</h2><h3 id="ref">Ref</h3><ul><li>provided <code class="language-plaintext highlighter-rouge">logical ID of this resource</code> to the Ref intrinsic function,<li>Ref returns <code class="language-plaintext highlighter-rouge">the resource name</code>.</ul><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="pi">{</span> <span class="s2">"</span><span class="s">Ref"</span><span class="pi">:</span> <span class="s2">"</span><span class="s">RootRole"</span> <span class="pi">}</span>
<span class="c1"># Ref will return the role name for the AWS::IAM::Role resource with the logical ID "RootRole"</span>


<span class="na">MyEIP</span><span class="pi">:</span>
  <span class="na">Type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">AWS::EC2::EIP"</span>
  <span class="na">Properties</span><span class="pi">:</span>
    <span class="na">InstanceId</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">MyEC2Instance</span>
</pre></table></code></div></div><h3 id="fngetatt">Fn::GetAtt</h3><ul><li>returns the value of an attribute from a resource in the template<li>returns a value for a specified attribute of this type.<li>The following are the available attributes and sample return values.</ul><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="pi">{</span><span class="s2">"</span><span class="s">Fn::GetAtt"</span> <span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">MyRole"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">Arn"</span><span class="pi">]</span> <span class="pi">}</span>
<span class="c1"># Returns the Amazon Resource Name (ARN) for the role.</span>
<span class="c1"># This will return a value such as arn:aws:iam::1234567890:role/MyRole-AJJHDSKSDF.</span>

<span class="pi">{</span><span class="s2">"</span><span class="s">Fn::GetAtt"</span> <span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">MyRole"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">RoleId"</span><span class="pi">]</span> <span class="pi">}</span>
<span class="c1"># Returns the stable and unique string identifying the role. For example, AIDAJQABLZS4A3QDU576Q.</span>

<span class="kt">!GetAtt</span> <span class="s">myELB.DNSName</span>
<span class="c1"># returns a string containing the DNS name of the load balancer with the logical name myELB.</span>


<span class="na">AWSTemplateFormatVersion</span><span class="pi">:</span> <span class="s">2010-09-09</span>
<span class="na">Resources</span><span class="pi">:</span>

  <span class="na">myELB</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">AWS::ElasticLoadBalancing::LoadBalancer</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">AvailabilityZones</span><span class="pi">:</span> <span class="s">eu-west-1a</span>
      <span class="na">Listeners</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">LoadBalancerPort</span><span class="pi">:</span> <span class="s1">'</span><span class="s">80'</span>
          <span class="na">InstancePort</span><span class="pi">:</span> <span class="s1">'</span><span class="s">80'</span>
          <span class="na">Protocol</span><span class="pi">:</span> <span class="s">HTTP</span>

  <span class="na">myELBIngressGroup</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">AWS::EC2::SecurityGroup</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">GroupDescription</span><span class="pi">:</span> <span class="s">ELB ingress group</span>
      <span class="na">SecurityGroupIngress</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">IpProtocol</span><span class="pi">:</span> <span class="s">tcp</span>
          <span class="na">FromPort</span><span class="pi">:</span> <span class="m">80</span>
          <span class="na">ToPort</span><span class="pi">:</span> <span class="m">80</span>
          <span class="na">SourceSecurityGroupOwnerId</span><span class="pi">:</span> <span class="kt">!GetAtt</span> <span class="s">myELB.SourceSecurityGroup.OwnerAlias</span>
          <span class="na">SourceSecurityGroupName</span><span class="pi">:</span> <span class="kt">!GetAtt</span> <span class="s">myELB.SourceSecurityGroup.GroupName</span>

</pre></table></code></div></div><h3 id="fnsub">Fn::Sub</h3><ul><li>The intrinsic function <code class="language-plaintext highlighter-rouge">Fn::Sub</code> substitutes variables in an input string with values that you specify.<li>In your templates, you can use this function to construct commands or outputs that include values that aren’t available until you create or update a stack.</ul><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="c1"># Fn::Sub with a mapping</span>
<span class="c1"># uses a mapping to substitute the ${Domain} variable with the resulting value from the Ref function.</span>
<span class="na">Name</span><span class="pi">:</span> <span class="kt">!Sub</span>
  <span class="pi">-</span> <span class="s">www.${Domain}</span>
  <span class="pi">-</span> <span class="pi">{</span> <span class="nv">Domain</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="nv">RootDomainName</span> <span class="pi">}</span>


<span class="c1"># Fn::Sub without a mapping</span>
<span class="c1"># uses Fn::Sub with the AWS::Region and AWS::AccountId pseudo parameters and the vpc resource logical ID to create an Amazon Resource Name (ARN) for a VPC.</span>
<span class="kt">!Sub</span> <span class="s1">'</span><span class="s">arn:aws:ec2:${AWS::Region}:${AWS::AccountId}:vpc/${vpc}'</span>


<span class="c1"># UserData commands</span>
<span class="c1"># The following example uses Fn::Sub to substitute the AWS::StackName and AWS::Region pseudo parameters for the actual stack name and region at runtime.</span>
<span class="na">UserData</span><span class="pi">:</span>
  <span class="na">Fn::Base64</span><span class="pi">:</span>
    <span class="kt">!Sub</span> <span class="pi">|</span>
      <span class="s">#!/bin/bash -xe</span>
      <span class="s">yum update -y aws-cfn-bootstrap</span>
      <span class="s">/opt/aws/bin/cfn-init -v --stack ${AWS::StackName} --resource LaunchConfig --configsets wordpress_install --region ${AWS::Region}</span>
      <span class="s">/opt/aws/bin/cfn-signal -e $? --stack ${AWS::StackName} --resource WebServerGroup --region ${AWS::Region}</span>


</pre></table></code></div></div><hr /><h2 id="format-version">Format version</h2><p>The AWSTemplateFormatVersion section (optional) identifies the capabilities of the template.</p><ul><li>The latest template format version is 2010-09-09 and is currently the only valid value.</ul><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="na">AWSTemplateFormatVersion</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2010-09-09"</span>
</pre></table></code></div></div><hr /><h2 id="description-optional">Description: (optional)</h2><p>￼ <img data-proofer-ignore data-src="https://i.imgur.com/ZcU1VMh.png" alt="Screen Shot 2020-06-26 at 10.13.23" /></p><p>The Description section include comments about your template.</p><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="na">Description</span><span class="pi">:</span> <span class="pi">&gt;</span>
  <span class="s">Here are some</span>
  <span class="s">details about</span>
  <span class="s">the template.</span>
</pre></table></code></div></div><hr /><h2 id="parameter--to-pass-the-value-of-the-template-at-runtime">Parameter : to pass the value of the template at runtime</h2><p>Use the optional <code class="language-plaintext highlighter-rouge">Parameters</code> section to customize your templates.</p><ul><li>to input custom values to your template each time you create or update a stack.<li>can specify allowed and default values for each parameter.<ul><li>specify details like<li>the range of acceptable AMI ImageIdnumbers,<li>key pairs,<li>subnets,<li>or any properties that must be specified for a resource.</ul><li>A parameter contains a list of attributes that define its value, and constraints against its value.</ul><h3 id="example">example</h3><div class="language-json highlighter-rouge"><div class="code-header" text-data="json"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="nl">"Parameters"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"ParameterLogicalID"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DataType"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ParameterPropertyABCD"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"value"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="nl">"Parameters"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"InstanceTypeParameter"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"String"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter t2.micro, m1.small, m1.large. Default is t2.micro"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Default"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"t2.micro"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"AllowedValues"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"t2.micro"</span><span class="p">,</span><span class="w"> </span><span class="s2">"m1.small"</span><span class="p">,</span><span class="w"> </span><span class="s2">"m1.large"</span><span class="p">]</span><span class="w">
        </span><span class="err">//</span><span class="w"> </span><span class="err">appears</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CloudFormationConsole</span><span class="w"> </span><span class="err">when</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">template</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">launched.</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span><span class="nl">"Resources"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">when</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">EC</span><span class="mi">2</span><span class="w"> </span><span class="err">instance</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">launched</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">Resources</span><span class="w"> </span><span class="err">section</span><span class="w">
    </span><span class="nl">"Instances"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS::EC2::Instance"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Properties"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="err">//</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">Properties</span><span class="w"> </span><span class="err">section</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">instance</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">reference</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">InstanceTypeParameter</span><span class="w"> </span><span class="err">specification.</span><span class="w">
            </span><span class="err">//</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="s2">"Ec2Instance"</span><span class="w"> </span><span class="err">resource</span><span class="w"> </span><span class="err">references</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">InstanceTypeParameter</span><span class="w"> </span><span class="err">specification</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">its</span><span class="w"> </span><span class="err">instancetype.</span><span class="w">
            </span><span class="nl">"InstanceType"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"Ref"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"InstanceTypeParameter"</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="nl">"ImageId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ami-20b65349"</span><span class="p">,</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="na">Parameters</span><span class="pi">:</span>
  <span class="na">ParameterLogicalID</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">DataType</span>
    <span class="na">ParameterPropertyABCD</span><span class="pi">:</span> <span class="s">value</span>

<span class="na">Parameters</span><span class="pi">:</span>
  <span class="na">InstanceTypeParameter</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">String</span>
    <span class="na">Default</span><span class="pi">:</span> <span class="s">t2.micro</span>
    <span class="na">AllowedValues</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">t2.micro</span>
      <span class="pi">-</span> <span class="s">m1.small</span>
      <span class="pi">-</span> <span class="s">m1.large</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s">Enter t2.micro, m1.small, or m1.large. Default is t2.micro.</span>

<span class="na">Resources</span><span class="pi">:</span>
  <span class="na">Ec2Instance</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">AWS::EC2::Instance</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">InstanceType</span><span class="pi">:</span>
        <span class="na">Ref</span><span class="pi">:</span> <span class="s">InstanceTypeParameter</span>
      <span class="na">ImageId</span><span class="pi">:</span> <span class="s">ami-0ff8a91507f77f867</span>
</pre></table></code></div></div><h3 id="type">Type</h3><p>The only required attribute</p><ul><li><code class="language-plaintext highlighter-rouge">String</code>: “MyUserName”<li><code class="language-plaintext highlighter-rouge">Number</code>: “8888”<li><code class="language-plaintext highlighter-rouge">List&lt;Number&gt;</code>: [“80”,”20”]</ul><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="na">Parameters</span><span class="pi">:</span>
  <span class="na">DBPort</span><span class="pi">:</span>
    <span class="na">Default</span><span class="pi">:</span> <span class="m">3306</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s">TCP/IP port for the database</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">Number</span>
    <span class="na">MinValue</span><span class="pi">:</span> <span class="m">1150</span>
    <span class="na">MaxValue</span><span class="pi">:</span> <span class="m">65535</span>
  <span class="na">DBPwd</span><span class="pi">:</span>
    <span class="na">NoEcho</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s">The database admin account password</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">String</span>
    <span class="na">MinLength</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">MaxLength</span><span class="pi">:</span> <span class="m">41</span>
    <span class="na">AllowedPattern</span><span class="pi">:</span> <span class="s">^[a-zA-Z0-9]*$</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">CommaDelimitedList</code>: [“test”,”dev”,”prod”]<ul><li>to specify multiple string values in a single parameter.<li>can use a single parameter instead of many different parameters to specify multiple values.<li>For example<ul><li>create three different subnets with their own CIDR blocks,<li>use three different parameters to specify three different CIDR blocks.<li>But it’s simpler just to use a single parameter that takes a list of three CIDR blocks</ul><li>To refer to a specific value in a list<ul><li>use the <code class="language-plaintext highlighter-rouge">Fn::Select</code> intrinsic function in the Resources section of your template.<li>pass the index value of the object that you want and a list of objects</ul></ul></ul><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="na">Parameters</span><span class="pi">:</span>
  <span class="na">DbSubnetIpBlocks</span><span class="pi">:</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Comma-delimited</span><span class="nv"> </span><span class="s">list</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">three</span><span class="nv"> </span><span class="s">CIDR</span><span class="nv"> </span><span class="s">blocks"</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">CommaDelimitedList</span>
    <span class="na">Default</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10.0.48.0/24,</span><span class="nv"> </span><span class="s">10.0.112.0/24,</span><span class="nv"> </span><span class="s">10.0.176.0/24"</span>

<span class="na">Resources</span><span class="pi">:</span>

  <span class="na">DbSubnet1</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">AWS::EC2::Subnet</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">AvailabilityZone</span><span class="pi">:</span> <span class="kt">!Sub</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">${AWS::Region}${AZ}"</span>
        <span class="pi">-</span> <span class="na">AZ</span><span class="pi">:</span> <span class="kt">!Select</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="nv">VpcAzs</span><span class="pi">]</span>
      <span class="na">VpcId</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">VPC</span>
      <span class="na">CidrBlock</span><span class="pi">:</span> <span class="kt">!Select</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="nv">DbSubnetIpBlocks</span><span class="pi">]</span>

  <span class="na">DbSubnet2</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">AWS::EC2::Subnet</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">AvailabilityZone</span><span class="pi">:</span> <span class="kt">!Sub</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">${AWS::Region}${AZ}"</span>
        <span class="pi">-</span> <span class="na">AZ</span><span class="pi">:</span> <span class="kt">!Select</span> <span class="pi">[</span><span class="nv">1</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="nv">VpcAzs</span><span class="pi">]</span>
      <span class="na">VpcId</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">VPC</span>
      <span class="na">CidrBlock</span><span class="pi">:</span> <span class="kt">!Select</span> <span class="pi">[</span><span class="nv">1</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="nv">DbSubnetIpBlocks</span><span class="pi">]</span>

  <span class="na">DbSubnet3</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">AWS::EC2::Subnet</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">AvailabilityZone</span><span class="pi">:</span> <span class="kt">!Sub</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">${AWS::Region}${AZ}"</span>
        <span class="pi">-</span> <span class="na">AZ</span><span class="pi">:</span> <span class="kt">!Select</span> <span class="pi">[</span><span class="nv">2</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="nv">VpcAzs</span><span class="pi">]</span>
      <span class="na">VpcId</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">VPC</span>
      <span class="na">CidrBlock</span><span class="pi">:</span> <span class="kt">!Select</span> <span class="pi">[</span><span class="nv">2</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="nv">DbSubnetIpBlocks</span><span class="pi">]</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">SSM Parameter</code> Types:<ul><li>Parameters that correspond to existing parameters in Systems Manager Parameter Store. You specify a Systems Manager parameter key as the value of the SSM parameter, and AWS CloudFormation fetches the latest value from Parameter Store to use for the stack. For more information, see SSM parameter types.</ul><li><code class="language-plaintext highlighter-rouge">AWS-Specific Parameter</code> Types:<ul><li>AWS-specific<li>catching invalid values at the start of creating or updating a stack.<li>to create or update a stack <font color="blue"> must specify existing AWS values that are in the user's account and in the region for the current stack. </font><li>help ensure that input values for these types exist and are correct before AWS CloudFormation creates or updates any resources.<li>If a user uses the AWS Management Console,<ul><li>AWS CloudFormation prepopulates AWS-specific parameter types with valid values.<li>user doesn’t have to remember and correctly enter a specific name or ID.<ul><li>just select from a drop-down list.<li>can search for values by ID, name, or Name tag value.</ul></ul><li>For example<ul><li>AWS values such as Amazon EC2 key pair names and VPC IDs.<li>use the <code class="language-plaintext highlighter-rouge">AWS::EC2::KeyPair::KeyName</code> parameter type,<li><p>AWS CloudFormation validates the input value against users’ existing key pair names before it creates any resources, such as Amazon EC2 instances.</p><li>The following example declares two parameters with the types <code class="language-plaintext highlighter-rouge">AWS::EC2::KeyPair::KeyName</code> and <code class="language-plaintext highlighter-rouge">AWS::EC2::Subnet::Id</code>.<li>These types limit valid values to existing key pair names and subnet IDs.<li>Because the mySubnetIDs parameter is specified as a list, a user can specify one or more subnet</ul></ul></ul><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="na">Parameters</span><span class="pi">:</span>
  <span class="na">myKeyPair</span><span class="pi">:</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s">Amazon EC2 Key Pair</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">AWS::EC2::KeyPair::KeyName"</span>
  <span class="na">mySubnetIDs</span><span class="pi">:</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s">Subnet IDs</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">List&lt;AWS::EC2::Subnet::Id&gt;"</span>
</pre></table></code></div></div><h4 id="aws-specific-parameter-type">AWS-specific parameter type</h4><ul><li><p>Supported AWS-specific parameter types</p><ul><li><code class="language-plaintext highlighter-rouge">AWS::EC2::AvailabilityZone::Name</code><li>An Availability Zone<li><p>such as <code class="language-plaintext highlighter-rouge">us-west-2a</code>.</p><li><code class="language-plaintext highlighter-rouge">AWS::EC2::Image::Id</code><li>An Amazon EC2 image ID,<li>such as <code class="language-plaintext highlighter-rouge">ami-0ff8a91507f77f867</code>.<li><p>Note that the AWS CloudFormation console doesn’t show a drop-down list of values for this parameter type.</p><li><code class="language-plaintext highlighter-rouge">AWS::EC2::Instance::Id</code><li>An Amazon EC2 instance ID,<li><p>such as <code class="language-plaintext highlighter-rouge">i-1e731a32</code></p><li><code class="language-plaintext highlighter-rouge">AWS::EC2::KeyPair::KeyName</code><li><p>An Amazon EC2 key pair name.</p><li><code class="language-plaintext highlighter-rouge">AWS::EC2::SecurityGroup::GroupName</code><li>An EC2-Classic or default VPC security group name,<li><p>such as <code class="language-plaintext highlighter-rouge">my-sg-abc</code>.</p><li><code class="language-plaintext highlighter-rouge">AWS::EC2::SecurityGroup::Id</code><li>A security group ID,<li><p>such as <code class="language-plaintext highlighter-rouge">sg-a123fd85</code>.</p><li><code class="language-plaintext highlighter-rouge">AWS::EC2::Subnet::Id</code><li>A subnet ID,<li><p>such as <code class="language-plaintext highlighter-rouge">subnet-123a351e</code>.</p><li><code class="language-plaintext highlighter-rouge">AWS::EC2::Volume::Id</code><li>An Amazon EBS volume ID,<li><p>such as <code class="language-plaintext highlighter-rouge">vol-3cdd3f56</code>.</p><li><code class="language-plaintext highlighter-rouge">AWS::EC2::VPC::Id</code><li>A VPC ID,<li><p>such as <code class="language-plaintext highlighter-rouge">vpc-a123baa3</code></p><li><code class="language-plaintext highlighter-rouge">AWS::Route53::HostedZone::Id</code><li>An Amazon Route 53 hosted zone ID,<li><p>such as <code class="language-plaintext highlighter-rouge">Z23YXV4OVPL04A</code></p><li><code class="language-plaintext highlighter-rouge">List&lt;AWS::EC2::AvailabilityZone::Name&gt;</code><li>An array of Availability Zones for a region,<li><p>such as <code class="language-plaintext highlighter-rouge">us-west-2a, us-west-2b</code></p><li><code class="language-plaintext highlighter-rouge">List&lt;AWS::EC2::Image::Id&gt;</code><li>An array of Amazon EC2 image IDs,<li>such as <code class="language-plaintext highlighter-rouge">ami-0ff8a91507f77f867, ami-0a584ac55a7631c0c</code>.<li><p>Note that the AWS CloudFormation console doesn’t show a drop-down list of values for this parameter type.</p><li><code class="language-plaintext highlighter-rouge">List&lt;AWS::EC2::Instance::Id&gt;</code><li>An array of Amazon EC2 instance IDs,<li><p>such as <code class="language-plaintext highlighter-rouge">i-1e731a32, i-1e731a34</code></p><li><code class="language-plaintext highlighter-rouge">List&lt;AWS::EC2::SecurityGroup::GroupName&gt;</code><li>An array of EC2-Classic or default VPC security group names,<li><p>such as <code class="language-plaintext highlighter-rouge">my-sg-abc, my-sg-def</code></p><li><code class="language-plaintext highlighter-rouge">List&lt;AWS::EC2::SecurityGroup::Id&gt;</code><li>An array of security group IDs,<li><p>such as <code class="language-plaintext highlighter-rouge">sg-a123fd85, sg-b456fd85</code></p><li><code class="language-plaintext highlighter-rouge">List&lt;AWS::EC2::Subnet::Id&gt;</code><li>An array of subnet IDs,<li><p>such as <code class="language-plaintext highlighter-rouge">subnet-123a351e, subnet-456b351e</code></p><li><code class="language-plaintext highlighter-rouge">List&lt;AWS::EC2::Volume::Id&gt;</code><li>An array of Amazon EBS volume IDs,<li><p>such as <code class="language-plaintext highlighter-rouge">vol-3cdd3f56, vol-4cdd3f56</code></p><li><code class="language-plaintext highlighter-rouge">List&lt;AWS::EC2::VPC::Id&gt;</code><li>An array of VPC IDs,<li><p>such as <code class="language-plaintext highlighter-rouge">vpc-a123baa3, vpc-b456baa3</code></p><li><code class="language-plaintext highlighter-rouge">List&lt;AWS::Route53::HostedZone::Id&gt;</code><li>An array of Amazon Route 53 hosted zone IDs,<li>such as <code class="language-plaintext highlighter-rouge">Z23YXV4OVPL04A, Z23YXV4OVPL04B</code></ul></ul><h3 id="description">Description</h3><ul><li>value they should specify.<li>The parameter’s name and description appear in the Specify Parameters page when a user uses the template in the Create Stack wizard<li>A string of up to 4000 characters that describes the parameter.</ul><h3 id="allowedpattern">AllowedPattern</h3><ul><li>A regular expression that represents the patterns to allow for String types. The pattern must match the entire parameter value provided.</ul><h3 id="allowedvalues">AllowedValues</h3><ul><li>An array containing the list of values allowed for the parameter.</ul><h3 id="default">Default</h3><ul><li>A value of the appropriate type for the template to use if no value is specified when a stack is created.<li>If you define constraints for the parameter, you must specify a value that adheres to those constraints.<h3 id="constraintdescription">ConstraintDescription</h3><li>A string that explains a constraint when the constraint is violated.<li>For example, without a constraint description, a parameter that has an allowed pattern of [A-Za-z0-9]+ displays the following error message when the user specifies an invalid value: <code class="language-plaintext highlighter-rouge">Malformed input-Parameter MyParameter must match pattern [A-Za-z0-9]+</code><li>By adding a constraint description, such as must only contain letters (uppercase and lowercase) and numbers, you can display the following customized error message: <code class="language-plaintext highlighter-rouge">Malformed input-Parameter MyParameter must only contain uppercase and lowercase letters and numbers</code><h3 id="maxlength">MaxLength</h3><li>An integer value that determines the largest number of characters you want to allow for String types.<h3 id="maxvalue">MaxValue</h3><li>A numeric value that determines the largest numeric value you want to allow for Number types.<h3 id="minlength">MinLength</h3><li>An integer value that determines the smallest number of characters you want to allow for String types.<h3 id="minvalue">MinValue</h3><li>A numeric value that determines the smallest numeric value you want to allow for Number types.<h3 id="noecho">NoEcho</h3><li>Whether to mask the parameter value to prevent it from being displayed in the console, command line tools, or API. If you set the NoEcho attribute to true, CloudFormation returns the parameter value masked as asterisks (*****) for any calls that describe the stack or stack events, except for information stored in the locations specified below.</ul><blockquote><p>General requirements for parameters</p><ul><li>maximum of 200 parameters in an AWS CloudFormation template.<li>Each parameter must be given a logical name (also called logical ID), unique among all logical names within the template.<li>Each parameter must be assigned a parameter type that is supported by AWS CloudFormation.<li>Each parameter must be assigned a value at runtime for AWS CloudFormation to successfully provision the stack. You can optionally specify a default value for AWS CloudFormation to use unless another value is provided.<li>Parameters must be declared and referenced from within the same template. You can reference parameters from the Resources and Outputs sections of the template.</ul></blockquote><p>use the <code class="language-plaintext highlighter-rouge">Ref</code> intrinsic function to reference a parameter, and AWS CloudFormation uses the parameter’s value to provision the stack.</p><ul><li>You can reference parameters from the <code class="language-plaintext highlighter-rouge">Resources</code> and <code class="language-plaintext highlighter-rouge">Outputs</code> sections of the same template.</ul><hr /><h2 id="conditions-section--includes-statements-control-optional">Conditions section : includes statements, control (optional)</h2><p><img data-proofer-ignore data-src="https://i.imgur.com/wr4a92A.png" alt="Screen Shot 2020-06-26 at 13.25.07" /></p><ul><li>The optional Conditions section contains statements that define the circumstances under which entities are created or configured.<li>whether certain resources are created, or certain properties are assigned a value during the creation or update of a stack.<ul><li>can compare whether a value is equal to another value.<li>Based on the result of that condition, conditionally create resources.<li>If multiple conditions, separate them with commas.</ul><li>use conditions when<ul><li>reuse a template that can create resources in different contexts,<ul><li>such as a test environment vs a production environment.<li>In template, add an EnvironmentType input parameter, which accepts either “prod” or “test” as inputs.<ul><li>For the production environment,<ul><li>include EC2 instances with certain capabilities;</ul><li>for the test environment,<ul><li>use reduced capabilities to save money.</ul></ul><li>define which resources are created, and how they’re configured for each environment type.</ul></ul></ul><p>At stack creation or stack update,</p><ul><li>AWS CloudFormation evaluates all the conditions in template <font color="blue"> before creating any resources </font><ul><li>Resources that are associated with a true condition are created.<li>Resources that are associated with a false condition are ignored.</ul><li>AWS CloudFormation also re-evaluates these conditions at each stack update before <font color="blue"> updating any resources </font><ul><li>Resources that are still associated with a true condition are updated.<li>Resources that are now associated with a false condition are deleted.</ul><li>Conditions are evaluated based on input parameter values specified when create or update a stack.<ul><li>if values or tags have been assigned,<li>the template will do something different based on the assigned value.</ul><li>Within each condition, you can reference another condition, a parameter value, or a mapping.<ul><li>After define all conditions,<li>associate them with <code class="language-plaintext highlighter-rouge">resources</code> and <code class="language-plaintext highlighter-rouge">resource properties</code> in the <code class="language-plaintext highlighter-rouge">Resources</code> and <code class="language-plaintext highlighter-rouge">Outputs</code> sections of a template.</ul><li>For example<ul><li>can create a condition and then associate it with a <code class="language-plaintext highlighter-rouge">resource</code> or <code class="language-plaintext highlighter-rouge">output</code><ul><li>AWS CloudFormation only creates the resource or output if the condition is true.</ul><li>can associate the condition with a <code class="language-plaintext highlighter-rouge">property</code><ul><li>AWS CloudFormation only sets the property to a specific value if the condition is true.<li>If the condition is false, AWS CloudFormation sets the property to a different value that you specify.</ul></ul></ul><ol><li>Parameters section<ul><li>Define the inputs that you want your conditions to evaluate.<li>The conditions evaluate to true or false based on the values of these input parameters.<li>If you want your conditions to evaluate pseudo parameters, you don’t need to define the pseudo parameters in this section; pseudo parameters are predefined by AWS CloudFormation.</ul><li>Conditions section<ul><li>Define conditions by using the intrinsic condition functions.<li>These conditions determine when AWS CloudFormation creates the associated resources.</ul><li>Resources and Outputs sections<ul><li>Associate conditions with the resources or outputs that you want to conditionally create.<li>AWS CloudFormation creates entities that are associated with a true condition and ignores entities that are associated with a false condition.<li>Use the Condition key and a condition’s logical ID to associate it with a resource or output.<li>To conditionally specify a property, use the Fn::If function. For more information, see Condition functions.</ul></ol><h3 id="condition-intrinsic-functions">Condition intrinsic functions</h3><ul><li>You can use the following intrinsic functions to define conditions:</ul><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="s">Fn::And</span>
<span class="s">Fn::Equals</span>
<span class="s">Fn::If</span>
<span class="s">Fn::Not</span>
<span class="s">Fn::Or</span>
</pre></table></code></div></div><h3 id="examples">Examples</h3><div class="language-json highlighter-rouge"><div class="code-header" text-data="json"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre><span class="nl">"Conditions"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"Logical ID"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">Intrinsic</span><span class="w"> </span><span class="err">function</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">


</span><span class="nl">"Parameters"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"InstanceTypeParameter"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"String"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Default"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"t2.micro"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"AllowedValues"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"t2.micro"</span><span class="p">,</span><span class="w"> </span><span class="s2">"m1.small"</span><span class="p">,</span><span class="w"> </span><span class="s2">"m1.large"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"Description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter t2.micro, m1.small, m1.large. Default is t2.micro"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"EnvType"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"String"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Default"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Dev"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"AllowedValues"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"Dev"</span><span class="p">,</span><span class="w"> </span><span class="s2">"QA"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Prod"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"Description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter the environment"</span><span class="w">
    </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">

</span><span class="nl">"Resources"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Instances"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS::EC2::Instance"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Properties"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"InstanceType"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"Ref"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"InstanceTypeParameter"</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="nl">"ImageId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ami-20b65349"</span><span class="p">,</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">use</span><span class="w"> </span><span class="err">“Condition”</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">evaluate</span><span class="w"> </span><span class="err">this,</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">specify</span><span class="w"> </span><span class="err">appropriate</span><span class="w"> </span><span class="err">resources</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">each</span><span class="w"> </span><span class="err">environment.</span><span class="w">
</span><span class="nl">"Conditions"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"CreateProdResources"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Fn::Equals"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"Ref"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"EnvType"</span><span class="p">},</span><span class="w"> </span><span class="s2">"Prod"</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="na">AWSTemplateFormatVersion</span><span class="pi">:</span> <span class="s">2010-09-09</span>
<span class="na">Parameters</span><span class="pi">:</span>
  <span class="na">EnvType</span><span class="pi">:</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s">Environment type.</span>
    <span class="na">Default</span><span class="pi">:</span> <span class="s">test</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">String</span>
    <span class="na">AllowedValues</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">prod</span><span class="pi">,</span> <span class="nv">test</span><span class="pi">]</span>
    <span class="na">ConstraintDescription</span><span class="pi">:</span> <span class="s">must specify prod or test.</span>

<span class="c1"># setup condition</span>
<span class="na">Conditions</span><span class="pi">:</span>
  <span class="na">CreateProdResources</span><span class="pi">:</span> <span class="kt">!Equals</span> <span class="pi">[</span><span class="kt">!Ref</span> <span class="nv">EnvType</span><span class="pi">,</span> <span class="nv">prod</span><span class="pi">]</span>

<span class="na">Resources</span><span class="pi">:</span>
  <span class="na">EC2Instance</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS::EC2::Instance'</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">ImageId</span><span class="pi">:</span> <span class="s">ami-0ff8a91507f77f867</span>

  <span class="na">MountPoint</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS::EC2::VolumeAttachment'</span>
    <span class="c1"># use the condition</span>
    <span class="na">Condition</span><span class="pi">:</span> <span class="s">CreateProdResources</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">InstanceId</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">EC2Instance</span>
      <span class="na">VolumeId</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">NewVolume</span>
      <span class="na">Device</span><span class="pi">:</span> <span class="s">/dev/sdh</span>

  <span class="na">NewVolume</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS::EC2::Volume'</span>
    <span class="c1"># use the condition</span>
    <span class="na">Condition</span><span class="pi">:</span> <span class="s">CreateProdResources</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">Size</span><span class="pi">:</span> <span class="m">100</span>
      <span class="na">AvailabilityZone</span><span class="pi">:</span> <span class="kt">!GetAtt</span>
        <span class="pi">-</span> <span class="s">EC2Instance</span>
        <span class="pi">-</span> <span class="s">AvailabilityZone</span>
</pre></table></code></div></div><h3 id="nested-condition">Nested condition</h3><p>The following sample template references a condition within another condition.</p><ul><li>create a stack that creates an s3 bucket.<li>For a stack deployed in a production environment, AWS CloudFormation creates a policy for the S3 bucket.</ul><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="na">Parameters</span><span class="pi">:</span>
  <span class="na">EnvType</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">String</span>
    <span class="na">AllowedValues</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">prod</span><span class="pi">,</span> <span class="nv">test</span><span class="pi">]</span>
  <span class="na">BucketName</span><span class="pi">:</span>
    <span class="na">Default</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">String</span>

<span class="na">Conditions</span><span class="pi">:</span>
  <span class="na">IsProduction</span><span class="pi">:</span> <span class="kt">!Equals</span> <span class="pi">[</span><span class="kt">!Ref</span> <span class="nv">EnvType</span><span class="pi">,</span> <span class="nv">prod</span><span class="pi">]</span>

  <span class="na">CreateBucket</span><span class="pi">:</span> <span class="kt">!Not</span>
    <span class="pi">-</span> <span class="kt">!Equals</span> <span class="pi">[</span><span class="kt">!Ref</span> <span class="nv">BucketName</span><span class="pi">,</span> <span class="s1">'</span><span class="s">'</span><span class="pi">]</span>

  <span class="na">CreateBucketPolicy</span><span class="pi">:</span> <span class="kt">!And</span>
    <span class="pi">-</span> <span class="kt">!Condition</span> <span class="s">IsProduction</span>
    <span class="pi">-</span> <span class="kt">!Condition</span> <span class="s">CreateBucket</span>

<span class="na">Resources</span><span class="pi">:</span>
  <span class="na">Bucket</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS::S3::Bucket'</span>
    <span class="c1"># use the condition, true than got the bucket</span>
    <span class="na">Condition</span><span class="pi">:</span> <span class="s">CreateBucket</span>

  <span class="na">Policy</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS::S3::BucketPolicy'</span>
    <span class="c1"># use the condition, true than got the policy</span>
    <span class="na">Condition</span><span class="pi">:</span> <span class="s">CreateBucketPolicy</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">Bucket</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">Bucket</span>
      <span class="na">PolicyDocument</span><span class="pi">:</span> <span class="s">...</span>
</pre></table></code></div></div><h3 id="example-1">Example</h3><p><img data-proofer-ignore data-src="https://i.imgur.com/YdjU8aF.png" alt="Screen Shot 2020-06-26 at 15.06.07" /></p><ul><li>the EnvType parameter specifies whether to create a Dev environment, a QA—environment, or a Prod environment.<li>Depending on the environment, to specify different configurations, such as which database it points to.<li><p>use “Condition” to evaluate this, and specify appropriate resources for each environment.</p><li>Build environment with conditions:<ul><li>when the target environment is development DEV.<ul><li>only one set of resources in one Availability Zone is launched</ul><li>When this template is used in production PROD<ul><li>the solution launches two sets of resources in two different AZ.</ul><li>get a redundant environment from the same template without single change</ul><li>production environment and DEV environment<ul><li>must have the same stack<li>in order to ensure that application works the way that it was designed.</ul><li>DEV environment and QA environment<ul><li>must have the same stack of applications and the same configuration.<li>You might have several QA environments for functional testing, user acceptance testing, load testing, and so on.<li>The process of creating those environments manually can be -prone.<li>use a Conditions statement in the template to solve this problem.</ul></ul><hr /><h2 id="mapping">Mapping</h2><ul><li><p>atches a key to a corresponding set of named values.</p><li>Example<ul><li>set values based on a region,<li>create a mapping<ul><li>uses the region name as a key<li>and contains the values you want to specify for each specific region.</ul><li>use the <code class="language-plaintext highlighter-rouge">Fn::FindInMap</code> intrinsic function to retrieve values in a map.</ul><li>You cannot include parameters, pseudo parameters, or intrinsic functions in the Mappings section.</ul><h3 id="example-mapping">example: mapping</h3><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre>
<span class="na">Mappings</span><span class="pi">:</span>
  <span class="na">Mapping01</span><span class="pi">:</span>
    <span class="na">Key01</span><span class="pi">:</span>
      <span class="na">Name</span><span class="pi">:</span> <span class="s">Value01</span>
    <span class="na">Key02</span><span class="pi">:</span>
      <span class="na">Name</span><span class="pi">:</span> <span class="s">Value02</span>
    <span class="na">Key03</span><span class="pi">:</span>
      <span class="na">Name</span><span class="pi">:</span> <span class="s">Value03</span>


<span class="na">AWSTemplateFormatVersion</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2010-09-09"</span>

<span class="na">Mappings</span><span class="pi">:</span>  <span class="c1"># section</span>
  <span class="na">RegionMap</span><span class="pi">:</span>  <span class="c1"># map ID</span>
    <span class="na">us-east-1</span><span class="pi">:</span>  <span class="c1"># Key</span>
      <span class="s2">"</span><span class="s">HVM64"</span><span class="err">:</span> <span class="s2">"</span><span class="s">ami-0ff8a91507f77f867"</span>   <span class="c1"># Name: Value</span>
    <span class="na">us-west-1</span><span class="pi">:</span>
      <span class="s2">"</span><span class="s">HVM64"</span><span class="err">:</span> <span class="s2">"</span><span class="s">ami-0bdb828fd58c52235"</span>
    <span class="na">eu-west-1</span><span class="pi">:</span>
      <span class="na">HVM64</span><span class="pi">:</span> <span class="s">ami-047bb4163c506cd98</span>
      <span class="na">HVMG2</span><span class="pi">:</span> <span class="s">ami-0a7c483d527806435</span>
    <span class="na">ap-northeast-1</span><span class="pi">:</span>
      <span class="na">HVM64</span><span class="pi">:</span> <span class="s">ami-06cd52961ce9f0d85</span>
      <span class="na">HVMG2</span><span class="pi">:</span> <span class="s">ami-053cdd503598e4a9d</span>
    <span class="na">ap-southeast-1</span><span class="pi">:</span>
      <span class="na">HVM64</span><span class="pi">:</span> <span class="s">ami-08569b978cc4dfa10</span>
      <span class="na">HVMG2</span><span class="pi">:</span> <span class="s">ami-0be9df32ae9f92309</span>

<span class="na">Resources</span><span class="pi">:</span>
  <span class="na">myEC2Instance</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">AWS::EC2::Instance"</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">ImageId</span><span class="pi">:</span> <span class="kt">!FindInMap</span> <span class="pi">[</span><span class="nv">RegionMap</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="s2">"</span><span class="s">AWS::Region"</span><span class="pi">,</span> <span class="nv">HVM64</span><span class="pi">]</span>
      <span class="c1">#        !FindInMap [mapID, !Ref keyID, ValueName]</span>
      <span class="na">InstanceType</span><span class="pi">:</span> <span class="s">m1.small</span>

</pre></table></code></div></div><h3 id="input-parameter-and-findinmap">Input parameter and FindInMap</h3><ul><li>use an input parameter with the <code class="language-plaintext highlighter-rouge">Fn::FindInMap</code> function to refer to a specific value in a map.<li>example<ul><li>have a list of regions and environment types that map to a specific AMI ID.<li>select the AMI ID that your stack uses by using an input parameter (EnvironmentType).<li>To determine the region, use the <code class="language-plaintext highlighter-rouge">AWS::Region</code> pseudo parameter, which gets the AWS region in which you create the stack.</ul></ul><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre>  <span class="na">Parameters</span><span class="pi">:</span>
    <span class="na">EnvironmentType</span><span class="pi">:</span>
      <span class="na">Description</span><span class="pi">:</span> <span class="s">The environment type</span>
      <span class="na">Type</span><span class="pi">:</span> <span class="s">String</span>
      <span class="na">Default</span><span class="pi">:</span> <span class="s">test</span>
      <span class="na">AllowedValues</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">prod</span><span class="pi">,</span> <span class="nv">test</span><span class="pi">]</span>
      <span class="na">ConstraintDescription</span><span class="pi">:</span> <span class="s">must be a prod or test</span>

  <span class="na">Mappings</span><span class="pi">:</span>
    <span class="na">RegionAndInstanceTypeToAMIID</span><span class="pi">:</span>
      <span class="na">us-east-1</span><span class="pi">:</span>
        <span class="na">test</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ami-8ff710e2"</span>
        <span class="na">prod</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ami-f5f41398"</span>
      <span class="na">us-west-2</span><span class="pi">:</span>
        <span class="na">test</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ami-eff1028f"</span>
        <span class="na">prod</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ami-d0f506b0"</span>

  <span class="na">Resources</span><span class="pi">:</span>
   <span class="s">...other resources...</span>

  <span class="na">Outputs</span><span class="pi">:</span>
    <span class="na">TestOutput</span><span class="pi">:</span>
      <span class="na">Description</span><span class="pi">:</span> <span class="s">Return the name of the AMI ID that matches the region and environment type keys</span>
      <span class="na">Value</span><span class="pi">:</span> <span class="kt">!FindInMap</span> <span class="pi">[</span><span class="nv">RegionAndInstanceTypeToAMIID</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="s2">"</span><span class="s">AWS::Region"</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="nv">EnvironmentType</span><span class="pi">]</span>
      <span class="c1">#      !FindInMap [which map ID, !Ref which key, !Ref EnvironmentType]</span>
</pre></table></code></div></div><hr /><h2 id="metadata-data-about-the-data">Metadata: data about the data</h2><p>￼ <img data-proofer-ignore data-src="https://i.imgur.com/xGuoh3a.png" alt="Screen Shot 2020-06-26 at 10.44.06" /></p><ul><li><p>Some AWS CloudFormation features retrieve settings or configuration information defined from the Metadata section.</p><li><p>Define in the AWS CloudFormation-specific metadata keys:</p><ul><li><code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Init</code><ul><li>Defines configuration tasks for the cfn-init helper script.<li>This script is useful for configuring and installing app on EC2 instances.</ul><li><code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Interface</code><ul><li>Defines the grouping and ordering of input parameters when they are displayed in the AWS CloudFormation console.<li>By default, the AWS CloudFormationconsole alphabetically sorts parameters by their logical ID.</ul><li><code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Designer</code><ul><li>Describes how your resources are laid out in AWS CloudFormationDesigner.<li>Designer automatically adds this information when you use it create and update templates.</ul></ul></ul><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="na">Metadata</span><span class="pi">:</span>
  <span class="na">Instances</span><span class="pi">:</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Information</span><span class="nv"> </span><span class="s">about</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">instances"</span>
  <span class="na">Databases</span><span class="pi">:</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Information</span><span class="nv"> </span><span class="s">about</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">databases"</span>
</pre></table></code></div></div><h3 id="awscloudformationauthentication"><code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Authentication</code></h3><ul><li>to specify authentication credentials for files or sources that you specify with the <code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Init</code> resource.<li>To include authentication information,<ul><li>use the uris property if the source is a URI<li><p>use the buckets property if the source is an Amazon S3 bucket.</p><li>can also specify authentication information for files directly in the <code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Init</code> resource.<ul><li>The files key of the resource contains a property named authentication.<li>You can use the authentication property to associate authentication information defined in an <code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Authentication</code> resource directly with a file.</ul></ul></ul><p>For files, AWS CloudFormation looks for authentication information in the following order:</p><ol><li>The <code class="language-plaintext highlighter-rouge">authentication property</code> of the <code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Init</code> files key.<li>The <code class="language-plaintext highlighter-rouge">uris or buckets property</code> of the <code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Authentication</code> resource.</ol><ul><li>For sources, AWS CloudFormation looks for authentication information in the uris or buckets property of the <code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Authentication</code> resource.</ul><p>Examples</p><ul><li>Unlike most resources, the <code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Authentication</code> type defines a list of user-named blocks,<li>each of which contains authentication properties that use lower camel case naming.</ul><ol><li>EC2 web server authentication<ul><li>how to get a file from a private S3 bucket within an EC2 instance.<li>The credentials used for authentication are defined in the <code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Authentication</code> resource, and referenced by the <code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Init</code> resource in the files section.</ul></ol><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
</pre><td class="rouge-code"><pre><span class="na">Metadata</span><span class="pi">:</span>
  <span class="na">MetadataID</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">AWS::CloudFormation::Authentication</span>
    <span class="na">String</span><span class="pi">:</span>
      <span class="na">accessKeyId</span><span class="pi">:</span> <span class="s">String</span>
      <span class="na">buckets</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">String</span>
      <span class="na">password</span><span class="pi">:</span> <span class="s">String</span>
      <span class="na">secretKey</span><span class="pi">:</span> <span class="s">String</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">String</span>
      <span class="na">uris</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">String</span>
      <span class="na">username</span><span class="pi">:</span> <span class="s">String</span>
      <span class="na">roleName</span><span class="pi">:</span> <span class="s">String</span>

<span class="na">WebServer</span><span class="pi">:</span>
  <span class="na">Type</span><span class="pi">:</span> <span class="s">AWS::EC2::Instance</span>
  <span class="na">DependsOn</span><span class="pi">:</span> <span class="s2">"</span><span class="s">BucketPolicy"</span>

  <span class="na">Metadata</span><span class="pi">:</span>
    <span class="na">AWS::CloudFormation::Init</span><span class="pi">:</span>
      <span class="na">config</span><span class="pi">:</span>
        <span class="na">packages</span><span class="pi">:</span>
          <span class="na">yum</span><span class="pi">:</span>
            <span class="na">httpd</span><span class="pi">:</span> <span class="pi">[]</span>
        <span class="na">files</span><span class="pi">:</span>
          <span class="na">/var/www/html/index.html</span><span class="pi">:</span>
            <span class="na">source</span><span class="pi">:</span>
              <span class="na">Fn::Join</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">"</span>
                <span class="pi">-</span>
                  <span class="pi">-</span> <span class="s2">"</span><span class="s">http://s3.amazonaws.com/"</span>
                  <span class="pi">-</span> <span class="na">Ref</span><span class="pi">:</span> <span class="s2">"</span><span class="s">BucketName"</span>
                  <span class="pi">-</span> <span class="s2">"</span><span class="s">/index.html"</span>
            <span class="na">mode</span><span class="pi">:</span> <span class="s2">"</span><span class="s">000400"</span>
            <span class="na">owner</span><span class="pi">:</span> <span class="s2">"</span><span class="s">apache"</span>
            <span class="na">group</span><span class="pi">:</span> <span class="s2">"</span><span class="s">apache"</span>
            <span class="na">authentication</span><span class="pi">:</span> <span class="s2">"</span><span class="s">S3AccessCreds"</span>
        <span class="na">services</span><span class="pi">:</span>
          <span class="na">sysvinit</span><span class="pi">:</span>
            <span class="na">httpd</span><span class="pi">:</span>
              <span class="na">enabled</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
              <span class="na">ensureRunning</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>

    <span class="na">AWS::CloudFormation::Authentication</span><span class="pi">:</span>
      <span class="na">S3AccessCreds</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">S3"</span>
        <span class="na">accessKeyId</span><span class="pi">:</span>
          <span class="na">Ref</span><span class="pi">:</span> <span class="s2">"</span><span class="s">CfnKeys"</span>
        <span class="na">secretKey</span><span class="pi">:</span>
          <span class="na">Fn::GetAtt</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s2">"</span><span class="s">CfnKeys"</span>
            <span class="pi">-</span> <span class="s2">"</span><span class="s">SecretAccessKey"</span>
<span class="na">Properties</span><span class="pi">:</span>
  <span class="s">EC2 Resource Properties ...</span>
</pre></table></code></div></div><h3 id="awscloudformationinterface"><code class="language-plaintext highlighter-rouge">AWS::CloudFormation::Interface</code></h3><ul><li>a metadata key that defines how parameters are grouped and sorted in the AWS CloudFormation console.<li>When you create or update stacks in the console, the console lists input parameters in alphabetical order by their logical IDs.<li>grouping and ordering parameters<ul><li>By using this key, you can define your own parameter grouping and ordering so that users can efficiently specify parameter values.<li>example<ul><li>group all EC2-related parameters in one group and all VPC-related parameters in another group.</ul></ul><li>define labels for parameters.<ul><li>A label is a friendly name or description that the console displays instead of a parameter’s logical ID.<li>Labels are useful for helping users understand the values to specify for each parameter.<li>Example,<li>label a KeyPair parameter Select an EC2 key pair.</ul></ul><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="na">Metadata</span><span class="pi">:</span>
  <span class="na">AWS::CloudFormation::Interface</span><span class="pi">:</span>
    <span class="na">ParameterGroups</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ParameterGroup</span>
    <span class="na">ParameterLabels</span><span class="pi">:</span>
      <span class="s">ParameterLabel</span>


<span class="na">Metadata</span><span class="pi">:</span>

  <span class="na">AWS::CloudFormation::Interface</span><span class="pi">:</span>
    <span class="na">ParameterGroups</span><span class="pi">:</span>

      <span class="pi">-</span> <span class="na">Label</span><span class="pi">:</span>
          <span class="na">default</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Network</span><span class="nv"> </span><span class="s">Configuration"</span>
        <span class="na">Parameters</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">VPCID</span>
          <span class="pi">-</span> <span class="s">SubnetId</span>
          <span class="pi">-</span> <span class="s">SecurityGroupID</span>

      <span class="pi">-</span> <span class="na">Label</span><span class="pi">:</span>
          <span class="na">default</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Amazon</span><span class="nv"> </span><span class="s">EC2</span><span class="nv"> </span><span class="s">Configuration"</span>
        <span class="na">Parameters</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">InstanceType</span>
          <span class="pi">-</span> <span class="s">KeyName</span>

    <span class="na">ParameterLabels</span><span class="pi">:</span>
      <span class="na">VPCID</span><span class="pi">:</span>
        <span class="na">default</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Which</span><span class="nv"> </span><span class="s">VPC</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">deployed</span><span class="nv"> </span><span class="s">to?"</span>

</pre></table></code></div></div><p>Using the metadata key from this example, the following figure shows how the console displays parameter groups when a stack is created or updated: Parameter groups in the console</p><p><img data-proofer-ignore data-src="https://i.imgur.com/0XOUxcX.png" alt="console-create-stack-parameter-groups" /></p><hr /><h2 id="resources-declare-the-aws-resources-be-includedcreated-in-stack">Resources: declare the AWS resources be included/created in stack</h2><p><img data-proofer-ignore data-src="https://i.imgur.com/fQBHEj4.png" alt="Screen Shot 2020-06-26 at 10.44.06" /></p><ul><li>declare the AWS resources be included / created in the stack<ul><li>such as an EC2 instance, an S3 bucket.</ul><li><p>These properties could also be set in the Parameters or Conditions sections</p><li>must declare each resource separately;<li>can specify multiple resources of the same type.<ul><li>declare multiple resources, separate them with commas</ul></ul><div class="language-json highlighter-rouge"><div class="code-header" text-data="json"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="nl">"Resources"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"Instances1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS::EC2::Instance"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Properties"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="err">//</span><span class="w"> </span><span class="err">MyQueue</span><span class="w"> </span><span class="err">resource</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">part</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">its</span><span class="w"> </span><span class="err">UserData</span><span class="w"> </span><span class="err">property</span><span class="p">,</span><span class="w">
          </span><span class="nl">"UserData"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"Fn::Base64"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"Fn::Join"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"Queue="</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"Ref"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MyQueue"</span><span class="w"> </span><span class="p">}]]}},</span><span class="w">
          </span><span class="err">//</span><span class="w"> </span><span class="err">AvailabilityZone</span><span class="w"> </span><span class="err">setting:</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">EC</span><span class="mi">2</span><span class="w"> </span><span class="err">instance</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">hosted</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">Northern</span><span class="w"> </span><span class="err">Virginia</span><span class="w"> </span><span class="err">us-east</span><span class="mi">-1</span><span class="err">a.</span><span class="w">
          </span><span class="nl">"AvailabilityZOne"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"us-east-1a"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"ImageId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ami-20b65349"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">DependsOn:</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">How</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CloudFormation</span><span class="w"> </span><span class="err">should</span><span class="w"> </span><span class="err">wait</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">launch</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">resource</span><span class="w"> </span><span class="err">until</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">specific</span><span class="p">,</span><span class="w"> </span><span class="err">different</span><span class="w"> </span><span class="err">resource</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">finished</span><span class="w"> </span><span class="err">being</span><span class="w"> </span><span class="err">created.</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">create</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">EC@</span><span class="w"> </span><span class="err">after</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">myDB</span><span class="w"> </span><span class="err">instance</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">been</span><span class="w"> </span><span class="err">created</span><span class="w">
      </span><span class="nl">"DependsOn"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"myDB"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="mi">2</span><span class="err">nd</span><span class="w"> </span><span class="err">resource</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">Amazon</span><span class="w"> </span><span class="err">Simple</span><span class="w"> </span><span class="err">Queue</span><span class="w"> </span><span class="err">Service</span><span class="w"> </span><span class="err">SQS—queue</span><span class="w"> </span><span class="s2">"MyQueue"</span><span class="err">.</span><span class="w">
  </span><span class="nl">"MyQueue"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS::SQS::Queue"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Properties"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"myDB"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS::RDS::DBInstance"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Properties"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre><span class="na">Resources</span><span class="pi">:</span>
  <span class="na">Logical ID</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">Resource type</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">String</span><span class="pi">:</span> <span class="s">OneStringValue</span>
      <span class="na">String</span><span class="pi">:</span> <span class="s">A longer string value</span>
      <span class="na">Number</span><span class="pi">:</span> <span class="m">123</span>
      <span class="na">LiteralList</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">[first]-string-value</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">special</span><span class="nv"> </span><span class="s">characters"</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">[second]-string-value</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">special</span><span class="nv"> </span><span class="s">characters"</span>
      <span class="na">Boolean</span><span class="pi">:</span> <span class="kc">true</span>
      <span class="na">ReferenceForOneValue</span><span class="pi">:</span>
        <span class="na">Ref</span><span class="pi">:</span> <span class="s">MyLogicalResourceName</span>
      <span class="na">ReferenceForOneValueShortCut</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">MyLogicalResourceName</span>
      <span class="na">FunctionResultWithFunctionParams</span><span class="pi">:</span> <span class="kt">!Sub</span> <span class="pi">|</span>
        <span class="s">Key=%${MyParameter}</span>

<span class="na">Resources</span><span class="pi">:</span>
  <span class="na">MyEC2Instance</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">AWS::EC2::Instance"</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">ImageId</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ami-0ff8a91507f77f867"</span>

  <span class="na">MyInstance</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">AWS::EC2::Instance"</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">UserData</span><span class="pi">:</span>
        <span class="s2">"</span><span class="s">Fn::Base64"</span><span class="err">:</span>
          <span class="kt">!Sub</span> <span class="pi">|</span>
            <span class="s">Queue=${MyQueue}</span>
      <span class="na">AvailabilityZone</span><span class="pi">:</span> <span class="s2">"</span><span class="s">us-east-1a"</span>
      <span class="na">ImageId</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ami-0ff8a91507f77f867"</span>

  <span class="na">MyQueue</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">AWS::SQS::Queue"</span>
    <span class="na">Properties</span><span class="pi">:</span> <span class="pi">{}</span>
</pre></table></code></div></div><h3 id="dependson">DependsOn</h3><div class="language-json highlighter-rouge"><div class="code-header" text-data="json"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="nl">"Resources"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"Instances1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS::EC2::Instance"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Properties"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"UserData"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"Fn::Base64"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"Fn::Join"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"Queue="</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"Ref"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MyQueue"</span><span class="w"> </span><span class="p">}]]}},</span><span class="w">
          </span><span class="nl">"AvailabilityZOne"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"us-east-1a"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"ImageId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ami-20b65349"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">DependsOn:</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">How</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CloudFormation</span><span class="w"> </span><span class="err">should</span><span class="w"> </span><span class="err">wait</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">launch</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">resource</span><span class="w"> </span><span class="err">until</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">specific</span><span class="p">,</span><span class="w"> </span><span class="err">different</span><span class="w"> </span><span class="err">resource</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">finished</span><span class="w"> </span><span class="err">being</span><span class="w"> </span><span class="err">created.</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">create</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">EC@</span><span class="w"> </span><span class="err">after</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">myDB</span><span class="w"> </span><span class="err">instance</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">been</span><span class="w"> </span><span class="err">created</span><span class="w">
      </span><span class="nl">"DependsOn"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"myDB"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"myDB"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS::RDS::DBInstance"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Properties"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>The DependsOn attribute should be used when</p><ul><li>need to wait for something.<li>Some resources in a VPC require a gateway (either internet gateway / VPN gateway)<ul><li>If AWS CloudFormation template defines a VPC, a gateway, and a gateway attachment,<li><p>any resources that require the gateway depend on the gateway attachment.</p><li>Other VPC-dependent resources<ul><li>Auto Scaling groups,<li>Amazon EC2 instances,<ul><li>an EC2 instance with a public IP address depends on the VPC gateway attachment if the VPC and internet gateway resources are also declared in the same template.</ul><li>Elastic Load Balancing load balancers,<li>Elastic IP addresses,<li>Amazon RDS—database instances,<li>Amazon Virtual Private Cloud VPC—routes that include the internet gateway</ul></ul></ul><h3 id="wait-condition-waitpause-and-receive-a-signal-to-continue">wait condition: wait/pause and receive a signal to continue</h3><div class="language-json highlighter-rouge"><div class="code-header" text-data="json"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="nl">"Resources"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"Instances1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS::EC2::Instance"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Properties"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"UserData"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"Fn::Base64"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"Fn::Join"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"Queue="</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"Ref"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MyQueue"</span><span class="w"> </span><span class="p">}]]}},</span><span class="w">
          </span><span class="nl">"AvailabilityZOne"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"us-east-1a"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"ImageId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ami-20b65349"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">DependsOn:</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">How</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CloudFormation</span><span class="w"> </span><span class="err">should</span><span class="w"> </span><span class="err">wait</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">launch</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">resource</span><span class="w"> </span><span class="err">until</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">specific</span><span class="p">,</span><span class="w"> </span><span class="err">different</span><span class="w"> </span><span class="err">resource</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">finished</span><span class="w"> </span><span class="err">being</span><span class="w"> </span><span class="err">created.</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">create</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">EC</span><span class="mi">2</span><span class="w"> </span><span class="err">after</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">myDB</span><span class="w"> </span><span class="err">instance</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">been</span><span class="w"> </span><span class="err">created</span><span class="w">
      </span><span class="nl">"DependsOn"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"myDB"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"myWaitCondition"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS::CloudFormation::WaitCondition"</span><span class="p">,</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">create</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">EC</span><span class="w"> </span><span class="err">after</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">myDB</span><span class="w"> </span><span class="err">instance</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">been</span><span class="w"> </span><span class="err">created</span><span class="w">
      </span><span class="nl">"DependsOn"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"myDB"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Properties"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"Handle"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"R2ef"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"myWaitHandle"</span><span class="p">},</span><span class="w">
          </span><span class="nl">"Timeout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"4500"</span><span class="w">
          </span><span class="err">//</span><span class="w"> </span><span class="err">It</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">wait</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">EC</span><span class="mi">2</span><span class="w"> </span><span class="err">instance</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">it</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">time</span><span class="w"> </span><span class="err">out</span><span class="w"> </span><span class="err">after</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">500</span><span class="w"> </span><span class="err">seconds.</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"myDB"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS::RDS::DBInstance"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Properties"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">AWS::CloudFormation::WaitConditionHandle</code><ul><li>has no properties.<li>reference the <code class="language-plaintext highlighter-rouge">WaitCondition Handlere source</code> by using the Ref function,<ul><li>AWS CloudFormation returns a pre-signed URL.<li>You pass this URL to applications or scripts that are running on your EC2 instances to send signals to that URL.</ul><li>An associated <code class="language-plaintext highlighter-rouge">AWS::CloudFormation::WaitCondition</code> resource checks the URL for the required number of success signals or for a failure signal.<li>The timeout value is in seconds</ul></ul><h3 id="creation-policy-pause-stack-creation-and-wait-for-specified-number-of-successful-signals">creation policy: pause stack creation and wait for specified number of successful signals.</h3><div class="language-json highlighter-rouge"><div class="code-header" text-data="json"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="nl">"Resources"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"AutoScalingGroup"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS::AutoScaling::AutoScalingGroup"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Properties"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"AvailabilityZOne"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"Fn::GetAZs"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">},</span><span class="w">
          </span><span class="nl">"LaunchConfigurationName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"Ref"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"LaunchConfig"</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="nl">"DesiredCapacity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"MinSize"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"MaxSize"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"CreationPolicy"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">" ResourceSignal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"Count"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
              </span><span class="err">//</span><span class="w"> </span><span class="err">“PT#H#M#S:</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">hours</span><span class="p">,</span><span class="w"> </span><span class="err">minutes</span><span class="p">,</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">seconds.</span><span class="w">
              </span><span class="nl">"Timeout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"PT15M"</span><span class="w">
              </span><span class="err">//</span><span class="w"> </span><span class="err">wait</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">AutoCaling</span><span class="w"> </span><span class="err">instance</span><span class="w"> </span><span class="err">but</span><span class="w"> </span><span class="err">time</span><span class="w"> </span><span class="err">out</span><span class="w"> </span><span class="err">after</span><span class="w"> </span><span class="mi">15</span><span class="err">m</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><ul><li>This creation policy is associated with <font color="red"> the creation of an Auto Scaling group </font><ul><li> <font color="blue"> three successful signals within fifteen minutes are required or it will time out </font><ul><li>Set timeouts to give resources enough time to get up and running.</ul><li>When the timeout period expires, or a failure signal is received,<li>the creation of the resource fails,<li>and AWS CloudFormation rolls the stack back.</ul></ul><hr /><h2 id="mappings--keys-and-their-associated-values">Mappings : keys and their associated values</h2><p><img data-proofer-ignore data-src="https://i.imgur.com/lTWjdxg.png" alt="Screen Shot 2020-06-26 at 13.18.49" /></p><ul><li>specify conditional parameter values.<li>customize the properties of a resource based on certain conditions<ul><li>enables fine-grained control over how the templates launched.</ul></ul><div class="language-json highlighter-rouge"><div class="code-header" text-data="json"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="nl">"Mappings"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"RegionAndAMIID"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"us-east-1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"m1.small"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">" ami-aa"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"te.micro"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">" ami-bb"</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"us-east-2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"m1.small"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">" ami-cc"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"te.micro"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">" ami-dd"</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><ul><li>For example,<ul><li>use Regions and specify multiple mapping levels<ul><li>an AMI ImageId number is unique to a Region, and the person who use the template not necessarily know which AMI to use.<li>provide the <code class="language-plaintext highlighter-rouge">AMI lookup list</code> using the Mappings parameter.<li>contains a map for Regions.<li>The mapping<ul><li>lists the AMI that should be used, based on the Region the instance will launch in<li>specifies an AMI based on the type of instance that is launched within a specific Region.<li>if an m1.small instance is used, the AMI be used is ami-1ccae774.<li>This mapping ties specific machine images to instances.</ul></ul></ul></ul><hr /><h2 id="output-----">Output ￼</h2><p><img data-proofer-ignore data-src="https://i.imgur.com/pI7Bf8n.png" alt="Screen Shot 2020-06-26 at 15.17.56" /></p><ul><li><p>Outputs are values that are returned whenever view the properties of the stack.</p><li>For example,<ul><li>if something executes properly,<li>it is helpful to provide an indication that the execution completed and was successful.</ul><li><p>Outputs can specify the string output of any logical identifier that is available in the template.</p><li>It’s a convenient way to capture important information about your resources or input parameters</ul><h3 id="example-2">example</h3><ol><li>Stack output</ol><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1"># the output named BackupLoadBalancerDNSName</span>
<span class="c1"># returns the DNS name for the resource with the logical ID BackupLoadBalancer only when the CreateProdResources condition is true.</span>
<span class="c1"># (The second output shows how to specify multiple outputs.)</span>
<span class="na">Outputs</span><span class="pi">:</span>
  <span class="na">BackupLoadBalancerDNSName</span><span class="pi">:</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s">The DNSName of the backup load balancer</span>
    <span class="na">Value</span><span class="pi">:</span> <span class="kt">!GetAtt</span> <span class="s">BackupLoadBalancer.DNSName</span>
    <span class="na">Condition</span><span class="pi">:</span> <span class="s">CreateProdResources</span>
  <span class="na">InstanceID</span><span class="pi">:</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s">The Instance ID</span>
    <span class="na">Value</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">EC2Instance</span>
</pre></table></code></div></div><ol><li>Cross-stack output</ol><div class="language-yaml highlighter-rouge"><div class="code-header" text-data="yaml"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1"># the output named StackVPC returns the ID of a VPC,</span>
<span class="c1"># and then exports the value for cross-stack referencing with the name VPCID appended to the stack's name.</span>
<span class="na">Outputs</span><span class="pi">:</span>
  <span class="na">StackVPC</span><span class="pi">:</span>
    <span class="na">Description</span><span class="pi">:</span> <span class="s">The ID of the VPC</span>
    <span class="na">Value</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">MyVPC</span>
    <span class="na">Export</span><span class="pi">:</span>
      <span class="na">Name</span><span class="pi">:</span> <span class="kt">!Sub</span> <span class="s2">"</span><span class="s">${AWS::StackName}-VPCID"</span>
</pre></table></code></div></div><hr /><h1 id="resources-and-features-outside-aws-cloudformation">Resources and Features outside AWS CloudFormation</h1><p>For Resources and Features Not Directly Supported by AWS CloudFormation</p><ul><li>AWS CloudFormation is extensible with custom resources<ul><li>so can use part of your own logic to create stacks.<li>With custom resources, write custom provisioning logic in templates.<li>CloudFormation runs the custom logic when you create, update, or delete stacks.</ul><li>For example<li>to include resources that are not available as AWS CloudFormation resource types.<ul><li>include those resources by using custom resources,<li>which means that you can still manage all your related resources in a single stack.<li>Use the <code class="language-plaintext highlighter-rouge">AWS::CloudFormation::CustomResource</code> or <code class="language-plaintext highlighter-rouge">Custom::String</code> resource type to define custom resources in your templates.<li>Custom resources require one property: <font color="red"> the service token </font><ul><li>specifies where AWS CloudFormationsends requests to, such as an Amazon SNS topic.</ul><li>Examples include<ul><li>provisioning a third-party application subscription and passing the authentication key back to the EC2 instance that needs it.<li>use an AWS Lambda function to peer a new VPC with another VPC</ul></ul></ul><p>example:</p><p><img data-proofer-ignore data-src="https://i.imgur.com/RSa5TWf.png" alt="Screen Shot 2020-06-26 at 15.24.01" /></p><div class="language-json highlighter-rouge"><div class="code-header" text-data="json"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="err">cfnVerifier</span><span class="w">
    </span><span class="err">Type:</span><span class="w"> </span><span class="err">AWS::CloudFormation::CustomResource</span><span class="w">
    </span><span class="err">Properties:</span><span class="w">
        </span><span class="err">ServiceToken</span><span class="w">
          </span><span class="err">Fn::Join</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"arn:aws:lambda:"</span><span class="p">,</span><span class="w"> </span><span class="err">!Ref:</span><span class="w"> </span><span class="s2">"AWS::Region"</span><span class="p">,</span><span class="w"> </span><span class="s2">":"</span><span class="p">,</span><span class="w"> </span><span class="err">!Ref:</span><span class="w"> </span><span class="s2">"AWS::AccountId"</span><span class="p">,</span><span class="w"> </span><span class="s2">":function:cfnVerifierLambda"</span><span class="p">]]</span><span class="w">
</span></pre></table></code></div></div><ul><li>user creates an AWS CloudFormation template by using a stack that has a <code class="language-plaintext highlighter-rouge">custom resource operation</code>.<ul><li>This custom resource operation was defined by using <code class="language-plaintext highlighter-rouge">AWS::CloudFormation::CustomResource</code> or <code class="language-plaintext highlighter-rouge">Custom::CustomResource</code>.</ul><li>The template includes a <font color="red"> ServiceToken </font><ul><li>from the third-party resource provider<li>used for authentication.</ul><li><p>The template also includes any provider-defined parameters required for the custom resource.</p><li>AWS CloudFormation<ul><li>communicates with the custom resource provider by using Amazon Simple Notification Service SNS—message that includes<ul><li>a Create, Update, or Delete request.<li>any input data that is stored in the stack template<li>and an Amazon S3 URL for the response.</ul></ul><li>The custom resource provider<ul><li>processes the message<li>returns a Success or Fail response to AWS CloudFormation.<li>can also return<ul><li>the names and values of resource attributes if the request succeeded (output data)<li>or send a string that provides details when the request fails.</ul></ul><li>AWS CloudFormation<ul><li>sets the stack status according to the response that is received,<li>provides the values of any custom resource output data.</ul><li>can use an AWS Lambda function to act as a custom resource.<ul><li>To implement this, can replace the ServiceToken for custom resource with the Amazon Resource Name, ARN, of your Lambda custom resource.<li>do not need to create an Amazon SNS topic for a custom resource when you use AWS Lambda because AWS CloudFormation is Lambda-aware.</ul><li><p>As in the previous scenarios, your code is responsible for doing any required processing.</p><li>It uses the pre-signed URL (sent by AWS CloudFormation) to signal to the service that the creation of the custom resource either succeeded or failed.</ul><p>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/01aws/'>01AWS</a>, <a href='/categories/codedevelop/'>CodeDevelop</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/aws/" class="post-tag no-text-decoration" >AWS</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AWS - CodeDevelop - CloudFormation - Grace&url=https://ocholuo.github.io//posts/CloudFormation/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AWS - CodeDevelop - CloudFormation - Grace&u=https://ocholuo.github.io//posts/CloudFormation/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=AWS - CodeDevelop - CloudFormation - Grace&url=https://ocholuo.github.io//posts/CloudFormation/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/0CodePipeline/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - CodeDevelop - CodePipeline</h3><div class="text-muted small"><p> CodePipeline basic Components of AWS Data Pipeline Accessing AWS Data Pipeline Related Services Pipeline Components, Instances, and Attempts Pipeline Def...</p></div></div></a></div><div class="card"> <a href="/posts/1CodeCommit/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - CodeDevelop - CodeCommit</h3><div class="text-muted small"><p> CodeCommit basic work flow setup CodeCommit a version control service hosted by Amazon Web Services tracks and manages code changes Ma...</p></div></div></a></div><div class="card"> <a href="/posts/2CodeBuild/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - CodeDevelop - CodeBuild</h3><div class="text-muted small"><p> CodeBuild How to run CodeBuild manually docker build process codebuild auto build docker CodeBuild # docker command to build, tag and push you docker image to...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/ElasticBeanstalk/" class="btn btn-outline-primary" prompt="Older"><p>AWS - CodeDevelop - ElasticBeanstalk</p></a> <a href="/posts/CloudFormationTemplate-0-config/" class="btn btn-outline-primary" prompt="Newer"><p>AWS - CodeDevelop - CloudFormation - Template `AWS::Config`</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
