<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Linux - Network Error" /><meta property="og:locale" content="en" /><meta name="description" content="Linux - Network Error" /><meta property="og:description" content="Linux - Network Error" /><link rel="canonical" href="https://ocholuo.github.io//posts/Linux-network-error/" /><meta property="og:url" content="https://ocholuo.github.io//posts/Linux-network-error/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-07-16T11:11:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Linux - Network Error" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2020-07-16T11:11:11-04:00","datePublished":"2020-07-16T11:11:11-04:00","description":"Linux - Network Error","headline":"Linux - Network Error","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/Linux-network-error/"},"url":"https://ocholuo.github.io//posts/Linux-network-error/"}</script><title>Linux - Network Error | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Linux - Network Error</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Linux - Network Error</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Jul 16, 2020, 11:11 AM -0400" >Jul 16, 2020<i class="unloaded">2020-07-16T11:11:11-04:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="941 words">5 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><h1 id="linux---network-error">Linux - Network Error</h1><p>[toc]</p><hr /><h2 id="ping-fail">ping fail</h2><p><code class="language-plaintext highlighter-rouge">/etc/resolv.conf</code> gets regenerated on boot, prevent <code class="language-plaintext highlighter-rouge">resolv.conf</code> to be update at boot time,</p><div class="language-c highlighter-rouge"><div class="code-header" text-data="c"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="cp"># resolv.conf
</span><span class="n">nameserver</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">3</span>
<span class="n">nameserver</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span>
<span class="n">nameserver</span> <span class="mi">8</span><span class="p">.</span><span class="mi">8</span><span class="p">.</span><span class="mi">8</span><span class="p">.</span><span class="mi">8</span>
<span class="n">nameserver</span> <span class="mi">8</span><span class="p">.</span><span class="mi">8</span><span class="p">.</span><span class="mi">4</span><span class="p">.</span><span class="mi">4</span>
<span class="n">search</span> <span class="n">localhost</span>

<span class="cp"># cat /etc/sysconfig/network-scripts/ifcfg-eth0
</span><span class="n">Change</span> <span class="n">PEERDNS</span><span class="o">=</span><span class="n">yes</span> <span class="n">to</span> <span class="n">PEERDNS</span><span class="o">=</span><span class="n">no</span>
</pre></table></code></div></div><h2 id="ping-lan-but-no-internet">ping LAN but no internet</h2><p>do have a connection, but you cannot reach your DNS; you can diagnose this by</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ping -c1 8.8.4.4
</pre></table></code></div></div><ol><li><p>can reach Google, then you have a connection, and you only need to update your DNS servers. Edit (as sudo) your /etc/resolv.conf file and add these two lines:</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre> nameserver 8.8.8.8
 nameserver 8.8.4.4
</pre></table></code></div></div><p>and now you are good to go.</p><li><p>cannot ping Google, but you can ping your router, or any other pc in your LAN. In this case case, it is possible that you also have problem 1, so you will have to check for that, but first, you need to check your routing table. Print it with</p><div class="language-c highlighter-rouge"><div class="code-header" text-data="c"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre> <span class="n">ip</span> <span class="n">route</span> <span class="n">show</span> <span class="k">default</span>

 <span class="c1">// if reply, like this one:</span>
 <span class="k">default</span> <span class="n">via</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">11</span><span class="p">.</span><span class="mi">1</span> <span class="n">dev</span> <span class="n">wlan0</span> <span class="n">proto</span> <span class="n">dhcp</span> <span class="n">metric</span> <span class="mi">600</span>
</pre></table></code></div></div><p>(this is for my laptop). What is important is that the correct IP address of your router is shown exactly where mine (192.168.11.1) is shown. If an incorrect IP address is shown, or, worse, if the ip route show default command receives no reply, then your routing table has been corrupted. You may simply restore it by means of:</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre> sudo ip route del default (only if the wrong IP address appears)
 sudo ip route add default via IP.address.OfYour.Router
</pre></table></code></div></div><p>and now we may go step 1.</p><li><p>If you cannot ping any pc on your LAN, then there is another kind of problem, and more questions will need to be asked. But we’ll cross that bridge when we get there.</p></ol><hr /><h2 id="configure-ip-for-interface">configure ip for Interface</h2><div class="language-c highlighter-rouge"><div class="code-header" text-data="c"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="err">$</span> <span class="n">route</span> <span class="o">-</span><span class="n">n</span>
<span class="err">$</span> <span class="n">ip</span> <span class="n">r</span>
</pre></table></code></div></div><h3 id="dhcp">dhcp</h3><div class="language-c highlighter-rouge"><div class="code-header" text-data="c"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1">// Lease information on the host:</span>
<span class="err">$</span> <span class="n">cat</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">dhclient</span><span class="o">/</span><span class="n">dhclient</span><span class="p">.</span><span class="n">leases</span>

<span class="c1">// Lookup DHCP host:</span>
<span class="err">$</span> <span class="n">sudo</span> <span class="n">grep</span> <span class="err">“</span><span class="n">DHCPOFFER</span><span class="err">”</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">message</span>

<span class="c1">// check DHCP client</span>
<span class="err">$</span> <span class="n">ss</span> <span class="o">-</span><span class="n">luntp</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">dhclinet</span>
</pre></table></code></div></div><p>capture the DHCP package</p><div class="language-c highlighter-rouge"><div class="code-header" text-data="c"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="err">$</span> <span class="n">sudo</span> <span class="n">dhclient</span> <span class="o">-</span><span class="n">r</span>
<span class="err">$</span> <span class="n">dhclient</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://i.imgur.com/BZNbU20.png" alt="Screen Shot 2020-07-06 at 15.34.33" /></p><hr /><h3 id="static">static</h3><ol><li>add ip</ol><div class="language-c highlighter-rouge"><div class="code-header" text-data="c"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c1">// Add an entry for the 1.1.1.1 to use 10.0.1.10 as the gateway.</span>
<span class="err">$</span> <span class="n">ip</span> <span class="n">route</span> <span class="n">ad</span> <span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span> <span class="n">via</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">10</span> <span class="n">dev</span> <span class="n">eth0</span>

<span class="c1">// static ip</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">connection</span> <span class="n">modify</span> <span class="n">interface01</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">method</span> <span class="n">manual</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">address</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">15</span><span class="o">/</span><span class="mi">24</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">gateway</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">51</span><span class="p">.</span><span class="mi">2</span>

<span class="c1">// configure DNS</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">mod</span> <span class="n">interface01</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">dns</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">51</span><span class="p">.</span><span class="mi">1</span>

<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">down</span> <span class="n">interface01</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">up</span> <span class="n">interface01</span>

<span class="c1">// change it to DHCP</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">mod</span> <span class="n">interface01</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">method</span> <span class="k">auto</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">address</span> <span class="s">""</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">gateway</span> <span class="s">""</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">dns</span> <span class="s">""</span>
</pre></table></code></div></div><ol><li>prohibit ip</ol><div class="language-c highlighter-rouge"><div class="code-header" text-data="c"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="err">$</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">bind</span><span class="o">-</span><span class="n">utils</span>
<span class="err">$</span> <span class="n">host</span> <span class="n">google</span><span class="p">.</span><span class="n">com</span>

<span class="err">$</span> <span class="n">ip</span> <span class="n">route</span> <span class="n">add</span> <span class="n">prohibit</span> <span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span>   <span class="c1">// runtime</span>
<span class="err">$</span> <span class="n">ip</span> <span class="n">route</span> <span class="n">flush</span> <span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span>

</pre></table></code></div></div><hr /><h3 id="multiple-ips-on-the-same-interface">Multiple IPs on the Same Interface</h3><div class="language-c highlighter-rouge"><div class="code-header" text-data="c"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>
<span class="c1">// show interface</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">c</span>  <span class="c1">// connection</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">d</span>  <span class="c1">// device</span>

<span class="err">$</span> <span class="n">nmcli</span> <span class="n">d</span> <span class="n">show</span> <span class="n">eth0</span>

<span class="c1">// add ip addresses:</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">mod</span> <span class="n">System</span><span class="err">\</span><span class="n">eth0</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">method</span> <span class="n">manual</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">addresses</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">10</span><span class="o">/</span><span class="mi">24</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">gateway</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">dns</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">dns</span><span class="o">-</span><span class="n">search</span> <span class="n">ec2</span><span class="p">.</span><span class="n">internal</span>

<span class="c1">// add 2 additional addresses:</span>
<span class="err">$</span> <span class="n">sudo</span> <span class="n">nmcli</span> <span class="n">c</span> <span class="n">mod</span> <span class="n">System</span><span class="err">\</span><span class="n">eth0</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">addresses</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">15</span><span class="o">/</span><span class="mi">24</span><span class="p">,</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">20</span><span class="o">/</span><span class="mi">24</span>

<span class="c1">//check where things stand now, run:</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">c</span> <span class="n">show</span> <span class="n">System</span><span class="err">\</span><span class="n">eth0</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">ipv4</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">show</span> <span class="n">System</span><span class="err">\</span><span class="n">eth0</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">ipv4</span>

<span class="c1">// Restart Networking</span>
<span class="err">$</span> <span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">restart</span> <span class="n">network</span>
</pre></table></code></div></div><hr /><h3 id="nic-bond-and-teamin">NIC Bond and Teamin</h3><ul><li>for fault tolerant, redundant connection<li>Bond<li>Team</ul><h4 id="bond">Bond</h4><ol><li>create master bond<div class="language-c highlighter-rouge"><div class="code-header" text-data="c"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">add</span> <span class="n">type</span> <span class="n">bond</span> <span class="n">con</span><span class="o">-</span><span class="n">name</span> <span class="n">bond0</span> <span class="n">ifname</span> <span class="n">bond0</span> <span class="n">mode</span> <span class="n">actice</span><span class="o">-</span><span class="n">backup</span> <span class="n">ip4</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">51</span><span class="p">.</span><span class="mi">170</span><span class="o">/</span><span class="mi">24</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://i.imgur.com/aOJrNUk.png" alt="Screen Shot 2020-07-06 at 15.57.23" /></p><li>add bond-slave ```c $ nmcli con add type bond-slave ifname ens33 master bond0 $ nmcli con add type bond-slave ifname ens38 master bond0</ol><p>$ nmcli con up bond $ nmcli con up bond-slave33 $ nmcli con up bond-slave38</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>
![Screen Shot 2020-07-06 at 16.02.00](https://i.imgur.com/CDydebD.png)

3. add gateway for master bond
```c
$ nmcli con mod bond0 ipv4.gateway 192.168.51.2

$ nmcli con down bond0
$ nmcli con up bond0
</pre></table></code></div></div><h4 id="team">Team</h4><ol><li>clear the interface</ol><p><img data-proofer-ignore data-src="https://i.imgur.com/N5Ac4uG.png" alt="Screen Shot 2020-07-06 at 16.11.05" /></p><div class="language-c highlighter-rouge"><div class="code-header" text-data="c"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">deletet</span> <span class="n">Wired</span><span class="err">\</span><span class="n">connection</span><span class="err">\</span><span class="mi">1</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">deletet</span> <span class="n">Wired</span><span class="err">\</span><span class="n">connection</span><span class="err">\</span><span class="mi">2</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://i.imgur.com/DZWQTQC.png" alt="Screen Shot 2020-07-06 at 16.11.25" /></p><ol><li>Configure the Team Interface</ol><div class="language-c highlighter-rouge"><div class="code-header" text-data="c"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="err">$</span> <span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">teamd</span>

<span class="c1">// example configure</span>
<span class="err">$</span> <span class="n">cat</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">teamd</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">27</span><span class="o">/</span><span class="n">example_configs</span><span class="o">/</span><span class="n">activebackup_ethtool_3</span><span class="p">.</span><span class="n">conf</span>

<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">add</span> <span class="n">type</span> <span class="n">team</span> <span class="n">con</span><span class="o">-</span><span class="n">name</span> <span class="n">Team0</span> <span class="n">ifname</span> <span class="n">team0</span> <span class="n">team</span><span class="p">.</span><span class="n">config</span> <span class="err">'</span><span class="p">{</span><span class="s">"runner"</span><span class="o">:</span><span class="p">{</span><span class="s">"name"</span><span class="o">:</span><span class="s">"activebackup"</span><span class="p">},</span> <span class="s">"link_watch"</span><span class="o">:</span><span class="p">{</span><span class="s">"name"</span><span class="o">::</span><span class="n">ethtool</span><span class="p">}}</span><span class="err">'</span>

<span class="c1">// for roundrobin</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">add</span> <span class="n">type</span> <span class="n">team</span> <span class="n">con</span><span class="o">-</span><span class="n">name</span> <span class="n">Team0</span> <span class="n">ifname</span> <span class="n">team0</span>

<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">mod</span> <span class="n">Team0</span> <span class="n">ipve</span><span class="p">.</span><span class="n">address</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">15</span><span class="o">/</span><span class="mi">24</span> <span class="n">ipve</span><span class="p">.</span><span class="n">gateway</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span> <span class="n">ipv4</span><span class="p">.</span><span class="n">method</span> <span class="n">namual</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://i.imgur.com/qs7JTt7.png" alt="Screen Shot 2020-07-06 at 16.19.49" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/GwpLaC6.png" alt="Screen Shot 2020-07-06 at 16.33.04" /></p><ol><li>Add Slave Interfaces</ol><div class="language-c highlighter-rouge"><div class="code-header" text-data="c"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">add</span> <span class="n">type</span> <span class="n">team</span><span class="o">-</span><span class="n">slave</span> <span class="n">con</span><span class="o">-</span><span class="n">name</span> <span class="n">slave1</span> <span class="n">ifname</span> <span class="n">eth1</span> <span class="n">master</span> <span class="n">team0</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">add</span> <span class="n">type</span> <span class="n">team</span><span class="o">-</span><span class="n">slave</span> <span class="n">con</span><span class="o">-</span><span class="n">name</span> <span class="n">slave2</span> <span class="n">ifname</span> <span class="n">eth2</span> <span class="n">master</span> <span class="n">team0</span>

<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">up</span> <span class="n">slave1</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">up</span> <span class="n">slave2</span>
<span class="err">$</span> <span class="n">nmcli</span> <span class="n">con</span> <span class="n">up</span> <span class="n">Team0</span>

<span class="err">$</span> <span class="n">teamdctl</span> <span class="n">team0</span> <span class="n">State</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://i.imgur.com/3IM98X4.png" alt="Screen Shot 2020-07-06 at 16.22.11" /></p><hr /><h1 id="network-related">network related</h1><h2 id="checked-network-with-lshw">checked network with lshw</h2><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>sudo lshw -C network

*-network
   description:   Wireless interface
   product:       BCM4313 802.11bgn Wireless Network Adapter
   vendor:        Broadcom Corporation
   physical id:   0
   bus info:      pci@0000:03:00.0
   logical name:  eth2
   version:       01
   serial:        08:3e:8e:a2:91:9f
   width:         64 bits
   clock:         33MHz
   capabilities:  pm msi pciexpress bus_master cap_list ethernet physical wireless
   configuration: broadcast=yes driver=wl0 driverversion=6.20.155.1 (r326264)
                  latency=0 multicast=yes wireless=IEEE 802.11abg
   resources:     irq:17 memory:f2d00000-f2d03fff
</pre></table></code></div></div><h2 id="firewall">firewall</h2><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>~$ sudo ufw status
password:
status: inactive

~$ sudo ufw enable
//激活fw

~$ sudo ufw status
status: active
</pre></table></code></div></div><p>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/30system/'>30System</a>, <a href='/categories/error/'>error</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/error/" class="post-tag no-text-decoration" >error</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Linux - Network Error - Grace&url=https://ocholuo.github.io//posts/Linux-network-error/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Linux - Network Error - Grace&u=https://ocholuo.github.io//posts/Linux-network-error/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Linux - Network Error - Grace&url=https://ocholuo.github.io//posts/Linux-network-error/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/error/"><div class="card-body"> <span class="timeago small" >Jul 16, 2020<i class="unloaded">2020-07-16T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>error</h3><div class="text-muted small"><p> error [toc] troubleshoot Error 1 2 3 4 5 6 7 8 9 ├─Netowork unreachable : `ping` it │ ├─ping "Netowork unreachable" : check `ip route` │ ├─ping "Netowork unreachable" : `arp -a` ├─No route t...</p></div></div></a></div><div class="card"> <a href="/posts/Reverse-shell/"><div class="card-body"> <span class="timeago small" >Nov 1, 2020<i class="unloaded">2020-11-01T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Linux - reverse shell & Bind shell</h3><div class="text-muted small"><p> [toc] Bind shell Bind shell attacker’s machine acts as a client victim’s machine acts as a server opening up a communication port on the victim and waiting for the client to connect to it ...</p></div></div></a></div><div class="card"> <a href="/posts/snap/"><div class="card-body"> <span class="timeago small" >Nov 8, 2020<i class="unloaded">2020-11-08T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Linux - Snap</h3><div class="text-muted small"><p> [toc] Ubuntu 中所包含的 Snap 过去发布一个 Linux 应用程序会带来很多问题： 程序文件遍布整个系统 需要复杂的代码来管理安装与更新 操作不是事务性的（如果操作失败，对系统的影响仍然会保留） 如今，在 Ubuntu 中已经提供了解决这些问题的方案，这就是 Snap 与 Snapcraft（https://snapcraft.io/）。 它可以提...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Serivice/" class="btn btn-outline-primary" prompt="Older"><p>Linux - Services</p></a> <a href="/posts/error/" class="btn btn-outline-primary" prompt="Newer"><p>error</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
