<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="AWS - boto3 - EBS" /><meta property="og:locale" content="en" /><meta name="description" content="EBS Client can_paginate(operation_name) complete_snapshot(kwargs_) generate_presigned_url(ClientMethod, Params=None, ExpiresIn=3600, HttpMethod=None) get_paginator(operation_name) get_snapshot_block(kwargs_) get_waiter(waiter_name) list_changed_blocks(kwargs_) list_snapshot_blocks(kwargs_) put_snapshot_block(kwargs_) start_snapshot(kwargs_) example Enable EBS Default Encryption" /><meta property="og:description" content="EBS Client can_paginate(operation_name) complete_snapshot(kwargs_) generate_presigned_url(ClientMethod, Params=None, ExpiresIn=3600, HttpMethod=None) get_paginator(operation_name) get_snapshot_block(kwargs_) get_waiter(waiter_name) list_changed_blocks(kwargs_) list_snapshot_blocks(kwargs_) put_snapshot_block(kwargs_) start_snapshot(kwargs_) example Enable EBS Default Encryption" /><link rel="canonical" href="https://ocholuo.github.io//posts/boto3-EBS/" /><meta property="og:url" content="https://ocholuo.github.io//posts/boto3-EBS/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-07-18T11:11:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="AWS - boto3 - EBS" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-30T21:02:21-04:00","datePublished":"2020-07-18T11:11:11-04:00","description":"EBS Client can_paginate(operation_name) complete_snapshot(kwargs_) generate_presigned_url(ClientMethod, Params=None, ExpiresIn=3600, HttpMethod=None) get_paginator(operation_name) get_snapshot_block(kwargs_) get_waiter(waiter_name) list_changed_blocks(kwargs_) list_snapshot_blocks(kwargs_) put_snapshot_block(kwargs_) start_snapshot(kwargs_) example Enable EBS Default Encryption","headline":"AWS - boto3 - EBS","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/boto3-EBS/"},"url":"https://ocholuo.github.io//posts/boto3-EBS/"}</script><title>AWS - boto3 - EBS | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>AWS - boto3 - EBS</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>AWS - boto3 - EBS</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Jul 18, 2020, 11:11 AM -0400" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Oct 30, 2022, 6:02 PM -0700" >Oct 30, 2022<i class="unloaded">2022-10-30T21:02:21-04:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2787 words">15 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><ul><li><a href="#ebs">EBS</a><ul><li><a href="#client">Client</a><ul><li><a href="#can_paginateoperation_name">can_paginate(<em>operation_name</em>)</a><li><a href="#complete_snapshotkwargs_">complete_snapshot(kwargs_)</a><li><a href="#generate_presigned_urlclientmethod-paramsnone-expiresin3600-httpmethodnone">generate_presigned_url(<em>ClientMethod</em>, <em>Params=None</em>, <em>ExpiresIn=3600</em>, <em>HttpMethod=None</em>)</a><li><a href="#get_paginatoroperation_name">get_paginator(<em>operation_name</em>)</a><li><a href="#get_snapshot_blockkwargs_">get_snapshot_block(kwargs_)</a><li><a href="#get_waiterwaiter_name">get_waiter(<em>waiter_name</em>)</a><li><a href="#list_changed_blockskwargs_">list_changed_blocks(kwargs_)</a><li><a href="#list_snapshot_blockskwargs_">list_snapshot_blocks(kwargs_)</a><li><a href="#put_snapshot_blockkwargs_">put_snapshot_block(kwargs_)</a><li><a href="#start_snapshotkwargs_">start_snapshot(kwargs_)</a></ul><li><a href="#example">example</a><ul><li><a href="#enable-ebs-default-encryption">Enable EBS Default Encryption</a></ul></ul></ul><hr /><h1 id="ebs">EBS</h1><ul><li>EBS<ul><li>Client<li>Paginators</ul></ul><hr /><h2 id="client">Client</h2><p><code class="language-plaintext highlighter-rouge">class EBS.Client</code></p><ul><li>A <code class="language-plaintext highlighter-rouge">low-level client</code> representing Amazon Elastic Block Store (EBS)<li>use the <code class="language-plaintext highlighter-rouge">Amazon Elastic Block Store (Amazon EBS) direct APIs</code> to create EBS snapshots, write data directly to snapshots, read data on snapshots, and identify the differences or changes between two snapshots.<li>If you’re an independent software vendor (ISV) who offers backup services for Amazon EBS, the EBS direct APIs make it more efficient and cost-effective to track incremental changes on EBS volumes through snapshots. This can be done without having to create new volumes from snapshots, and then use Amazon Elastic Compute Cloud (Amazon EC2) instances to compare the differences.<li>create <code class="language-plaintext highlighter-rouge">incremental snapshots</code> directly from data on-premises into EBS volumes and the cloud to use for quick disaster recovery.<li>With the ability to write and read snapshots, write on-premises data to an EBS snapshot during a disaster. Then after recovery, restore it back to AWS or on-premises from the snapshot. no longer need to build and maintain complex mechanisms to copy data to and from Amazon EBS.</ul><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">boto3</span>

<span class="n">ebsclient</span> <span class="o">=</span> <span class="n">boto3</span><span class="p">.</span><span class="nf">client</span><span class="p">(</span><span class="s">'ebs'</span><span class="p">)</span>

<span class="nf">can_paginate</span><span class="p">()</span>

<span class="c1"># complete_snapshot()
# Seals and completes the snapshot
</span><span class="n">response</span> <span class="o">=</span> <span class="n">ebsclient</span><span class="p">.</span><span class="nf">complete_snapshot</span><span class="p">(</span>
    <span class="n">SnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">ChangedBlocksCount</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">Checksum</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">ChecksumAlgorithm</span><span class="o">=</span><span class="s">'SHA256'</span><span class="p">,</span>
    <span class="n">ChecksumAggregationMethod</span><span class="o">=</span><span class="s">'LINEAR'</span>
<span class="p">)</span>

<span class="nf">generate_presigned_url</span><span class="p">()</span>


<span class="nf">get_paginator</span><span class="p">()</span>

<span class="c1"># get_snapshot_block()
# Returns the data in a block in an Amazon Elastic Block Store snapshot.
</span><span class="n">response</span> <span class="o">=</span> <span class="n">ebsclient</span><span class="p">.</span><span class="nf">get_snapshot_block</span><span class="p">(</span>
    <span class="n">SnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">BlockIndex</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">BlockToken</span><span class="o">=</span><span class="s">'string'</span>
<span class="p">)</span>


<span class="nf">get_waiter</span><span class="p">()</span>

<span class="c1"># list_changed_blocks()
# Returns information about the blocks that are different between two Amazon Elastic Block Store snapshots of the same volume/snapshot lineage.
</span><span class="n">response</span> <span class="o">=</span> <span class="n">ebsclient</span><span class="p">.</span><span class="nf">list_changed_blocks</span><span class="p">(</span>
    <span class="n">FirstSnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">SecondSnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">NextToken</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">MaxResults</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">StartingBlockIndex</span><span class="o">=</span><span class="mi">123</span>
<span class="p">)</span>

<span class="c1"># list_snapshot_blocks()
# Returns information about the blocks in an Amazon Elastic Block Store snapshot.
</span><span class="n">response</span> <span class="o">=</span> <span class="n">ebsclient</span><span class="p">.</span><span class="nf">list_snapshot_blocks</span><span class="p">(</span>
    <span class="n">SnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">NextToken</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">MaxResults</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">StartingBlockIndex</span><span class="o">=</span><span class="mi">123</span>
<span class="p">)</span>

<span class="c1"># put_snapshot_block()
# Writes a block of data to a snapshot.
</span><span class="n">response</span> <span class="o">=</span> <span class="n">ebsclient</span><span class="p">.</span><span class="nf">put_snapshot_block</span><span class="p">(</span>
    <span class="n">SnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">BlockIndex</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">BlockData</span><span class="o">=</span><span class="sa">b</span><span class="s">'bytes'</span><span class="o">|</span><span class="nb">file</span><span class="p">,</span>
    <span class="n">DataLength</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">Progress</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">Checksum</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">ChecksumAlgorithm</span><span class="o">=</span><span class="s">'SHA256'</span>
<span class="p">)</span>


<span class="c1"># start_snapshot()
# Creates a new Amazon EBS snapshot.
</span><span class="n">response</span> <span class="o">=</span> <span class="n">ebsclient</span><span class="p">.</span><span class="nf">start_snapshot</span><span class="p">(</span>
    <span class="n">VolumeSize</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">ParentSnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span>
            <span class="s">'Key'</span><span class="p">:</span> <span class="s">'string'</span><span class="p">,</span>
            <span class="s">'Value'</span><span class="p">:</span> <span class="s">'string'</span>
        <span class="p">},</span>
    <span class="p">],</span>
    <span class="n">Description</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">ClientToken</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">Encrypted</span><span class="o">=</span><span class="bp">True</span><span class="o">|</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">KmsKeyArn</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">Timeout</span><span class="o">=</span><span class="mi">123</span>
<span class="p">)</span>

</pre></table></code></div></div><hr /><h3 id="can_paginateoperation_name">can_paginate(<em>operation_name</em>)</h3><p>Check if an operation can be paginated.</p><p>Parameters</p><ul><li><strong>operation_name</strong> (<em>string</em>): is the same name as the method name on the client.<li>For example, if the method name is create_foo, and you’d normally invoke the operation as client.create_foo(kwargs_), if the create_foo operation can be paginated, you can use the call client.get_paginator(“create_foo”).</ul><p>Returns</p><ul><li><code class="language-plaintext highlighter-rouge">True</code> if the operation can be paginated,<li><code class="language-plaintext highlighter-rouge">False</code> otherwise.</ul><hr /><h3 id="complete_snapshotkwargs_">complete_snapshot(kwargs_)</h3><p>Seals and completes the snapshot after all of the required blocks of data have been written to it.</p><ul><li>Completing the snapshot changes the status to <code class="language-plaintext highlighter-rouge">completed</code> .<li>cannot write new blocks to a snapshot after it has been completed.</ul><p><strong>Request Syntax</strong></p><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">ebsclient</span><span class="p">.</span><span class="nf">complete_snapshot</span><span class="p">(</span>
    <span class="n">SnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="c1"># [REQUIRED]: The ID of the snapshot.
</span>    <span class="n">ChangedBlocksCount</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="c1"># [REQUIRED]: The number of blocks that were written to the snapshot.
</span>    <span class="n">Checksum</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="c1"># An aggregated Base-64 SHA256 checksum based on the checksums of each written block.
</span>    <span class="c1"># To generate the aggregated checksum using the linear aggregation method,
</span>    <span class="c1"># arrange the checksums for each written block in ascending order of their block index,
</span>    <span class="c1"># concatenate them to form a single string,
</span>    <span class="c1"># and then generate the checksum on the entire string using the SHA256 algorithm.
</span>    <span class="n">ChecksumAlgorithm</span><span class="o">=</span><span class="s">'SHA256'</span><span class="p">,</span>
    <span class="c1"># The algorithm used to generate the checksum.
</span>    <span class="c1"># Currently, the only supported algorithm is SHA256 .
</span>    <span class="n">ChecksumAggregationMethod</span><span class="o">=</span><span class="s">'LINEAR'</span>
    <span class="c1"># The aggregation method used to generate the checksum.
</span>    <span class="c1"># Currently, the only supported aggregation method is LINEAR .
</span><span class="p">)</span>
</pre></table></code></div></div><p><strong>Returns</strong></p><ul><li>Return type: dict<li>Response Syntax:</ul><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="s">'Status'</span><span class="p">:</span> <span class="s">'completed'</span><span class="o">|</span><span class="s">'pending'</span><span class="o">|</span><span class="s">'error'</span><span class="p">}</span>   <span class="c1"># The status of the snapshot.
</span></pre></table></code></div></div><p><strong>Exceptions</strong></p><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="o">*</span> <span class="n">EBS</span><span class="p">.</span><span class="n">Client</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">AccessDeniedException</span>
<span class="o">*</span> <span class="n">EBS</span><span class="p">.</span><span class="n">Client</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">ValidationException</span>
<span class="o">*</span> <span class="n">EBS</span><span class="p">.</span><span class="n">Client</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">ResourceNotFoundException</span>
<span class="o">*</span> <span class="n">EBS</span><span class="p">.</span><span class="n">Client</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestThrottledException</span>
<span class="o">*</span> <span class="n">EBS</span><span class="p">.</span><span class="n">Client</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">ServiceQuotaExceededException</span>
<span class="o">*</span> <span class="n">EBS</span><span class="p">.</span><span class="n">Client</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">InternalServerException</span>
</pre></table></code></div></div><hr /><h3 id="generate_presigned_urlclientmethod-paramsnone-expiresin3600-httpmethodnone">generate_presigned_url(<em>ClientMethod</em>, <em>Params=None</em>, <em>ExpiresIn=3600</em>, <em>HttpMethod=None</em>)</h3><p>Generate a presigned url given a client, its method, and arguments</p><p><strong>Parameters</strong></p><ul><li><strong>ClientMethod</strong> (<em>string</em>) – The client method to presign for<li><strong>Params</strong> (<em>dict</em>) – The parameters normally passed to ClientMethod.<li><strong>ExpiresIn</strong> (<em>int</em>) – The number of seconds the presigned url is valid for. By default it expires in an hour (3600 seconds)<li><strong>HttpMethod</strong> (<em>string</em>) – The http method to use on the generated url. By default, the http method is whatever is used in the method’s model.</ul><p><strong>Returns</strong>: The presigned url</p><hr /><h3 id="get_paginatoroperation_name">get_paginator(<em>operation_name</em>)</h3><p>Create a paginator for an operation.</p><p><strong>Parameters</strong></p><ul><li><strong>operation_name</strong> (<em>string</em>), is the same name as the method name on the client. For example,<li>if the method name is <code class="language-plaintext highlighter-rouge">create_foo</code>, invoke the operation as <code class="language-plaintext highlighter-rouge">client.create_foo(**kwargs)</code>,<li>if the create_foo operation can be paginated, you can use the call <code class="language-plaintext highlighter-rouge">client.get_paginator("create_foo")</code>.</ul><p><strong>Raises OperationNotPageableError</strong></p><ul><li>Raised if the operation is not pageable.<li>use the <code class="language-plaintext highlighter-rouge">client.can_paginate</code> method to check if an operation is pageable.</ul><p><strong>Returns</strong></p><ul><li>Return type: <code class="language-plaintext highlighter-rouge">L{botocore.paginate.Paginator}</code><li>Returns: A paginator object</ul><hr /><h3 id="get_snapshot_blockkwargs_">get_snapshot_block(kwargs_)</h3><p>Returns the data in a block in an Amazon Elastic Block Store snapshot.</p><p><strong>API</strong>:</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c"># GetSnapshotBlock</span>

<span class="c"># Request Syntax</span>
GET /snapshots/snapshotId/blocks/blockIndex?blockToken<span class="o">=</span>BlockToken HTTP/1.1

<span class="c"># Response Syntax</span>
HTTP/1.1 200
x-amz-Data-Length: DataLength
x-amz-Checksum: Checksum
x-amz-Checksum-Algorithm: ChecksumAlgorithm
BlockData
</pre></table></code></div></div><p><strong>Request Syntax</strong></p><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">get_snapshot_block</span><span class="p">(</span>
    <span class="n">SnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="c1"># The ID of the snapshot containing the block
</span>    <span class="n">BlockIndex</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="c1"># The block index of the block from which to get data.
</span>    <span class="c1"># Obtain the BlockIndex by running the ListChangedBlocks or ListSnapshotBlocks.
</span>    <span class="n">BlockToken</span><span class="o">=</span><span class="s">'string'</span>
    <span class="c1"># The block token of the block from which to get data.
</span>    <span class="c1"># Obtain the BlockToken by running the ListChangedBlocks or ListSnapshotBlocks operations.
</span><span class="p">)</span>
</pre></table></code></div></div><p><strong>Returns</strong></p><ul><li>Return type: dict<li>Returns: Response Syntax<div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="p">{</span>
  <span class="s">'DataLength'</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
  <span class="c1"># The size of the data in the block.
</span>  <span class="s">'BlockData'</span><span class="p">:</span> <span class="nc">StreamingBody</span><span class="p">(),</span>
  <span class="c1"># The data content of the block.
</span>  <span class="s">'Checksum'</span><span class="p">:</span> <span class="s">'string'</span><span class="p">,</span>
  <span class="c1"># The checksum generated for the block, Base64 encoded.
</span>  <span class="s">'ChecksumAlgorithm'</span><span class="p">:</span> <span class="s">'SHA256'</span>
  <span class="c1"># The algorithm used to generate the checksum for the block, such as SHA256.
</span><span class="p">}</span>
</pre></table></code></div></div></ul><p><strong>Exceptions</strong></p><ul><li>EBS.Client.exceptions.AccessDeniedException<li>EBS.Client.exceptions.ValidationException<li>EBS.Client.exceptions.ResourceNotFoundException<li>EBS.Client.exceptions.RequestThrottledException<li>EBS.Client.exceptions.ServiceQuotaExceededException<li>EBS.Client.exceptions.InternalServerException</ul><hr /><h3 id="get_waiterwaiter_name">get_waiter(<em>waiter_name</em>)</h3><p>Returns an object that can wait for some condition.</p><p><strong>Parameters</strong></p><ul><li><strong>waiter_name</strong> (<em>str</em>) – The name of the waiter to get.</ul><p><strong>Returns</strong></p><ul><li>The specified waiter object.<li>Return type: <code class="language-plaintext highlighter-rouge">botocore.waiter.Waiter</code></ul><hr /><h3 id="list_changed_blockskwargs_">list_changed_blocks(kwargs_)</h3><p>Returns information about <code class="language-plaintext highlighter-rouge">the blocks that are different between two Amazon Elastic Block Store snapshots</code> of the same volume/snapshot lineage.</p><p><strong>Request Syntax</strong></p><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">list_changed_blocks</span><span class="p">(</span>
    <span class="n">FirstSnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="c1"># The ID of the first snapshot to use for the comparison.
</span>    <span class="c1"># Warning: The FirstSnapshotID parameter must be specified with a SecondSnapshotId parameter; otherwise, an error occurs.
</span>    <span class="n">SecondSnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="c1"># **[REQUIRED]**
</span>    <span class="c1"># The ID of the second snapshot to use for the comparison.
</span>    <span class="c1"># Warning: The SecondSnapshotId parameter must be specified with a FirstSnapshotID parameter; otherwise, an error occurs.
</span>    <span class="n">NextToken</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="c1"># The token to request the next page of results.
</span>    <span class="n">MaxResults</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="c1"># The number of results to return.
</span>    <span class="n">StartingBlockIndex</span><span class="o">=</span><span class="mi">123</span>
    <span class="c1"># The block index from which the comparison should start.
</span>    <span class="c1"># The list in the response will start from this block index or the next valid block index in the snapshots.
</span><span class="p">)</span>
</pre></table></code></div></div><p><strong>Returns</strong></p><ul><li>Return type: dict<li><strong>Response Syntax</strong></ul><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="c1"># _(dict) --_
</span><span class="p">{</span>
    <span class="s">'ChangedBlocks'</span><span class="p">:</span>
    <span class="c1"># An array of objects containing information about the changed blocks.
</span>    <span class="p">[</span>
    <span class="c1"># A block of data in an Amazon Elastic Block Store snapshot that is different from another snapshot of the same volume/snapshot lineage.
</span>        <span class="p">{</span>
            <span class="s">'BlockIndex'</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
            <span class="c1"># The block index.
</span>            <span class="s">'FirstBlockToken'</span><span class="p">:</span> <span class="s">'string'</span><span class="p">,</span>
            <span class="c1"># The block token for the block index of the FirstSnapshotId specified in the ListChangedBlocks operation. This value is absent if the first snapshot does not have the changed block that is on the second snapshot.
</span>            <span class="s">'SecondBlockToken'</span><span class="p">:</span> <span class="s">'string'</span>
            <span class="c1"># The block token for the block index of the SecondSnapshotId specified in the ListChangedBlocks operation.
</span>        <span class="p">},</span>
    <span class="p">],</span>
    <span class="s">'ExpiryTime'</span><span class="p">:</span> <span class="nf">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="c1"># The time when the BlockToken expires.
</span>    <span class="s">'VolumeSize'</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="s">'BlockSize'</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="s">'NextToken'</span><span class="p">:</span> <span class="s">'string'</span>
    <span class="c1"># The token to use to retrieve the next page of results. This value is null when there are no more results to return.
</span><span class="p">}</span>
</pre></table></code></div></div><p><strong>Exceptions</strong></p><ul><li>EBS.Client.exceptions.AccessDeniedException<li>EBS.Client.exceptions.ValidationException<li>EBS.Client.exceptions.ResourceNotFoundException<li>EBS.Client.exceptions.RequestThrottledException<li>EBS.Client.exceptions.ServiceQuotaExceededException<li>EBS.Client.exceptions.InternalServerException</ul><hr /><h3 id="list_snapshot_blockskwargs_">list_snapshot_blocks(kwargs_)</h3><p>Returns information about the blocks in an Amazon Elastic Block Store snapshot.</p><p>See also: <a href="https://docs.aws.amazon.com/goto/WebAPI/ebs-2019-11-02/ListSnapshotBlocks">AWS API Documentation</a></p><p><strong>Request Syntax</strong></p><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">list_snapshot_blocks</span><span class="p">(</span>
    <span class="n">SnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">NextToken</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">MaxResults</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">StartingBlockIndex</span><span class="o">=</span><span class="mi">123</span>
<span class="p">)</span>
</pre></table></code></div></div><p>Parameters</p><ul><li><strong>SnapshotId</strong> (<em>string</em>) –<ul><li><strong>[REQUIRED]</strong><li>The ID of the snapshot from which to get block indexes and block tokens.</ul><li><strong>NextToken</strong> (<em>string</em>) –<ul><li>The token to request the next page of results.</ul><li><strong>MaxResults</strong> (<em>integer</em>) –<ul><li>The number of results to return.</ul><li><strong>StartingBlockIndex</strong> (<em>integer</em>) –<ul><li>The block index from which the list should start. The list in the response will start from this block index or the next valid block index in the snapshot.</ul></ul><p>Returns:</p><ul><li>Return type: dict<li><strong>Response Syntax</strong></ul><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="p">{</span>
    <span class="c1"># An array of objects containing information about the blocks.
</span>    <span class="s">'Blocks'</span><span class="p">:</span> <span class="p">[</span>
        <span class="c1"># A block of data in an Amazon Elastic Block Store snapshot.
</span>        <span class="p">{</span>
            <span class="s">'BlockIndex'</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
            <span class="s">'BlockToken'</span><span class="p">:</span> <span class="s">'string'</span>
        <span class="p">},</span>
    <span class="p">],</span>
    <span class="s">'ExpiryTime'</span><span class="p">:</span> <span class="nf">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="s">'VolumeSize'</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="s">'BlockSize'</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="c1"># The token to use to retrieve the next page of results. This value is null when there are no more results to return.
</span>    <span class="s">'NextToken'</span><span class="p">:</span> <span class="s">'string'</span>
<span class="p">}</span>
</pre></table></code></div></div><p><strong>Exceptions</strong></p><ul><li>EBS.Client.exceptions.AccessDeniedException<li>EBS.Client.exceptions.ValidationException<li>EBS.Client.exceptions.ResourceNotFoundException<li>EBS.Client.exceptions.RequestThrottledException<li>EBS.Client.exceptions.ServiceQuotaExceededException<li>EBS.Client.exceptions.InternalServerException</ul><hr /><h3 id="put_snapshot_blockkwargs_">put_snapshot_block(kwargs_)</h3><ul><li>Writes a block of data to a snapshot.<li>If the specified block contains data, the existing data is overwritten.<li>The target snapshot must be in the pending state.</ul><p>Data written to a snapshot must be aligned with 512-byte sectors.</p><p><strong>Request Syntax</strong></p><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">put_snapshot_block</span><span class="p">(</span>
    <span class="n">SnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">BlockIndex</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="c1"># The block index of the block in which to write the data.
</span>    <span class="c1"># A block index is a logical index in units of 512 KiB blocks.
</span>    <span class="c1"># To identify the block index, divide the logical offset of the data in the logical volume by the block size (logical offset of data/524288 ).
</span>    <span class="c1"># The logical offset of the data must be 512 KiB aligned.
</span>    <span class="n">BlockData</span><span class="o">=</span><span class="sa">b</span><span class="s">'bytes'</span><span class="o">|</span><span class="nb">file</span><span class="p">,</span>
    <span class="c1"># The data to write to the block.
</span>    <span class="c1"># The block data is not signed as part of the Signature Version 4 signing process.
</span>    <span class="c1"># As a result, you must generate and provide a Base64-encoded SHA256 checksum for the block data using the **x-amz-Checksum** header.
</span>    <span class="c1"># Also, must specify the checksum algorithm using the **x-amz-Checksum-Algorithm** header.
</span>    <span class="c1"># The checksum that you provide is part of the Signature Version 4 signing process.
</span>    <span class="c1"># It is validated against a checksum generated by Amazon EBS to ensure the validity and authenticity of the data.
</span>    <span class="c1"># If the checksums do not correspond, the request fails.
</span>    <span class="n">DataLength</span><span class="o">=</span><span class="mi">524288</span><span class="p">,</span>
    <span class="c1"># The size of the data to write to the block, in bytes.
</span>    <span class="c1"># Currently, the only supported size is 524288 .
</span>    <span class="n">Progress</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">Checksum</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="c1"># A Base64-encoded SHA256 checksum of the data. Only SHA256 checksums are supported.
</span>    <span class="n">ChecksumAlgorithm</span><span class="o">=</span><span class="s">'SHA256'</span>
    <span class="c1"># The algorithm used to generate the checksum. Currently, the only supported algorithm is SHA256 .
</span><span class="p">)</span>
</pre></table></code></div></div><p>Returns</p><ul><li>Return type: dict<li>Response Syntax</ul><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="p">{</span>
    <span class="s">'Checksum'</span><span class="p">:</span> <span class="s">'string'</span><span class="p">,</span>
    <span class="c1"># The SHA256 checksum generated for the block data by Amazon EBS.
</span>    <span class="s">'ChecksumAlgorithm'</span><span class="p">:</span> <span class="s">'SHA256'</span>
    <span class="c1"># The algorithm used by Amazon EBS to generate the checksum.
</span><span class="p">}</span>
</pre></table></code></div></div><p><strong>Exceptions</strong></p><ul><li>EBS.Client.exceptions.AccessDeniedException<li>EBS.Client.exceptions.ValidationException<li>EBS.Client.exceptions.ResourceNotFoundException<li>EBS.Client.exceptions.RequestThrottledException<li>EBS.Client.exceptions.ServiceQuotaExceededException<li>EBS.Client.exceptions.InternalServerException</ul><hr /><h3 id="start_snapshotkwargs_">start_snapshot(kwargs_)</h3><ul><li>Creates a new Amazon EBS snapshot.<li>The new snapshot enters the pending state after the request completes.<li>After creating the snapshot, use <code class="language-plaintext highlighter-rouge">PutSnapshotBlock</code> to write blocks of data to the snapshot.</ul><p><strong>Request Syntax</strong></p><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">start_snapshot</span><span class="p">(</span>
    <span class="n">VolumeSize</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="c1"># The size of the volume, in GiB. The maximum size is 16384 GiB (16 TiB).
</span>    <span class="n">ParentSnapshotId</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="c1"># The ID of the parent snapshot.
</span>    <span class="c1"># If there is no parent snapshot, or creating the first snapshot for an on-premises volume, omit this parameter.
</span>    <span class="c1"># If account is enabled for encryption by default, you cannot use an unencrypted snapshot as a parent snapshot. first create an encrypted copy of the parent snapshot using CopySnapshot
</span>    <span class="n">Tags</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span>
            <span class="s">'Key'</span><span class="p">:</span> <span class="s">'string'</span><span class="p">,</span>
            <span class="s">'Value'</span><span class="p">:</span> <span class="s">'string'</span>
        <span class="p">},</span>
    <span class="p">],</span>
    <span class="n">Description</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="n">ClientToken</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="c1"># A unique, case-sensitive identifier you provide to ensure the idempotency of the request.
</span>    <span class="c1"># Idempotency ensures that an API request completes only once.
</span>    <span class="c1"># With an idempotent request, if the original request completes successfully. The subsequent retries with the same client token return the result from the original successful request and they have no additional effect.
</span>    <span class="c1"># autopopulated if not provided. If you do not specify a client token, one is automatically generated by the AWS SDK.
</span>    <span class="n">Encrypted</span><span class="o">=</span><span class="bp">True</span><span class="o">|</span><span class="bp">False</span><span class="p">,</span>
    <span class="c1"># Indicates whether to encrypt the snapshot.
</span>    <span class="c1"># To create an encrypted snapshot = true.
</span>    <span class="c1"># To create an unencrypted snapshot, omit this parameter.
</span>    <span class="c1"># If you specify a value for **ParentSnapshotId** , omit this parameter.
</span>    <span class="c1"># If true, the snapshot is encrypted using the CMK specified using the **KmsKeyArn** parameter.
</span>    <span class="c1"># If no value is specified for **KmsKeyArn** , the default CMK for account is used. If no default CMK has been specified for account, the AWS managed CMK is used. To set a default CMK for account, use ModifyEbsDefaultKmsKeyId
</span>    <span class="c1"># If account is enabled for encryption by default, you cannot set this parameter to false . In this case, you can omit this parameter.
</span>    <span class="n">KmsKeyArn</span><span class="o">=</span><span class="s">'string'</span><span class="p">,</span>
    <span class="c1"># The Amazon Resource Name (ARN) of the AWS Key Management Service (AWS KMS) customer master key (CMK) to be used to encrypt the snapshot.
</span>    <span class="c1"># If you do not specify a CMK, the default AWS managed CMK is used.
</span>    <span class="c1"># If you specify a **ParentSnapshotId** , omit this parameter; the snapshot will be encrypted using the same CMK that was used to encrypt the parent snapshot.
</span>    <span class="c1"># If **Encrypted** is set to true , you must specify a CMK ARN.
</span>    <span class="n">Timeout</span><span class="o">=</span><span class="mi">123</span>
    <span class="c1"># The amount of time (minutes) after which the snapshot is automatically cancelled if:
</span>    <span class="c1"># - No blocks are written to the snapshot.
</span>    <span class="c1"># - The snapshot is not completed after writing the last block of data.
</span>    <span class="c1"># If no value is specified, the timeout defaults to 60 minutes.
</span><span class="p">)</span>
</pre></table></code></div></div><p>Return</p><ul><li>Return type: dict<li>Response Syntax</ul><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="p">{</span>
    <span class="s">'Description'</span><span class="p">:</span> <span class="s">'string'</span><span class="p">,</span>
    <span class="c1"># The description of the snapshot.
</span>    <span class="s">'SnapshotId'</span><span class="p">:</span> <span class="s">'string'</span><span class="p">,</span>
    <span class="s">'OwnerId'</span><span class="p">:</span> <span class="s">'string'</span><span class="p">,</span>
    <span class="s">'Status'</span><span class="p">:</span> <span class="s">'completed'</span><span class="o">|</span><span class="s">'pending'</span><span class="o">|</span><span class="s">'error'</span><span class="p">,</span>
    <span class="s">'StartTime'</span><span class="p">:</span> <span class="nf">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="c1"># The timestamp when the snapshot was created.
</span>    <span class="s">'VolumeSize'</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="c1"># The size of the volume, in GiB.
</span>    <span class="s">'BlockSize'</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="s">'Tags'</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s">'Key'</span><span class="p">:</span> <span class="s">'string'</span><span class="p">,</span>
            <span class="s">'Value'</span><span class="p">:</span> <span class="s">'string'</span>
        <span class="p">},</span>
    <span class="p">],</span>
    <span class="s">'ParentSnapshotId'</span><span class="p">:</span> <span class="s">'string'</span><span class="p">,</span>
    <span class="s">'KmsKeyArn'</span><span class="p">:</span> <span class="s">'string'</span>
    <span class="c1"># The Amazon Resource Name (ARN) of the AWS Key Management Service (AWS KMS) customer master key (CMK) used to encrypt the snapshot.
</span><span class="p">}</span>
</pre></table></code></div></div><p><strong>Exceptions</strong></p><ul><li>EBS.Client.exceptions.AccessDeniedException<li>EBS.Client.exceptions.ValidationException<li>EBS.Client.exceptions.RequestThrottledException<li>EBS.Client.exceptions.ResourceNotFoundException<li>EBS.Client.exceptions.ServiceQuotaExceededException<li>EBS.Client.exceptions.InternalServerException<li>EBS.Client.exceptions.ConcurrentLimitExceededException<li>EBS.Client.exceptions.ConflictException</ul><hr /><h2 id="example">example</h2><h3 id="enable-ebs-default-encryption">Enable EBS Default Encryption</h3><ol><li>do via AWS CLI</ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>aws ec2 enable-ebs-encryption-by-default
</pre></table></code></div></div><ol><li>script for one region</ol><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>
<span class="kn">import</span> <span class="n">boto3</span>

<span class="n">region</span> <span class="o">=</span> <span class="s">'eu-west-1'</span>
<span class="n">ec2connection</span> <span class="o">=</span> <span class="n">boto3</span><span class="p">.</span><span class="nf">client</span><span class="p">(</span><span class="s">'ec2'</span><span class="p">,</span> <span class="n">region</span><span class="p">)</span>
<span class="nf">print </span><span class="p">(</span><span class="s">"Checking AWS Region: "</span> <span class="o">+</span> <span class="n">region</span><span class="p">)</span>

<span class="n">status</span> <span class="o">=</span> <span class="n">ec2connection</span><span class="p">.</span><span class="nf">get_ebs_encryption_by_default</span><span class="p">()</span>  <span class="c1"># the ebs current status
</span>
<span class="nf">print </span><span class="p">(</span><span class="s">" ------------- unit test: if it is alredy encrypted ------------- "</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">status</span><span class="p">[</span><span class="s">"EbsEncryptionByDefault"</span><span class="p">]</span>
<span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
    <span class="nf">print </span><span class="p">(</span><span class="s">"Activated, nothing to do"</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Not activated, activation in progress"</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">ec2connection</span><span class="p">.</span><span class="nf">enable_ebs_encryption_by_default</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Setup default EBS Encryption for region"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span><span class="s">": "</span><span class="p">,</span>  <span class="n">response</span><span class="p">[</span><span class="s">'EbsEncryptionByDefault'</span><span class="p">])</span>

</pre></table></code></div></div><ol><li>script for all the region</ol><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">boto3</span>

<span class="c1"># --------------------- check for all the region
# AWS_REGION = 'eu-west-1'
# session = boto3.Session(region_name=AWS_REGION)
# ec2 = session.client('ec2')
</span>
<span class="n">ec2</span> <span class="o">=</span> <span class="n">boto3</span><span class="p">.</span><span class="nc">Session</span><span class="p">(</span><span class="n">region_name</span><span class="o">=</span><span class="s">'eu-west-1'</span><span class="p">).</span><span class="nf">client</span><span class="p">(</span><span class="s">'ec2'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="n">ec2_regions</span> <span class="o">=</span> <span class="p">[</span><span class="n">region</span><span class="p">[</span><span class="s">'RegionName'</span><span class="p">]</span> <span class="k">for</span> <span class="n">region</span> <span class="ow">in</span> <span class="n">ec2</span><span class="p">.</span><span class="nf">describe_regions</span><span class="p">()[</span><span class="s">'Regions'</span><span class="p">]]</span>
    <span class="c1"># For all AWS Regions
</span>    <span class="k">for</span> <span class="n">region</span> <span class="ow">in</span> <span class="n">ec2_regions</span><span class="p">:</span>
        <span class="n">conn</span> <span class="o">=</span> <span class="n">boto3</span><span class="p">.</span><span class="nf">client</span><span class="p">(</span><span class="s">'ec2'</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="n">region</span><span class="p">)</span>
        <span class="nf">print </span><span class="p">(</span><span class="s">"Checking AWS Region: "</span> <span class="o">+</span> <span class="n">region</span><span class="p">)</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="nf">get_ebs_encryption_by_default</span><span class="p">()</span>
        <span class="nf">print </span><span class="p">(</span><span class="s">"===="</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">status</span><span class="p">[</span><span class="s">"EbsEncryptionByDefault"</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="nf">print </span><span class="p">(</span><span class="s">"Activated, nothing to do"</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Not activated, activation in progress"</span><span class="p">)</span>
            <span class="n">conn</span><span class="p">.</span><span class="nf">enable_ebs_encryption_by_default</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="nf">main</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
</pre></table></code></div></div><p>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/01aws/'>01AWS</a>, <a href='/categories/boto3/'>boto3</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/aws/" class="post-tag no-text-decoration" >AWS</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AWS - boto3 - EBS - Grace&url=https://ocholuo.github.io//posts/boto3-EBS/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AWS - boto3 - EBS - Grace&u=https://ocholuo.github.io//posts/boto3-EBS/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=AWS - boto3 - EBS - Grace&url=https://ocholuo.github.io//posts/boto3-EBS/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/boto3-0setup/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - boto3 - setup</h3><div class="text-muted small"><p> Boto3 Installation Configuration Using Boto3 Boto3 reference Boto3 Installation pip install boto3 pip3 install boto3 botostubs pip install boto3==1.0.0...</p></div></div></a></div><div class="card"> <a href="/posts/boto3-CloudWatch/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - boto3 - boto3.client('cloudwatch') CloudWatch</h3><div class="text-muted small"><p> Amazon CloudWatch boto3.client('cloudwatch') example AWS CloudWatch Log Group Retention to 60 Amazon CloudWatch boto3.client('cloudwatch...</p></div></div></a></div><div class="card"> <a href="/posts/boto3-DynamoDB/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - boto3 - boto3.resource('dynamodb') - DynamoDB</h3><div class="text-muted small"><p> Amazon DynamoDB boto3.resource('dynamodb') Amazon DynamoDB boto3.resource('dynamodb') By following this guide, you will learn how to use the DynamoDB.ServiceResource and DynamoDB.Table reso...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/boto3-DynamoDB/" class="btn btn-outline-primary" prompt="Older"><p>AWS - boto3 - boto3.resource('dynamodb') - DynamoDB</p></a> <a href="/posts/boto3-S3/" class="btn btn-outline-primary" prompt="Newer"><p>AWS - boto3 - S3</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
