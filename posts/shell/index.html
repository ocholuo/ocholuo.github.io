<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="SHELL Note" /><meta property="og:locale" content="en" /><meta name="description" content="[toc]" /><meta property="og:description" content="[toc]" /><link rel="canonical" href="https://ocholuo.github.io//posts/shell/" /><meta property="og:url" content="https://ocholuo.github.io//posts/shell/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-09-25T11:11:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="SHELL Note" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2020-09-25T11:11:11-04:00","datePublished":"2020-09-25T11:11:11-04:00","description":"[toc]","headline":"SHELL Note","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/shell/"},"url":"https://ocholuo.github.io//posts/shell/"}</script><title>SHELL Note | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>SHELL Note</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>SHELL Note</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Sep 25, 2020, 11:11 AM -0400" >Sep 25, 2020<i class="unloaded">2020-09-25T11:11:11-04:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2707 words">15 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><p>[toc]</p><hr /><h1 id="shell-grammar">Shell grammar</h1><h2 id="simple-commands">Simple Commands</h2><p>A simple command is an optional sequence of variable assignments followed by blank-separated words and redirections, and terminated by a control operator.</p><ul><li>The first word specifies the command to be executed, and is passed as argument zero.<li>The remaining words are passed as arguments to the invoked command.<li>The return value of a simple command is its <code class="language-plaintext highlighter-rouge">exit status</code>, or <code class="language-plaintext highlighter-rouge">128+n</code> if the command is terminated by signal <code class="language-plaintext highlighter-rouge">n</code>.</ul><h2 id="pipelines">Pipelines</h2><p>A pipeline is a sequence of one or more commands separated by one of the control operators <code class="language-plaintext highlighter-rouge">|</code> or <code class="language-plaintext highlighter-rouge">|&amp;</code>.</p><ol><li>If <code class="language-plaintext highlighter-rouge">|&amp;</code> is used, the <code class="language-plaintext highlighter-rouge">standard error</code> of command1 is connected to command2’s <code class="language-plaintext highlighter-rouge">standard input</code> through the pipe; it is shorthand for <code class="language-plaintext highlighter-rouge">2&gt;&amp;1 |</code>.<ul><li>This implicit redirection of the <code class="language-plaintext highlighter-rouge">standard error</code> is performed after any redirections specified by the command.</ul></ol><p>The return status of a pipeline is the exit status of the last command, unless the pipefail option is enabled.</p><ul><li>If pipefail is enabled, the pipeline’s return status is the value of the last (rightmost) command to exit with a non-zero status, or zero if all commands exit successfully.<li>If the reserved word <code class="language-plaintext highlighter-rouge">!</code> precedes a pipeline, the exit status of that pipeline is the logical negation of the exit status as described above.<li>The shell waits for all commands in the pipeline to terminate before returning a value.</ul><h2 id="lists">Lists</h2><p>A list is a sequence of one or more pipelines separated by one of the operators <code class="language-plaintext highlighter-rouge">;, &amp;, &amp;&amp;, or ||</code>, and optionally terminated by one of <code class="language-plaintext highlighter-rouge">;, &amp;, or &lt;newline&gt;</code>.</p><div class="table-wrapper"><table><tbody><tr><td>Of these list operators, &amp;&amp; and<td> <td>have equal precedence, followed by ; and &amp;, which have equal precedence.</table></div><p>A sequence of one or more newlines may appear in a list instead of a semicolon to delimit commands.</p><ol><li>command is terminated by the control operator <code class="language-plaintext highlighter-rouge">&amp;</code>, the shell executes the command in the background in a subshell.<ul><li>The shell does not wait for the command to finish<li>the return status is 0.</ul><li>Commands separated by a <code class="language-plaintext highlighter-rouge">;</code> are executed sequentially;<ul><li>the shell waits for each command to terminate in turn.<li>The return status is <strong>the exit status of the last command executed</strong>.</ul></ol><p>AND and OR lists are sequences of one of more pipelines</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>command1 <span class="o">&amp;&amp;</span> command2
<span class="c"># command2 is executed only if command1 returns an exit status of zero.</span>

command1 <span class="o">||</span> command2
<span class="c"># command2 is executed only if command1 returns a non-zero exit status.</span>
<span class="c"># The return status of AND and OR lists is the exit status of the last command executed in the list.</span>
</pre></table></code></div></div><h2 id="compound-commands">Compound Commands</h2><p>A compound command is one of the following:</p><ol><li><code class="language-plaintext highlighter-rouge">(list)</code><ul><li>list is executed in a subshell environment.<li>Variable assignments and builtin commands that affect the shell’s environment do not remain in effect after the command completes.<li>The return status is the exit status of list.</ul><li>{ list; }<ul><li>list is executed in the current shell environment.<li>The list must be terminated with a newline or semicolon. This is known as a group command.<li>The return status is the exit status of list.<li>unlike the metacharacters ( and ), { and } are reserved words and must occur where a reserved word is permitted to be recognized. Since they do not cause a word break, they must be separated from list by whitespace or another shell metacharacter.</ul><li>((expression))<ul><li>The expression is evaluated according to the rules described below in the section “Arithmetic Evaluation”.<li>If the value of the expression is non-zero, the return status is 0; otherwise the return status is 1.<li>This is exactly equivalent to <code class="language-plaintext highlighter-rouge">let "expression"</code>.</ul><li>[[ expression ]]<ul><li>Return a status of 0 or 1 depending on the evaluation of the conditional expression expression.<li>Expressions are composed of the primaries described below under the section “Conditional Expressions.”<li>Word splitting and pathname expansion are not performed on the words between the [[ and ]]; tilde expansion, parameter and variable expansion, arithmetic expansion, command substitution, process substitution, and quote removal are performed.<li>Conditional operators such as -f must be unquoted to be recognized as primaries.<li>When used with [[, the &lt; and &gt; operators sort lexicographically using the current locale</ul></ol><p>When the == and != operators are used, the string to the right of the operator is considered a pattern and matched according to the rules described below under Pattern Matching. If the shell option nocasematch is enabled, the match is performed without regard to the case of alphabetic characters. The return value is 0 if the string matches (==) or does not match (!=) the pattern, and 1 otherwise. Any part of the pattern may be quoted to force it to be matched as a string.</p><h2 id="expression">expression</h2><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre><td class="rouge-code"><pre><span class="o">(</span> expression <span class="o">)</span>
<span class="c"># Returns the value of expression.</span>
<span class="c"># This may be used to override the normal precedence of operators.</span>

<span class="o">!</span> expression
<span class="c"># True if expression is false.</span>

expression1 <span class="o">&amp;&amp;</span> expression2
<span class="c"># True if both expression1 and expression2 are true.</span>
expression1 <span class="o">||</span> expression2
<span class="c"># True if either expression1 or expression2 is true.</span>
<span class="c"># The &amp;&amp; and || operators do not evaluate expression2 if the value of expression1 is sufficient to determine the return value of the entire conditional expression.</span>

<span class="k">for </span>name <span class="o">[</span> <span class="o">[</span> <span class="k">in</span> <span class="o">[</span> word ... <span class="o">]</span> <span class="o">]</span> <span class="p">;</span> <span class="o">]</span> <span class="k">do </span>list <span class="p">;</span> <span class="k">done</span>
<span class="c"># The list of words following in is expanded, generating a list of items.</span>
<span class="c"># The variable name is set to each element of this list in turn, and list is executed each time.</span>
<span class="c"># If the in word is omitted, the for command executes list once for each positional parameter that is set (see the "Parameters" section below).</span>
<span class="c"># The return status is the exit status of the last command that executes.</span>
<span class="c"># If the expansion of the items following in results in an empty list, no commands are executed, and the return status is 0.</span>


<span class="k">for</span> <span class="o">((</span> expr1 <span class="p">;</span> expr2 <span class="p">;</span> expr3 <span class="o">))</span> <span class="p">;</span> <span class="k">do </span>list <span class="p">;</span> <span class="k">done</span>
<span class="c"># First, the arithmetic expression expr1 is evaluated.</span>
<span class="c"># The arithmetic expression expr2 is then evaluated repeatedly until it evaluates to zero.</span>
<span class="c"># Each time expr2 evaluates to a non-zero value, list is executed and the arithmetic expression expr3 is evaluated.</span>
<span class="c"># If any expression is omitted, it behaves as if it evaluates to 1.</span>
<span class="c"># The return value is the exit status of the last command in list that is executed, or false if any of the expressions is invalid.</span>

<span class="k">select </span>name <span class="o">[</span> <span class="k">in </span>word <span class="o">]</span> <span class="p">;</span> <span class="k">do </span>list <span class="p">;</span> <span class="k">done</span>
<span class="c"># The list of words following in is expanded, generating a list of items. The set of expanded words is printed on the standard error, each preceded by a number. If the in word is omitted, the positional parameters are printed.</span>
<span class="c"># The PS3 prompt is then displayed and a line read from the standard input.</span>
<span class="c"># If the line consists of a number corresponding to one of the displayed words, then the value of name is set to that word.</span>
<span class="c"># If the line is empty, the words and prompt are displayed again.</span>
<span class="c"># If EOF is read, the command completes.</span>
<span class="c"># Any other value read causes name to be set to null.</span>
<span class="c"># The line read is saved in the variable REPLY. The list is executed after each selection until a break command is executed.</span>
<span class="c"># The exit status of select is the exit status of the last command executed in list, or zero if no commands were executed.</span>

<span class="k">case</span> word <span class="k">in</span> <span class="o">[</span> <span class="o">[(]</span> pattern <span class="o">[</span> <span class="p">|</span> pattern <span class="o">]</span> ... <span class="p">)</span> list <span class="p">;;</span> <span class="o">]</span> ... <span class="k">esac</span>
<span class="c"># A case command first expands word, and tries to match it against each pattern in turn, using the same matching rules as for pathname expansion. The word is expanded using tilde expansion, parameter and variable expansion, arithmetic substitution, command substitution, process substitution and quote removal. Each pattern examined is expanded using tilde expansion, parameter and variable expansion, arithmetic substitution, command substitution, and process substitution. If the shell option nocasematch is enabled, the match is performed without regard to the case of alphabetic characters. When a match is found, the corresponding list is executed. If the ;; operator is used, no subsequent matches are attempted after the first pattern match. Using ;&amp; in place of ;; causes execution to continue with the list associated with the next set of patterns. Using ;;&amp; in place of ;; causes the shell to test the next pattern list in the statement, if any, and execute any associated list on a successful match. The exit status is zero if no pattern matches. Otherwise, it is the exit status of the last command executed in list.</span>

<span class="k">if </span>list<span class="p">;</span> <span class="k">then </span>list<span class="p">;</span> <span class="o">[</span> <span class="k">elif </span>list<span class="p">;</span> <span class="k">then </span>list<span class="p">;</span> <span class="o">]</span> ... <span class="o">[</span> <span class="k">else </span>list<span class="p">;</span> <span class="o">]</span> <span class="k">fi</span>
<span class="c"># The if list is executed. If its exit status is zero, the then list is executed. Otherwise, each elif list is executed in turn, and if its exit status is zero, the corresponding then list is executed and the command completes. Otherwise, the else list is executed, if present. The exit status is the exit status of the last command executed, or zero if no condition tested true.</span>

<span class="k">while </span>list-1<span class="p">;</span> <span class="k">do </span>list-2<span class="p">;</span> <span class="k">done until </span>list-1<span class="p">;</span> <span class="k">do </span>list-2<span class="p">;</span> <span class="k">done</span>
<span class="c"># The while command continuously executes the list list-2 as long as the last command in the list list-1 returns an exit status of zero. The until command is identical to the while command, except that the test is negated; list-2 is executed as long as the last command in list-1 returns a non-zero exit status. The exit status of the while and until commands is the exit status of the last command executed in list-2, or zero if none was executed.</span>
</pre></table></code></div></div><hr /><h1 id="parameters">Parameters</h1><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>
<span class="nv">name</span><span class="o">=[</span>value]
<span class="c"># A variable assigned by a statement</span>
<span class="c"># If value is not given, the variable is assigned the null string.</span>


</pre></table></code></div></div><hr /><h2 id="arrays">Arrays</h2><ul><li>Bash provides one-dimensional indexed and associative array variables. Any variable may be used as an indexed array;<li>There is no maximum limit on the size of an array, nor any requirement that members be indexed or assigned contiguously.<li><code class="language-plaintext highlighter-rouge">-a</code>: <code class="language-plaintext highlighter-rouge">Indexed arrays</code> are referenced using integers (including arithmetic expressions) and are zero-based;<li><code class="language-plaintext highlighter-rouge">-A</code>: <code class="language-plaintext highlighter-rouge">associative arrays</code> are referenced using arbitrary strings.</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="c"># the declare builtin will explicitly declare an array.</span>
<span class="nb">declare</span> <span class="nt">-a</span> name[subscript]

<span class="c"># An indexed array is created automatically if any variable is assigned to</span>
name[subscript]<span class="o">=</span>value.

<span class="c"># Any element of an array</span>
<span class="k">${</span><span class="nv">name</span><span class="p">[subscript]</span><span class="k">}</span>
<span class="c"># If subscript is @ or *, the word expands to all members of name.</span>

<span class="c"># These subscripts differ only when the word appears within double quotes.</span>
<span class="c"># If the word is double-quoted, ${name[*]} expands to a single word with the value of each array member separated by the first character of the IFS special variable, and ${name[@]} expands each element of name to a separate word. When there are no array members, ${name[@]} expands to nothing. If the double-quoted expansion occurs within a word, the expansion of the first parameter is joined with the beginning part of the original word, and the expansion of the last parameter is joined with the last part of the original word. This is analogous to the expansion of the special parameters * and @ (see the section "Special Parameters" above).</span>

<span class="c"># length of array</span>
<span class="k">${#</span><span class="nv">name</span><span class="p">[subscript]</span><span class="k">}</span>
<span class="c"># If subscript is * or @, the expansion is the number of elements in the array.</span>
<span class="c"># Referencing an array variable without a subscript is equivalent to referencing the array with a subscript of 0.</span>

<span class="c"># to destroy arrays.</span>
<span class="nb">unset </span>name
<span class="nb">unset </span>name[subscript]
<span class="nb">unset </span>name[<span class="k">*</span><span class="o">]</span>
<span class="nb">unset </span>name[@]
<span class="c"># destroys the array element at index subscript.</span>


</pre></table></code></div></div><hr /><h2 id="expansion">expansion</h2><p>seven kinds of expansion performed:</p><ul><li>brace expansion,<li>tilde expansion,<li>parameter and variable expansion,<li>command substitution,<li>arithmetic expansion,<li>word splitting,<li>and pathname expansion.</ul><ol><li>Brace expansion</ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>a<span class="o">{</span>d,c,b<span class="o">}</span>e
<span class="c"># ade ace abe</span>

<span class="nb">mkdir</span> /usr/local/src/bash/<span class="o">{</span>old,new,dist,bugs<span class="o">}</span>
<span class="c"># /usr/local/src/bash/old</span>
<span class="c"># /usr/local/src/bash/new</span>
<span class="c"># /usr/local/src/bash/dist,bugs</span>

<span class="nb">chown </span>root /usr/<span class="o">{</span>ucb/<span class="o">{</span>ex,edit<span class="o">}</span>,lib/<span class="o">{</span>ex?.?<span class="k">*</span>,how_ex<span class="o">}}</span>
<span class="c"># /usr/ucb/ex</span>
<span class="c"># /usr/ucb/edit</span>
<span class="c"># ../lib/ex?.?*</span>
<span class="c"># ../lib/how_ex</span>

</pre></table></code></div></div><ol><li>Command substitution</ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c"># allows the output of a command to replace the command name.</span>
<span class="si">$(</span><span class="nb">command</span><span class="si">)</span>
<span class="sb">`</span><span class="nb">command</span><span class="sb">`</span>

<span class="si">$(</span><span class="nb">cat </span>file<span class="si">)</span>
<span class="si">$(</span>&lt; file<span class="si">)</span>
</pre></table></code></div></div><ol><li>Arithmetic expansion</ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="c"># allows the evaluation of an arithmetic expression and the substitution of the result.</span>

<span class="k">$((</span>expression<span class="k">))</span>

<span class="c"># The old format</span>
<span class="nv">$[</span>expression]
<span class="c"># is deprecated and will be removed in upcoming versions of bash.</span>
</pre></table></code></div></div><hr /><h1 id="redirection">redirection</h1><h2 id="stdin-stdout-stderr-redirect">stdin stdout stderr redirect</h2><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
</pre><td class="rouge-code"><pre><span class="c"># 0&lt; stdin</span>
<span class="c"># 1&gt; stdout</span>
<span class="c"># 2&gt; stderr</span>

<span class="nt">-----------------------------</span>

<span class="nv">$ </span><span class="nb">echo </span>hello <span class="o">&gt;</span> hello.txt
<span class="nv">$ </span><span class="nb">echo </span>world <span class="o">&gt;</span> hello.txt
<span class="c"># world</span>

<span class="nv">$ </span><span class="nb">echo </span>hello <span class="o">&gt;</span> hello.txt
<span class="nv">$ </span><span class="nb">echo </span>world <span class="o">&gt;&gt;</span> hello.txt
<span class="c"># hello world</span>
<span class="c"># Appending redirected output</span>

<span class="nt">-----------------------------</span>

<span class="nv">$ </span><span class="nb">echo </span>hello 1&gt; hello.txt
<span class="c"># hello</span>

<span class="nv">$ </span>wrongcommand
<span class="c"># wrongcommand: command not found</span>

<span class="nv">$ </span>wrongcommand <span class="o">&gt;</span> error.txt
<span class="c"># error.txt: nothing</span>

<span class="nv">$ </span>wrongcommand 2&gt; error.txt
<span class="c"># error.txt: wrongcommand: command not found</span>

<span class="nt">-----------------------------</span>

<span class="nv">$ </span>./test.py 1&gt; out.txt
<span class="c"># out.txt: output</span>

<span class="nv">$ </span>./test.py 2&gt;1 1&gt; out.txt
<span class="c"># 1: error</span>
<span class="c"># out.txt: output</span>

<span class="nv">$ </span>./test.py 2&gt;&amp;1 1&gt; out.txt
<span class="c"># file descriptor screen: display error</span>
<span class="c"># out.txt: output</span>

<span class="nv">$ </span>./test.py 1&gt; out.txt 2&gt;<span class="nv">$1</span>
<span class="nv">$ </span>./test.py <span class="o">&gt;</span> out.txt 2&gt;<span class="nv">$1</span>
<span class="nv">$ </span>./test.py &amp;&gt; out.txt
<span class="nv">$ </span>./test.py <span class="o">&gt;</span>&amp; out.txt
<span class="c"># out.txt: error, output</span>

<span class="nv">$ </span><span class="nb">cat </span>0&lt; out.txt
<span class="nv">$ </span><span class="nb">cat</span> &lt; out.txt
<span class="c"># = cat out.txt</span>
</pre></table></code></div></div><hr /><h1 id="command">command</h1><hr /><h2 id="exec">exec</h2><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre><td class="rouge-code"><pre><span class="nb">exec </span>rbash
<span class="c"># Replace the current bash shell with rbash, the restricted bash login shell. Because the original bash shell is destroyed, the user will not be returned to a privileged bash shell when rbash exits.</span>

<span class="nb">exec</span> <span class="o">&gt;</span> output.txt
<span class="c"># Redirect all output to the file output.txt for the current shell process.</span>
<span class="c"># Redirections are a special case, and exec does not destroy the current shell process, but bash will no longer print output to the screen, writing it to the file instead. (This technique is much more useful in scripts — if the above command is executed in a script, all script output will be written to output.txt.)</span>

<span class="nb">exec </span>3&lt; myinfile.txt
<span class="c"># Open myinfile.txt for reading ("&lt;") on file descriptor 3.</span>
<span class="c"># explicitly opening a file descriptor</span>
<span class="c"># After running the above command, you can read a line of myinfile.txt by running the read command with the -u option:</span>

<span class="nb">read</span> <span class="nt">-u</span> 3 mydata
<span class="c"># "-u 3" tells read to get its data from file descriptor 3, which refers to myinfile.txt.</span>
<span class="c"># The contents are read, one line at a time, into the variable mydata. This would be useful if used as part of a while loop, for example.</span>



<span class="c"># open and close new file descriptors.</span>

<span class="nb">exec </span>4&gt; out.txt
<span class="c"># opens out.txt for writing ("&gt;") on file descriptor 4.</span>

<span class="nb">exec </span>3&lt;&amp;-
<span class="c"># Close ("&amp;-") the open read descriptor ("&lt;") number 3.</span>

<span class="nb">exec </span>4&gt;&amp;-
<span class="c"># Close the open write descriptor ("&gt;") number 4.</span>

<span class="nb">exec </span>5&lt;<span class="o">&gt;</span> myfile.txt
<span class="c"># Open myfile.txt for reading and writing ("&lt;&gt;") as file descriptor 5.</span>

<span class="nb">exec </span>5&lt;<span class="o">&gt;</span>&amp;-
<span class="c"># Close open read/write descriptor 5.</span>

<span class="nb">exec </span>6&gt;&gt; myappendfile.txt
<span class="c"># Open myappendfile.txt for appending ("&gt;&gt;") as file descriptor 6.</span>

<span class="nb">exec</span> <span class="o">{</span>myfd<span class="o">}&gt;</span> out.txt
<span class="c"># Open myfile.txt for writing. A new file descriptor number, chosen automatically, is assigned to the variable myfd.</span>

<span class="nb">echo </span>Text <span class="o">&gt;</span>&amp;myfd
<span class="c"># Echo the text "Text" and redirect the output to the file (in this case, myfile.txt) described by the write descriptor ("&gt;") whose number is obtained by dereferencing ("&amp;") the variable named myfd.</span>
</pre></table></code></div></div><p>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/00codenote/'>00CodeNote</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/script/" class="post-tag no-text-decoration" >Script</a> <a href="/tags/shell/" class="post-tag no-text-decoration" >shell</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=SHELL Note - Grace&url=https://ocholuo.github.io//posts/shell/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=SHELL Note - Grace&u=https://ocholuo.github.io//posts/shell/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=SHELL Note - Grace&url=https://ocholuo.github.io//posts/shell/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/CPP-setup/"><div class="card-body"> <span class="timeago small" >May 25, 2017<i class="unloaded">2017-05-25T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>C++</h3><div class="text-muted small"><p> [toc] C++ C++ basic 一种中级语言， 由 Bjarne Stroustrup 于 1979 年在贝尔实验室开始设计开发的。 C++ 进一步扩充和完善了 C 语言，是一种面向对象的程序设计语言。 C++ 可运行于多种平台上，如 Windows、MAC 操作系统以及 UNIX 的各种版本。 面向对象程序设计 C++ 完全支持面向对象的程序设计...</p></div></div></a></div><div class="card"> <a href="/posts/shellscripts/"><div class="card-body"> <span class="timeago small" >Jul 16, 2020<i class="unloaded">2020-07-16T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>ShellScripts</h3><div class="text-muted small"><p> Writing Shell Scripts [toc] What are Shell Scripts? ref http://linuxcommand.org/lc3_wss0140.php With the thousands of commands available for the command line user, how can you remember them all...</p></div></div></a></div><div class="card"> <a href="/posts/README/"><div class="card-body"> <span class="timeago small" >Sep 4, 2020<i class="unloaded">2020-09-04T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Coding Problems & Solutions</h3><div class="text-muted small"><p> Coding Problems &amp; Solutions cheatsheet if none while generate list Problems &amp; Solutions solution: ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/bash/" class="btn btn-outline-primary" prompt="Older"><p>Bash Note</p></a> <a href="/posts/emoji/" class="btn btn-outline-primary" prompt="Newer"><p>Emoji</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
