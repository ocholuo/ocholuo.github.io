<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="AWS - IdenAccessManage - STS Security Token Service" /><meta property="og:locale" content="en" /><meta name="description" content="STS Security Token Service Using AWS STS with AWS regions Direct AWS STS API calls User case !!! Identity federation 1. Enterprise identity federation Single Sign-On (SSO) 2. Web identity federation Web Identity Federation Cross-account access whether a cross-account request is allowed setup cross-account access Recording API requests Requesting temporary security credentials AWS STS with SDKs AWS STS Query API call the AssumeRole action of AWS STS make call call the AssumeRoleWithSAML action of AWS STS call the AssumeRoleWithWebIdentity action of AWS STS make call" /><meta property="og:description" content="STS Security Token Service Using AWS STS with AWS regions Direct AWS STS API calls User case !!! Identity federation 1. Enterprise identity federation Single Sign-On (SSO) 2. Web identity federation Web Identity Federation Cross-account access whether a cross-account request is allowed setup cross-account access Recording API requests Requesting temporary security credentials AWS STS with SDKs AWS STS Query API call the AssumeRole action of AWS STS make call call the AssumeRoleWithSAML action of AWS STS call the AssumeRoleWithWebIdentity action of AWS STS make call" /><link rel="canonical" href="https://ocholuo.github.io//posts/STS/" /><meta property="og:url" content="https://ocholuo.github.io//posts/STS/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-07-18T11:11:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="AWS - IdenAccessManage - STS Security Token Service" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-12-10T14:14:41-05:00","datePublished":"2020-07-18T11:11:11-04:00","description":"STS Security Token Service Using AWS STS with AWS regions Direct AWS STS API calls User case !!! Identity federation 1. Enterprise identity federation Single Sign-On (SSO) 2. Web identity federation Web Identity Federation Cross-account access whether a cross-account request is allowed setup cross-account access Recording API requests Requesting temporary security credentials AWS STS with SDKs AWS STS Query API call the AssumeRole action of AWS STS make call call the AssumeRoleWithSAML action of AWS STS call the AssumeRoleWithWebIdentity action of AWS STS make call","headline":"AWS - IdenAccessManage - STS Security Token Service","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/STS/"},"url":"https://ocholuo.github.io//posts/STS/"}</script><title>AWS - IdenAccessManage - STS Security Token Service | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>AWS - IdenAccessManage - STS Security Token Service</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>AWS - IdenAccessManage - STS Security Token Service</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Jul 18, 2020, 11:11 AM -0400" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sat, Dec 10, 2022, 11:14 AM -0800" >Dec 10, 2022<i class="unloaded">2022-12-10T14:14:41-05:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="5049 words">28 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><ul><li><a href="#sts-security-token-service">STS Security Token Service</a><ul><li><a href="#using-aws-sts-with-aws-regions">Using AWS STS with AWS regions</a><ul><li><a href="#direct-aws-sts-api-calls">Direct AWS STS API calls</a></ul><li><a href="#user-case-">User case !!!</a><ul><li><a href="#identity-federation"><strong>Identity federation</strong></a><ul><li><a href="#1-enterprise-identity-federation-single-sign-on-sso">1. <strong>Enterprise identity federation</strong> <code class="language-plaintext highlighter-rouge">Single Sign-On (SSO)</code></a><li><a href="#2-web-identity-federation-web-identity-federation">2. <strong>Web identity federation</strong> <code class="language-plaintext highlighter-rouge">Web Identity Federation</code></a></ul><li><a href="#cross-account-access"><strong>Cross-account access</strong></a><ul><li><a href="#whether-a-cross-account-request-is-allowed">whether a cross-account request is allowed</a><li><a href="#setup-cross-account-access">setup cross-account access</a></ul></ul><li><a href="#recording-api-requests">Recording API requests</a><li><a href="#requesting-temporary-security-credentials">Requesting temporary security credentials</a><li><a href="#aws-sts-with-sdks">AWS STS with SDKs</a><li><a href="#aws-sts-query-api">AWS STS Query API</a><ul><li><a href="#call-the-assumerole-action-of-aws-sts">call the <code class="language-plaintext highlighter-rouge">AssumeRole</code> action of AWS STS</a><ul><li><a href="#make-call">make call</a></ul><li><a href="#call-the-assumerolewithsaml-action-of-aws-sts">call the <code class="language-plaintext highlighter-rouge">AssumeRoleWithSAML</code> action of AWS STS</a><li><a href="#call-the-assumerolewithwebidentity-action-of-aws-sts">call the <code class="language-plaintext highlighter-rouge">AssumeRoleWithWebIdentity</code> action of AWS STS</a><ul><li><a href="#make-call-1">make call</a></ul></ul></ul></ul><hr /><h1 id="sts-security-token-service">STS Security Token Service</h1><blockquote> <font color="blue"> request temporary, limited-privilege credentials </font><p>for IAM users or identity federated users</p></blockquote><ul><li>Lightweight web service<li>a secure token service responsible for generating the temporary short term security credentials for access that account.</ul><p>Advantages of <code class="language-plaintext highlighter-rouge">STS</code> and <code class="language-plaintext highlighter-rouge">Temporary security credentials</code> are:</p><ul><li>work almost identically to long-term access key credentials that IAM users use, but:<li> <font color="red"> do not distribute or embed long-term AWS security credentials </font><p>with an application.</p><ul><li>Temporary security credentials are <font color="red"> not stored with the user </font><li>but <font color="blue"> generated dynamically and provided to the user when requested </font></ul><li>provide access to AWS resources to users without <font color="red"> having to define an AWS identity </font> for them<ul><li>(temporary security credentials are the basis for IAM Roles and ID Federation).</ul><li>have a limited lifetime, no need to rotate or explicitly revoke when no longer needed.<ul><li>short-term.<li>can be configured to last from a few minutes to several hours.</ul><li>After expire, <font color="red"> cannot be reused </font><ul><li>AWS no longer recognizes them or allows any kind of access to API requests made with them.<li>the user can request new credentials, as long as the user requesting them still has permission to do so.</ul></ul><hr /><h2 id="using-aws-sts-with-aws-regions">Using AWS STS with AWS regions</h2><p>By default, a global service,</p><ul><li><p>all AWS STS requests go to a single endpoint at <code class="language-plaintext highlighter-rouge">https://sts.amazonaws.com</code></p><li><p>All regions are enabled for STS by default but can be disabled</p><ul><li>The region in which temporary credentials are requested must be enabled.<li>Credentials will always work globally.<li>such as Asia Pacific (Hong Kong), must be manually enabled.<ul><li>cannot activate the STS endpoint for a Region that is disabled. </ul><li>Tokens valid in all Regions are longer than tokens valid in Regions that are enabled by default.<li>Changing this setting might affect existing systems where you temporarily store tokens.</ul></ul><hr /><h3 id="direct-aws-sts-api-calls">Direct AWS STS API calls</h3><ol><li>send <font color="blue"> AWS STS API calls </font> either to a global endpoint or to one of the Regional endpoints.<ul><li>recommends using <font color="blue"> Regional AWS STS endpoints closer to you </font> instead of the global endpoint<ul><li>After activate a Region for use with AWS STS, can direct AWS STS API calls to that Region.<li> <font color="red"> reduce latency, build in redundancy, increase session token validity and improve the performance of the API calls </font></ul><li>recommends to provide both the <code class="language-plaintext highlighter-rouge">Region</code> and <code class="language-plaintext highlighter-rouge">endpoint</code> when make calls to a Regional endpoint.<ul><li>provide the Region alone for manually enabled Regions<ul><li>such as Asia Pacific (Hong Kong).<li>calls are directed to the <font color="blue"> STS Regional endpoint </font></ul><li>provide the Region alone for Regions enabled by default<ul><li>calls are directed to the global endpoint of https://sts.amazonaws.com. Northern Virginia</ul></ul></ul><li><p>choose to direct calls to an <font color="blue"> alternative Regional endpoint </font> if you can no longer communicate with the original endpoint.</p><li><p>using one of the various AWS SDKs, then use that SDK’s method to select a Region before you make the API call.</p><li>manually constructing HTTP API requests<ul><li>then must direct the request to the correct endpoint yourself.</ul></ol><hr /><h2 id="user-case-">User case !!!</h2><p>Common scenarios for STS security toekn service, temporary credentials,</p><ol><li> <font color="red"> identity federation, delegation </font><ol><li> <font color="blue"> Federation (typically AD) </font><p>:</p><ul><li>Uses SAML 2.0.<li>Grants temporary access based on <font color="red"> the users AD credentials </font><li>Single sign-on allows users to login to the AWS console without assigning IAM credentials.<ul><li>Does not need to be a user in IAM.</ul></ul><li> <font color="blue"> Federation with Mobile Apps </font><p>:</p><ul><li>Use <font color="red"> third party web identity provider </font> to login.<ul><li>Facebook/Amazon/Google<li>or other OpenID providers</ul></ul></ol><li> <font color="red"> Cross Account Access </font><p>:</p><ul><li> <font color="blue"> share resources </font><p>in one account with users in a differen account.</p><li>Switch roles within the AWS management console <font color="blue"> without password </font><li>create a role in one account to allow access and grant permissions to users in a different account.<ul><li>Creat role in accountB, link with accountAID, attach <font color="blue"> resource-based policy </font> with the permissions needed.<li>AccountA create user/role with <font color="blue"> identity-based policy </font> of <code class="language-plaintext highlighter-rouge">sts:AssumeRole</code><div class="language-json highlighter-rouge"><div class="code-header" text-data="json"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="w"> </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sts:AssumeRole"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:iam::ACCOUNTBID:role/UpdateApp"</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div></ul></ul></ol><hr /><h3 id="identity-federation"><strong>Identity federation</strong></h3><p>Manage user identities in <font color="red"> an external system </font> outside of AWS and <font color="red"> grant users who sign in from those systems access </font> to perform AWS tasks and access AWS resources</p><ul><li>IAM supports two types of identity federation.<ul><li>In both cases, the identities are stored outside of AWS.<li>The distinction is <font color="blue"> where the external system resides </font><ul><li>Enterprise identity federation: <font color="red"> in your data center </font><li>Web identity federation: <font color="red"> or an external third party on the web </font></ul></ul></ul><h4 id="1-enterprise-identity-federation-single-sign-on-sso">1. <strong>Enterprise identity federation</strong> <code class="language-plaintext highlighter-rouge">Single Sign-On (SSO)</code></h4><ul><li>known as the <font color="red"> single sign-on (SSO) approach to temporary access </font><li>authenticate users <font color="blue"> in your organization's network </font>, and then provide those users access to AWS<li>adventage:<ul><li> <font color="blue"> without creating new AWS identities or sign in with new user name and password </font></ul></ul><ol><li>Custom federation broker<ul><li>use <font color="red"> organization's authentication system </font> to grant access to AWS resources.<li>For example<li>Enabling custom identity broker access to the AWS console.</ul><li>Federation using SAML 2.0<ul><li>use <font color="red"> organization's authentication system and SAML </font> to grant access to AWS resources.<li>AWS STS supports open standards like <font color="blue"> Security Assertion Markup Language (SAML) 2.0 </font><ul><li>with SAML 2.0, use Microsoft AD FS to leverage Microsoft Active Directory.<li>use SAML 2.0 to manage your own solution for federating user identities.</ul></ul></ol><blockquote><p><code class="language-plaintext highlighter-rouge">SAML 2.0</code></p><ul><li>standard for certain on premises systems such as Microsoft Active Directory or another AWS hosted directory service.<li>SAML is a way that integrate different identity providers with applications and allow users or identities to be reused.<li>re-use identities, from on-premises systems like Microsoft Active Directory or AWS Directory Service), to assume a role in an AWS account.</ul></blockquote><p><img data-proofer-ignore data-src="https://i.imgur.com/lpM6Ppf.png" width="500" /></p><h4 id="2-web-identity-federation-web-identity-federation">2. <strong>Web identity federation</strong> <code class="language-plaintext highlighter-rouge">Web Identity Federation</code></h4><ul><li>known as the <font color="red"> web identity federation approach to temporary access </font></ul><blockquote><p>use identity providers such as Google, Amazon, and Facebook and allow them to <font color="blue"> assume roles inside our AWS accounts and access resources </font></p></blockquote><ul><li>let users sign in using <font color="blue"> external third party identity provider </font><ul><li>Amazon, Facebook, Google,<li>or any OpenID Connect (OIDC) 2.0 compatible provider</ul><li><p>exchange the credentials from that provider for temporary permissions to use resources in AWS account.</p><li>adventage:<ul><li>use web identity federation for mobile or web application<li> <font color="blue"> do not need to create custom sign-in code or manage your own user identities </font><li>keep AWS account secure, <font color="blue"> no need to distribute long-term security credentials, such as IAM user access keys, with application </font></ul></ul><hr /><h3 id="cross-account-access"><strong>Cross-account access</strong></h3><p>use a role to <strong>delegate access to resources that are in different AWS accounts</strong> that you own (such as Production and Development).</p><ul><li> <font color="red"> share resources in one account with users in a different account </font><ul><li>allow a principal in one account to access resources in a second account.<li> <font color="blue"> trusted account / requesting principal </font><p>: the account where the principal exists</p><li> <font color="blue"> trusting account / requested resource </font><p>: The account where the resource exists</p></ul><li> <font color="red"> don't need to create new individual IAM users in each account </font><li> <font color="red"> users don't have to sign out and signin </font><p>into another in order to access resources in different AWS accounts.</p><li>use the role from<ul><li>the AWS Management Console,<li>the AWS CLI:<ul><li><code class="language-plaintext highlighter-rouge">$ aws sts assume-role --role-arn "arn:aws:iam::999999999999:role/UpdateApp" --role-session-name "David-ProdUpdate"</code></ul><li>and the API</ul></ul><p><img data-proofer-ignore data-src="https://i.imgur.com/f76OnFp.png" alt="Screen Shot 2020-12-27 at 02.54.21" /></p><p><strong>To allow cross-account access, 2 policy required</strong></p><ol><li> <font color="red"> identity-based policy </font><p>to the principal / trusted account</p><ul><li>attach the policy to the identity that acts the principal in the request.<ul><li>specify <code class="language-plaintext highlighter-rouge">the entire account, its IAM users, federated users, IAM roles, or assumed-role sessions</code>.<li>also can specify an <code class="language-plaintext highlighter-rouge">AWS service</code> as a principal.</ul><li>The policy <font color="red"> allow the requested access to the resource in the trusting service </font> , do this by<ul><li>specifying the ARN of the resource<li>or by allowing access to all resources (<code class="language-plaintext highlighter-rouge">*</code>).</ul></ul><li>resource-based policy<ul><li>attach the policy to the resource been shared.<ul><li>The policy <font color="red"> must specify the principal of the trusted account that will have access to the resource </font></ul><li>In IAM, you can <font color="blue"> attach a resource-based policy to an IAM role </font> to allow principals in other accounts to assume that role.<ul><li>The role’s resource-based policy = <font color="red"> role trust policy </font><li>After assuming that role, the allowed principals use the resulting <font color="blue"> temporary credentials </font> to access resources in your account.<li>The access is defined in the role’s identity-based permissions policy.</ul></ul></ol><h4 id="whether-a-cross-account-request-is-allowed">whether a cross-account request is allowed</h4><p>For cross-account requests:</p><ul><li>The identity-based policy in trusted AccountA: <font color="blue"> must allow AccountA to make a request to the resource in the trusting AccountB </font><li>the resource-based policy in AccountB: <font color="blue"> must allow the requester in AccountA to access the resource </font></ul><p>When you make a cross-account request</p><ul><li>AWS performs two evaluations. the request in the trusting account and the trusted account.<li>The request is allowed only if both evaluations return a decision of Allow.</ul><p><img data-proofer-ignore data-src="https://i.loli.net/2020/12/27/XMq2KEiduCLHAs1.png" alt="policy_cross-account-eval-simple" /></p><ol><li>principal in one account makes a <font color="red"> cross-account request </font><ul><li>to access a resource in another account</ul><li><strong>The requesting principal exists in the trusted account</strong> (AccountA).<ul><li>When AWS evaluates this account, it checks the identity-based policy and any policies that can limit an identity-based policy.</ul><li><strong>The requested resource exists in the trusting account</strong> (AccountB).<ul><li>When AWS evaluates this account, it checks the resource-based policy that is attached to the requested resource and any policies that can limit a resource-based policy.</ul><li>AWS allows the request only if both account policy evaluations allow the request.</ol><h4 id="setup-cross-account-access">setup cross-account access</h4><p>user in one account is granted permissions by a resource-based policy in a second account.</p><ol><li>Step 1: Create a role<li>Step 2: Grant access to the role<li>Step 3: Test access by switching roles</ol><blockquote><p>example</p><ul><li>the <code class="language-plaintext highlighter-rouge">Production</code> account is where live applications are managed.<li>The <code class="language-plaintext highlighter-rouge">Development</code> account is a sandbox where developers and testers can freely test applications.<li>In each account, application information is stored in Amazon S3 buckets.<li>You manage IAM users in the Development account, two IAM groups: Developers and Testers.<li>Users in both groups have permissions to work in the Development account and access resources there.<li>From time to time, a developer must update the live applications in the Production account.<li>These applications are stored in an Amazon S3 bucket called productionapp.</ul></blockquote><blockquote><p>At the end of this tutorial, you have the following:</p><ul><li>Users in the Development account (the trusted account) that are allowed to assume a specific role in the Production account.<li>A role in the Production account (the trusting account) that is allowed to access a specific Amazon S3 bucket.<li>The productionapp bucket in the Production account.</ul></blockquote><p>Developers can access the bucket by</p><ul><li> <font color="red"> use the role in the AWS Management Console </font><p>to access the productionapp bucket in the Production account.</p><li> <font color="red"> using API calls that are authenticated by temporary credentials provided by the role </font><p>.</p><li>Similar attempts by a Tester to use the role fail.</ul><p>This workflow has three basic steps.</p><p><img data-proofer-ignore data-src="https://i.loli.net/2020/12/27/9s6qkMr7TWQtUIF.png" alt="tutorial-cross-accounts" /></p><hr /><ul><li><strong>Step 1: Create a role</strong><ul><li>use AWS Management Console to <font color="red"> establish trust between 2 accounts </font><ul><li>create policy<li>create role. 1. in the Production account, <font color="red"> specify permissions policy </font> that the role requires.<li>Anyone who is granted permission to use the role will follow this policy.</ul><div class="language-json highlighter-rouge"><div class="code-header" text-data="json"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">allows</span><span class="w"> </span><span class="err">trusted</span><span class="w"> </span><span class="err">users</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">update</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">productionapp</span><span class="w"> </span><span class="err">bucket</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">limit</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">role's</span><span class="w"> </span><span class="err">permissions</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">only</span><span class="w"> </span><span class="err">read</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">write</span><span class="w"> </span><span class="err">access</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">productionapp</span><span class="w"> </span><span class="err">bucket.</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s3:ListAllMyBuckets"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"s3:ListBucket"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"s3:GetBucketLocation"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:s3:::productionapp"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"s3:GetObject"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"s3:PutObject"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"s3:DeleteObject"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:s3:::productionapp/*"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div></ul><ol><li>Create a role that defines who can access it and what permissions it grants to users that switch to it.<ul><li>in the Production account <font color="red"> creating an new IAM role </font> named <code class="language-plaintext highlighter-rouge">UpdateApp</code> that can be used by the development account<ul><li>Roles &gt; Create role &gt; the Another AWS account &gt; Account ID<li><img data-proofer-ignore data-src="https://i.loli.net/2020/12/27/4ENAXw6mj3Q9vZl.png" alt="role" /><li>specify the Development account as a trusted entity.</ul><li>set the permissions that will be associated with the role.</ul><li>obtain the <font color="red"> Role ARN </font> for UpdateApp</ol><li><strong>Step 2: Grant access to the role</strong><ul><li>modify the developers group to allow them to switch to the UpdateApp role<ul><li>IAM console &gt; Groups &gt; Developers &gt; Permissions tab &gt; Inline Policies section &gt; Create Group Policy &gt; Custom Policy<li><p>Add the following policy statement to allow the <code class="language-plaintext highlighter-rouge">AssumeRole</code> action on the <code class="language-plaintext highlighter-rouge">UpdateApp</code> role in the Production account.</p><div class="language-json highlighter-rouge"><div class="code-header" text-data="json"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sts:AssumeRole"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:iam::PRODUCTION-ACCOUNT-ID:role/UpdateApp"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div></ul><li>if so other group use Power User permissions,<li>modify the IAM group policy so that Testers are denied access to the UpdateApp role<ul><li>Because Testers have PowerUser access in this scenario<li>so must explicitly deny the ability to use the role.<li><p>add policy to the group.</p><div class="language-json highlighter-rouge"><div class="code-header" text-data="json"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deny"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sts:AssumeRole"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:iam::PRODUCTION-ACCOUNT-ID:role/UpdateApp"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div></ul></ul><li><strong>Step 3: Test access by switching roles</strong><ul><li> <font color="red"> AWS console </font><p>2 ways</p><ul><li>need: <code class="language-plaintext highlighter-rouge">Account ID number and Role Name values</code><li> <font color="blue"> link from his administrator </font><p>which points to a pre-defined Switch Role configuration.</p><ul><li>The link is provided to the administrator on the final page of the Create role wizard or on the Role Summary page for a cross-account role.<li>link takes David to the Switch Role page with the Account ID and Role name fields already filled in.<li>All David needs to do is choose Switch Role and he’s done.</ul><li> <font color="blue"> sends the Account ID and Role Name values </font><ul><li>manually type them to switch roles<li><img data-proofer-ignore data-src="https://i.loli.net/2020/12/27/pQYcIhGultUPqJ2.png" alt="role" /><li><code class="language-plaintext highlighter-rouge">Rolename @ Account ID</code></ul></ul><li> <font color="red"> AWS CLI </font><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="c"># runs the aws sts assume-role command with role ARN</span>
<span class="nv">$ </span>aws sts assume-role <span class="nt">--role-arn</span> <span class="s2">"arn:aws:iam::999999999999:role/UpdateApp"</span> <span class="nt">--role-session-name</span> <span class="s2">"David-ProdUpdate"</span>

<span class="c"># get temporary security credentials for that role.</span>
<span class="c"># {</span>
<span class="c">#     "Credentials": {</span>
<span class="c">#         "SecretAccessKey": "wJI/K7MD/bYEXAMPLEKEY",</span>
<span class="c">#         "SessionToken": "AQoDYXdzEGcaEXA...Q==",</span>
<span class="c">#         "Expiration": "2014-12-11T23:08:07Z",</span>
<span class="c">#         "AccessKeyId": "AKIAIOSFODNN7EXAMPLE"</span>
<span class="c">#     }</span>
<span class="c"># }</span>

<span class="c"># cuts and pastes the output, configures those credentials in environment variables so subsequent AWS CLI commands work using the role's permissions.</span>
<span class="nv">$ </span><span class="nb">set </span><span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span>AKIAIOSFODNN7EXAMPLE
<span class="nv">$ </span><span class="nb">set </span><span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span>wJI/K7MD/bYEXAMPLEKEY
<span class="nv">$ </span><span class="nb">set </span><span class="nv">AWS_SESSION_TOKEN</span><span class="o">=</span>AQo...6ikBQ<span class="o">==</span>

<span class="nv">$ </span>aws s3 <span class="nb">ls </span>s3://productionapp
</pre></table></code></div></div><li> <font color="red"> AWS API </font></ul></ul><hr /><h2 id="recording-api-requests">Recording API requests</h2><font color="blue"> STS supports AWS CloudTrail </font><ul><li>records AWS calls for AWS account and delivers log files to an S3 bucket.<li>If activate AWS STS endpoints in Regions other than the default global endpoint,<ul><li>then must also turn on CloudTrail logging in those Regions.<li>This is necessary to record any AWS STS API calls that are made in those Regions. </ul></ul><hr /><h2 id="requesting-temporary-security-credentials">Requesting temporary security credentials</h2><p>To request temporary security credentials, you can use <font color="red"> AWS Security Token Service (AWS STS) operations </font> in the <font color="red"> AWS API </font></p><ul><li>These include operations to create and provide trusted users with temporary security credentials that can control access to your AWS resources.</ul><p>To <font color="red"> call the API operations </font></p><ul><li>use <font color="blue"> **AWS SDKs** </font><ul><li>The SDKs are available for a variety of programming languages and environments, including <code class="language-plaintext highlighter-rouge">Java, .NET, Python, Ruby, Android, and iOS</code>.<li>The SDKs take care of tasks such as cryptographically signing your requests, retrying requests if necessary, and handling error responses.</ul><li>use <font color="blue"> **AWS STS Query API** </font><li> <font color="blue"> **command line tools** </font><p>support the AWS STS commands:</p><ul><li>the AWS Command Line Interface,<li>and the AWS Tools for Windows PowerShell.</ul></ul><blockquote><p>The AWS STS API operations create <font color="red"> a new session with temporary security credentials </font> that include an <code class="language-plaintext highlighter-rouge">access key pair (an access key ID and a secret key)</code> and a <code class="language-plaintext highlighter-rouge">session token</code></p><ul><li>Users/application can use these credentials to access AWS resources.</ul></blockquote><p>You can create a role session and pass session policies and session tags programmatically using AWS STS API operations.</p><ul><li>The resulting session’s permissions are the intersection of the role’s identity-based policies and the session policies.<li>allows a trusted entity to assume a role by calling the <code class="language-plaintext highlighter-rouge">AssumeRole API operation</code> of the STS</ul><hr /><h2 id="aws-sts-with-sdks">AWS STS with SDKs</h2><p>Alternative to using the API, can use AWS SDKs</p><ul><li>which consist of libraries and sample code for various programming languages and platforms (Java, Ruby, .NET, iOS, Android, etc.).<li>The SDKs provide a convenient way to create programmatic access to STS.<li>For example<li>the SDKs take care of cryptographically signing requests, managing errors, and retrying requests automatically.</ul><p>There are a couple of ways STS can be used. Scenario 1:</p><ol><li>Develop an Identity Broker to communicate with LDAP and AWS STS.<li>Identity Broker always authenticates with LDAP first, then with AWS STS.<li>Application then gets temporary access to AWS resources.</ol><p>Scenario 2:</p><ol><li>Develop an Identity Broker to communicate with LDAP and AWS STS.<li>Identity Broker authenticates with LDAP first, then gets an IAM role associated with the user.<li>Application then authenticates with STS and assumes that IAM role.<li>Application uses that IAM role to interact with the service.</ol><hr /><h2 id="aws-sts-query-api">AWS STS Query API</h2><p>With STS you can request a session token using one of the following <font color="red"> APIs </font>:</p><ul><li><code class="language-plaintext highlighter-rouge">AssumeRole</code><ul><li>only used by IAM users (can be used for MFA).</ul><li><code class="language-plaintext highlighter-rouge">AssumeRoleWithSAML</code><ul><li>can be used by any user who passes a SAML authentication response that indicates authentication from a known (trusted) identity provider.</ul><li><code class="language-plaintext highlighter-rouge">AssumeRoleWithWebIdentity</code><ul><li>used by an user passes a web identity token that indicates authentication from a known/trusted identity provider.</ul><li><code class="language-plaintext highlighter-rouge">GetSessionToken</code><ul><li>can be used by an IAM user or AWS account root user (can be used for MFA).</ul><li><code class="language-plaintext highlighter-rouge">GetFederationToken</code><ul><li>can be used by an IAM user or AWS account root user.</ul></ul><blockquote><p>AWS recommends using Cognito for identity federation with Internet identity providers.</p></blockquote><hr /><h3 id="call-the-assumerole-action-of-aws-sts">call the <code class="language-plaintext highlighter-rouge">AssumeRole</code> action of AWS STS</h3><blockquote><p>use the <code class="language-plaintext highlighter-rouge">AssumeRole</code> operation for <code class="language-plaintext highlighter-rouge">cross-account delegation and federation</code> through a custom identity broker Typically, use <code class="language-plaintext highlighter-rouge">AssumeRole</code> within your account or for cross-account access.</p></blockquote><p>The <code class="language-plaintext highlighter-rouge">AssumeRole</code> API operation is useful for</p><ul><li> <font color="blue"> allowing existing IAM users to access AWS resources that they don't already have access to </font><p>x</p><ul><li>For example, the user might need access to resources in another AWS account.</ul><li> <font color="blue"> temporarily gain privileged access </font><ul><li>for example, to provide multi-factor authentication (MFA).</ul></ul><p>The <code class="language-plaintext highlighter-rouge">AssumeRole</code> operation returns a set of <font color="blue"> temporary security credentials </font> that Users/application use these credentials to access AWS resources</p><ul><li>An access key ID<li>A secret access key<li>A session token.<li>Expiration or duration of validity.</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/4UVCYdF.png" alt="AssumeRole" /></p><p>Federated users authenticate users to their own identity store.</p><ul><li>First, write an identity broker application.<li>users try to access AWS services from their local machine<li>users will authenticate from identity broker. they are authenticated within their corporate identity store.<li>After authentication, identity broker eaches back to AWS STS to gain a token, provisions temporary credentials<li>After the identity broker has a token, the end user is redirected to the AWS console or to one of the APIs.<li>This process allows you to use single sign-on, SSO. Temporary credentials can be used to sign users directly into the AWS Management Console.</ul><hr /><h4 id="make-call">make call</h4><p>You must call this API using existing valid IAM user credentials. When you make this call, you pass the following information:</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre>- The Amazon Resource Name (ARN) of the role that the app should assume.
- (Optional) Duration
  - specifies the duration of the temporary security credentials.
  - Use the DurationSeconds parameter to specify the duration of the role session from 900 seconds (15 minutes) up to the maximum session duration setting for the role.
  - If you do not pass this parameter, the temporary credentials expire in one hour.
  - The DurationSeconds parameter from this API is separate from the SessionDuration HTTP parameter that you use to specify the duration of a console session.
  - Use the SessionDuration HTTP parameter in the request to the federation endpoint for a console sign-in token.

- Role session name
  - a string value that you can use to identify the session.
  - For security purposes, administrators can view this field in AWS CloudTrail logs to learn who performed an action in AWS.
  - Your administrator might require that you specify your IAM user name as the session name when you assume the role
  - aws:RoleSessionName

- (Optional) Inline or managed session policies.
  - These policies limit the permissions from the role's identity-based policy that are assigned to the role session.
  - The resulting session's permissions are the intersection of the role's identity-based policies and the session policies.
  - Session policies cannot be used to grant more permissions than those allowed by the identity-based policy of the role that is being assumed

- (Optional) Session tags.
  - You can assume a role and then use the temporary credentials to make a request
  - When you do, the session's principal tags: role's tags and passed session tags
  - If you make this call using temporary credentials, the new session also inherits transitive session tags from the calling session.

- (Optional) MFA information.
  - If configured to use multi-factor authentication (MFA), then you include the identifier for an MFA device and the one-time code provided by that device.

- (Optional) ExternalId value
  - that can be used when delegating access to your account to a third party.
  - This value helps ensure that only the specified third party can access the role.
</pre></table></code></div></div><p>The following example shows a sample request and response using AssumeRole.</p><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre><td class="rouge-code"><pre><span class="c1"># This example request assumes the demo role for the specified duration with the included session policy, session tags, and external ID.
# The resulting session is named John-session.
</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">sts</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">com</span><span class="o">/</span>
<span class="err">?</span><span class="n">Version</span><span class="o">=</span><span class="mi">2011</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">15</span>
<span class="o">&amp;</span><span class="n">Action</span><span class="o">=</span><span class="n">AssumeRole</span>
<span class="o">&amp;</span><span class="n">RoleSessionName</span><span class="o">=</span><span class="n">John</span><span class="o">-</span><span class="n">session</span>
<span class="o">&amp;</span><span class="n">RoleArn</span><span class="o">=</span><span class="n">arn</span><span class="p">:</span><span class="n">aws</span><span class="p">::</span><span class="n">iam</span><span class="p">::</span><span class="mi">123456789012</span><span class="p">:</span><span class="n">role</span><span class="o">/</span><span class="n">demo</span>
<span class="o">&amp;</span><span class="n">Policy</span><span class="o">=%</span><span class="mi">7</span><span class="n">B</span><span class="o">%</span><span class="mi">22</span><span class="n">Version</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">222012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">17</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">Statement</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">5</span><span class="n">B</span><span class="o">%</span><span class="mi">7</span><span class="n">B</span><span class="o">%</span><span class="mi">22</span><span class="n">Sid</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">20</span><span class="o">%</span><span class="mi">22</span><span class="n">Stmt1</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">Effect</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">20</span><span class="o">%</span><span class="mi">22</span><span class="n">Allow</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">Action</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">20</span><span class="o">%</span><span class="mi">22</span><span class="n">s3</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">*%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">Resource</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">20</span><span class="o">%</span><span class="mi">22</span><span class="o">*%</span><span class="mi">22</span><span class="o">%</span><span class="mi">7</span><span class="n">D</span><span class="o">%</span><span class="mi">5</span><span class="n">D</span><span class="o">%</span><span class="mi">7</span><span class="n">D</span>
<span class="o">&amp;</span><span class="n">DurationSeconds</span><span class="o">=</span><span class="mi">1800</span>
<span class="o">&amp;</span><span class="n">Tags</span><span class="p">.</span><span class="n">member</span><span class="p">.</span><span class="mf">1.</span><span class="n">Key</span><span class="o">=</span><span class="n">Project</span>
<span class="o">&amp;</span><span class="n">Tags</span><span class="p">.</span><span class="n">member</span><span class="p">.</span><span class="mf">1.</span><span class="n">Value</span><span class="o">=</span><span class="n">Pegasus</span>
<span class="o">&amp;</span><span class="n">Tags</span><span class="p">.</span><span class="n">member</span><span class="p">.</span><span class="mf">2.</span><span class="n">Key</span><span class="o">=</span><span class="n">Cost</span><span class="o">-</span><span class="n">Center</span>
<span class="o">&amp;</span><span class="n">Tags</span><span class="p">.</span><span class="n">member</span><span class="p">.</span><span class="mf">2.</span><span class="n">Value</span><span class="o">=</span><span class="mi">12345</span>
<span class="o">&amp;</span><span class="n">ExternalId</span><span class="o">=</span><span class="mi">123</span><span class="n">ABC</span>
<span class="o">&amp;</span><span class="n">AUTHPARAMS</span>
<span class="c1"># The AUTHPARAMS parameter: a placeholder for your signature.
# A signature is the authentication information that you must include with AWS HTTP API requests.
# We recommend using the AWS SDKs to create API requests, and SDKs will handle request signing for you.
# If create and sign API requests manually, Sign the AWS Requests By yourself
</span>

<span class="c1"># The policy value shown in the preceding example is the URL-encoded version of the following policy:
</span><span class="p">{</span><span class="s">"Version"</span><span class="p">:</span><span class="s">"2012-10-17"</span><span class="p">,</span><span class="s">"Statement"</span><span class="p">:[{</span><span class="s">"Sid"</span><span class="p">:</span><span class="s">"Stmt1"</span><span class="p">,</span><span class="s">"Effect"</span><span class="p">:</span><span class="s">"Allow"</span><span class="p">,</span><span class="s">"Action"</span><span class="p">:</span><span class="s">"s3:*"</span><span class="p">,</span><span class="s">"Resource"</span><span class="p">:</span><span class="s">"*"</span><span class="p">}]}</span>


<span class="c1"># In addition to the temporary security credentials, the response includes the Amazon Resource Name (ARN) for the federated user and the expiration time of the credentials.
</span><span class="o">&lt;</span><span class="n">AssumeRoleResponse</span> <span class="n">xmlns</span><span class="o">=</span><span class="s">"https://sts.amazonaws.com/doc/2011-06-15/"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">AssumeRoleResult</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">Credentials</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">SessionToken</span><span class="o">&gt;</span><span class="n">AQoDYXdzEPT</span><span class="o">//////////</span><span class="n">wEXAMPLEtc764bNrC9SAPBSM22wDOk4x4HIZ8j4FZTwdQW</span>
   <span class="n">LWsKWHGBuFqwAeMicRXmxfpSPfIeoIYRqTflfKD8YUuwthAx7mSEI</span><span class="o">/</span><span class="n">qkPpKPi</span><span class="o">/</span><span class="n">kMcGd</span>
   <span class="n">QrmGdeehM4IC1NtBmUpp2wUE8phUZampKsburEDy0KPkyQDYwT7WZ0wq5VSXDvp75YU</span>
   <span class="mi">9</span><span class="n">HFvlRd8Tx6q6fE8YQcHNVXAkiY9q6d</span><span class="o">+</span><span class="n">xo0rKwT38xVqr7ZD0u0iPPkUL64lIZbqBAz</span>
   <span class="o">+</span><span class="n">scqKmlzm8FDrypNC9Yjc8fPOLn9FX9KSYvKTr4rvx3iSIlTJabIQwj2ICCR</span><span class="o">/</span><span class="n">oLxBA</span><span class="o">==&lt;/</span><span class="n">SessionToken</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">SecretAccessKey</span><span class="o">&gt;</span><span class="n">wJalrXUtnFEMI</span><span class="o">/</span><span class="n">K7MDENG</span><span class="o">/</span><span class="n">bPxRfiCYzEXAMPLEKEY</span><span class="o">&lt;/</span><span class="n">SecretAccessKey</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">Expiration</span><span class="o">&gt;</span><span class="mi">2019</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">15</span><span class="n">T23</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mf">33.359</span><span class="n">Z</span><span class="o">&lt;/</span><span class="n">Expiration</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">AccessKeyId</span><span class="o">&gt;</span><span class="n">AKIAIOSFODNN7EXAMPLE</span><span class="o">&lt;/</span><span class="n">AccessKeyId</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">Credentials</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">AssumedRoleUser</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">Arn</span><span class="o">&gt;</span><span class="n">arn</span><span class="p">:</span><span class="n">aws</span><span class="p">:</span><span class="n">sts</span><span class="p">::</span><span class="mi">123456789012</span><span class="p">:</span><span class="n">assumed</span><span class="o">-</span><span class="n">role</span><span class="o">/</span><span class="n">demo</span><span class="o">/</span><span class="n">John</span><span class="o">&lt;/</span><span class="n">Arn</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">AssumedRoleId</span><span class="o">&gt;</span><span class="n">ARO123EXAMPLE123</span><span class="p">:</span><span class="n">John</span><span class="o">&lt;/</span><span class="n">AssumedRoleId</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">AssumedRoleUser</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">PackedPolicySize</span><span class="o">&gt;</span><span class="mi">8</span><span class="o">&lt;/</span><span class="n">PackedPolicySize</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">AssumeRoleResult</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">ResponseMetadata</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">RequestId</span><span class="o">&gt;</span><span class="n">c6104cbe</span><span class="o">-</span><span class="n">af31</span><span class="o">-</span><span class="mf">11e0</span><span class="o">-</span><span class="mi">8154</span><span class="o">-</span><span class="n">cbc7ccf896c7</span><span class="o">&lt;/</span><span class="n">RequestId</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">ResponseMetadata</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">AssumeRoleResponse</span><span class="o">&gt;</span>
</pre></table></code></div></div><blockquote><p><code class="language-plaintext highlighter-rouge">AssumedRoleUser:ARN</code> and <code class="language-plaintext highlighter-rouge">AssumedRoleUser:AssumedRoleId</code>:</p><ul><li>programatically reference the temporary credentials<li>not an IAM role or user.</ul></blockquote><hr /><h3 id="call-the-assumerolewithsaml-action-of-aws-sts">call the <code class="language-plaintext highlighter-rouge">AssumeRoleWithSAML</code> action of AWS STS</h3><p>Returns a set of <code class="language-plaintext highlighter-rouge">temporary security credentials</code> for users who have been authenticated <font color="red"> via a SAML authentication response </font></p><ul><li>provides a mechanism for tying an enterprise identity store or directory to role-based AWS access without user-specific credentials or configuration.</ul><p>AWS supports <font color="red"> identity federation </font></p><ul><li>makes it easier to manage users by maintaining their identities in a single place.<li>support Identity federation with <code class="language-plaintext highlighter-rouge">Security Assertion Markup Language (SAML2.0)</code><ul><li>open standard used by many identity providers.<li>quick to implement federation<li>use existing identity management software to manage access to AWS resources.<li>No coding required.</ul><li>can use this feature to implement federation more quickly because it enables federated SSO.<ul><li>With federated SSO, users can <font color="blue"> sign in to the AWS Management Console </font> or <font color="blue"> make programmatic calls to AWS APIs </font></ul><li>Identity federation uses existing identity management software to manage access to AWS resources.<li>makes user administration easier.<ul><li>For instance<li>if a user leaves your company, simply delete the user’s corporate identity, which then also revokes access to AWS.<li>End users also benefit because they only need to remember one user name and password.</ul><li>can use SAML to make configuring federation with AWS straightforward, because system administrators can set it up using identity provider software instead of writing code.</ul><p>In order to use single sign-on for the AWS Management Console, identity provider must initiate a web single sign-on session via SAML 2.0 by using the <font color="red"> HTTP-POST binding </font></p><ul><li>A new sign-on URL greatly simplifies this process.<li>In this case, the SAML authentication response and the API federation uses a new <code class="language-plaintext highlighter-rouge">AssumeRoleWithSAML</code> operation within the code.</ul><p><img data-proofer-ignore data-src="https://i.loli.net/2020/12/26/RekhJv21TZFwNUr.png" alt="AssumeRoleWithSAML" /></p><p>SSO federation works within SAML.</p><ul><li><p>user browses to an <font color="blue"> internal portal </font> in your network.</p><li>The internal portal<ul><li>handles the SAML trust between your organization and AWS.<li>functions as the <font color="blue"> identity provider (IdP) </font><li>The identity provider<ul><li>authenticates the user’s identity against the ID Store.<li>After authenticated, the client receives a <font color="red"> SAML assertion </font> in the form of authentication response from the IdP.<li>user post the SAML assertion to the new AWS sign-in portal.<li>sign-in uses the <font color="red"> AssumeRoleWithSAML API operation </font> to request temporary security credentials and construct a sign-in URL.</ul></ul><li><p>user’s browser receives the sign-in URL and is automatically redirected to the AWS Management Console.</p><li>From the user’s perspective, the process happens transparently. The user starts at your organization’s internal portal and ends up at the AWS Management Console without ever having to supply any AWS credentials.</ul><hr /><h3 id="call-the-assumerolewithwebidentity-action-of-aws-sts">call the <code class="language-plaintext highlighter-rouge">AssumeRoleWithWebIdentity</code> action of AWS STS</h3><blockquote><p>Supported web identity providers:</p><ul><li>Amazon Cognito, recommended for mobile<li>Amazon, Facebook, Google,<li>or any OpenID Connect-compatible identity provider.<li>regular web applications can use the STS<ul><li>assume-role-with-web-identity API</ul></ul></blockquote><blockquote><p>Instead of directly calling AssumeRoleWithWebIdentity, AWS recommend Amazon Cognito and the Amazon Cognito credentials provider with the AWS SDKs for mobile development.</p></blockquote><ul><li>Calling <code class="language-plaintext highlighter-rouge">AssumeRoleWithWebIdentity</code> does not require the use of AWS security credentials.<ul><li>Web identity federation: great for mobile apps where don’t want to use server-side code, and don’t want to distribute long term credentials.<li>Therefore, can distribute an application (like mobile devices) that requests temporary security credentials without including long-term AWS credentials in the application.<li>also don’t need to deploy server-based proxy services that use long-term AWS credentials.<li>Instead, the identity of the caller is validated by using a token from the web identity provider.</ul><li><p>This operation is useful for creating mobile / client-based web applications that require access to AWS.</p><li>an unsigned call<ul><li>meaning that the <font color="red"> app does not need to have access to any AWS security credentials to make the call </font><li> <font color="blue"> users do not need their own AWS or IAM identities </font></ul><li>Returns <font color="red"> temporary security credentials </font> for federated users who have been authenticated in mobile/web application with a web identity provider.<ul><li>The temporary security credentials returned by this API<ul><li> <font color="blue"> an access key ID, a secret access key, and a security token </font></ul><li>Applications can use these temporary security credentials to sign calls to AWS service API operations.</ul></ul><p><img data-proofer-ignore data-src="https://i.loli.net/2020/12/26/QRqw8VD9YfIme3a.png" alt="AssumeRoleWithWebIdentity" /></p><p>use case for web identity federation.</p><ul><li>user logs in from a mobile phone.<ul><li>the login request then goes to Amazon to authenticate the user ID.</ul><li>After authenticated, user receives the authorization from the Web Identity Federation to return a token.<li>the user can now to log in to AWS with the token to the AWS services they can access.<ul><li>By default, the credentials can be used for one hour.</ul><li>If the role’s access policy uses variables that reference the application ID and the user ID,<ul><li>the temporary security credentials are scoped to that end user<li>will prevent him or her from accessing objects owned by other users.</ul></ul><hr /><h4 id="make-call-1">make call</h4><p>make this call, you pass the following information:</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre>- The Amazon Resource Name (ARN) of the role that the app should assume.
  - If your app supports multiple ways for users to sign in, you must define multiple roles, one per identity provider.
  - The call to AssumeRoleWithWebIdentity should include the ARN of the role that is specific to the provider through which the user signed in.

- The token that the app gets from the IdP after the app authenticates the user.

- You can configure your IdP to pass attributes into your token as session tags.

- (Optional) Duration
  - specifies the duration of the temporary security credentials.
  - Use the DurationSeconds parameter to specify the duration of the role session from 900 seconds (15 minutes) up to the maximum session duration setting for the role.
  - If you do not pass this parameter, the temporary credentials expire in one hour.
  - The DurationSeconds parameter from this API is separate from the SessionDuration HTTP parameter that you use to specify the duration of a console session.
  - Use the SessionDuration HTTP parameter in the request to the federation endpoint for a console sign-in token.

- Role session name
  - a string value to identify the session.
  - For security purposes, administrators can view this field in AWS CloudTrail logs to learn who performed an action in AWS. Your administrator might require that you provide a specific value for the session name when you assume the role.

- (Optional) Inline or managed session policies.
  - These policies limit the permissions from the role's identity-based policy that are assigned to the role session.
  - The resulting session's permissions are the intersection of the role's identity-based policies and the session policies.
  - Session policies cannot be used to grant more permissions than those allowed by the identity-based policy of the role that is being assumed.

</pre></table></code></div></div><blockquote><p>A call to AssumeRoleWithWebIdentity is not signed (encrypted). should only include optional session policies if the request is transmitted through a trusted intermediary. In this case, someone could alter the policy to remove the restrictions.</p></blockquote><p>When you call AssumeRoleWithWebIdentity, AWS verifies the authenticity of the token.</p><ul><li>For example, depending on the provider,<li>AWS might make a call to the provider and include the token that the app has passed.<li>Assuming that the identity provider validates the token, AWS returns the following information to you:</ul><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>A set of temporary security credentials
- an access key ID, a secret access key, and a session token.

The role ID and the ARN of the assumed role.

A SubjectFromWebIdentityToken value that contains the unique user ID.
</pre></table></code></div></div><p>When you have the temporary security credentials, you can use them to make AWS API calls.</p><ul><li>same process as making an AWS API call with long-term security credentials.<li>The difference is that you must include the session token, which lets AWS verify that the temporary security credentials are valid.</ul><p>Your app should cache the credentials.</p><ul><li>As noted, by default the credentials expire after an hour.<li>If you are not using the AmazonSTSCredentialsProvider operation in the AWS SDK, it’s up to you and your app to call AssumeRoleWithWebIdentity again.<li>Call this operation to get a new set of temporary security credentials before the old ones expire.</ul><p>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/01aws/'>01AWS</a>, <a href='/categories/idenaccessmanage/'>IdenAccessManage</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/aws/" class="post-tag no-text-decoration" >AWS</a> <a href="/tags/idenaccessmanage/" class="post-tag no-text-decoration" >IdenAccessManage</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AWS - IdenAccessManage - STS Security Token Service - Grace&url=https://ocholuo.github.io//posts/STS/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AWS - IdenAccessManage - STS Security Token Service - Grace&u=https://ocholuo.github.io//posts/STS/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=AWS - IdenAccessManage - STS Security Token Service - Grace&url=https://ocholuo.github.io//posts/STS/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/IAM-Service/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - IdenAccessManage - AWS services that work with IAM</h3><div class="text-muted small"><p> AWS services that work with IAM Compute services Containers services Storage services Database services Developer tools services Security, identity, and ...</p></div></div></a></div><div class="card"> <a href="/posts/IAM-User-Login/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - IdenAccessManage - IAM User Login</h3><div class="text-muted small"><p> IAM User Login Console password: Security Token Service Server certificates: if your account compromised IAM User Login The following diagram shows th...</p></div></div></a></div><div class="card"> <a href="/posts/IAM/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - IdenAccessManage - IAM (Identity and Access Management)</h3><div class="text-muted small"><p> AWS - IAM Identity and Access Management IAM BEST PRACTICES basics to use AWS IAM essential components The IAM console IAM p...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/IDMS/" class="btn btn-outline-primary" prompt="Older"><p>AWS - IdenAccessManage - IDMS</p></a> <a href="/posts/AWS-organizations/" class="btn btn-outline-primary" prompt="Newer"><p>AWS - IdenAccessManage - AWS Organizations and SCP</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
