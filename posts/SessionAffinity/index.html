<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="AWS - Session Affinity, Load-Balanced, Session Fail Over, Sticky Sessions" /><meta property="og:locale" content="en" /><meta name="description" content="Session Affinity 类同, Load-Balanced, Session Fail Over, Sticky Sessions The application can’t remember who the client is session location Load balanced 1. Session information stored in client-side cookies only 2. Load balancer directs the user to the same machine: 3. Shared backend database or memcached or key/value store: example Stickiness vs Sticky sessions Sticky sessions / session affinity Duration-based session stickiness Application-controlled session stickiness" /><meta property="og:description" content="Session Affinity 类同, Load-Balanced, Session Fail Over, Sticky Sessions The application can’t remember who the client is session location Load balanced 1. Session information stored in client-side cookies only 2. Load balancer directs the user to the same machine: 3. Shared backend database or memcached or key/value store: example Stickiness vs Sticky sessions Sticky sessions / session affinity Duration-based session stickiness Application-controlled session stickiness" /><link rel="canonical" href="https://ocholuo.github.io//posts/SessionAffinity/" /><meta property="og:url" content="https://ocholuo.github.io//posts/SessionAffinity/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-07-18T11:11:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="AWS - Session Affinity, Load-Balanced, Session Fail Over, Sticky Sessions" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-30T21:02:21-04:00","datePublished":"2020-07-18T11:11:11-04:00","description":"Session Affinity 类同, Load-Balanced, Session Fail Over, Sticky Sessions The application can’t remember who the client is session location Load balanced 1. Session information stored in client-side cookies only 2. Load balancer directs the user to the same machine: 3. Shared backend database or memcached or key/value store: example Stickiness vs Sticky sessions Sticky sessions / session affinity Duration-based session stickiness Application-controlled session stickiness","headline":"AWS - Session Affinity, Load-Balanced, Session Fail Over, Sticky Sessions","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/SessionAffinity/"},"url":"https://ocholuo.github.io//posts/SessionAffinity/"}</script><title>AWS - Session Affinity, Load-Balanced, Session Fail Over, Sticky Sessions | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>AWS - Session Affinity, Load-Balanced, Session Fail Over, Sticky Sessions</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>AWS - Session Affinity, Load-Balanced, Session Fail Over, Sticky Sessions</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Jul 18, 2020, 11:11 AM -0400" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Oct 30, 2022, 6:02 PM -0700" >Oct 30, 2022<i class="unloaded">2022-10-30T21:02:21-04:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2205 words">12 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><ul><li><a href="#session-affinity-类同-load-balanced-session-fail-over-sticky-sessions">Session Affinity 类同, Load-Balanced, Session Fail Over, Sticky Sessions</a><ul><li><a href="#the-application-cant-remember-who-the-client-is">The application can’t remember who the client is</a><li><a href="#session-location">session location</a><li><a href="#load-balanced">Load balanced</a><ul><li><a href="#1-session-information-stored-in-client-side-cookies-only">1. Session information stored in client-side cookies only</a><li><a href="#2-load-balancer-directs-the-user-to-the-same-machine">2. Load balancer directs the user to the same machine:</a><li><a href="#3-shared-backend-database-or-memcached-or-keyvalue-store">3. Shared backend database or memcached or key/value store:</a></ul><li><a href="#example">example</a><li><a href="#stickiness-vs-sticky-sessions">Stickiness vs Sticky sessions</a><ul><li><a href="#sticky-sessions--session-affinity">Sticky sessions / session affinity</a><ul><li><a href="#duration-based-session-stickiness">Duration-based session stickiness</a><li><a href="#application-controlled-session-stickiness">Application-controlled session stickiness</a></ul></ul></ul></ul><hr /><h1 id="session-affinity-类同-load-balanced-session-fail-over-sticky-sessions">Session Affinity 类同, Load-Balanced, Session Fail Over, Sticky Sessions</h1><hr /><h2 id="the-application-cant-remember-who-the-client-is">The application can’t remember who the client is</h2><ul><li>On a technical level:<li><strong>Each HTTP request-response pair between the client and app happens (most often) on a different TCP connection</strong>.<ul><li>This is especially true when a load balancer sits between the client and the app<li>So the application can’t use the TCP connection as a way to remember the conversational context.</ul><li><strong>HTTP itself is stateless</strong>:<ul><li>any request can be sent at any time, in any sequence, regardless of the preceding requests.<li>app may demand a particular pattern of interaction – like logging in before accessing certain resources – but that application-level state is enforced by the application, not by HTTP.<li>So HTTP cannot be relied on to maintain conversational context between the client and the application.</ul></ul><p>no transparent session fail-over:</p><ul><li>The OpenPages application can be configured for a multi-server (node) configuration.<li>If one node (or server) goes down while a user is connected, the user will need to close the browser and re-login to connect to one of the other available nodes (or servers) in the environment.<li>if one node goes down, users will NOT automatically be rerouted to one of the available nodes.</ul><p>Use-Case 1:</p><blockquote><p>If Production Server A goes down, the admin service and the OP/IBPM server service will go down. For users using the server, will need to close the browser and manually re-login to utilize Production Server B. All in-flight transactions which are getting processed will be lost and users have to reiterate the task. From an end user perspective</p><ul><li>was performing an action or task on Production Server A<li>may need to re-login to complete the task on Production Server B.<li>no loss in functionality, however have to repeat the task again that been interrupted.<li>All in-flight transactions getting processed will be lost and have to reiterate the task.</ul></blockquote><p>Use-Case 2:</p><blockquote><p>If both Production Server A and Production Server B are unavailable (due to various reasons), an administrator can startup the disaster recovery system(s). This assumes that 3rd party mechanisms (ie: database mirroring; data replication) are in place. The IT administrator would also have to update the load-balancer to indicate the disaster recovery servers can be used. If the load balancer has sticky-IP time out configured then users may have to wait until the time out threshold is reached and re-access the URL.</p></blockquote><hr /><h2 id="session-location">session location</h2><p>goal: <font color="red"> Manage user session </font></p><ul><li>storing those sessions locally to the node responding to the HTTP request<li>design a layer in architecture which can store those sessions in a scalable and robust manner.</ul><p>2 ways to solve this problem of forgetting the context.</p><ol><li> <font color="red"> the client remind the application of the context every time </font><p>he requests something</p><li> <font color="red"> the application remember the context </font><p>by creating an associated memento</p><ul><li>This memento is given to the client and returned to the application on subsequent requests.<ol><li>via URL<ul><li><code class="language-plaintext highlighter-rouge">http://www.example.com/products/awesomeDoohickey.html?sessionID=0123456789ABCDEFGH</code></ul><li>via cookies<ul><li>placed within the HTTP request<li>so they can be discovered by the application even if a load balancer intervenes.</ul></ol></ul></ol><p>Use-Case:</p><blockquote><p>Large websites may be “load balanced” across multiple machines.</p><ul><li>a user may hit any of the backend machines during a session.<li>several methods exist to allow many machines to share user sessions.<li>The method chosen will depend on the style of load balancing employed, as well as the availability/capacity of backend storage:</ul></blockquote><hr /><h2 id="load-balanced">Load balanced</h2><ul><li>a user may hit any of the backend machines during a session.<li>several methods exist to allow many machines to share user sessions.<li>The method chosen will depend on the style of load balancing employed, as well as the availability/capacity of backend storage:</ul><p>way in which the Application Session State is stored.</p><ul><li>Stateful<ul><li>the application session state is stored locally on the same server as the application.<ul><li>This is also referred to as a stateful server</ul><li>to scale up/down the application server<ul><li>there <font color="red"> would be user interruption </font></ul></ul><li>Stateless<ul><li>the application session state is stored remotely on another server rather than locally on the application server.<ul><li>This is also referred to as a stateless server</ul><li>to scale up/down the application server<ul><li> <font color="red"> no user interruption </font></ul></ul></ul><hr /><h3 id="1-session-information-stored-in-client-side-cookies-only">1. Session information stored in client-side cookies only</h3><blockquote><p>least suitable for most applications:</p></blockquote><ul><li> <font color="red"> session identifier + Session information </font><p>is stored in a user’s <font color="red"> cookie </font></p><ul><li>example: the user’s cookie might contain the contents of their shopping basket.</ul><li> <font color="red"> No backend storage </font><p>is required</p><ul><li>the session data is not stored server-side<li>more difficult for developers to debug<li>The amount of data that can be stored in the session is limited (by the 4K cookie size limit)</ul><li><p>The user does not need to hit the same machine each time, so DNS load balancing can be employed</p><li> <font color="red"> no latency </font><p>associated with retrieving the session information from a database machine</p><ul><li>(as it is provided with the HTTP request).<li>Useful if your site is load-balanced by machines on different continents.</ul><li> <font color="red"> Encryption </font><p>has to be employed</p><ul><li>if a user should not be able to see the contents of their session<li> <font color="blue"> HMAC (or similar) has to be employed </font><p>to prevent user tampering of session data</p></ul></ul><hr /><h3 id="2-load-balancer-directs-the-user-to-the-same-machine">2. Load balancer directs the user to the same machine:</h3><blockquote><p>may be good in some situations:</p></blockquote><ul><li>load balancers may set <font color="red"> session cookie </font><ul><li>indicating which backend machine a user is making requests from<li>and direct them to that machine in the future.</ul><li><p>An <code class="language-plaintext highlighter-rouge">existing application's session handling may not need to be changed</code> to become multiple machines aware</p><li> <font color="red"> No shared database system (or similar) is required </font><p>for storing sessions</p><ul><li>possibly increasing reliability<li>but at the cost of complexity</ul><li> <font color="red"> A backend machine going down will take down user sessions started on/with it </font><ul><li>Because the user is always directed to the same machine, <font color="red"> session sharing between multiple machines is not required. </font></ul><li> <font color="red"> Taking machines out of service is more difficult </font><ul><li>Users with sessions on a machine to be taken down for maintenance should be allowed to complete their tasks before the machine is turned off.<li>To support this, web load balancers may have a feature to “drain” requests to a certain backend machine.</ul></ul><hr /><h3 id="3-shared-backend-database-or-memcached-or-keyvalue-store">3. Shared backend database or memcached or key/value store:</h3><blockquote><p>probably the cleanest method of the three:</p></blockquote><ul><li> <font color="red"> Session information is stored in a backend database </font><ul><li>The user’s <font color="blue"> browser stores a cookie containing an identifier (like session ID), pointing to the session information </font><li>The user never needs to be exposed to the stored session information.</ul><li>all web servers have access to query and update.<ul><li>The user does not need to hit the same machine each time, so DNS load balancing can be employed</ul><li><p>Session information may be expired and backed up consistently.</p><li><p>One disadvantage is <code class="language-plaintext highlighter-rouge">the bottleneck that can be placed on whichever backend storage system is employed</code>.</p><li>most dynamic web applications perform <font color="red"> several database queries or key/value store requests </font><ul><li>so the database or key/value store is the logical storage location of session data.</ul></ul><hr /><h2 id="example">example</h2><p><img data-proofer-ignore data-src="https://i.imgur.com/gE2TVx5.png" alt="Screen Shot 2020-06-22 at 15.07.33" /></p><p>A cloud design pattern that uses multiple load balancers</p><ul><li>2 separate ELB going to a set of servers.<ul><li>a load balancer that is separated by a certificate<li>another load balancer that is keeping the <font color="red"> session sticky </font></ul><li>When a website is served by <font color="red"> only one web server </font><ul><li>for each client-server pair<ul><li>a session object is created and remains in the memory of the web server.</ul><li>All requests from the client go to this web server and update this session object.</ul><li>When a website is served by <font color="red"> multiple web servers behind a load balancer </font><ul><li>the load balancer decides which web server the request goes to.<li>load balancer use <font color="blue"> sticky sessions </font> or <font color="blue"> Stickiness sessions </font></ul></ul><hr /><p>cache</p><p><img data-proofer-ignore data-src="https://i.imgur.com/bTDwJPr.png" alt="Screen Shot 2020-06-20 at 23.23.50" /> ￼ <img data-proofer-ignore data-src="https://i.imgur.com/M9FQKnN.png" alt="Screen Shot 2020-06-20 at 23.24.41" /></p><hr /><h2 id="stickiness-vs-sticky-sessions">Stickiness vs Sticky sessions</h2><blockquote><p>Stickiness vs Sticky sessions</p></blockquote><p><img data-proofer-ignore data-src="https://i.imgur.com/b2u9xtx.png" width="400" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/0HkpZ99.png" width="400" /></p><ol><li>If the load balancer use <font color="red"> sticky sessions </font><ul><li> <font color="blue"> all interactions happen with the same physical server </font><li>the new sticky session feature instruct the load balancer<ul><li>to <font color="blue"> route repeated requests to the same EC2 instance whenever possible </font><ul><li>A series of requests from the user will be routed to the same EC2 instance if possible.</ul><li>If the instance has been terminated or has failed a recent health check<ul><li>the load balancer will route the request to another instance.</ul></ul><li>the instances can cache user data locally for better performance.</ul><li>If the load balancer use <font color="red"> Stickiness sessions </font><ul><li>important because mobile applications need to keep sticky sessions<li>For desktop users, common not require sticky sessions<li>load balancer had the freedom to forward each incoming HTTP or TCP request to any of the EC2 instances under its purview.<li>even load on each instance,<li>but also meant that each instance would have to retrieve, manipulate, and store session data for each request without any possible benefit from locality of reference.</ul></ol><hr /><h3 id="sticky-sessions--session-affinity">Sticky sessions / session affinity</h3><ul><li>By default, load balancer routes each request independently to the registered instance with the smallest load.<ul><li>Stickiness sessions<li>even load on each instance</ul></ul><p>by sticky session</p><ul><li>enables the load balancer to <font color="red"> bind user's session to a specific instance </font><ul><li>all requests from the user during the session are sent to the same server instance.<li>can use <code class="language-plaintext highlighter-rouge">sticky sessions</code> for only <code class="language-plaintext highlighter-rouge">HTTP/HTTPS load balancer listeners</code></ul><li> <font color="red"> limit application’s scalability </font><ul><li>the load balancer is unable to truly balance the load each time it receives request from a client.<li>send all the requests to their original server where the session state was created<ul><li>even that server might be heavily loaded<li>and another less-loaded server is available to take on this request.</ul></ul><li>allow to <font color="red"> route user to the particular web server </font> which is managing that individual user’s session.<ul><li>better user experience.</ul></ul><p>The <font color="red"> session’s validity </font> can be determined by:</p><ul><li>a client-side cookies<li>via configurable duration parameters that set at the load balancer<ul><li>which routes requests to the web servers.</ul></ul><h4 id="duration-based-session-stickiness">Duration-based session stickiness</h4><ul><li>The load balancer uses a special <code class="language-plaintext highlighter-rouge">load balancer–generated cookie</code> to <font color="red"> track the application instance for each request </font><li>When the load balancer receives a request<ul><li>first <font color="blue"> checks whether this cookie is present in the request </font><li>If there is a cookie<ul><li>the request is sent to the application instance specified in the cookie.</ul><li>If there is no cookie<ul><li>the load balancer chooses an application instance based on the existing load balancing algorithm.<li>A cookie is inserted into the response<ul><li>for binding subsequent requests from the same user to that application instance.</ul></ul></ul><li>The stickiness policy configuration<ul><li> <font color="red"> defines a cookie expiration </font><li>establishes the duration of validity for each cookie.<li>The cookie is <font color="blue"> automatically updated after its duration expires </font></ul></ul><h4 id="application-controlled-session-stickiness">Application-controlled session stickiness</h4><ul><li><p>The load balancer uses a special cookie to <font color="red"> associate the session with the original server that handled the request </font></p><li>The stickiness policy configuration<ul><li>follows the lifetime of the application-generated cookie corresponding to the cookie name specified in the policy configuration.<li>The load balancer only inserts a new <code class="language-plaintext highlighter-rouge">stickiness cookie</code> <font color="blue"> if the application response includes a new application cookie </font></ul><li>The load balancer stickiness cookie does not update with each request.<li>If the application cookie is explicitly removed or expires the session stops being sticky until a new application cookie is issued.<ul><li>This means that can perform maintenance without affecting customers’ experience.<li>such as deploying software upgrades or replacing backend instances,</ul><li>Applications often store session data in memory, but this approach doesn’t scale well.<ul><li>Options available to manage session data without <code class="language-plaintext highlighter-rouge">sticky sessions</code> include:<li>Using ElastiCache or DynamoDB to store session data.</ul></ul><hr /><p>Multiple load balancers, based on the types of devices that access the web site.</p><p><img data-proofer-ignore data-src="https://i.imgur.com/gE2TVx5.png" alt="Screen Shot 2020-06-22 at 15.07.33" /></p><p>When a web application is multi-device compatible (access from PCs and smart phones)</p><ol><li>perform a <code class="language-plaintext highlighter-rouge">setup for SSL/TLS</code> or to <code class="language-plaintext highlighter-rouge">assign sessions for individual access devices</code>, if the setup is performed by the EC2 instances themselves,<ul><li>any change to the settings would become extremely laborious as the number of servers increases.</ul><li><strong>solve this problem</strong>: assign multiple virtual load balancers with different settings.<ul><li>rather than modifying the <code class="language-plaintext highlighter-rouge">servers</code><li>changing the <code class="language-plaintext highlighter-rouge">virtual load balancer</code> for routing the access.<li>change the behavior relative to access by the different devices<li>For example<ul><li>apply this to settings such as for sessions, health checks, and HTTPS.<li>To implement, <code class="language-plaintext highlighter-rouge">assign multiple virtual load balancers to a single EC2 instance</code>.<li>use the SSL Termination function of the load balancer to perform the HTTPS (SSL) process.<li>Place EC2 instance under the control of the load balancers<li>And prepare load balancers with different settings for sessions, health checks, HTTPS, etc., and switch between them for the same EC2 instance.</ul></ul></ol><ul><li>some benefits.<ul><li>The behavior on the load balancer level for mobile sites and PC sites can be different, even use the same EC2 instance.<li>Even when multiple SSLs (HTTPS) are used by the same EC2 instance, can prepare load balancers for each SSL (HTTP).<li>when cut off an EC2 instance from a load balancer to perform maintenance, have to cut off the EC2 instance from all of the load balancers.<li>When use the SSL Termination function of a load balancer, the EC2 instance will be able to receive requests via HTTP, making it difficult to evaluate the HTTPS connection by the applications.</ul></ul><hr /><p>ref</p><ul><li><a href="https://aws.amazon.com/blogs/aws/new-elastic-load-balancing-feature-sticky-sessions/">New Elastic Load Balancing Feature: <code class="language-plaintext highlighter-rouge">Sticky Sessions</code></a><li><a href="https://shlomoswidler.com/2010/04/08/elastic-load-balancing-with-sticky-sessions/">Elastic Load Balancing with Sticky Sessions</a><li><a href="https://www.ibm.com/support/pages/openpages-load-balanced-configuration-vs-session-fail-over">IBM - OpenPages Load-Balanced Configuration vs Session Fail Over</a></ul><p>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/01aws/'>01AWS</a>, <a href='/categories/balancing/'>Balancing</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/aws/" class="post-tag no-text-decoration" >AWS</a> <a href="/tags/balancing/" class="post-tag no-text-decoration" >Balancing</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AWS - Session Affinity, Load-Balanced, Session Fail Over, Sticky Sessions - Grace&url=https://ocholuo.github.io//posts/SessionAffinity/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AWS - Session Affinity, Load-Balanced, Session Fail Over, Sticky Sessions - Grace&u=https://ocholuo.github.io//posts/SessionAffinity/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=AWS - Session Affinity, Load-Balanced, Session Fail Over, Sticky Sessions - Grace&url=https://ocholuo.github.io//posts/SessionAffinity/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/CloudFront/"><div class="card-body"> <span class="timeago small" >Jul 18, 2020<i class="unloaded">2020-07-18T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - Balancing - CloudFront</h3><div class="text-muted small"><p> CloudFront cloudFront edge locations Regional Edge caches Origin Access Identity (OAI) benefits enable CloudFront ...</p></div></div></a></div><div class="card"> <a href="/posts/ELK-Setup/"><div class="card-body"> <span class="timeago small" >Feb 11, 2020<i class="unloaded">2020-02-11T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - ELK Setup</h3><div class="text-muted small"><p> ELK Setup basic Install ELK Environment specifications Configuration Filebeat Logstash collect data ...</p></div></div></a></div><div class="card"> <a href="/posts/API-Gateway/"><div class="card-body"> <span class="timeago small" >Feb 11, 2020<i class="unloaded">2020-02-11T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS - VPC Gateway - API Gateway</h3><div class="text-muted small"><p> API Gateway background basic 安全性（身份验证和潜在的授权） 开源 APIGateway 单节点 API 网关 Backends for frontends 网关 AWS API Gateway Ali API Gateway ba...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/CloudFront/" class="btn btn-outline-primary" prompt="Older"><p>AWS - Balancing - CloudFront</p></a> <a href="/posts/0CodePipeline/" class="btn btn-outline-primary" prompt="Newer"><p>AWS - CodeDevelop - CodePipeline</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
