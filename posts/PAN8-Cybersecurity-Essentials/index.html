<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Lab - NDG - PAN8 Cybersecurity Essentials" /><meta property="og:locale" content="en" /><meta name="description" content="Learning Path" /><meta property="og:description" content="Learning Path" /><link rel="canonical" href="https://ocholuo.github.io//posts/PAN8-Cybersecurity-Essentials/" /><meta property="og:url" content="https://ocholuo.github.io//posts/PAN8-Cybersecurity-Essentials/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-07-16T11:11:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Lab - NDG - PAN8 Cybersecurity Essentials" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-30T21:02:21-04:00","datePublished":"2020-07-16T11:11:11-04:00","description":"Learning Path","headline":"Lab - NDG - PAN8 Cybersecurity Essentials","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/PAN8-Cybersecurity-Essentials/"},"url":"https://ocholuo.github.io//posts/PAN8-Cybersecurity-Essentials/"}</script><title>Lab - NDG - PAN8 Cybersecurity Essentials | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Lab - NDG - PAN8 Cybersecurity Essentials</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Lab - NDG - PAN8 Cybersecurity Essentials</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Jul 16, 2020, 11:11 AM -0400" >Jul 16, 2020<i class="unloaded">2020-07-16T11:11:11-04:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Oct 30, 2022, 6:02 PM -0700" >Oct 30, 2022<i class="unloaded">2022-10-30T21:02:21-04:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4288 words">23 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><h1 id="pan8-cybersecurity-essentials">PAN8 Cybersecurity Essentials</h1><p>[toc]</p><p>From the NDG: <a href="https://portal.netdevgroup.com/learn/pan8-ce-pilot/wb79h483WM">PAN8 Cybersecurity Essentials</a></p><p><img data-proofer-ignore data-src="https://i.imgur.com/AvhpUOu.png" alt="Screen Shot 2020-05-27 at 23.24.24" /></p><hr /><h2 id="lab-1-creating-a-zero-trust-environment">Lab 1: Creating a Zero Trust Environment</h2><p><img data-proofer-ignore data-src="https://i.imgur.com/TxK1iKz.png" alt="Screen Shot 2020-05-27 at 23.27.20" /></p><ol><li>Google Chrome: https://192.168.1.254<li>Login to the Firewall web interface<li>Device &gt; Setup &gt; Operations &gt; Configuration Management &gt; <code class="language-plaintext highlighter-rouge">Load named configuration snapshot</code> &gt; <code class="language-plaintext highlighter-rouge">pan8-ce-lab-01</code><li>Click the Commit link located at the top-right of the web interface.</ol><h3 id="11-create-zones-and-associate-the-zones-to-interfaces">1.1 Create <code class="language-plaintext highlighter-rouge">Zones</code> and Associate the Zones to Interfaces</h3><p>In this section, you will create three basic zones: inside, outside, and dmz.</p><ul><li>A security zone segregate traffic in the Firewall so can apply security policies later to limit the traffic between zones.<li>Next, you will associate them to the appropriate interfaces.</ul><ol><li><code class="language-plaintext highlighter-rouge">Network</code> &gt; <code class="language-plaintext highlighter-rouge">Zones</code>.</ol><p><img data-proofer-ignore data-src="https://i.imgur.com/NYhoanJ.png" alt="Screen Shot 2020-05-27 at 23.37.00" /></p><ol><li><code class="language-plaintext highlighter-rouge">Network</code> &gt; <code class="language-plaintext highlighter-rouge">Interfaces</code>: add zone to each interface<ul><li>ethernet1/1: Outside<li>ethernet1/2: inside<li>ethernet1/3: dmz</ul></ol><p><img data-proofer-ignore data-src="https://i.imgur.com/PKifD7y.png" alt="Screen Shot 2020-05-27 at 23.41.34" /></p><h3 id="12-create-a-security-policy-rule">1.2 Create a <code class="language-plaintext highlighter-rouge">Security Policy Rule</code></h3><ol><li><code class="language-plaintext highlighter-rouge">Policies</code> &gt; <code class="language-plaintext highlighter-rouge">Security</code>: Add<ul><li>Security Policy Rule window<li><p>Name: <code class="language-plaintext highlighter-rouge">Allow-Inside-Out</code></p><li>Source tab:<ul><li>Add Source Zone section:<li>select <code class="language-plaintext highlighter-rouge">inside</code> from Source Zone column.<li>allows any address in the inside zone to pass through</ul><li>Destination tab:<ul><li>Add Destination Zone section:<li>select <code class="language-plaintext highlighter-rouge">outside</code> from Destination Zone column.<li>allows the source traffic to communicate with any address in the outside zone.</ul><li>Application tab: <code class="language-plaintext highlighter-rouge">Any</code><ul><li>select predefined applications to allow through the Firewall.<li>The Any checkbox allows any application through.</ul><li>Service/URL Category tab: <code class="language-plaintext highlighter-rouge">application-default</code><ul><li>select predefined services or preset groups to allow through the Firewall.<li>The application-default selection means that the selected applications are allowed or denied only on their default ports defined by Palo Alto Networks.<li>This option is recommended for allowing policies because it prevents applications from running on unusual ports and protocols, which if not intentional, can be a sign of undesired application behavior and usage. When you use this option, the device still checks for all applications on all ports, but with this configuration, applications are only allowed on their default ports/protocols. For example, if a web server is running on the standard port 80, traffic will be allowed to pass. However, if the web server is running on a non-standard port such as 5000, traffic will be blocked.</ul></ul></ol><p><img data-proofer-ignore data-src="https://i.imgur.com/73vhjKL.png" alt="Screen Shot 2020-05-27 at 23.42.52" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/jht9HmD.png" alt="Screen Shot 2020-05-29 at 14.59.51" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/iDY3aYL.png" alt="Screen Shot 2020-05-29 at 15.00.04" /> <img data-proofer-ignore data-src="https://i.imgur.com/WkTcJ4l.png" alt="Screen Shot 2020-05-29 at 15.00.15" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/40rGbxk.png" alt="Screen Shot 2020-05-29 at 15.21.01" /></p><ol><li><p>Click on the number 3, to select but not open the interzone-default security policy.</p><li><p>With the interzone-default policy selected, click on the <code class="language-plaintext highlighter-rouge">Override</code> button at the bottom of the center section.</p><li><p><strong>Security Policy Rule – predefined</strong> window &gt; Actions tab:</p><ul><li>checkbox: <code class="language-plaintext highlighter-rouge">Log at Session End</code></ul></ol><h3 id="13-create-a-nat-policy">1.3 Create a <code class="language-plaintext highlighter-rouge">NAT Policy</code></h3><ol><li>Policies &gt; <strong>NAT</strong>: Add<ul><li><strong>NAT Policy Rule</strong> window<li>Name: <code class="language-plaintext highlighter-rouge">Inside-NAT-Outside</code><li>Original Packet tab:<ul><li>Add of the Source Zone section.<li>the Source Zone column: <code class="language-plaintext highlighter-rouge">inside</code><li>the Destination Zone: <code class="language-plaintext highlighter-rouge">outside</code></ul><li>Translated Packet tab.</ul></ol><p><img data-proofer-ignore data-src="https://i.imgur.com/3jFp4Bs.png" alt="Screen Shot 2020-05-29 at 15.25.02" /></p><h3 id="14-commit-and-test-the-rules-and-policies">1.4 Commit and Test the Rules and Policies</h3><p>create a basic NAT policy to NAT traffic from the inside zone to the outside zone.</p><ol><li>Click the Commit link<li>Internet Explorer: https://www.facebook.com<li>Click the X in the upper-right to close Internet Explorer.<li>Monitor &gt; Logs &gt; <strong>Traffic</strong>.<li>filter: <code class="language-plaintext highlighter-rouge">rule eq ‘Allow-Inside-Out’</code><li>see log entries allowing the facebook-base application.</ol><p><img data-proofer-ignore data-src="https://i.imgur.com/CIt1oqc.png" alt="Screen Shot 2020-05-27 at 23.55.36" /></p><hr /><h2 id="lab-2-configuring-authentication">Lab 2: Configuring Authentication</h2><ol><li>Google Chrome: https://192.168.1.254<li>Login to the Firewall web interface<li>Device &gt; Setup &gt; Operations &gt; Configuration Management &gt; <code class="language-plaintext highlighter-rouge">Load named configuration snapshot</code> &gt; <code class="language-plaintext highlighter-rouge">pan8-ce-lab-01</code><li>Click the Commit link located at the top-right of the web interface.</ol><h3 id="21-configure-a-local-user-account-and-authentication-profile">2.1 Configure a <code class="language-plaintext highlighter-rouge">Local User Account</code> and <code class="language-plaintext highlighter-rouge">Authentication Profile</code></h3><p>configure a <code class="language-plaintext highlighter-rouge">local user account</code>. Then, create a <code class="language-plaintext highlighter-rouge">local authentication profile</code> which will later be assigned to a security policy.</p><ol><li>Network &gt; Zones &gt; <strong>inside zone</strong>.<ul><li><strong>Zone</strong> window:<ul><li>User Identification ACL. checkbox: <code class="language-plaintext highlighter-rouge">Enable User Identification</code><li>enable the inside zone to use a Username for authentication.</ul></ul><li>Device &gt; <strong>Local User Database</strong> &gt; <strong>Users</strong>: Add.<ul><li><strong>Local User</strong> window, type lab-web in the<ul><li>Name: <code class="language-plaintext highlighter-rouge">lab-web</code><li>Password: <code class="language-plaintext highlighter-rouge">Pal0Alt0</code></ul></ul><li>Device &gt; <strong>Authentication Profile</strong>: Add.<ul><li><strong>Authentication Profile</strong> window<ul><li>Name: <code class="language-plaintext highlighter-rouge">Local-Auth-Profile</code><li>Type: <code class="language-plaintext highlighter-rouge">Local Database</code><img data-proofer-ignore data-src="https://i.imgur.com/h28iibz.png" alt="Screen Shot 2020-05-30 at 14.14.25" /><li>the Advanced tab: Add button &gt; select <code class="language-plaintext highlighter-rouge">all</code></ul></ul></ol><h3 id="22-enable-the-captive-portal-and-enable-web-form-based-logins">2.2 Enable the <code class="language-plaintext highlighter-rouge">Captive Portal</code> and Enable <code class="language-plaintext highlighter-rouge">Web-Form based Logins</code></h3><p>enable a captive portal. In that captive portal, you will use a webform for login.</p><ol><li>Device &gt; <strong>User Identification</strong> &gt; <strong>Captive Portal Settings</strong>.<ul><li>the <strong>Captive Portal Settings</strong> tab, click on the gear icon.<li><strong>Captive Portal</strong> window<ul><li>checkbox: <code class="language-plaintext highlighter-rouge">Enable Captive Portal</code><li>Authentication Profile: <code class="language-plaintext highlighter-rouge">Local-Auth-Profile</code><li>This will turn on the Captive Portal for web-form logins and associate it with the Local-Auth-Profile created earlier.</ul></ul><li>Objects &gt; <strong>Authentication</strong><ul><li>checkbox: <code class="language-plaintext highlighter-rouge">default-web-form</code> &gt; click <code class="language-plaintext highlighter-rouge">Clone</code>.<li>the <strong>Clone</strong> window, click the OK button to confirm the clone.</ul><li>a new entry <code class="language-plaintext highlighter-rouge">default-web-form-1</code> has been created, click on default-web-form-1.<ul><li>the <strong>Authentication Enforcement</strong> window<li>Name: <code class="language-plaintext highlighter-rouge">local-web-form-auth</code><li>Authentication Profile: <code class="language-plaintext highlighter-rouge">Local-Auth-Profile</code><li>OK button.</ul></ol><h3 id="23-create-an-authentication-policy">2.3 Create an <code class="language-plaintext highlighter-rouge">Authentication Policy</code></h3><p>enable a <code class="language-plaintext highlighter-rouge">captive portal</code>.</p><ul><li>A captive portal redirects web requests that match the authentication policy and forces the user to use a login to continue.<li>typically seen in corporate guest networks, hotels and Wi-Fi hotspots.<li>In captive portal, use a web-form for login.</ul><ol><li>Policies &gt; <strong>Authentication</strong>: Add.<ul><li><strong>Authentication Policy Rule</strong> window<li>Name: <code class="language-plaintext highlighter-rouge">web-form-policy</code><li><strong>Source</strong> tab:<ul><li><code class="language-plaintext highlighter-rouge">Add</code> button in the Source Zone section &gt; select <code class="language-plaintext highlighter-rouge">inside</code>.</ul><li><strong>Destination</strong> tab<ul><li><code class="language-plaintext highlighter-rouge">Add</code> button in the Destination Zone section &gt; select <code class="language-plaintext highlighter-rouge">outside</code>.</ul><li><strong>Service/URL Category</strong> tab<ul><li><code class="language-plaintext highlighter-rouge">Add</code> button in the Service section &gt; select <code class="language-plaintext highlighter-rouge">service-https</code>.</ul><li><strong>Actions</strong> tab<ul><li>Authentication Enforcement: <code class="language-plaintext highlighter-rouge">local-web-form-auth</code><li>OK button.</ul></ul></ol><h3 id="24-commit-and-test-authentication-policy">2.4 Commit and Test Authentication Policy</h3><p>commit changes and test the authentication policy with the captive portal.</p><ol><li>Click the Commit link<li>Internet Explorer: http://www.facebook.com<li>confirm the certificate error, and click <code class="language-plaintext highlighter-rouge">Continue to this website (not recommended)</code>.<ul><li>You are seeing this error because the Firewall is intercepting traffic coming from the inside zone to the outside zone. The Firewall serves as a man-in-the-middle until authenticated.<li>You will see a vsys1 in Warnings, which refers to a virtual system in the Firewall. You can ignore it in this lab environment.</ul><li>You will see a <strong>web-form login</strong><ul><li>lab-web as the username<li>Pal0Alt0 as the password<li>Login button.</ul><li>You will then see Facebook after you successfully <code class="language-plaintext highlighter-rouge">authenticate to the Firewall as lab-web</code>.<li>Monitor &gt; Logs &gt; <strong>Traffic</strong>.<li>logs of entries to facebook-base are associated to the labweb user. <img data-proofer-ignore data-src="https://i.imgur.com/stTgzcR.png" alt="Screen Shot 2020-05-29 at 23.54.46" /></ol><hr /><h2 id="lab-3-using-two-factor-authentication-to-secure-the-firewall">Lab 3: Using Two-Factor Authentication to Secure the Firewall</h2><h3 id="31-create-local-user-account">3.1 <code class="language-plaintext highlighter-rouge">Create Local-User Account</code></h3><p>create a local user account, lab-user. This account will be used for authentication against the Firewall.</p><ol><li>Device &gt; <strong>Administrators</strong> &gt; Add.<ul><li><strong>Administrator</strong> window<ul><li>type <code class="language-plaintext highlighter-rouge">lab-user</code> in the Name field.<li>type <code class="language-plaintext highlighter-rouge">Pal0Alt0</code> in the Password and Confirm<li>OK</ul></ul></ol><p><img data-proofer-ignore data-src="https://i.imgur.com/0idZtBP.png" alt="Screen Shot 2020-05-29 at 23.59.37" /></p><h3 id="32-generate-certificates">3.2 <code class="language-plaintext highlighter-rouge">Generate Certificates</code></h3><p>generate two certificates.</p><ul><li>The first is a self-signed Root Certificate Authority (CA) certificate, the top-most certificate in the certificate chain.<li>The Firewall can use this certificate to automatically issue certificates for other uses.<li>use the Root CA certificate to generate a certificate for use on the Client machine that is associated with local user account, lab-user.</ul><ol><li><p>Device &gt; <strong>Certificate Management</strong> &gt; <strong>Certificates</strong>:</p><li><p><code class="language-plaintext highlighter-rouge">Generate</code> button</p><ul><li>In the <strong>Generate Certificate</strong> window,<ul><li>type <code class="language-plaintext highlighter-rouge">lab-local</code> in the Certificate Name field.<li>type <code class="language-plaintext highlighter-rouge">192.168.1.254</code> in the Common Name field.<li>Next, click the <code class="language-plaintext highlighter-rouge">Certificate Authority</code> checkbox.<li>Finally, click the <code class="language-plaintext highlighter-rouge">Generate</code> button.<li>OK</ul></ul></ol><blockquote><p>This will generate a certificate for the <code class="language-plaintext highlighter-rouge">Firewall to act as a Certificate Authority (CA)</code>. Firewall being a CA, can now issue a certificate for the local account, lab-user.</p></blockquote><ol><li><code class="language-plaintext highlighter-rouge">Generate</code> button<ul><li>In the <strong>Generate Certificate</strong> window<li>type <code class="language-plaintext highlighter-rouge">lab-user</code> in the Certificate Name field.<li>type <code class="language-plaintext highlighter-rouge">lab-user</code> in the Common Name field.<li>select <code class="language-plaintext highlighter-rouge">lab-local</code> in the Signed By dropdown.<li>Finally, click the <code class="language-plaintext highlighter-rouge">Generate</code> button.<li>click OK to continue.</ul></ol><blockquote><p>Common Name as lab-user, will later be used as an authentication field, to map to the local user account, lab-user. now using the previous root CA certificate, lab-local, to sign this certificate.</p></blockquote><h3 id="33-create-a-certificate-profile">3.3 Create a <code class="language-plaintext highlighter-rouge">Certificate Profile</code></h3><p>create a certificate profile</p><ul><li>defines user and device authentication for multiple services on the Firewall.<li>The profile specifies which certificates to use, how to verify certificate revocation status and how that status constrains access.<li>In this lab, the certificate profile is created to tell the Firewall to use the common-name of the certificate as a username.<li>Then, you will tell the Firewall to use this Certificate Profile to authenticate users.</ul><ol><li>Device &gt; <strong>Certificate Management</strong> &gt; <strong>Certificate Profile</strong>: Add<ul><li>In the <strong>Certification Profile</strong> window<ul><li>type <code class="language-plaintext highlighter-rouge">Cert-Local-Profile</code> in the Name field.<li>select <code class="language-plaintext highlighter-rouge">Subject</code> in the Username Field dropdown.<li>Next, <code class="language-plaintext highlighter-rouge">Add</code> button.<ul><li>select <code class="language-plaintext highlighter-rouge">lab-local</code> in the CA Certificate dropdown.<li>Then, click the OK button.</ul><li>click the OK button.</ul></ul></ol><blockquote><p>Username Field set to Subject, will use the common-name as the default. The Firewall will now use that common-name as the username. The lab-user certificate you generated earlier has a common-name of lab-user, and will therefore use lab-user to authenticate the client machine</p></blockquote><blockquote><p>Firewall will use lab-local CA certificate to verify the authenticity of the client supplied certificate, lab-user.</p></blockquote><ol><li>Device &gt; <strong>Setup</strong> &gt; <strong>Management</strong>.<ul><li>Click the gear icon on the <strong>Authentication Settings</strong> section, located in the center.<li>In the <strong>Authentication Settings</strong> window<ul><li>select <code class="language-plaintext highlighter-rouge">Cert-Local-Profile</code> for the Certification Profile dropdown.<li>click on the OK button.</ul></ul></ol><h3 id="34-export-certificate-and-commit">3.4 Export Certificate and Commit</h3><p>export the lab-user certificate generated on the Firewall. commit changes, causing the Firewall to start using certificates for authentication.</p><ol><li>Device &gt; <strong>Certificate Management</strong> &gt; <strong>Certificates</strong>: <code class="language-plaintext highlighter-rouge">lab-user</code> certificate &gt; Export button.<ul><li>In the <strong>Export Certificate - lab-user</strong> window,<ul><li>File Format: <code class="language-plaintext highlighter-rouge">Encrypted Private Key and Certificate (PKCS12)</code><li>type <code class="language-plaintext highlighter-rouge">paloalto</code> for the Passphrase and Confirm Passphrase fields,<li>OK button.</ul></ul></ol><p><img data-proofer-ignore data-src="https://i.imgur.com/NsjHyDR.png" alt="Screen Shot 2020-05-30 at 01.05.46" /></p><blockquote><p>By using an Encrypted Private Key and Certificate, this creates an additional security measure, as the passphrase is required to install the certificate on a client machine.</p></blockquote><ol><li><p>The <code class="language-plaintext highlighter-rouge">cert_lab-user.p12 file</code> will download to the Client machine’s Downloads folder.</p><li><p>Click the Commit link</p></ol><h3 id="35-test-connectivity-and-import-certificate-on-the-client">3.5 Test Connectivity and Import Certificate on the Client</h3><p>test connectivity to the Firewall. import the lab-user certificate on the Client machine and try again.</p><ol><li>Open Internet Explorer: https://192.168.1.254</ol><blockquote><p>This message is displayed because the Firewall has a <code class="language-plaintext highlighter-rouge">self-signed certificate</code> by default. The client does not have a Certificate Authority that can validate the certificate.</p></blockquote><ol><li><p>Click the <code class="language-plaintext highlighter-rouge">Continue to this website (not recommended)</code>.</p><li><p>You will see a “The webpage cannot be found” message. close Internet Explorer.</p></ol><blockquote><p>Notice you get a HTTP 400 Bad Request error. This is because the lab-user certificate is not installed on the Client machine. The Firewall administrators are not allowed to login unless they have the certificate installed and have an account and password. These two factors make up the Two-Factor Authentication in this lab.</p></blockquote><ol><li>To install the lab-user certificate, double-click <code class="language-plaintext highlighter-rouge">certificates.msc</code> on the Desktop.</ol><blockquote><p>This launches the Client’s Certificate Manager snap-in for the Management Console.</p></blockquote><ol><li>File &gt; <code class="language-plaintext highlighter-rouge">Add/Remove Snap-in</code><ul><li>select Certificates on the left.<li>click the Add button to move Certificates to the right.</ul><li><p>In the Certificates snap-in window, make sure <code class="language-plaintext highlighter-rouge">My user account</code> is selected. Then click the Finish button.</p><li>In the Add or Remove Snap-ins window<ul><li><code class="language-plaintext highlighter-rouge">Certificates (Local Computer)</code> and <code class="language-plaintext highlighter-rouge">Certificates – Current User</code>, under Selected snap-ins. Then, click the OK button.</ul><li><p>Click <code class="language-plaintext highlighter-rouge">Certificates – Current User</code> in the left side pane, to expand the section.</p><li><p>Right-click on the Personal folder &gt; All Tasks &gt; <code class="language-plaintext highlighter-rouge">Import</code></p><li>In the <strong>Certificate Import Wizard</strong> window<ul><li>click the Next button.<li>click the Browse… button.<li>select Personal Information Exchange (<em>.pfx;</em>.p12) from the File Type<li>select the <code class="language-plaintext highlighter-rouge">cert_lab-user.p12</code> file.<li>Finally, click the Open button.<li>click the Next button.<li>type <code class="language-plaintext highlighter-rouge">paloalto</code>. the passphrase entered when you exported the certificate from the Firewall.<li>Then, click the Next button.<li>leave the default Personal in the <strong>Certificate Store</strong> field.<li>Then, click the Next button.<li>click the Finish Button.<li>click the OK button.<li>close the Certificate Manager.<li>In the <strong>Microsoft Management Console</strong> window, click the Yes button to save console settings.</ul><li><p>Open Internet Explorer: https://192.168.1.254</p><li><p>In the <strong>Windows Security</strong> window, click the OK button to confirm the certificate just installed on the Client machine.</p><li><p>Click the <code class="language-plaintext highlighter-rouge">Continue to this website (not recommended)</code>.</p><li><p>The Confirm Certificate window will pop-up again &gt; OK to confirm.</p><li>The Firewall login will be displayed.<ul><li>Username: <code class="language-plaintext highlighter-rouge">lab-user</code><li>Type <code class="language-plaintext highlighter-rouge">Pal0Alt0</code> for the Password field.<li>Then, click the Log In button.</ul></ol><blockquote><p>lab-user is pre-populated for the Username because the Certificate Profile you created earlier used the subject, common-name for the Username field.</p></blockquote><ol><li><p>On the Welcome window, click the Close button.</p><li><p>now at the Palo Alto Networks Web GUI, logged on as lab-user. Notice the username in the lower-left.</p></ol><hr /><h2 id="lab-4-allowing-only-trusted-applications">Lab 4: Allowing Only Trusted Applications</h2><h3 id="41-create-an-application-group">4.1 Create an <code class="language-plaintext highlighter-rouge">Application Group</code></h3><p>To simplify the creation of security policies, applications requiring the same security settings can be combined by creating an application group.</p><ol><li>Objects &gt; Application Groups: Add<ul><li>Application Group window,<ul><li>type Trusted-Apps in the Name field.<li>click the Add button<li>type facebook in the search box<li>type dns in the search box<li>click the OK button.</ul></ul></ol><p><img data-proofer-ignore data-src="https://i.imgur.com/PcM0UPf.png" alt="Screen Shot 2020-05-30 at 14.15.03" /></p><h3 id="42-modify-security-policy">4.2 Modify Security Policy</h3><p>modify the Allow-Inside-Out security policy to only allow the applications in the application group, Trusted-Apps</p><ol><li>Policies &gt; Security: <code class="language-plaintext highlighter-rouge">Allow-Inside-Out</code> policy.<ul><li><strong>Security Policy Rule</strong> window<li>Application tab: Add button.<ul><li>select <code class="language-plaintext highlighter-rouge">Trusted-Apps</code> under Application group.</ul></ul></ol><h3 id="43-commit-and-test">4.3 Commit and Test</h3><p>commit changes to the Firewall. Then, test the security policy Next, add an additional application to the application group, Trusted-Apps. verify the additional application is allowed.</p><ol><li>Click the Commit link<li>Internet Explorer: https://www.facebook.com<li>the address bar: http://www.google.com</ol><blockquote><p>The Firewall recognizes the traffic and matches it to the application, google. As google is NOT part of the application group, Trusted-Apps, the Firewall blocks the traffic based on the security policy</p></blockquote><ol><li>Monitor &gt; Logs &gt; Traffic.<ul><li>the application <code class="language-plaintext highlighter-rouge">facebook-base</code> has the action of allow based on rule <code class="language-plaintext highlighter-rouge">Allow-Inside-Out</code>.<li>the application <code class="language-plaintext highlighter-rouge">web- browsing</code> has the action reset-both based on the rule <code class="language-plaintext highlighter-rouge">interzone-default</code>, which has a session end reason of policy-deny.<li>the application <code class="language-plaintext highlighter-rouge">dns</code> has the action of allow based on the rule <code class="language-plaintext highlighter-rouge">Allow-Inside-Out</code>.</ul></ol><blockquote><p>the traffic to www.google.com is not part of the Trusted-Apps application group, which applied to the Allow-Inside-Out security policy, the Firewall matches that traffic to the next appropriate policy. match to interzone-default, which has an explicit deny action.</p></blockquote><ol><li>Objects &gt; Application Groups: Trusted-Apps Application Group<ul><li>Add button.<li>type google in the search box<li>click on google-base under Application.<li>OK button.</ul><li><p>Click the Commit link</p><li>Internet Explorer: https://www.google.com</ol><blockquote><p>www.google.com now works because it was added to the Trusted-Apps application group.</p></blockquote><hr /><h2 id="lab-5-managing-certificates">Lab 5: Managing Certificates</h2><h3 id="51-generate-certificates">5.1 Generate Certificates</h3><p>generate two certificates.</p><ul><li>The first is a <code class="language-plaintext highlighter-rouge">self-signed</code> <code class="language-plaintext highlighter-rouge">Root Certificate Authority (CA) certificate</code>, the top-most certificate in the certificate chain.<li>The Firewall can use this certificate to automatically issue certificates for other uses.<li>use the Root CA certificate to generate a new certificate for the Firewall to use for Inbound Management Traffic, replacing the default certificate issued specifically for this lab environment.</ul><ol><li>Device &gt; <strong>Certificate Management</strong> &gt; <strong>Certificates</strong>: <code class="language-plaintext highlighter-rouge">Generate</code> button at the bottom-center of the center section.<ul><li><strong>Generate Certificate</strong> window,<ul><li>type <code class="language-plaintext highlighter-rouge">lab-firewall</code> in the Certificate Name field.<li>type <code class="language-plaintext highlighter-rouge">203.0.113.20</code> in the Common Name field.<li>Next, click the <code class="language-plaintext highlighter-rouge">Certificate Authority</code> checkbox.<li>Then, select sha512 in the Digest dropdown.<li>Next, type 1095 in the Expiration (days) field.<li>Finally, click the Generate button.</ul></ul></ol><p><img data-proofer-ignore data-src="https://i.imgur.com/GXOzyAm.png" alt="Screen Shot 2020-05-30 at 20.40.10" /></p><blockquote><p>generate a certificate for the Firewall to act as a root Certificate Authority (CA). The IP address, <code class="language-plaintext highlighter-rouge">203.0.113.20, used in the Common Name field is the Firewall’s outside IP address</code>. It is best practice that a digest algorithm of sha256 or higher is used for enhanced security. By increasing the default digest to sha512, you have created a much stronger certificate. The Expiration (days) field is equivalent to 3 years (365 days x 3 years = 1,095 days).</p></blockquote><ul><li><strong>Generate Certificate</strong> window<ul><li>type <code class="language-plaintext highlighter-rouge">lab-management</code> in the Certificate Name field.<li>type <code class="language-plaintext highlighter-rouge">192.168.1.254</code> in the Common Name field.<li>select <code class="language-plaintext highlighter-rouge">lab-firewall</code> in the Signed By dropdown.<ul><li>click the Add button in the Certificate Attributes section.<ul><li>Type: <code class="language-plaintext highlighter-rouge">Organization</code><li>Value: <code class="language-plaintext highlighter-rouge">Palo Alto Networks</code></ul><li>click the Add button in the Certificate Attributes section.<ul><li>Type: <code class="language-plaintext highlighter-rouge">Email</code><li>Value: <code class="language-plaintext highlighter-rouge">support@paloaltonetworks.com</code></ul><li>click the Add button in the Certificate Attributes section.<ul><li>Type: <code class="language-plaintext highlighter-rouge">Department</code><li>Value: <code class="language-plaintext highlighter-rouge">Management Interface</code></ul></ul><li>click the Generate button.</ul></ul><blockquote><p>The IP address, <code class="language-plaintext highlighter-rouge">192.168.1.254, used in the Common Name field is the Firewall’s inside IP address</code>. selected the previously created root CA certificate, lab-firewall, to sign this certificate. Client certificates that are used when requesting firewall services that rely on TLSv1.2 (such as administrator access to the web interface) cannot have sha512 as a digest algorithm, therefore you will leave the default sha256.</p><p>Certificate Attributes are used to uniquely identify the firewall and the service that will use the certificate.</p></blockquote><ol><li>In the Generate Certificate window, review the settings. Then, click the Generate button.<li>In the Generate Certificate window, click OK to continue. 7/2/2018 Copyright © 2018 Network Development Group, Inc. www.netdevgroup.com Page 13</ol><blockquote><p>Palo Alto Networks Firewalls use certificates in the following applications: • <strong>User authentication</strong> for Captive Portal, GlobalProtectTM, Mobile Security Manager, and web interface access to a firewall or Panorama. • <strong>Device authentication</strong> for GlobalProtect VPN (remote user- to-site or large scale). • <strong>Device authentication</strong> for IPSec site-to-site VPN with Internet Key Exchange (IKE). • <strong>Decrypting inbound and outbound SSL traffic</strong>. As a best practice, it is recommended you use different certificates for each usage.</p></blockquote><blockquote><p>In a real-world scenario, you can simplify your certificate deployment by using a certificate that the client systems already trust. It is recommended that you import a certificate and private key from your enterprise certificate authority (CA) or obtain a certificate from an external CA. The trusted root certificate store of the client systems is likely to already have the associated root CA certificate that ensures trust. This prevents you from having to create a root CA certificate and install it on every client system to prevent a certificate error.</p></blockquote><h3 id="52-replace-the-certificate-for-inbound-management-traffic">5.2 Replace the Certificate for Inbound Management Traffic</h3><p>replace the certificate for inbound management traffic.</p><ul><li><p>boot the Firewall for the first time, it automatically generates a default certificate that enables HTTPS access to the web interface over the management (MGT) interface.</p><li><p>To improve the security of inbound management traffic,</p><ul><li>configure a SSL/TLS Service Profile<li>replace the default certificate with the lab-management certificate created<li>apply the SSL/TLS Service Profile to inbound management traffic.</ul></ul><ol><li>Device &gt; Certificate Management &gt; <strong>SSL/TLS Service Profile</strong> &gt; Add.<ul><li><strong>SSL/TLS Service Profile</strong> window,<ul><li>type <code class="language-plaintext highlighter-rouge">Management</code> in the Name field.<li>select <code class="language-plaintext highlighter-rouge">lab-management</code> from the Certificate<li>select <code class="language-plaintext highlighter-rouge">TLSv1.1</code> from the Min Version<li>Finally, click the OK button.</ul></ul><li>Device &gt; Setup &gt; Management: the gear icon on the General Settings section, located in the center.<ul><li><strong>General Settings</strong> window,<ul><li>select <code class="language-plaintext highlighter-rouge">Management</code> from the SSL/TLS Service Profile dropdown<li>click the OK button.</ul></ul></ol><h3 id="53-export-certificate-and-commit">5.3 Export Certificate and Commit</h3><p>export the root CA certificate, lab-firewall. Then, you will commit your changes to the Firewall.</p><ol><li>Device &gt; Certificate Management &gt; Certificates: <code class="language-plaintext highlighter-rouge">lab-firewall</code>: <code class="language-plaintext highlighter-rouge">Export</code> button at the bottom.<ul><li>the <strong>Export Certificate - lab-firewall</strong> window,<ul><li>select <code class="language-plaintext highlighter-rouge">Encrypted Private Key and Certificate (PKCS12)</code> in the File Format<li>type <code class="language-plaintext highlighter-rouge">paloalto</code> for the Passphrase<li>OK button.</ul></ul></ol><blockquote><p>By using an Encrypted Private Key and Certificate, this creates an additional security measure, as the passphrase is required to install the certificate on a client machine.</p></blockquote><ol><li>The cert_lab-firewall.p12 file will download to the Client machine’s Downloads folder.<li>Click the Commit link</ol><blockquote><p>Notice the warning about the Web server being restarted, this is because of the authentication changes you made. You will need to click the Close button when it gets to 99%, since the web server is restarting, you will not see it get to 100%.</p></blockquote><ol><li>Click the X in the upper-right to close Google Chrome.</ol><h3 id="54-test-connectivity-and-import-certificate-on-the-client">5.4 Test Connectivity and Import Certificate on the Client</h3><p>test connectivity to the Firewall.</p><ul><li>When establishing a secure connection with the Firewall, the client must trust the root CA that issued the certificate.<li>Otherwise, the client browser will display a warning that the certificate is invalid and might (depending on security settings) block the connection.<li>To prevent this, you will import the root CA certificate on the Client, creating a trust relationship between the Firewall and the Client machine. Then, you will test connectivity again.</ul><ol><li>Google Chrome: https://192.168.1.254<li>You will see a “Your connection is not private” message.<ul><li>This is because the Client cannot verify the certificate from the Firewall. To view the certificate, click the ! icon (triangle exclamation) in the address bar.</ul></ol><p><img data-proofer-ignore data-src="https://i.imgur.com/JGlTaKC.png" alt="Screen Shot 2020-05-30 at 20.53.04" /></p><ol><li>In the popup &gt; Details link &gt; View certificate under the Certificate Error section &gt; Details tab &gt; Subject field.</ol><blockquote><p>Notice the details match the lab-management certificate you created earlier in section 5.1. The sha256 algorithm is being used. The certificate was issued by 203.0.113.20, which is the common-name of the root CA certificate, lab-firewall, you created. The Valid from and Valid to fields indicate the certificate is valid for 365 days. In the center, you will see the certificate attributes you set when you generated the certificate. The Public key is using RSA (2048 Bits).</p></blockquote><ol><li>To install the lab-firewall certificate, double-click <code class="language-plaintext highlighter-rouge">certificates.msc</code> on the Desktop. This launches the Client’s Certificate Manager snap-in for the Management Console.<ul><li>In the <strong>User Account Control</strong> window, click the Yes button.<li>In the <strong>certificates – [Console Root]</strong> window,<ul><li>click <code class="language-plaintext highlighter-rouge">Certificates (Local Computer)</code> in the left side pane, to expand the section.<li>right-click the Trusted Root Certification Authorities folder. Then, click on All Tasks &gt; Import…<li>Certificate Import Wizard window,<ul><li>click the Browse… button.<li>select Personal Information Exchange (<em>.pfx;</em>.p12) from the File Type dropdown in the lower- right.<li>select the cert_lab-firewall.p12 file. Finally, click the Open button.<li>click the Next button.<li>type paloalto: passphrase<li>Next button.<li>leave the default <code class="language-plaintext highlighter-rouge">Trusted Root Certification Authorities</code>, in the Certificate Store field. Then, click the Next button.<li>click the Finish Button.OK button.</ul></ul></ul><li>Google Chrome: https://192.168.1.254<li>login prompt from the Firewall.<ul><li>Notice the ! icon in the address bar from before is now showing a secured padlock icon. Click on the padlock icon.<li>In the popup, click the Details link<li>In the Developer Tools pane on the right, notice the message “This page is secure (valid HTTPS)”. Below, under the Valid Certificate section, you will see the message “The connection to this site is using a valid, trusted server certificate.”</ul></ol><hr /><h2 id="lab-6-using-the-application-command-center-to-find-threats">Lab 6: Using the Application Command Center to Find Threats</h2><p>6.1 Generate Malware Traffic to the Firewall</p><ol><li>PuTTY: <code class="language-plaintext highlighter-rouge">traffic-generator</code> &gt; Load button<ul><li>type Pal0Alt0<li>sh /tg/malware.sh<li>Wait 10 minutes to let the script generate malware traffic.</ul></ol><h3 id="62-find-malware-threat-in-the-application-command-center">6.2 Find Malware Threat in the Application Command Center</h3><p>review Threat Activity and Blocked Activity in the Application Command Center.</p><ol><li>ACC &gt; <strong>Threat Activity</strong><li><p>a bar graph of the types of threats identified and list of threats under the Threat Name.</p><li>Blocked Activity tab: Blocked User Activity section.</ol><hr /><h2 id="lab-7-decrypting-ssl-inbound-traffic">Lab 7: Decrypting SSL Inbound Traffic</h2><h3 id="71-download-the-ssl-certificate-from-dmz-server">7.1 <code class="language-plaintext highlighter-rouge">Download the SSL Certificate</code> from DMZ Server</h3><p>use <code class="language-plaintext highlighter-rouge">WinSCP</code> to download the certificate and key that is being used on the DMZ server.</p><ul><li>WinSCP is a free, open-source tool, used to transfer secure files between clients.</ul><ol><li>open WinSCP<li>In the Login window,<ul><li>click on <code class="language-plaintext highlighter-rouge">edl-webserver</code> on the left. Then, click the <code class="language-plaintext highlighter-rouge">Login</code> button.<li>Select <code class="language-plaintext highlighter-rouge">/ &lt;root&gt;</code> from the dropdown in the top-middle.<li>Then, double-click on <code class="language-plaintext highlighter-rouge">ssl-inbound</code>.<li>Press CTRL + A to highlight <code class="language-plaintext highlighter-rouge">dmz-server.key</code> and <code class="language-plaintext highlighter-rouge">dmz-server.crt</code>.<li>Then, click the Download button at the top.</ul><li>terminate the edl-webserver session.</ol><h3 id="72-import-ssl-certificate">7.2 <code class="language-plaintext highlighter-rouge">Import SSL Certificate</code></h3><p>import the SSL Certificate you downloaded from the DMZ server to the Firewall. This will later be used to create a decryption profile.</p><ol><li>Device &gt; Certificate Management &gt; Certificates: <code class="language-plaintext highlighter-rouge">Import</code> button at the bottom-center of the center section.<ul><li><strong>Import Certificate</strong> window<ul><li>name: type <code class="language-plaintext highlighter-rouge">SSL Inbound Cert</code>.<li>Browse: <code class="language-plaintext highlighter-rouge">dmz-server.crt</code>.<li>Click the checkbox for Import private key.<ul><li>Browse: <code class="language-plaintext highlighter-rouge">dmz-server.key</code>.</ul><li>type paloalto for the Passphrase<li>OK button.</ul></ul><li>Verify the SSL Inbound Cert is showing a status of valid.</ol><h3 id="73-create-a-decryption-profile">7.3 Create a <code class="language-plaintext highlighter-rouge">Decryption Profile</code></h3><p>create a decryption profile.</p><ul><li>Decryption profiles allow administrators to perform checks on both decrypted traffic and traffic that would have been excluded from decryption.<li>After a decryption profile is created, it can then be attached to a decryption policy rule that will enforce the profile settings.</ul><ol><li>Objects &gt; Decryption Profile &gt; Add<ul><li><strong>Decryption Profile</strong> window,<li>name: type <code class="language-plaintext highlighter-rouge">SSL Inbound Inspection</code>.<li>Then, click the OK button.</ul><li>Verify the SSL Inbound Inspection Decryption Profile was created.</ol><h3 id="74-create-a-decryption-policy">7.4 Create a <code class="language-plaintext highlighter-rouge">Decryption Policy</code></h3><p>create a decryption policy. Decryption Policies allow administrators to stop threats that would otherwise remain hidden in encrypted traffic and help prevent sensitive content from leaving an organization.</p><ol><li>Policies &gt; <strong>Decryption</strong>: Add.<ul><li>Decryption Policy Rule window,<ul><li>type <code class="language-plaintext highlighter-rouge">Decrypt SSL Inbound Inspection</code> in the Name field.<li>Source tab.<ul><li>Add in the Source Zone section: <code class="language-plaintext highlighter-rouge">inside</code>.</ul><li>Destination tab<ul><li>Add in the Destination Zone section: <code class="language-plaintext highlighter-rouge">dmz</code>.</ul><li>Service/URL Category tab.<ul><li>Add in the Service column: <code class="language-plaintext highlighter-rouge">service-http</code>.<li>Add in the Service column: <code class="language-plaintext highlighter-rouge">service-https</code>.</ul><li>Options tab.<ul><li>select Decrypt for the Action.<li>select <code class="language-plaintext highlighter-rouge">SSL Inbound Inspection</code> in the Type<li>select <code class="language-plaintext highlighter-rouge">SSL Inbound Cert</code> in the Certificate<li>select <code class="language-plaintext highlighter-rouge">SSL Inbound Inspection</code> in the Decryption Profile field.<li>Finally, click the OK button.</ul></ul></ul></ol><h3 id="75-commit-and-test-decryption-policy">7.5 Commit and Test Decryption Policy</h3><p>test the decryption policy you created earlier.</p><ol><li>Click the Commit link<li>Monitor &gt; Logs &gt; Traffic.<ul><li>search box, type ( addr.dst in 192.168.50.10 ) and press Enter.<li>add Columns and select Decrypted.</ul><li>Google Chrome: https://192.168.50.10<li>You will see a “Your connection is not private” message. Click on the ADVANCED link.<li><p>Click on Proceed to 192.168.50.10 (unsafe)</p><li><p>Notice that the Apache HTTP Server Test page is working properly. Click on the X on the tab to close it.</p><li>Monitor &gt; Logs &gt; <strong>Traffic</strong>: refresh icon.<li>Look for traffic associated with the application of ssl and the Decrypted column is set to yes.<ul><li>Open the Detailed Log View of the traffic to analyze the traffic from the Client machine of 192.168.1.20 to the DMZ server of 192.168.50.10.<li>In the <strong>Detailed Log View</strong> window<ul><li>the Destination section: 192.168.50.10 and Port 443 to the dmz zone of the DMZ server.<li>Then, in the Flags section, notice the flag Decrypted is set and click the Close button.</ul></ul></ol><h3 id="76-disable-decryption-policy">7.6 Disable Decryption Policy</h3><p>disable the decryption policy you created earlier. Then, after committing the changes to the Firewall, you will monitor traffic logs to determine if traffic is still being decrypted.</p><ol><li>Policies &gt; Decryption: the <strong>Decrypt SSL Inbound Inspection policy</strong>: Disable button.<li>Click the Commit link<li>Google Chrome: https://192.168.50.10<li><p>the Apache HTTP Server Test page is working properly.</p><li>Monitor &gt; Logs &gt; Traffic. Then, click the refresh icon.<li>Look for traffic associated with the application of ssl and the Decrypted column is set to no.<ul><li>Open the Detailed Log View of the traffic to analyze the traffic from the Client machine of 192.168.1.20 to the DMZ server of 192.168.50.10.<li>Detailed Log View window,<li>Destination section: 192.168.50.10 and Port 443 to the dmz zone of the DMZ server.<li>Flags section, notice the flag for Decrypted is not set.</ul></ol><p>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/lab/'>Lab</a>, <a href='/categories/ndg/'>NDG</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/lab/" class="post-tag no-text-decoration" >Lab</a> <a href="/tags/ndg/" class="post-tag no-text-decoration" >NDG</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Lab - NDG - PAN8 Cybersecurity Essentials - Grace&url=https://ocholuo.github.io//posts/PAN8-Cybersecurity-Essentials/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Lab - NDG - PAN8 Cybersecurity Essentials - Grace&u=https://ocholuo.github.io//posts/PAN8-Cybersecurity-Essentials/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Lab - NDG - PAN8 Cybersecurity Essentials - Grace&url=https://ocholuo.github.io//posts/PAN8-Cybersecurity-Essentials/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/PAN8-Cybersecurity-Gateway/"><div class="card-body"> <span class="timeago small" >Jul 16, 2020<i class="unloaded">2020-07-16T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Lab - NDG - PAN8 Cybersecurity-Gateway</h3><div class="text-muted small"><p> 2020-07-16-PAN8-Cybersecurity-Gateway [toc] From the NDG: PAN8 Cybersecurity Essentials Lab 1: Configuring TCP/IP and a Virtual Router 1.0 Load Lab Configuration load the Firewall configura...</p></div></div></a></div><div class="card"> <a href="/posts/AWS-Create-simple-microservice-using-Lambda-and-API-Gateway/"><div class="card-body"> <span class="timeago small" >Jul 16, 2020<i class="unloaded">2020-07-16T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS Lab - Create a simple microservice using Lambda and API Gateway</h3><div class="text-muted small"><p> Create a simple microservice using Lambda and API Gateway Create a simple microservice using Lambda and API Gateway overall create an API using Amazon API Gateway o...</p></div></div></a></div><div class="card"> <a href="/posts/AWS-lab/"><div class="card-body"> <span class="timeago small" >Jul 16, 2020<i class="unloaded">2020-07-16T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS Lab</h3><div class="text-muted small"><p> AWS Lab AWS Lab 1. beginning 启动实例 2 连接实例 remote desktop 1.3 终止您的实例 2. begin 2.1 Active directory ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/servicenow/" class="btn btn-outline-primary" prompt="Older"><p>servicenow</p></a> <a href="/posts/PAN8-Cybersecurity-Gateway/" class="btn btn-outline-primary" prompt="Newer"><p>Lab - NDG - PAN8 Cybersecurity-Gateway</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
