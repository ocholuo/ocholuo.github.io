<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="JPMorganChase SDE Virtual Experience" /><meta property="og:locale" content="en" /><meta name="description" content="Learning Path" /><meta property="og:description" content="Learning Path" /><link rel="canonical" href="https://ocholuo.github.io//posts/JPMorganChase-SDE-Virtual-Experience/" /><meta property="og:url" content="https://ocholuo.github.io//posts/JPMorganChase-SDE-Virtual-Experience/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-09-20T11:11:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="JPMorganChase SDE Virtual Experience" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-01-02T18:16:02-05:00","datePublished":"2020-09-20T11:11:11-04:00","description":"Learning Path","headline":"JPMorganChase SDE Virtual Experience","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/JPMorganChase-SDE-Virtual-Experience/"},"url":"https://ocholuo.github.io//posts/JPMorganChase-SDE-Virtual-Experience/"}</script><title>JPMorganChase SDE Virtual Experience | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>JPMorganChase SDE Virtual Experience</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>JPMorganChase SDE Virtual Experience</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Sep 20, 2020, 11:11 AM -0400" >Sep 20, 2020<i class="unloaded">2020-09-20T11:11:11-04:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Jan 2, 2023, 3:16 PM -0800" >Jan 2<i class="unloaded">2023-01-02T18:16:02-05:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3373 words">18 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><p>[toc]</p><hr /><h1 id="jpmorganchase-sde-virtual-experience">JPMorganChase SDE Virtual Experience</h1><p>Interface with a stock price data feed and set up system for analysis of the data</p><ul><li>Financial Data Python Git Basic Programming<li>monitor two historically correlated stocks and be able to visualize when the correlation between the two weakens<li>displays a graph that automatically updates as it gets data from the server application<li>generate a live graph that displays the data feed in a clear and visually appealing way for traders to monitor this trading strategy.<li>monitor and determine when a trading opportunity may arise as a result of the temporary weakening of a correlation between two stock prices. Given this graph, the trader should be able to quickly and easily notice when the ratio moves too far from the average historical correlation.</ul><hr /><h2 id="task-1-interface-with-a-stock-price-data-feed">task 1 Interface with a stock price data feed</h2><ol><li>Set up your system by downloading the necessary repository, files, tools and dependencies<li>Fix the <code class="language-plaintext highlighter-rouge">broken client datafeed script</code> in the repository by making the required adjustments to it.<li>Generate a patch file of the changes you made<li>Bonus task: Add unit tests in the test script in the repository.</ol><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
</pre><td class="rouge-code"><pre><span class="c1"># Local Setup (Mac)
</span><span class="n">brew</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">brew</span> <span class="n">upgrade</span> <span class="o">&amp;&amp;</span> <span class="n">brew</span> <span class="n">cleanup</span>
<span class="n">brew</span> <span class="n">doctor</span>
<span class="n">brew</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">brew</span> <span class="n">upgrade</span> <span class="o">&amp;&amp;</span> <span class="n">brew</span> <span class="n">cleanup</span>
<span class="n">git</span> <span class="o">--</span><span class="n">version</span>
<span class="n">python</span> <span class="o">--</span><span class="n">version</span>

<span class="c1"># need a copy of the application code
</span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">insidesherpa</span><span class="o">/</span><span class="n">JPMC</span><span class="o">-</span><span class="n">tech</span><span class="o">-</span><span class="n">task</span><span class="o">-</span><span class="mf">1.</span><span class="n">git</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">insidesherpa</span><span class="o">/</span><span class="n">JPMC</span><span class="o">-</span><span class="n">tech</span><span class="o">-</span><span class="n">task</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">py3</span><span class="p">.</span><span class="n">git</span>


<span class="c1"># start the server and client scripts in two separate terminals.
</span><span class="n">cd</span> <span class="n">JPMC</span><span class="o">-</span><span class="n">tech</span><span class="o">-</span><span class="n">task</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span>
<span class="n">python</span> <span class="n">server</span><span class="p">.</span><span class="n">py</span>
<span class="n">python</span> <span class="n">client</span><span class="p">.</span><span class="n">py</span>


<span class="c1">#  Fork the REPL
</span><span class="o">-</span> <span class="n">remove</span><span class="o">/</span><span class="n">delete</span> <span class="n">client</span><span class="p">.</span><span class="n">py</span> <span class="n">inside</span> <span class="n">the</span> <span class="n">jpm_module_1</span> <span class="n">folder</span>
<span class="o">-</span> <span class="n">rename</span> <span class="n">new_client</span><span class="p">.</span><span class="n">py</span> <span class="n">to</span> <span class="n">just</span> <span class="n">client</span><span class="p">.</span><span class="n">py</span>
<span class="o">-</span> <span class="ow">and</span> <span class="n">move</span> <span class="n">it</span> <span class="n">inside</span> <span class="n">jpm_module_1</span>


<span class="c1"># in terminal
</span><span class="kn">import</span> <span class="n">os</span>
<span class="n">os</span><span class="p">.</span><span class="nf">system</span><span class="p">(</span><span class="s">'bash'</span><span class="p">)</span>
<span class="n">cd</span> <span class="n">jpm_module_1</span>
<span class="n">git</span> <span class="n">init</span>
<span class="c1"># Reinitialized existing Git repository in /home/runner/SparklingAnguishedPaintprogram/jpm_module_1/.git/
</span><span class="n">git</span> <span class="n">add</span> <span class="o">-</span><span class="n">A</span>
<span class="n">git</span> <span class="n">config</span> <span class="n">user</span><span class="p">.</span><span class="n">email</span> <span class="s">"Lgraceye@hotmail.com"</span>
<span class="n">git</span> <span class="n">config</span> <span class="n">user</span><span class="p">.</span><span class="n">name</span> <span class="s">"Grace JyL"</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s">'INIT'</span>
<span class="c1"># [master (root-commit) 8087a49] INIT
#  4 files changed, 2229 insertions(  )
#  create mode 100644 client.py
#  create mode 100644 client_test.py
#  create mode 100644 server.py
#  create mode 100644 test.csv
</span><span class="nb">exit</span>

<span class="kn">import</span> <span class="n">os</span>
<span class="n">os</span><span class="p">.</span><span class="nf">system</span><span class="p">(</span><span class="s">'bash'</span><span class="p">)</span>

<span class="c1"># only use this command if your terminal is not yet in the directory itself
</span><span class="n">runner</span><span class="o">@</span><span class="mi">0</span><span class="n">f6e1319a2e4</span><span class="p">:</span><span class="o">~/</span><span class="n">SparklingAnguishedPaintprogram</span><span class="o">/</span><span class="n">jpm_module_1</span><span class="err">$</span>


<span class="c1"># - server.py:
# aka server3.py in the python3 REPL. This is the file that will simulate a server application waiting for requests so that it can send back data about stocks
</span>
<span class="c1"># - client.py:
# aka client3.py in the python3 REPL. This is the application that will contact server.py to process info about the stocks data and display useful output. This is the only file you are required to touch for this task
</span>
<span class="c1"># - client_test.py:
# a unit test script that is independent of server.py and client.py. It just allows developers like you to ensure the methods you've defined / modified in the client file are working as expected. This file is part of the bonus task should you wish to do it
</span>
<span class="c1"># - new_client.py:
# aka new_client3.py in the Python3 REPL (see BASIC REPL EDITING section to remember what this file is for)
</span>
<span class="c1"># - test.csv:
# This is where the stocks data that the server returns to your client comes from. YOU DO NOT NEED TO TOUCH THIS.
</span>
<span class="c1"># - main.py:
# is the script that runs in REPL that runs both server.py and client.py. the output you see in the blue screen comes from client.py. YOU DO NOT NEED TO MAKE ANY CHANGES TO THIS SCRIPT. IF YOU WISH TO DO THE BONUS TASK, THAT’S THE ONLY TIME YOU MIGHT NEED TO UNCOMMENT STUFF HERE (SEE COMMENTED INSTRUCTIONS IN main.py)
</span>

<span class="c1"># - client.py:
</span><span class="kn">import</span> <span class="n">urllib2</span>
<span class="kn">import</span> <span class="n">time</span>
<span class="kn">import</span> <span class="n">json</span>
<span class="kn">import</span> <span class="n">random</span>

<span class="n">QUERY</span> <span class="o">=</span> <span class="s">"http://localhost:8080/query?id={}"</span>

<span class="n">N</span><span class="o">=</span><span class="mi">500</span>

<span class="k">def</span> <span class="nf">getDataPoint</span><span class="p">(</span><span class="n">quote</span><span class="p">):</span>
  <span class="n">stock</span> <span class="o">=</span> <span class="n">quote</span><span class="p">[</span><span class="s">'stock'</span><span class="p">]</span>
  <span class="n">bid_price</span> <span class="o">=</span> <span class="nf">float</span><span class="p">(</span><span class="n">quote</span><span class="p">[</span><span class="s">'top_bid'</span><span class="p">][</span><span class="s">'price'</span><span class="p">])</span>
  <span class="n">ask_price</span> <span class="o">=</span> <span class="nf">float</span><span class="p">(</span><span class="n">quote</span><span class="p">[</span><span class="s">'top_ask'</span><span class="p">][</span><span class="s">'price'</span><span class="p">])</span>
  <span class="n">price</span> <span class="o">=</span> <span class="p">(</span><span class="n">bid_price</span> <span class="o">+</span> <span class="n">ask_price</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
  <span class="k">return</span> <span class="n">stock</span><span class="p">,</span> <span class="n">bid_price</span><span class="p">,</span> <span class="n">ask_price</span><span class="p">,</span> <span class="n">price</span>

<span class="k">def</span> <span class="nf">getRadio</span><span class="p">(</span><span class="n">price_a</span><span class="p">,</span> <span class="n">price_b</span><span class="p">):</span>
  <span class="nf">if</span><span class="p">(</span><span class="n">price_b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
    <span class="k">return</span>
  <span class="k">return</span> <span class="n">price_a</span><span class="o">/</span><span class="n">price_b</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s">"__main__"</span><span class="p">:</span>
  <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">xrange</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">quotes</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">loads</span><span class="p">(</span><span class="n">urllib2</span><span class="p">.</span><span class="nf">urlopen</span><span class="p">(</span> <span class="n">QUERY</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="nf">random</span><span class="p">())</span> <span class="p">).</span><span class="nf">read</span><span class="p">()</span> <span class="p">)</span>
    <span class="n">price</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">quotes</span><span class="p">:</span>
      <span class="n">stock</span><span class="p">,</span> <span class="n">bid_price</span><span class="p">,</span> <span class="n">ask_price</span><span class="p">,</span> <span class="n">price</span> <span class="o">=</span> <span class="nf">getDataPoint</span><span class="p">(</span><span class="n">quote</span><span class="p">)</span>
      <span class="n">prices</span><span class="p">[</span><span class="n">stock</span><span class="p">]</span> <span class="o">=</span> <span class="n">price</span>
      <span class="k">print</span> <span class="s">"Quoted %s at (bid:%s, ask:%s, price:%s)"</span> <span class="o">%</span> <span class="p">(</span><span class="n">stock</span><span class="p">,</span> <span class="n">bid_price</span><span class="p">,</span> <span class="n">ask_price</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span>
    <span class="c1"># print "Ratio %s" % getRadio(price, price)
</span>    <span class="k">print</span> <span class="s">"Ratio %s"</span> <span class="o">%</span> <span class="nf">getRatio</span><span class="p">(</span><span class="n">prices</span><span class="p">[</span><span class="s">'ABC'</span><span class="p">],</span> <span class="n">prices</span><span class="p">[</span><span class="s">'DEF'</span><span class="p">])</span>



<span class="c1"># Creating your patch file
</span><span class="kn">import</span> <span class="n">os</span>
<span class="n">os</span><span class="p">.</span><span class="nf">system</span><span class="p">(</span><span class="s">'bash'</span><span class="p">)</span>
<span class="n">cd</span> <span class="n">jpm_module_1</span>
<span class="n">git</span> <span class="n">add</span> <span class="o">-</span><span class="n">A</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s">'Create Patch File GraceL'</span>
<span class="n">git</span> <span class="nb">format</span><span class="o">-</span><span class="n">patch</span> <span class="o">-</span><span class="mi">1</span> <span class="n">HEAD</span>
<span class="n">mv</span> <span class="mi">0001</span><span class="o">-</span><span class="n">Create</span><span class="o">-</span><span class="n">Patch</span><span class="o">-</span><span class="n">File</span><span class="o">-</span><span class="n">GraceL</span><span class="p">.</span><span class="n">patch</span> <span class="p">..</span><span class="o">/</span><span class="p">.</span>
<span class="nb">exit</span>

<span class="c1"># download the patch file
</span></pre></table></code></div></div><p>bonus task</p><ul><li>the methods we want to test are <code class="language-plaintext highlighter-rouge">getDataPoint</code> and <code class="language-plaintext highlighter-rouge">getRatio</code>.<li>We want to cover these with tests so that we ensure these methods are returning the correct output as individual methods thereby ensuring us that when we use them together in the main client application, things will work fine.<li>In unit testing, we always follow the pattern, <code class="language-plaintext highlighter-rouge">Build-Act-Assert</code>:<ul><li><code class="language-plaintext highlighter-rouge">Build</code>:<ul><li>build a simulated test scenario<li>e.g.<li>instantiating the dummy data we will pass in the methods we’ll test,<li>importing the class whose methods we want to test, etc.</ul><li><code class="language-plaintext highlighter-rouge">Act</code>:<ul><li>make some operations and call the method want to test for</ul><li><code class="language-plaintext highlighter-rouge">Assert</code>:<ul><li>check if the output of the method we’re testing matches the expectation we have<li>(e.g. dummy / static data of the outcome)</ul></ul></ul><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">unittest</span>
<span class="kn">from</span> <span class="n">client</span> <span class="kn">import</span> <span class="n">getDataPoint</span> <span class="n">getRatio</span>

<span class="k">class</span> <span class="nc">ClientTest</span><span class="p">(</span><span class="n">unittest</span><span class="p">.</span><span class="n">TestCase</span><span class="p">):</span>

  <span class="k">def</span> <span class="nf">test_getDataPoint_calculatePrice</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
    <span class="n">quotes</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">{</span>
          <span class="s">'top_ask'</span><span class="p">:</span> <span class="p">{</span><span class="s">'price'</span><span class="p">:</span> <span class="mf">121.2</span><span class="p">,</span> <span class="s">'size'</span><span class="p">:</span> <span class="mi">36</span><span class="p">},</span> <span class="s">'timestamp'</span><span class="p">:</span> <span class="s">'2019-02-11 22:06:30.572453'</span><span class="p">,</span>
          <span class="s">'top_bid'</span><span class="p">:</span> <span class="p">{</span><span class="s">'price'</span><span class="p">:</span> <span class="mf">120.48</span><span class="p">,</span> <span class="s">'size'</span><span class="p">:</span> <span class="mi">109</span><span class="p">},</span> <span class="s">'id'</span><span class="p">:</span> <span class="s">'0.109974697771'</span><span class="p">,</span> <span class="s">'stock'</span><span class="p">:</span> <span class="s">'ABC'</span><span class="p">},</span>
      <span class="p">{</span>
          <span class="s">'top_ask'</span><span class="p">:</span> <span class="p">{</span><span class="s">'price'</span><span class="p">:</span> <span class="mf">121.68</span><span class="p">,</span> <span class="s">'size'</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span> <span class="s">'timestamp'</span><span class="p">:</span> <span class="s">'2019-02-11 22:06:30.572453'</span><span class="p">,</span>
          <span class="s">'top_bid'</span><span class="p">:</span> <span class="p">{</span><span class="s">'price'</span><span class="p">:</span> <span class="mf">117.87</span><span class="p">,</span> <span class="s">'size'</span><span class="p">:</span> <span class="mi">81</span><span class="p">},</span> <span class="s">'id'</span><span class="p">:</span> <span class="s">'0.109974697771'</span><span class="p">,</span> <span class="s">'stock'</span><span class="p">:</span> <span class="s">'DEF'</span><span class="p">}</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">quotes</span><span class="p">:</span>
      <span class="n">self</span><span class="p">.</span><span class="n">assertEqual</span><span class="p">[</span><span class="nf">getDataPoint</span><span class="p">(</span><span class="n">quote</span><span class="p">),</span> <span class="p">(</span><span class="n">quote</span><span class="p">[</span><span class="s">'stock'</span><span class="p">],</span> <span class="n">quote</span><span class="p">[</span><span class="s">'top_bid'</span><span class="p">][</span><span class="s">'price'</span><span class="p">],</span> <span class="n">quote</span><span class="p">[</span><span class="s">'top_ask'</span><span class="p">][</span><span class="s">'price'</span><span class="p">],</span> <span class="p">(</span><span class="n">quote</span><span class="p">[</span><span class="s">'top_bid'</span><span class="p">][</span><span class="s">'price'</span><span class="p">]</span> <span class="o">+</span> <span class="n">quote</span><span class="p">[</span><span class="s">'top_ask'</span><span class="p">][</span><span class="s">'price'</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span> <span class="p">)</span> <span class="p">]</span>


  <span class="k">def</span> <span class="nf">test_getDataPoint_calculatePriceBidGreaterThanAsk</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
    <span class="n">quotes</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">{</span>
          <span class="s">'top_ask'</span><span class="p">:</span> <span class="p">{</span><span class="s">'price'</span><span class="p">:</span> <span class="mf">119.2</span><span class="p">,</span> <span class="s">'size'</span><span class="p">:</span> <span class="mi">36</span><span class="p">},</span> <span class="s">'timestamp'</span><span class="p">:</span> <span class="s">'2019-02-11 22:06:30.572453'</span><span class="p">,</span>
          <span class="s">'top_bid'</span><span class="p">:</span> <span class="p">{</span><span class="s">'price'</span><span class="p">:</span> <span class="mf">120.48</span><span class="p">,</span> <span class="s">'size'</span><span class="p">:</span> <span class="mi">109</span><span class="p">},</span> <span class="s">'id'</span><span class="p">:</span> <span class="s">'0.109974697771'</span><span class="p">,</span> <span class="s">'stock'</span><span class="p">:</span> <span class="s">'ABC'</span><span class="p">},</span>
      <span class="p">{</span>
          <span class="s">'top_ask'</span><span class="p">:</span> <span class="p">{</span><span class="s">'price'</span><span class="p">:</span> <span class="mf">121.68</span><span class="p">,</span> <span class="s">'size'</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span> <span class="s">'timestamp'</span><span class="p">:</span> <span class="s">'2019-02-11 22:06:30.572453'</span><span class="p">,</span>
          <span class="s">'top_bid'</span><span class="p">:</span> <span class="p">{</span><span class="s">'price'</span><span class="p">:</span> <span class="mf">117.87</span><span class="p">,</span> <span class="s">'size'</span><span class="p">:</span> <span class="mi">81</span><span class="p">},</span> <span class="s">'id'</span><span class="p">:</span> <span class="s">'0.109974697771'</span><span class="p">,</span> <span class="s">'stock'</span><span class="p">:</span> <span class="s">'DEF'</span><span class="p">}</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">quotes</span><span class="p">:</span>
      <span class="n">self</span><span class="p">.</span><span class="nf">assertEqual</span><span class="p">(</span><span class="nf">getDataPoint</span><span class="p">(</span><span class="n">quote</span><span class="p">),</span> <span class="p">(</span><span class="n">quote</span><span class="p">[</span><span class="s">'stock'</span><span class="p">],</span> <span class="n">quote</span><span class="p">[</span><span class="s">'top_bid'</span><span class="p">][</span><span class="s">'price'</span><span class="p">],</span> <span class="n">quote</span><span class="p">[</span><span class="s">'top_ask'</span><span class="p">][</span><span class="s">'price'</span><span class="p">],</span> <span class="p">(</span><span class="n">quote</span><span class="p">[</span><span class="s">'top_bid'</span><span class="p">][</span><span class="s">'price'</span><span class="p">]</span> <span class="o">+</span> <span class="n">quote</span><span class="p">[</span><span class="s">'top_ask'</span><span class="p">][</span><span class="s">'price'</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span> <span class="p">))</span>


  <span class="s">""" ------------ Add more unit tests ------------ """</span>

    <span class="k">def</span> <span class="nf">test_getRatio_priceBZero</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">price_a</span> <span class="o">=</span> <span class="mf">119.2</span>
        <span class="n">price_b</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">assertIsNone</span><span class="p">(</span><span class="nf">getRatio</span><span class="p">(</span><span class="n">price_a</span><span class="p">,</span> <span class="n">price_b</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_getRatio_priceAZero</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">price_a</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">price_b</span> <span class="o">=</span> <span class="mf">121.68</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">assertEqual</span><span class="p">(</span><span class="nf">getRatio</span><span class="p">(</span><span class="n">price_a</span><span class="p">,</span> <span class="n">price_b</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_getRatio_greaterThan1</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">price_a</span> <span class="o">=</span> <span class="mf">346.48</span>
        <span class="n">price_b</span> <span class="o">=</span> <span class="mf">166.39</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">assertGreater</span><span class="p">(</span><span class="nf">getRatio</span><span class="p">(</span><span class="n">price_a</span><span class="p">,</span> <span class="n">price_b</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_getRatio_LessThan1</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">price_a</span> <span class="o">=</span> <span class="mf">166.39</span>
        <span class="n">price_b</span> <span class="o">=</span> <span class="mf">356.48</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">assertLess</span><span class="p">(</span><span class="nf">getRatio</span><span class="p">(</span><span class="n">price_a</span><span class="p">,</span> <span class="n">price_b</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_getRatio_exactlyOne</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">price_a</span> <span class="o">=</span> <span class="mf">356.48</span>
        <span class="n">price_b</span> <span class="o">=</span> <span class="mf">356.48</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">assertEqual</span><span class="p">(</span><span class="nf">getRatio</span><span class="p">(</span><span class="n">price_a</span><span class="p">,</span> <span class="n">price_b</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">unittest</span><span class="p">.</span><span class="nf">main</span><span class="p">()</span>
</pre></table></code></div></div><hr /><h2 id="task-2-use-jpmorgan-chase-frameworks-and-tools">task 2 Use JPMorgan Chase frameworks and tools</h2><ol><li>Set up your system by downloading the necessary files, tools and dependencies.<li>Fix the broken typescript files in repository to make the web application output correctly<li>Generate a patch file of the changes you made.</ol><div class="language-py highlighter-rouge"><div class="code-header" text-data="py"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c1"># code
</span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">insidesherpa</span><span class="o">/</span><span class="n">JPMC</span><span class="o">-</span><span class="n">tech</span><span class="o">-</span><span class="n">task</span><span class="o">-</span><span class="mf">2.</span><span class="n">git</span>
<span class="n">python</span> <span class="n">datafeed</span><span class="o">/</span><span class="n">server</span><span class="p">.</span><span class="n">py</span>

<span class="n">python</span> <span class="o">--</span><span class="n">version</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">o</span><span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="p">.</span><span class="n">githubusercontent</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">nvm</span><span class="o">-</span><span class="n">sh</span><span class="o">/</span><span class="n">nvm</span><span class="o">/</span><span class="n">v0</span><span class="p">.</span><span class="mf">35.3</span><span class="o">/</span><span class="n">install</span><span class="p">.</span><span class="n">sh</span> <span class="o">|</span> <span class="n">bash</span>
<span class="n">brew</span> <span class="n">update</span>
<span class="n">nvm</span> <span class="n">install</span> <span class="n">v11</span><span class="p">.</span><span class="mf">0.0</span>
<span class="n">nvm</span> <span class="n">use</span> <span class="n">v11</span><span class="p">.</span><span class="mf">0.0</span>

<span class="c1"># get the website up
</span><span class="n">cd</span> <span class="n">JC</span><span class="o">-</span><span class="n">task</span><span class="o">-</span><span class="mi">2</span>
<span class="n">npm</span> <span class="n">install</span>
<span class="n">npm</span> <span class="n">start</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://i.imgur.com/iMuT7KS.png" alt="Screen Shot 2020-09-20 at 19.47.01" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/eSSb858.png" alt="Screen Shot 2020-09-20 at 20.35.06" /></p><p><code class="language-plaintext highlighter-rouge">App.tsx</code></p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">React</span><span class="o">,</span> <span class="o">{</span> <span class="nc">Component</span> <span class="o">}</span> <span class="n">from</span> <span class="err">'</span><span class="n">react</span><span class="err">'</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">DataStreamer</span><span class="o">,</span> <span class="o">{</span> <span class="nc">ServerRespond</span> <span class="o">}</span> <span class="n">from</span> <span class="err">'</span><span class="o">./</span><span class="nc">DataStreamer</span><span class="err">'</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">Graph</span> <span class="n">from</span> <span class="err">'</span><span class="o">./</span><span class="nc">Graph</span><span class="err">'</span><span class="o">;</span>
<span class="kn">import</span> <span class="err">'</span><span class="nn">.</span><span class="o">/</span><span class="nc">App</span><span class="o">.</span><span class="na">css</span><span class="err">'</span><span class="o">;</span>

<span class="c1">// State declaration for &lt;App /&gt;</span>
<span class="kd">interface</span> <span class="nc">IState</span> <span class="o">{</span>
  <span class="nl">data:</span> <span class="nc">ServerRespond</span><span class="o">[],</span>
  <span class="nl">showGraph:</span> <span class="kt">boolean</span><span class="o">,</span>
<span class="o">}</span>


<span class="c1">// The parent element of the react app.</span>
<span class="c1">// It renders title, button and Graph react element.</span>
<span class="kd">class</span> <span class="nc">App</span> <span class="kd">extends</span> <span class="nc">Component</span><span class="o">&lt;{},</span> <span class="nc">IState</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="n">constructor</span><span class="o">(</span><span class="nl">props:</span> <span class="o">{})</span> <span class="o">{</span>

    <span class="kd">super</span><span class="o">(</span><span class="n">props</span><span class="o">);</span>

    <span class="k">this</span><span class="o">.</span><span class="na">state</span> <span class="o">=</span> <span class="o">{</span>
      <span class="c1">// data saves the server responds.</span>
      <span class="c1">// We use this state to parse data down to the child element (Graph) as element property</span>
      <span class="nl">data:</span> <span class="o">[],</span>
      <span class="nl">showGraph:</span> <span class="kc">false</span><span class="o">,</span>
    <span class="o">};</span>
  <span class="o">}</span>


  <span class="c1">// Render Graph react component with state.data parse as property data</span>
  <span class="n">renderGraph</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">//  only render the graph when the state’s `showGraph` property of the App’s state is `true`.</span>
    <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">state</span><span class="o">.</span><span class="na">showGraph</span><span class="o">){</span>
      <span class="k">return</span> <span class="o">(&lt;</span><span class="nc">Graph</span> <span class="n">data</span><span class="o">={</span><span class="k">this</span><span class="o">.</span><span class="na">state</span><span class="o">.</span><span class="na">data</span><span class="o">}/&gt;)</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="c1">// Get new data from server and update the state with the new data</span>
  <span class="n">getDataFromServer</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">let</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kd">const</span> <span class="n">interval</span> <span class="o">=</span> <span class="n">setInterval</span><span class="o">(()</span> <span class="o">=&gt;</span> <span class="o">{</span>
      <span class="c1">// DataStreamer.getData(... =&gt; ...) is an asynchronous process</span>
      <span class="c1">// gets the data from the server</span>
      <span class="c1">// when that process is complete, it performs what comes after the =&gt; as a callback function.</span>
      <span class="nc">DataStreamer</span><span class="o">.</span><span class="na">getData</span><span class="o">((</span><span class="nl">serverResponds:</span> <span class="nc">ServerRespond</span><span class="o">[])</span> <span class="o">=&gt;</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">setState</span><span class="o">({</span>
          <span class="nl">data:</span> <span class="n">serverResponds</span><span class="o">,</span>
          <span class="c1">// set showGraph to true as soon as the data from the server comes back to the requestor.</span>
          <span class="nl">showGraph:</span> <span class="kc">true</span><span class="o">,</span>
        <span class="o">});</span>
      <span class="o">});</span>
      <span class="n">x</span><span class="o">++</span>
      <span class="k">if</span><span class="o">(</span><span class="n">x</span><span class="o">&gt;</span><span class="mi">1000</span><span class="o">){</span>
        <span class="n">clearInterval</span><span class="o">(</span><span class="n">interval</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">},</span><span class="mi">100</span><span class="o">);</span>
      <span class="c1">// Update the state by creating a new array of data that consists of</span>
      <span class="c1">// Previous data in the state and the new data from server</span>
  <span class="o">}</span>


  <span class="cm">/**
   * Render the App react component
   */</span>
  <span class="n">render</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">(</span>
      <span class="o">&lt;</span><span class="n">div</span> <span class="n">className</span><span class="o">=</span><span class="s">"App"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">header</span> <span class="n">className</span><span class="o">=</span><span class="s">"App-header"</span><span class="o">&gt;</span>
          <span class="nc">Bank</span> <span class="o">&amp;</span> <span class="nc">Merge</span> <span class="nc">Co</span> <span class="nc">Task</span> <span class="mi">2</span>
        <span class="o">&lt;/</span><span class="n">header</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">className</span><span class="o">=</span><span class="s">"App-content"</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="n">button</span> <span class="n">className</span><span class="o">=</span><span class="s">"btn btn-primary Stream-button"</span>
            <span class="c1">// when button is click, our react app tries to request</span>
            <span class="c1">// new data from the server.</span>
            <span class="c1">// As part of your task, update the getDataFromServer() function</span>
            <span class="c1">// to keep requesting the data every 100ms until the app is closed</span>
            <span class="c1">// or the server does not return anymore data.</span>
            <span class="n">onClick</span><span class="o">={()</span> <span class="o">=&gt;</span> <span class="o">{</span><span class="k">this</span><span class="o">.</span><span class="na">getDataFromServer</span><span class="o">()}}&gt;</span>
            <span class="nc">Start</span> <span class="nc">Streaming</span> <span class="nc">Data</span>
          <span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="n">div</span> <span class="n">className</span><span class="o">=</span><span class="s">"Graph"</span><span class="o">&gt;</span>
            <span class="o">{</span><span class="k">this</span><span class="o">.</span><span class="na">renderGraph</span><span class="o">()}</span>
          <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="n">export</span> <span class="k">default</span> <span class="nc">App</span><span class="o">;</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">Grapth.tsx</code></p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">React</span><span class="o">,</span> <span class="o">{</span> <span class="nc">Component</span> <span class="o">}</span> <span class="n">from</span> <span class="err">'</span><span class="n">react</span><span class="err">'</span><span class="o">;</span>
<span class="kn">import</span> <span class="err">{</span> <span class="nn">Table</span> <span class="o">}</span> <span class="n">from</span> <span class="err">'</span><span class="nd">@jpmorganchase</span><span class="o">/</span><span class="n">perspective</span><span class="err">'</span><span class="o">;</span>
<span class="kn">import</span> <span class="err">{</span> <span class="nn">ServerRespond</span> <span class="o">}</span> <span class="n">from</span> <span class="err">'</span><span class="o">./</span><span class="nc">DataStreamer</span><span class="err">'</span><span class="o">;</span>
<span class="kn">import</span> <span class="err">'</span><span class="nn">.</span><span class="o">/</span><span class="nc">Graph</span><span class="o">.</span><span class="na">css</span><span class="err">'</span><span class="o">;</span>

<span class="c1">// Props declaration for &lt;Graph /&gt;</span>
<span class="kd">interface</span> <span class="nc">IProps</span> <span class="o">{</span>
  <span class="nl">data:</span> <span class="nc">ServerRespond</span><span class="o">[],</span>
<span class="o">}</span>

<span class="c1">// Perspective library adds load to HTMLElement prototype.</span>
<span class="c1">// This interface acts as a wrapper for Typescript compiler.</span>
<span class="kd">interface</span> <span class="nc">PerspectiveViewerElement</span> <span class="kd">extends</span> <span class="nc">HTMLElement</span> <span class="o">{</span>
  <span class="c1">//  enable the `PerspectiveViewerElement` to behave like an HTMLElement.</span>
  <span class="nl">load:</span> <span class="o">(</span><span class="nl">table:</span> <span class="nc">Table</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="kt">void</span><span class="o">,</span>
<span class="o">}</span>

<span class="c1">// React component that renders Perspective based on data parsed from its parent through data property.</span>
<span class="kd">class</span> <span class="nc">Graph</span> <span class="kd">extends</span> <span class="nc">Component</span><span class="o">&lt;</span><span class="nc">IProps</span><span class="o">,</span> <span class="o">{}&gt;</span> <span class="o">{</span>

  <span class="c1">// Perspective table</span>
  <span class="nl">table:</span> <span class="nc">Table</span> <span class="o">|</span> <span class="n">undefined</span><span class="o">;</span>

  <span class="n">render</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">React</span><span class="o">.</span><span class="na">createElement</span><span class="o">(</span><span class="err">'</span><span class="n">perspective</span><span class="o">-</span><span class="n">viewer</span><span class="err">'</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// the componentDidMount() method</span>
  <span class="c1">// runs after the component output has been rendered to the DOM.</span>
  <span class="n">componentDidMount</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// Get element to attach the table from the DOM.</span>
    <span class="c1">// const elem: PerspectiveViewerElement = document.getElementsByTagName('perspective-viewer')[0] as unknown as PerspectiveViewerElement;</span>
    <span class="kd">const</span> <span class="n">elem</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="na">getElementsByTagName</span><span class="o">(</span><span class="err">'</span><span class="n">perspective</span><span class="o">-</span><span class="n">viewer</span><span class="err">'</span><span class="o">)[</span><span class="mi">0</span><span class="o">]</span> <span class="n">as</span> <span class="n">unknown</span> <span class="n">as</span> <span class="nc">PerspectiveViewerElement</span><span class="o">;</span>

    <span class="kd">const</span> <span class="n">schema</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nl">stock:</span> <span class="err">'</span><span class="n">string</span><span class="err">'</span><span class="o">,</span>
      <span class="nl">top_ask_price:</span> <span class="err">'</span><span class="kt">float</span><span class="err">'</span><span class="o">,</span>
      <span class="nl">top_bid_price:</span> <span class="err">'</span><span class="kt">float</span><span class="err">'</span><span class="o">,</span>
      <span class="nl">timestamp:</span> <span class="err">'</span><span class="n">date</span><span class="err">'</span><span class="o">,</span>
    <span class="o">};</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">window</span><span class="o">.</span><span class="na">perspective</span> <span class="o">&amp;&amp;</span> <span class="n">window</span><span class="o">.</span><span class="na">perspective</span><span class="o">.</span><span class="na">worker</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">table</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="na">perspective</span><span class="o">.</span><span class="na">worker</span><span class="o">().</span><span class="na">table</span><span class="o">(</span><span class="n">schema</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">table</span><span class="o">)</span> <span class="o">{</span>

      <span class="c1">// Load the `table` in the `&lt;perspective-viewer&gt;` DOM reference.</span>

      <span class="c1">// ‘view’: the kind of graph to visualize the data</span>
      <span class="c1">// wanted a continuous line graph to be the final outcome, the closest one would be y_line</span>
      <span class="n">elem</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="err">'</span><span class="n">view</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="n">y_line</span><span class="err">'</span><span class="o">);</span>

      <span class="c1">// ‘column-pivots’: to distinguish stock ABC with DEF.</span>
      <span class="c1">// use ‘[“stock”]’ as its corresponding value here. By the way, we can use stock here because it’s also defined in the schema object. This accessibility goes for the rest of the other attributes we’ll discuss.</span>
      <span class="n">elem</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="err">'</span><span class="n">column</span><span class="o">-</span><span class="n">pivots</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="o">[</span><span class="s">"stock"</span><span class="o">]</span><span class="err">'</span><span class="o">);</span>

      <span class="c1">// ‘row-pivots’: x-axis</span>
      <span class="c1">// to map each datapoint based on the timestamp it has. Without this, the x-axis is blank.</span>
      <span class="n">elem</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="err">'</span><span class="n">row</span><span class="o">-</span><span class="n">pivots</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="o">[</span><span class="s">"timestamp"</span><span class="o">]</span><span class="err">'</span><span class="o">);</span>

      <span class="c1">// ‘columns’: particular part of a stock’s data along the y-axis.</span>
      <span class="c1">// For this instance we only care about top_ask_price</span>
      <span class="n">elem</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="err">'</span><span class="n">columns</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="o">[</span><span class="s">"top_ask_price"</span><span class="o">]</span><span class="err">'</span><span class="o">);</span>

      <span class="c1">// ‘aggregates’: handle the duplicated data and consolidate as just one data point.</span>
      <span class="c1">// In our case we only want to consider a data point unique if it has a unique stock name and timestamp.</span>
      <span class="c1">// Otherwise, if there are duplicates like what we had before, we will average out the top_bid_prices and the top_ask_prices of these ‘similar’ datapoints before treating them as one.</span>
      <span class="n">elem</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="err">'</span><span class="n">aggregates</span><span class="err">'</span><span class="o">,</span> <span class="err">`</span><span class="o">{</span> <span class="s">"stock"</span><span class="o">:</span> <span class="s">"distinct count"</span><span class="o">,</span> <span class="s">"top_ask_price"</span><span class="o">:</span> <span class="s">"avg"</span><span class="o">,</span> <span class="s">"top_bid_price"</span><span class="o">:</span> <span class="s">"avg"</span><span class="o">,</span> <span class="s">"timestamp"</span><span class="o">:</span> <span class="s">"distinct count"</span><span class="o">}</span><span class="err">`</span><span class="o">);</span>

      <span class="c1">// Add more Perspective configurations here.</span>
      <span class="n">elem</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">table</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="n">componentDidUpdate</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// Every time the data props is updated, insert the data into Perspective table</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">table</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// As part of the task, you need to fix the way we update the data props to avoid inserting duplicated entries into Perspective table again.</span>
      <span class="k">this</span><span class="o">.</span><span class="na">table</span><span class="o">.</span><span class="na">update</span><span class="o">([</span><span class="nc">DataManipulator</span><span class="o">.</span><span class="na">generateRow</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">props</span><span class="o">.</span><span class="na">data</span><span class="o">),]);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="n">export</span> <span class="k">default</span> <span class="nc">Graph</span><span class="o">;</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://i.imgur.com/5SOptBV.png" alt="Screen Shot 2020-09-20 at 21.21.22" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/pBV6RXV.png" alt="Screen Shot 2020-09-20 at 21.23.39" /></p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c"># Creating your patch file</span>
git add <span class="nt">-A</span>
git commit <span class="nt">-m</span> <span class="s1">'TASK2-GraceL'</span>
git format-patch <span class="nt">-1</span> HEAD
</pre></table></code></div></div><hr /><h2 id="task-3-display-data-visually-for-traders">Task 3 Display data visually for traders</h2><p>For the third module of this project:</p><ul><li>Set up your system by downloading the necessary files, tools and dependencies.<li>Modify the typescript files in repository to make the web application behave in the expected manner<li>Generate a patch file of the changes you made.</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/11Mn67t.png" alt="Screen Shot 2020-10-02 at 12.49.12" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/w6E6oJC.png" alt="Screen Shot 2020-10-02 at 12.49.28" /></p><ol><li>setup</ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>git clone https://github.com/insidesherpa/JPMC-tech-task-3.git
<span class="nb">cd </span>JPMC-tech-task-3
python datafeed/server.py

// To check your node version <span class="nb">type
</span>node <span class="nt">-v</span>
// To check your npm version <span class="nb">type
</span>npm <span class="nt">-v</span>

nvm <span class="nb">install </span>v11.0.0
nvm use v11.0.0

npm <span class="nb">install
</span>npm start
</pre></table></code></div></div><ol><li>Making Changes</ol><p><strong>Purpose</strong></p><ul><li>generate a live graph that displays the data feed in a clear and visually appealing way for traders to monitor this trading strategy.<li>the purpose of this graph is to monitor and determine when a trading opportunity may arise as a result of the temporary weakening of a correlation between two stock prices.<li>Given this graph, the trader should be able to quickly and easily notice when the ratio moves too far from the average historical correlation.<li>In the first instance, we’ll assume that threshold is <code class="language-plaintext highlighter-rouge">+/-10% of the 12 month historical average ratio</code>.</ul><p><strong>Acceptance Criteria</strong> This ticket is done when the numbers from the python script render properly in the live perspective graph. the ratio between the two stock prices is tracked and displayed. The upper and lower bounds must be shown on the graph too. And finally, alerts are shown whenever these bounds are crossed by the ratio (the guide below will also give more detail and visuals to help you understand these requirements better)</p><p><strong>Objectives</strong></p><ol><li>make this graph more useful to traders by making it track the ratio between two stocks over time and NOT the two stocks top_ask_price over time.<li>As mentioned before, traders want to monitor the ratio of two stocks against a historical correlation with upper and lower thresholds/bounds. This can help them determine a trading opportunity.That said, we also want to make this graph plot those upper and lower thresholds and show when they get crossed by the ratio of the stock<ul><li>change (2) files: <code class="language-plaintext highlighter-rouge">src/Graph.tsx</code> and <code class="language-plaintext highlighter-rouge">src/DataManipulator.ts</code></ul></ol><p><code class="language-plaintext highlighter-rouge">Graph.tsx</code>:</p><ul><li>the file that takes care of how the Graph component of our App will be rendered and react to the state changes that occur within the App.<li>have one main line tracking the ratio of two stocks and be able to plot upper and lower bounds too.</ul><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">React</span><span class="o">,</span> <span class="o">{</span> <span class="nc">Component</span> <span class="o">}</span> <span class="n">from</span> <span class="err">'</span><span class="n">react</span><span class="err">'</span><span class="o">;</span>
<span class="kn">import</span> <span class="err">{</span> <span class="nn">Table</span> <span class="o">}</span> <span class="n">from</span> <span class="err">'</span><span class="nd">@jpmorganchase</span><span class="o">/</span><span class="n">perspective</span><span class="err">'</span><span class="o">;</span>
<span class="kn">import</span> <span class="err">{</span> <span class="nn">ServerRespond</span> <span class="o">}</span> <span class="n">from</span> <span class="err">'</span><span class="o">./</span><span class="nc">DataStreamer</span><span class="err">'</span><span class="o">;</span>
<span class="kn">import</span> <span class="err">{</span> <span class="nn">DataManipulator</span> <span class="o">}</span> <span class="n">from</span> <span class="err">'</span><span class="o">./</span><span class="nc">DataManipulator</span><span class="err">'</span><span class="o">;</span>
<span class="kn">import</span> <span class="err">'</span><span class="nn">.</span><span class="o">/</span><span class="nc">Graph</span><span class="o">.</span><span class="na">css</span><span class="err">'</span><span class="o">;</span>

<span class="kd">interface</span> <span class="nc">IProps</span> <span class="o">{</span>
  <span class="nl">data:</span> <span class="nc">ServerRespond</span><span class="o">[],</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">PerspectiveViewerElement</span> <span class="kd">extends</span> <span class="nc">HTMLElement</span> <span class="o">{</span>
  <span class="nl">load:</span> <span class="o">(</span><span class="nl">table:</span> <span class="nc">Table</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="kt">void</span><span class="o">,</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Graph</span> <span class="kd">extends</span> <span class="nc">Component</span><span class="o">&lt;</span><span class="nc">IProps</span><span class="o">,</span> <span class="o">{}&gt;</span> <span class="o">{</span>

  <span class="nl">table:</span> <span class="nc">Table</span> <span class="o">|</span> <span class="n">undefined</span><span class="o">;</span>

  <span class="n">render</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">React</span><span class="o">.</span><span class="na">createElement</span><span class="o">(</span><span class="err">'</span><span class="n">perspective</span><span class="o">-</span><span class="n">viewer</span><span class="err">'</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="n">componentDidMount</span><span class="o">()</span> <span class="o">{</span>

    <span class="kd">const</span> <span class="n">schema</span> <span class="o">=</span> <span class="o">{</span>
      <span class="c1">// stock: 'string',</span>
      <span class="c1">// top_ask_price: 'float',</span>
      <span class="c1">// top_bid_price: 'float',</span>
      <span class="c1">// timestamp: 'date',</span>
      <span class="nl">price_abc:</span> <span class="err">'</span><span class="kt">float</span><span class="err">'</span><span class="o">,</span>         <span class="c1">// change the data your need for graph</span>
      <span class="nl">price_def:</span> <span class="err">'</span><span class="kt">float</span><span class="err">'</span><span class="o">,</span>
      <span class="nl">ratio:</span> <span class="err">'</span><span class="kt">float</span><span class="err">'</span><span class="o">,</span>
      <span class="nl">timestamp:</span> <span class="err">'</span><span class="n">date</span><span class="err">'</span><span class="o">,</span>
      <span class="nl">upper_bound:</span> <span class="err">'</span><span class="kt">float</span><span class="err">'</span><span class="o">,</span>
      <span class="nl">lower_bound:</span> <span class="err">'</span><span class="kt">float</span><span class="err">'</span><span class="o">,</span>
      <span class="nl">trigger_alert:</span> <span class="err">'</span><span class="kt">float</span><span class="err">'</span><span class="o">,</span>
    <span class="o">};</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">window</span><span class="o">.</span><span class="na">perspective</span> <span class="o">&amp;&amp;</span> <span class="n">window</span><span class="o">.</span><span class="na">perspective</span><span class="o">.</span><span class="na">worker</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">table</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="na">perspective</span><span class="o">.</span><span class="na">worker</span><span class="o">().</span><span class="na">table</span><span class="o">(</span><span class="n">schema</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// Get element from the DOM.</span>
    <span class="kd">const</span> <span class="n">elem</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="na">getElementsByTagName</span><span class="o">(</span><span class="err">'</span><span class="n">perspective</span><span class="o">-</span><span class="n">viewer</span><span class="err">'</span><span class="o">)[</span><span class="mi">0</span><span class="o">]</span> <span class="n">as</span> <span class="n">unknown</span> <span class="n">as</span> <span class="nc">PerspectiveViewerElement</span><span class="o">;</span>

    <span class="c1">// determine the graph view</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">table</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// Load the `table` in the `&lt;perspective-viewer&gt;` DOM reference.</span>
      <span class="n">elem</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">table</span><span class="o">);</span>
      <span class="c1">// elem.setAttribute('view', 'y_line');</span>
      <span class="c1">// elem.setAttribute('column-pivots', '["stock"]');     // line</span>
      <span class="c1">// elem.setAttribute('row-pivots', '["timestamp"]');    // different time</span>
      <span class="c1">// elem.setAttribute('columns', '["top_ask_price"]');</span>
      <span class="c1">// elem.setAttribute('aggregates', JSON.stringify({</span>
      <span class="c1">//   stock: 'distinctcount',</span>
      <span class="c1">//   top_ask_price: 'avg',</span>
      <span class="c1">//   top_bid_price: 'avg',</span>
      <span class="c1">//   timestamp: 'distinct count',</span>
      <span class="n">elem</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="err">'</span><span class="n">view</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="n">y_line</span><span class="err">'</span><span class="o">);</span>
      <span class="c1">// the type of graph</span>
      <span class="n">elem</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="err">'</span><span class="n">row</span><span class="o">-</span><span class="n">pivots</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="o">[</span><span class="s">"timestamp"</span><span class="o">]</span><span class="err">'</span><span class="o">);</span>
      <span class="c1">// takes care of x-axis.</span>
      <span class="c1">// This allows us to map each datapoint based on the timestamp it has.</span>
      <span class="c1">// Without this, the x-axis is blank.</span>
      <span class="n">elem</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="err">'</span><span class="n">columns</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="o">[</span><span class="s">"ratio"</span><span class="o">,</span> <span class="s">"lower_bound"</span><span class="o">,</span> <span class="s">"upper_bound"</span><span class="o">,</span> <span class="s">"trigger_alert"</span><span class="o">]</span><span class="err">'</span><span class="o">);</span>
      <span class="c1">// ‘columns’ only focus on a particular part of a datapoint’s data along the y-axis.</span>
      <span class="c1">// Without this, the graph will plot all the fields and values of each datapoint and it will be a lot of noise.</span>
      <span class="n">elem</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="err">'</span><span class="n">aggregates</span><span class="err">'</span><span class="o">,</span> <span class="no">JSON</span><span class="o">.</span><span class="na">stringify</span><span class="o">({</span>
      <span class="c1">// ‘aggregates’ handle the cases of duplicated data we observed way back in task 2 and consolidate them as just one data point.</span>
      <span class="c1">// In our case we only want to consider a data point unique if it has a timestamp. Otherwise, we will average out the all the values of the other non-unique fields these ‘similar’ datapoints before treating them as one (e.g. ratio, price_abc, …)</span>
        <span class="nl">price_abc:</span> <span class="err">'</span><span class="n">avg</span><span class="err">'</span><span class="o">,</span>
        <span class="nl">price_def:</span> <span class="err">'</span><span class="n">avg</span><span class="err">'</span><span class="o">,</span>
        <span class="nl">ratio:</span> <span class="err">'</span><span class="n">avg</span><span class="err">'</span><span class="o">,</span>
        <span class="nl">timestamp:</span> <span class="err">'</span><span class="n">distinct</span> <span class="n">count</span><span class="err">'</span><span class="o">,</span>
        <span class="nl">upper_bound:</span> <span class="err">'</span><span class="n">avg</span><span class="err">'</span><span class="o">,</span>
        <span class="nl">lower_bound:</span> <span class="err">'</span><span class="n">avg</span><span class="err">'</span><span class="o">,</span>
        <span class="nl">trigger_alert:</span> <span class="err">'</span><span class="n">avg</span><span class="err">'</span><span class="o">,</span>
      <span class="o">}));</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="n">componentDidUpdate</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">table</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">table</span><span class="o">.</span><span class="na">update</span><span class="o">(</span>
        <span class="nc">DataManipulator</span><span class="o">.</span><span class="na">generateRow</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">props</span><span class="o">.</span><span class="na">data</span><span class="o">),</span>
      <span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="n">export</span> <span class="k">default</span> <span class="nc">Graph</span><span class="o">;</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">DataManipulator.ts</code>:</p><ul><li>processing the raw stock data received from the server before it throws it back to the Graph component’s table to render.</ul><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="err">{</span> <span class="nn">ServerRespond</span> <span class="o">}</span> <span class="n">from</span> <span class="err">'</span><span class="o">./</span><span class="nc">DataStreamer</span><span class="err">'</span><span class="o">;</span>

<span class="n">export</span> <span class="kd">interface</span> <span class="nc">Row</span> <span class="o">{</span>
  <span class="c1">// stock: string,</span>
  <span class="c1">// top_ask_price: number,</span>
  <span class="c1">// timestamp: Date,</span>
  <span class="nl">price_abc:</span> <span class="n">number</span><span class="o">,</span>
  <span class="nl">price_def:</span> <span class="n">number</span><span class="o">,</span>
  <span class="nl">ratio:</span> <span class="n">number</span><span class="o">,</span>
  <span class="nl">timestamp:</span> <span class="nc">Date</span><span class="o">,</span>
  <span class="nl">upper_bound:</span> <span class="n">number</span><span class="o">,</span>
  <span class="nl">lower_bound:</span> <span class="n">number</span><span class="o">,</span>
  <span class="nl">trigger_alert:</span> <span class="n">number</span> <span class="o">|</span> <span class="n">undefined</span><span class="o">,</span>
<span class="o">}</span>

<span class="c1">// compute for price_abc and price_def properly</span>
<span class="c1">// compute for ratio using the two computed prices</span>
<span class="c1">// set lower and upper bounds, as well as trigger_alert.</span>

<span class="n">export</span> <span class="kd">class</span> <span class="nc">DataManipulator</span> <span class="o">{</span>

<span class="c1">//  access serverRespond as an array where in the first element (0-index) is about stock ABC and the second element (1-index) is about stock DEF.</span>
  <span class="kd">static</span> <span class="nf">generateRow</span><span class="o">(</span><span class="nl">serverResponds:</span> <span class="nc">ServerRespond</span><span class="o">[]):</span> <span class="nc">Row</span> <span class="o">{</span>
    <span class="kd">const</span> <span class="n">priceABC</span> <span class="o">=</span> <span class="o">(</span><span class="n">serverResponds</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">top_ask</span><span class="o">.</span><span class="na">price</span> <span class="o">+</span> <span class="n">serverResponds</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">top_bid</span><span class="o">.</span><span class="na">price</span><span class="o">)/</span><span class="mi">2</span><span class="o">;</span>
    <span class="kd">const</span> <span class="n">priceDEF</span> <span class="o">=</span> <span class="o">(</span><span class="n">serverResponds</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="na">top_ask</span><span class="o">.</span><span class="na">price</span> <span class="o">+</span> <span class="n">serverResponds</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="na">top_bid</span><span class="o">.</span><span class="na">price</span><span class="o">)/</span><span class="mi">2</span><span class="o">;</span>
    <span class="c1">// const timestamp = (serverResponds[0].timestamp &gt; serverResponds[1].timestamp? serverResponds[0].timestamp:serverResponds[1].timestamp);</span>
    <span class="kd">const</span> <span class="n">ratio</span> <span class="o">=</span> <span class="n">priceABC</span> <span class="o">/</span> <span class="n">priceDEF</span><span class="o">;</span>
    <span class="kd">const</span> <span class="n">upperBound</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mf">0.01</span><span class="o">;</span>
    <span class="kd">const</span> <span class="n">lowerBound</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="mf">0.01</span><span class="o">;</span>
    <span class="k">return</span> <span class="o">{</span>
      <span class="nl">price_abc:</span> <span class="n">priceABC</span><span class="o">,</span>
      <span class="nl">price_def:</span> <span class="n">priceDEF</span><span class="o">,</span>
      <span class="n">ratio</span><span class="o">,</span>
      <span class="nl">timestamp:</span> <span class="n">serverResponds</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">timestamp</span> <span class="o">&gt;</span> <span class="n">serverResponds</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="na">timestamp</span><span class="o">?</span> <span class="n">serverResponds</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">timestamp</span><span class="o">:</span><span class="n">serverResponds</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="na">timestamp</span><span class="o">,</span>
      <span class="nl">upper_bound:</span> <span class="n">upperBound</span><span class="o">,</span>
      <span class="nl">lower_bound:</span> <span class="n">lowerBound</span><span class="o">,</span>
      <span class="nl">trigger_alert:</span> <span class="o">(</span> <span class="n">ratio</span> <span class="o">&gt;</span> <span class="n">upperBound</span> <span class="o">||</span> <span class="n">ratio</span> <span class="o">&lt;</span> <span class="n">lowerBound</span><span class="o">)?</span><span class="nl">ratio:</span><span class="n">undefined</span><span class="o">,</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># Creating your patch file</span>
git init
git add <span class="nt">-A</span>
git commit <span class="nt">-m</span> <span class="s1">'TASK3-GraceL'</span>
git format-patch <span class="nt">-1</span> HEAD
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://i.imgur.com/XvXiQx8.png" alt="Screen Shot 2020-10-02 at 17.33.04" /></p><p>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/lab/'>Lab</a>, <a href='/categories/chasesde/'>ChaseSDE</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/lab/" class="post-tag no-text-decoration" >Lab</a> <a href="/tags/sde/" class="post-tag no-text-decoration" >SDE</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=JPMorganChase SDE Virtual Experience - Grace&url=https://ocholuo.github.io//posts/JPMorganChase-SDE-Virtual-Experience/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=JPMorganChase SDE Virtual Experience - Grace&u=https://ocholuo.github.io//posts/JPMorganChase-SDE-Virtual-Experience/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=JPMorganChase SDE Virtual Experience - Grace&url=https://ocholuo.github.io//posts/JPMorganChase-SDE-Virtual-Experience/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/AWS-Create-simple-microservice-using-Lambda-and-API-Gateway/"><div class="card-body"> <span class="timeago small" >Jul 16, 2020<i class="unloaded">2020-07-16T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS Lab - Create a simple microservice using Lambda and API Gateway</h3><div class="text-muted small"><p> Create a simple microservice using Lambda and API Gateway Create a simple microservice using Lambda and API Gateway overall create an API using Amazon API Gateway o...</p></div></div></a></div><div class="card"> <a href="/posts/AWS-lab/"><div class="card-body"> <span class="timeago small" >Jul 16, 2020<i class="unloaded">2020-07-16T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS Lab</h3><div class="text-muted small"><p> AWS Lab AWS Lab 1. beginning 启动实例 2 连接实例 remote desktop 1.3 终止您的实例 2. begin 2.1 Active directory ...</p></div></div></a></div><div class="card"> <a href="/posts/LAB-AWSCertifiedCloudPractitionerexam.ACFv2EN-Interns/"><div class="card-body"> <span class="timeago small" >Jul 16, 2020<i class="unloaded">2020-07-16T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS Lab - ACFv2EN-Interns</h3><div class="text-muted small"><p> ACFv2EN-Interns. ACFv2EN-Interns. Module 1 Overview cloud computing: different types of cloud computing models three main cloud computing deplo...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/XSS/" class="btn btn-outline-primary" prompt="Older"><p>Meow's CyberAttack - Cross Site Scripting</p></a> <a href="/posts/robots/" class="btn btn-outline-primary" prompt="Newer"><p>The Web Robots Pages</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
