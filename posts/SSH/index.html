<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://myochosite-291718.appspot.com/query?id=ahNwfm15b2Nob3NpdGUtMjkxNzE4chULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Network protocol - SSH" /><meta property="og:locale" content="en" /><meta name="description" content="Network protocol - SSH basic ssh的安装 SSH Breakdown 配置ssh 使用ssh在远程后台不中断地跑程序 ssh 服务器端把空闲连接断开 system administration test if ssh is running change the port SSH基本用法 Changing and Exploring Directories SSH远程登录 1. 口令登录 2. 公钥登录 ssh-copy-id user@host 3. authorized_keys文件 SSH远程操作 远程执行命令 SSH数据传输 Copying Files cp copy scp 跨机远程拷贝 rsync mv Moving Files, Renaming Files compress and decompress zip tar.gz Backing up Databases mysqldump Backing up Files and Folders Changing and Setting Owner Group SSH Show System Processes with SSH Get the last 30 lines from Plesk maillog sshfs 挂载远程文件系统 ssh -X X11 图形界面 -D 绑定本地端口 -L 本地端口转发 Local forwarding -R 远程端口转发 remote forwarding SSH的其他参数" /><meta property="og:description" content="Network protocol - SSH basic ssh的安装 SSH Breakdown 配置ssh 使用ssh在远程后台不中断地跑程序 ssh 服务器端把空闲连接断开 system administration test if ssh is running change the port SSH基本用法 Changing and Exploring Directories SSH远程登录 1. 口令登录 2. 公钥登录 ssh-copy-id user@host 3. authorized_keys文件 SSH远程操作 远程执行命令 SSH数据传输 Copying Files cp copy scp 跨机远程拷贝 rsync mv Moving Files, Renaming Files compress and decompress zip tar.gz Backing up Databases mysqldump Backing up Files and Folders Changing and Setting Owner Group SSH Show System Processes with SSH Get the last 30 lines from Plesk maillog sshfs 挂载远程文件系统 ssh -X X11 图形界面 -D 绑定本地端口 -L 本地端口转发 Local forwarding -R 远程端口转发 remote forwarding SSH的其他参数" /><link rel="canonical" href="https://ocholuo.github.io//posts/SSH/" /><meta property="og:url" content="https://ocholuo.github.io//posts/SSH/" /><meta property="og:site_name" content="Grace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-07-16T11:11:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Network protocol - SSH" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-01-02T18:49:20-05:00","datePublished":"2020-07-16T11:11:11-04:00","description":"Network protocol - SSH basic ssh的安装 SSH Breakdown 配置ssh 使用ssh在远程后台不中断地跑程序 ssh 服务器端把空闲连接断开 system administration test if ssh is running change the port SSH基本用法 Changing and Exploring Directories SSH远程登录 1. 口令登录 2. 公钥登录 ssh-copy-id user@host 3. authorized_keys文件 SSH远程操作 远程执行命令 SSH数据传输 Copying Files cp copy scp 跨机远程拷贝 rsync mv Moving Files, Renaming Files compress and decompress zip tar.gz Backing up Databases mysqldump Backing up Files and Folders Changing and Setting Owner Group SSH Show System Processes with SSH Get the last 30 lines from Plesk maillog sshfs 挂载远程文件系统 ssh -X X11 图形界面 -D 绑定本地端口 -L 本地端口转发 Local forwarding -R 远程端口转发 remote forwarding SSH的其他参数","headline":"Network protocol - SSH","mainEntityOfPage":{"@type":"WebPage","@id":"https://ocholuo.github.io//posts/SSH/"},"url":"https://ocholuo.github.io//posts/SSH/"}</script><title>Network protocol - SSH | Grace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Grace"><meta name="application-name" content="Grace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://myochosite-291718.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://myochosite-291718.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/huoye.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Grace</a></div><div class="site-subtitle font-italic">2023 Mar 14 updated</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ocholuo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Network protocol - SSH</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Network protocol - SSH</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Grace JyL </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Jul 16, 2020, 11:11 AM -0400" >Jul 16, 2020<i class="unloaded">2020-07-16T11:11:11-04:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Jan 2, 2023, 3:49 PM -0800" >Jan 2<i class="unloaded">2023-01-02T18:49:20-05:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="10302 words">57 min read</span> <span id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </span> views</div></div><div class="post-content"><ul><li><a href="#network-protocol---ssh">Network protocol - SSH</a><ul><li><a href="#basic">basic</a><li><a href="#ssh的安装">ssh的安装</a><li><a href="#ssh-breakdown">SSH Breakdown</a><li><a href="#配置ssh">配置ssh</a><li><a href="#使用ssh在远程后台不中断地跑程序">使用ssh在远程后台不中断地跑程序</a><li><a href="#ssh-服务器端把空闲连接断开">ssh 服务器端把空闲连接断开</a><li><a href="#system-administration">system administration</a><ul><li><a href="#test-if-ssh-is-running">test if ssh is running</a><li><a href="#change-the-port">change the port</a></ul><li><a href="#ssh基本用法">SSH基本用法</a><ul><li><a href="#changing-and-exploring-directories">Changing and Exploring Directories</a><li><a href="#ssh远程登录">SSH远程登录</a><ul><li><a href="#1-口令登录">1. 口令登录</a><li><a href="#2-公钥登录-ssh-copy-id-userhost">2. 公钥登录 <code class="language-plaintext highlighter-rouge">ssh-copy-id user@host</code></a><li><a href="#3-authorized_keys文件">3. authorized_keys文件</a></ul><li><a href="#ssh远程操作">SSH远程操作</a><ul><li><a href="#远程执行命令">远程执行命令</a><li><a href="#ssh数据传输">SSH数据传输</a></ul></ul><li><a href="#copying-files">Copying Files</a><ul><li><a href="#cp-copy"><code class="language-plaintext highlighter-rouge">cp</code> <code class="language-plaintext highlighter-rouge">copy</code></a><li><a href="#scp-跨机远程拷贝"><code class="language-plaintext highlighter-rouge">scp</code> 跨机远程拷贝</a><li><a href="#rsync"><code class="language-plaintext highlighter-rouge">rsync</code></a></ul><li><a href="#mv-moving-files-renaming-files"><code class="language-plaintext highlighter-rouge">mv</code> Moving Files, Renaming Files</a><li><a href="#compress-and-decompress">compress and decompress</a><ul><li><a href="#zip"><code class="language-plaintext highlighter-rouge">zip</code></a><li><a href="#targz"><code class="language-plaintext highlighter-rouge">tar.gz</code></a></ul><li><a href="#backing-up">Backing up</a><ul><li><a href="#databases-mysqldump">Databases <code class="language-plaintext highlighter-rouge">mysqldump</code></a><li><a href="#backing-up-files-and-folders">Backing up Files and Folders</a></ul><li><a href="#changing-and-setting-owner-group-ssh">Changing and Setting Owner Group SSH</a><li><a href="#show-system-processes-with-ssh">Show System Processes with SSH</a><li><a href="#get-the-last-30-lines-from-plesk-maillog">Get the last 30 lines from Plesk maillog</a><ul><li><a href="#sshfs-挂载远程文件系统"><code class="language-plaintext highlighter-rouge">sshfs</code> 挂载远程文件系统</a><li><a href="#ssh--x-x11-图形界面"><code class="language-plaintext highlighter-rouge">ssh -X</code> X11 图形界面</a><li><a href="#-d-绑定本地端口"><code class="language-plaintext highlighter-rouge">-D</code> 绑定本地端口</a><li><a href="#-l-本地端口转发-local-forwarding"><code class="language-plaintext highlighter-rouge">-L</code> 本地端口转发 Local forwarding</a><ul><li><a href="#-r-远程端口转发-remote-forwarding"><code class="language-plaintext highlighter-rouge">-R</code> 远程端口转发 remote forwarding</a><li><a href="#ssh的其他参数">SSH的其他参数</a></ul></ul></ul></ul><hr /><h1 id="network-protocol---ssh">Network protocol - SSH</h1><hr /><h2 id="basic">basic</h2><p>SSH is capable of</p><ul><li>shell access,<li>file transfers,<li>executing remote commands,<li>port forwarding and tunneling,<li>creating VPNs,<li>forwarding x displays, that’s our GUI,<li>encrypted proxy browsing (via socks protocol),<li>mounting remote directories.</ul><p>Execute commands <code class="language-plaintext highlighter-rouge">ssh user@hostname [command]</code></p><p>Copying files:</p><ul><li>sftp – secure ftp<li><code class="language-plaintext highlighter-rouge">scp fileName user@host:/home/user/fileName</code><li>Based on sftp, but meant to replace rcp</ul><p>Authentication Mechanisms</p><ul><li>Password<li>Public-key<li>Keyboard-interactive<li>Multiple passwords required (SecurID, etc.)<li>GSSAPI (Generic Security Services Application Program Interface)<li>Extensible to provide for Kerberos, NTLM, etc.</ul><p><strong>SSH and RDP: Comparison</strong></p><ul><li>SSH is considered more secure because it does not require additional tools such as a Virtual Private Network (VPN) or Multi-factor authentication (MFA) as RDP does.<li>SSH is operated within the terminal, making it hard for non-IT personnel to conduct operations with SSH.</ul><hr /><ul><li>SSH是一种网络协议，用于计算机之间的加密登录。<li>如果一个用户从本地计算机，使用SSH协议登录另一台远程计算机，就可以认为这种登录是安全的，即使被中途截获，密码也不会泄露。<li>最早的时候，互联网通信都是明文通信，一旦被截获，内容就暴露无疑。1995年，芬兰学者Tatu Ylonen设计了SSH协议，将登录信息全部加密，成为互联网安全的一个基本解决方案，迅速在全世界获得推广，目前已经成为Linux系统的标准配置。<li>SSH只是一种协议，存在多种实现，既有商业实现，也有开源实现。<li>本文针对的实现是OpenSSH，它是自由软件，应用非常广泛。<li>这里只讨论SSH在Linux Shell中的用法。<li><p>在Windows系统中使用SSH，会用到另一种软件PuTTY，这需要另文介绍。</p><li>SSH之所以能够保证安全，原因在于它采用了公钥加密。<li>整个过程是这样的：<ol><li>远程主机收到用户的登录请求，远程主机把自己的公钥发给用户。<li>用户使用这个公钥，将登录密码加密后，发送回来。<li>远程主机用自己的私钥，解密登录密码，如果密码正确，就同意用户登录。</ol><li>这个过程本身是安全的，但是实施的时候存在一个风险：<em>MITM</em><ul><li>如果有人截获了登录请求，然后冒充远程主机，将伪造的公钥发给用户，那么用户很难辨别真伪。<li>因为不像https协议，SSH协议的公钥是没有证书中心（CA）公证的，也就是说，都是自己签发的。<li>设想攻击者插在用户与远程主机之间（比如在公共的wifi区域），用伪造的公钥，获取用户的登录密码。再用这个密码登录远程主机，那么SSH的安全机制就荡然无存了。这种风险就是（Man-in-the-middle attack）</ul></ul><hr /><h2 id="ssh的安装">ssh的安装</h2><ul><li>SSH分<code class="language-plaintext highlighter-rouge">客户端openssh-client</code>和<code class="language-plaintext highlighter-rouge">openssh-server</code><ul><li>如果只想登陆别的机器的SSH, 只需要安装openssh-client<li>如果要使本机开放SSH服务, 需要安装openssh-server</ul><li>Ubuntu已经安装了ssh client<ul><li>如果没有则<code class="language-plaintext highlighter-rouge">sudo apt-get install openssh-client</code></ul></ul><hr /><h2 id="ssh-breakdown">SSH Breakdown</h2><p><img data-proofer-ignore data-src="https://i.imgur.com/IL4kiTQ.png" alt="SSH-connection-2-1-1536x1536" /></p><ol><li><p>The client host connects to the server hosts. During the exchange, both swap protocol versions they support.</p><li>The Server sends<ol><li>the authentication information and the session parameters to the Client;<li>this includes the Server’s public key components of public and private key pairs<li>and a list of encryptions, compressions,<li>and authentications modes that the Server supports.</ol><li><p>The client host checks the Server’s <code class="language-plaintext highlighter-rouge">public key</code> against the client key it holds in the public key library. After identifying the Server, the secret session key is generated.</p><li><p>Once the secret session key is both on the server and client host, the encryption and integrity check is enabled during this stage.</p><li>The client host and the user can now be authenticated to the server host without interception of the transmission between the two. After authentication, the appropriate access t the Server is granted to the user, and the two machines are connected under a secure and encrypted connection. Enabling a secure tunnel for transmissions through the internet gateway.</ol><hr /><h2 id="配置ssh">配置ssh</h2><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="se">\0</span><span class="s2">33[31;1m ******************************* </span><span class="se">\0</span><span class="s2">33[0m"</span>
<span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="se">\0</span><span class="s2">33[31;1m ************安装和配置ssh************ </span><span class="se">\0</span><span class="s2">33[0m"</span>
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> openssh-server 1&gt; /dev/null
<span class="nb">sudo sed</span> <span class="nt">-i</span> <span class="s1">'s/UsePAM no/UsePAM yes/g'</span> /etc/ssh/sshd_config
<span class="nb">sudo sed</span> <span class="nt">-i</span> <span class="s1">'8a /etc/init.d/ssh start'</span> /etc/profile
<span class="nb">sudo</span> /etc/init.d/ssh start
ps <span class="nt">-e</span> | <span class="nb">grep </span>ssh

<span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="se">\0</span><span class="s2">33[31;1m ssh授权 </span><span class="se">\0</span><span class="s2">33[0m"</span>
<span class="nb">cd</span> ~/.ssh/
ssh-keygen <span class="nt">-t</span> rsa
<span class="nb">cat</span> ./id_rsa.pub <span class="o">&gt;&gt;</span> ./authorized_keys

<span class="nv">$ </span>ps <span class="nt">-e</span>|grep ssh
 2151 ?        00:00:00 ssh-agent

 5313 ?        00:00:00 sshd

ssh-agent表示ssh-client启动，sshd表示ssh-server启动了。

如果缺少sshd，说明ssh服务没有启动或者没有安装。

2.
如果你需要改变 SSH 的配置, 用文本编辑器打开 /etc/ssh/sshd_config 进行编辑.
比如改变登陆的标语, 在配置文件中找到下面这行:
<span class="c">#Banner none</span>
删除 <span class="s2">"#"</span> 字符<span class="o">(</span>取消该行的注释<span class="o">)</span>, 将 none 替换为包含你期望显示内容的文件地址.
修改后该行应该类似这样:
Banner /etc/issue
在配置文件 /etc/ssh/sshd_config 中你还可以找到端口号, 空闲超时时间等配置项. 配置项大都比较容易理解, 但是保险起见在你修改一些不是很确定的配置项时最好参考下 SSH 的帮助文档.
</pre></table></code></div></div><h2 id="使用ssh在远程后台不中断地跑程序">使用ssh在远程后台不中断地跑程序</h2><ul><li>Linux关闭ssh（关闭终端等）后运行的程序或者服务自动停止，如python3 a.py &amp;。<li>解决：使用<code class="language-plaintext highlighter-rouge">nohup</code>命令让程序在关闭窗口（切换SSH连接）的时候程序还能继续在后台运行。<li><code class="language-plaintext highlighter-rouge">nohup python3 a.py &amp;</code></ul><h2 id="ssh-服务器端把空闲连接断开">ssh 服务器端把空闲连接断开</h2><ul><li>ssh连接中断: 服务器端把空闲连接给断开了。只能重新连接</ul><ol><li>如果使用的是 <code class="language-plaintext highlighter-rouge">iTerm2</code>，要让ssh空闲不断线： <code class="language-plaintext highlighter-rouge">profiles -&gt; sessions -&gt; When idle, send ASCII code 97 every 60s</code><ul><li>配置的ASCII code是97，所以是一串aaaaaa，一看效果，果然没断。<li>但是接着用了用，就发现有坑了……<li>开着vim，过了一段时间再回来时，这一长串aaaaaa……还要手工ESC，u一下，才恢复，而且指不定还会有其它副作用，实在蛋疼……</ul><li>通过客户端ssh参数配置<ul><li>其它命令行客户端，通过配置 ServerAliveInterval 来实现，在 <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> 中加入： <code class="language-plaintext highlighter-rouge">ServerAliveInterval=30</code>。<li><code class="language-plaintext highlighter-rouge">ServerAliveInterval=30</code>: 表示ssh客户端每隔30秒给远程主机发送一个<code class="language-plaintext highlighter-rouge">no-op</code>包, <code class="language-plaintext highlighter-rouge">no-op</code>是无任何操作的意思，这样远程主机就不会关闭这个SSH会话。</ul><ul><li>只需要在当前用户的ssh连接调整就好（注意：是本地发起连接的客户端！并非修改所要连接的远程服务器端)<li><code class="language-plaintext highlighter-rouge">vim ~/.ssh/config</code>，<li>然后新增<li><code class="language-plaintext highlighter-rouge">Host *     ServerAliveInterval 60</code> - 60秒就好了，而且基本去连的机器都保持，所以配置了* - 如果有需要针对某个机器，可以自行配置为需要的serverHostName。</ul><li>单次连接<ul><li>若只是单次连接时需要，可使用-o参数实现：<li><code class="language-plaintext highlighter-rouge">ssh -o ServerAliveInterval=30 user@host</code></ul></ol><hr /><h2 id="system-administration">system administration</h2><h3 id="test-if-ssh-is-running">test if ssh is running</h3><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ps aux | <span class="nb">grep </span>ssh
root      3278  0.0  0.6  94892  6752 ?        Ss   Apr11   0:00 sshd: ubuntu <span class="o">[</span>priv]
ubuntu    3341  0.0  0.3  94892  3968 ?        S    Apr11   0:00 sshd: ubuntu@pts/0
ubuntu    5795  0.0  0.1  12940  1016 pts/0    S+   00:05   0:00 <span class="nb">grep</span> <span class="nt">--color</span><span class="o">=</span>auto ssh
root     20273  0.0  0.5  65508  5944 ?        Ss   Apr11   0:00 /usr/sbin/sshd <span class="nt">-D</span>
</pre></table></code></div></div><hr /><h3 id="change-the-port">change the port</h3><p>port 22 open will have a lot of attacks</p><p>solutions:</p><ul><li>editing the port, so it doesn’t answer on port 22.<li>change to something else.</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre>
1. check the port open on the host

// malicious <span class="nb">users</span>
<span class="nv">$ </span>nmap <span class="nt">-T4</span> <span class="nt">-F</span> 3.22.168.152
Starting Nmap 7.80 <span class="o">(</span> https://nmap.org <span class="o">)</span> at 2020-04-11 20:29 EDT
Nmap scan report <span class="k">for </span>ec2-3-22-168-152.us-east-2.compute.amazonaws.com <span class="o">(</span>3.22.168.152<span class="o">)</span>
Host is up <span class="o">(</span>0.031s latency<span class="o">)</span><span class="nb">.</span>
Not shown: 92 closed ports
PORT     STATE    SERVICE
22/tcp   open     ssh
25/tcp   filtered smtp
135/tcp  filtered msrpc
139/tcp  filtered netbios-ssn
445/tcp  filtered microsoft-ds
5900/tcp open     vnc
6000/tcp open     X11
6001/tcp open     X11:1
// even the os
<span class="nb">sudo </span>nmap <span class="nt">-O</span> 3.22.168.152
Aggressive OS guesses: Linux 3.11 - 4.1 <span class="o">(</span>94%<span class="o">)</span>, Linux 3.2 - 3.8 <span class="o">(</span>94%<span class="o">)</span>, Linux 2.6.32 <span class="o">(</span>93%<span class="o">)</span>, Linux 2.6.32 - 2.6.39 <span class="o">(</span>92%<span class="o">)</span>, Linux 3.13 <span class="o">(</span>90%<span class="o">)</span>, Linux 4.4 <span class="o">(</span>90%<span class="o">)</span>, Linux 2.6.32 or 3.10 <span class="o">(</span>89%<span class="o">)</span>, Linux 3.0 or 3.5 <span class="o">(</span>89%<span class="o">)</span>, Linux 4.2 <span class="o">(</span>89%<span class="o">)</span>, Linux 3.8 <span class="o">(</span>89%<span class="o">)</span>
No exact OS matches <span class="k">for </span>host <span class="o">(</span><span class="nb">test </span>conditions non-ideal<span class="o">)</span><span class="nb">.</span>
Network Distance: 28 hops

// or kali
zenmap: target ip
<span class="nb">command</span>: nmap <span class="nt">-T4</span> <span class="nt">-F</span> 3.22.168.152
</pre></table></code></div></div><ol><li>change the file</ol><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
</pre><td class="rouge-code"><pre><span class="c"># // command line: change the ssh port to 2237</span>
<span class="nv">$ </span>semanage port <span class="nt">-a</span> <span class="nt">-t</span> ssh_port_t <span class="nt">-p</span> tcp, <span class="k">then </span>the 2237.
<span class="nv">$ </span><span class="nb">sudo </span>semanage port <span class="nt">-l</span> | <span class="nb">grep </span>ssh
ssh_port_t                     tcp      2237

<span class="c"># // restart the ssh</span>
<span class="nv">$ </span>systemctl restart sshd.service
<span class="o">====</span> AUTHENTICATING FOR org.freedesktop.systemd1.manage-units <span class="o">===</span>
Authentication is required to restart <span class="s1">'ssh.service'</span><span class="nb">.</span>
Multiple identities can be used <span class="k">for </span>authentication:
 1.  Ubuntu <span class="o">(</span>ubuntu<span class="o">)</span>
 2.  bob
 3.  lisa
Choose identity to authenticate as <span class="o">(</span>1-3<span class="o">)</span>: 2
Password:
<span class="o">====</span> AUTHENTICATION COMPLETE <span class="o">===</span>

<span class="nv">$ </span>ps aux | <span class="nb">grep </span>ssh
root      3278  0.0  0.6  94892  6752 ?        Ss   Apr11   0:00 sshd: ubuntu <span class="o">[</span>priv]
ubuntu    3341  0.0  0.3  94892  3968 ?        S    Apr11   0:00 sshd: ubuntu@pts/0
root      8173  0.0  0.5  65508  5492 ?        Ss   00:56   0:00 /usr/sbin/sshd <span class="nt">-D</span>
bob       8179  0.0  0.1  12940  1032 pts/0    S+   00:57   0:00 <span class="nb">grep</span> <span class="nt">--color</span><span class="o">=</span>auto ssh



// edit the file
<span class="nv">$ </span>vi  /etc/ssh/sshd_config

<span class="c"># Package generated configuration file</span>
<span class="c"># See the sshd_config(5) manpage for details</span>

<span class="c"># What ports, IPs and protocols we listen for</span>
// here!!!!!!!!!!!
// change to other port
// port 2237
Port 22
<span class="c"># Use these options to restrict which interfaces/protocols sshd will bind to</span>
<span class="c">#ListenAddress ::</span>
<span class="c">#ListenAddress 0.0.0.0</span>
Protocol 2
<span class="c"># HostKeys for protocol version 2</span>
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_dsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key
<span class="c">#Privilege Separation is turned on for security</span>
UsePrivilegeSeparation <span class="nb">yes</span>

<span class="c"># Lifetime and size of ephemeral version 1 server key</span>
KeyRegenerationInterval 3600
ServerKeyBits 1024

<span class="c"># Logging</span>
SyslogFacility AUTH
LogLevel INFO

<span class="c"># Authentication:</span>
LoginGraceTime 120
PermitRootLogin prohibit-password
StrictModes <span class="nb">yes

</span>RSAAuthentication <span class="nb">yes
</span>PubkeyAuthentication <span class="nb">yes</span>
<span class="c">#AuthorizedKeysFile	%h/.ssh/authorized_keys</span>

<span class="c"># Dont read the users ~/.rhosts and ~/.shosts files</span>
IgnoreRhosts <span class="nb">yes</span>
<span class="c"># For this to work you will also need host keys in /etc/ssh_known_hosts</span>
RhostsRSAAuthentication no
<span class="c"># similar for protocol version 2</span>
HostbasedAuthentication no
<span class="c"># Uncomment if you dont trust ~/.ssh/known_hosts for RhostsRSAAuthentication</span>
<span class="c">#IgnoreUserKnownHosts yes</span>

<span class="c"># To enable empty passwords, change to yes (NOT RECOMMENDED)</span>
PermitEmptyPasswords no

<span class="c"># Change to yes to enable challenge-response passwords (beware issues with some PAM modules and threads)</span>
ChallengeResponseAuthentication no

<span class="c"># Change to no to disable tunnelled clear text passwords</span>
PasswordAuthentication <span class="nb">yes</span>

<span class="c"># Kerberos options</span>
<span class="c">#KerberosAuthentication no</span>
<span class="c">#KerberosGetAFSToken no</span>
<span class="c">#KerberosOrLocalPasswd yes</span>
<span class="c">#KerberosTicketCleanup yes</span>

<span class="c"># GSSAPI options</span>
<span class="c">#GSSAPIAuthentication no</span>
<span class="c">#GSSAPICleanupCredentials yes</span>

X11Forwarding <span class="nb">yes
</span>X11DisplayOffset 10
PrintMotd no
PrintLastLog <span class="nb">yes
</span>TCPKeepAlive <span class="nb">yes</span>
<span class="c">#UseLogin no</span>

<span class="c">#MaxStartups 10:30:60</span>
<span class="c">#Banner /etc/issue.net</span>

<span class="c"># Allow client to pass locale environment variables</span>
AcceptEnv LANG LC_<span class="k">*</span>

Subsystem sftp /usr/lib/openssh/sftp-server

<span class="c"># Set this to 'yes' to enable PAM authentication, account processing,</span>
<span class="c"># and session processing. If this is enabled, PAM authentication will</span>
<span class="c"># be allowed through the ChallengeResponseAuthentication and</span>
<span class="c"># PasswordAuthentication.  Depending on your PAM configuration,</span>
<span class="c"># PAM authentication via ChallengeResponseAuthentication may bypass</span>
<span class="c"># the setting of "PermitRootLogin without-password".</span>
<span class="c"># If you just want the PAM account and session checks to run without</span>
<span class="c"># PAM authentication, then enable this but set PasswordAuthentication</span>
<span class="c"># and ChallengeResponseAuthentication to 'no'.</span>
UsePAM <span class="nb">yes</span>



</pre></table></code></div></div><hr /><h2 id="ssh基本用法">SSH基本用法</h2><h3 id="changing-and-exploring-directories">Changing and Exploring Directories</h3><p>SSH terminal can predict what you’re going to type by pressing tab.</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre>example

to go to /var/www/vhosts/domainname.com/httpdocs

/v<span class="sb">`</span>TAB<span class="sb">`</span>w<span class="sb">`</span>TAB<span class="sb">`</span>v<span class="sb">`</span>TAB<span class="sb">`</span>d<span class="sb">`</span>TAB<span class="sb">`</span>h<span class="sb">`</span>TAB<span class="sb">`</span>d<span class="sb">`</span>TAB<span class="sb">`</span>

This displays as

/var/www/vhosts/domainname.com/httpdocs/

There were two folders the with similar names.

<span class="c"># httpdocs (the one I was after)</span>
<span class="c"># httpsdocs (very similar but with an s in there)</span>

As a result the Tab key autofilled ‘http’ but didn’t know which of the two directories I was autofilling. Pressing d <span class="k">then </span>Tab again confirmed that I wanted httpdocs and not httpsdocs which would have required the letter ‘s’ instead as that’s the first letter after the autofilled item.
</pre></table></code></div></div><hr /><h3 id="ssh远程登录">SSH远程登录</h3><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>sshkey.private Login
<span class="nv">$ </span><span class="sb">`</span>ssh<span class="sb">`</span> <span class="sb">`</span><span class="nt">-i</span><span class="sb">`</span> <span class="sb">`</span>./sshkey.private<span class="sb">`</span> <span class="sb">`</span>username@localhost<span class="sb">`</span>
</pre></table></code></div></div><h4 id="1-口令登录">1. 口令登录</h4><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre><span class="c"># 以用户名user，登录远程主机host</span>
<span class="nv">$ </span>ssh username@hostname   <span class="c">#ssh pika@192.168.0.111</span>

<span class="c"># 如果本地用户名与远程用户名一致，登录时可以省略用户名。</span>
<span class="nv">$ </span>ssh <span class="nb">hostname</span>

<span class="c"># 你的登录请求会送进远程主机的SSH默认端口22。用-p 修改端口。</span>
<span class="nv">$ </span>ssh <span class="nt">-p</span> 2222 user@host   <span class="c"># ssh直接连接远程主机的2222端口</span>

<span class="c"># 第一次登录对方主机，系统会出现下面的提示</span>
<span class="nv">$ </span>ssh user@host
The authenticity of host <span class="s1">'host (12.18.429.21)'</span> can<span class="s1">'t be established.
RSA key fingerprint is 98:2e:d7:e0:de:9f:ac:67:28:c2:42:2d:37:16:58:4d.
Are you sure you want to continue connecting (yes/no)?
# 无法确认host主机的真实性，只知道它的公钥指纹，继续连接？
# 公钥指纹 RSA key fingerprint:
# 指公钥长度较长（采用RSA算法，长达1024位），很难比对，
# 所以对其进行MD5计算变成一个128位的指纹。再进行比较就容易多了。
# 上例中是98:2e:d7:e0:de:9f:ac:67:28:c2:42:2d:37:16:58:4d，

# 问题是，用户怎么知道远程主机的公钥指纹应该是多少？
# 没有好办法，远程主机必须在自己的网站上贴出公钥指纹，以便用户自行核对。

- 假定经过风险衡量以后，用户决定接受这个远程主机的公钥。
    　　Are you sure you want to continue connecting (yes/no)? yes
- 系统会出现一句提示，表示host主机已经得到认可。
    　　Warning: Permanently added '</span>host,12.18.429.21<span class="s1">' (RSA) to the list of known hosts.
- 然后，会要求输入密码。
    　　Password: (enter password)
- 如果密码正确，就可以登录了。
- 当远程主机的公钥被接受以后，它就会被保存在文件 $HOME/.ssh/known_hosts 之中。下次再连接这台主机，系统就会认出它的公钥已经保存在本地了，从而跳过警告部分，直接提示输入密码。
- 每个SSH用户都有自己的known_hosts文件，此外系统也有一个这样的文件，通常是 /etc/ssh/ssh_known_hosts ，保存一些对所有用户都可信赖的远程主机的公钥。

# check you user
$ whoami
ubuntu


</span></pre></table></code></div></div><hr /><h4 id="2-公钥登录-ssh-copy-id-userhost">2. 公钥登录 <code class="language-plaintext highlighter-rouge">ssh-copy-id user@host</code></h4><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre><td class="rouge-code"><pre>- 使用密码登录，每次都必须输入密码，非常麻烦。
- 好在SSH还提供了公钥登录，省去输入密码的步骤。
- 公钥登录: 用户将自己的公钥储存在远程主机上。登录时，远程主机向用户发送一段随机字符串，用户用自己的私钥加密后，再发回来。远程主机用事先储存的公钥进行解密，如果成功证明用户可信，直接允许登录shell，不再要求密码。

- 寻找主机密钥
  - 在准备添加密钥之前不妨先用以下命令看看是否已经添加了对应主机的密钥了.

<span class="nv">$ </span>ssh-keygen <span class="nt">-F</span> 10.42.0.47
Host 10.42.0.47 found: line 1 <span class="nb">type </span>ECDSA
.............

- 这种方法要求用户必须提供自己的 公钥 。
- 没有现成可以直接用 ssh-keygen 生成一个：
<span class="nv">$ </span>ssh-keygen

<span class="nv">$ </span>ssh-keygen <span class="nt">-t</span> dsa
generating public/private dsa key pair.
enter file <span class="k">in </span>which to save the key <span class="o">(</span>/home/...../.ssh/id_dsa<span class="o">)</span>:
enter passphrase <span class="o">(</span>empty <span class="k">for </span>no passphrase<span class="o">)</span>:
enter same passphrase again:
your identification has been saved <span class="k">in</span> /home/...../.ssh/id_dsa.
your public key has been saved <span class="k">in</span> /home/...../.ssh/id_dsa.pub.
the key fingerprint is:
15:55:f5:...............:fd XXX@grave
the key<span class="s1">'s randomart image is:
.....

- 运行上面的命令以后，系统会出现一系列提示，可以一路回车。
- 其中有一个问题是，要不要对私钥设置口令（passphrase），如果担心私钥的安全，这里可以设置一个。
- 运行结束以后，在$HOME/.ssh/目录下，会新生成两个文件：
- id_rsa.pub 公钥 和 id_rsa 私钥。

- 这时再输入下面的命令，将公钥传送到远程主机host上面：
    　　$ ssh-copy-id user@host
- 好了，从此再登录就不需要输入密码了。

- 如果还是不行，就打开远程主机的 /etc/ssh/sshd_config 这个文件，检查下面几行前面"#"注释是否取掉。
    　　RSAAuthentication yes
    　　PubkeyAuthentication yes
    　　AuthorizedKeysFile .ssh/authorized_keys
- 然后，重启远程主机的ssh服务。
    　　// ubuntu系统
    　　service ssh restart
    　　// debian系统
    　　/etc/init.d/ssh restart


- 删除主机密钥
  - 某些情况下, 如主机地址更改或者不再使用某个密钥, 需要删除某个密钥.
$ ssh-keygen -R 10.42.0.47
# 比手动在 ~/.ssh/known_hosts 文件中删除要方便很多.


</span></pre></table></code></div></div><h4 id="3-authorized_keys文件">3. authorized_keys文件</h4><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>- 远程主机将用户的公钥，保存在登录后的用户主目录的 <span class="nv">$HOME</span>/.ssh/authorized_keys 文件中。公钥就是一段字符串，只要把它追加在authorized_keys文件的末尾就行了。
- 这里不使用上面的ssh-copy-id命令，改用下面的命令，解释公钥的保存过程：
    　　<span class="nv">$ </span>ssh user@host <span class="s1">'mkdir -p .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys'</span> &lt; ~/.ssh/id_rsa.pub
- 分解开来看：
  1. <span class="s2">"</span><span class="nv">$ </span><span class="s2">ssh user@host"</span> : 登录远程主机；
  2. <span class="s1">'mkdir .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys'</span>: 表示登录后在远程shell上执行的命令
    - <span class="s1">'$ mkdir -p .ssh'</span> 的作用是，如果用户主目录中的.ssh目录不存在，就创建一个；
    - <span class="s1">'cat &gt;&gt; .ssh/authorized_keys'</span> &lt; ~/.ssh/id_rsa.pub : 将本地的公钥文件 ~/.ssh/id_rsa.pub，重定向追加到远程文件authorized_keys的末尾。
- 写入authorized_keys文件后，公钥登录的设置就完成了。
</pre></table></code></div></div><h3 id="ssh远程操作">SSH远程操作</h3><h4 id="远程执行命令">远程执行命令</h4><p>有时在远程主机执行一条命令并显示到本地, 然后继续本地工作是很方便的. SSH 就能满足这个需求:</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="sb">`</span>ssh username@host<span class="sb">`</span> <span class="sb">`</span><span class="nb">command </span><span class="k">for </span>host PC<span class="sb">`</span>

<span class="nv">$ </span>ssh pi@10.42.0.47 <span class="nb">ls</span> <span class="nt">-l</span>
<span class="c"># 枚举远程主机的主目录内容并在本地显示.</span>

<span class="nv">$ </span>ssh pi@10.42.0.47 <span class="nb">date
</span>pi@10.42.0.47<span class="s1">'s password:
Thu Aug 7 22:33:51 EAT 2014
</span></pre></table></code></div></div><h4 id="ssh数据传输">SSH数据传输</h4><ul><li>SSH不仅可以用于远程主机登录，还可直接在远程主机上执行操作。</ul><p><code class="language-plaintext highlighter-rouge">$ ssh user@host 'mkdir -p .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys' &lt; ~/.ssh/id_rsa.pub</code></p><ul><li>单引号, 在远程主机上执行的操作；<code class="language-plaintext highlighter-rouge">'mkdir -p .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys'</code><li>后面的输入重定向，表示数据通过SSH传向远程主机。<code class="language-plaintext highlighter-rouge">&lt;</code> ~/.ssh/id_rsa.pub<li>分解开来看：<ol><li><code class="language-plaintext highlighter-rouge">$ ssh user@host</code> : 登录远程主机；<li><code class="language-plaintext highlighter-rouge">'mkdir -p .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys'</code>: 表示登录后在远程shell上执行的命令<ul><li><code class="language-plaintext highlighter-rouge">'$ mkdir -p .ssh'</code>: 如果用户主目录中的.ssh目录不存在，就创建一个；<li><code class="language-plaintext highlighter-rouge">'cat &gt;&gt; .ssh/authorized_keys' &lt; ~/.ssh/id_rsa.pub</code> : 将本地的公钥文件 <code class="language-plaintext highlighter-rouge">~/.ssh/id_rsa.pub</code>，重定向追加到远程文件<code class="language-plaintext highlighter-rouge">authorized_keys</code>的末尾。</ul></ol><li>这就是说，SSH可以在用户和远程主机之间，建立命令和数据的传输通道，很多事情都可以通过SSH来完成。</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c"># 将 $HOME/src/ 目录下面的所有文件，复制到远程主机的 $HOME/src/ 目录。</span>
<span class="nv">$ </span><span class="nb">cd</span> <span class="o">&amp;&amp;</span> <span class="nb">tar </span>czv src | ssh user@host <span class="s1">'tar xz'</span>

<span class="c"># 将远程主机 $HOME/src/ 目录下面的所有文件，复制到用户的当前目录。</span>
<span class="nv">$ </span>ssh user@host <span class="s1">'tar cz src'</span> | <span class="nb">tar </span>xzv

<span class="c"># 查看远程主机是否运行进程httpd。</span>
<span class="nv">$ </span>ssh user@host <span class="s1">'ps ax | grep [h]ttpd'</span>

<span class="c"># 建议使用scp进行远程copy：</span>
</pre></table></code></div></div><hr /><h2 id="copying-files">Copying Files</h2><h3 id="cp-copy"><code class="language-plaintext highlighter-rouge">cp</code> <code class="language-plaintext highlighter-rouge">copy</code></h3><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>
<span class="nt">-a</span>: copy the file or directory across retaining the permissions whilst retaining the permissions and ownership:

    <span class="nb">cp</span> <span class="nt">-a</span> contactus.php ../contact/index.php

copy file <span class="k">in </span>the same <span class="nb">dir</span>:

    <span class="nb">cp </span>filename.txt new-file-name.txt

copy between directories

    <span class="nb">cp </span>filename.txt ../../new-directory/filename-to-copy.txt


copy all files from one directory to another, use <span class="k">*</span>:

    <span class="nb">cp </span>images/<span class="k">*</span> ../skin/

</pre></table></code></div></div><h3 id="scp-跨机远程拷贝"><code class="language-plaintext highlighter-rouge">scp</code> 跨机远程拷贝</h3><ul><li><code class="language-plaintext highlighter-rouge">scp</code>是secure copy的简写，用于Linux下远程拷贝文件，类似的命令有<code class="language-plaintext highlighter-rouge">cp</code><li>不过<code class="language-plaintext highlighter-rouge">cp</code>只是在本机进行拷贝不能跨服务器，而且<code class="language-plaintext highlighter-rouge">scp</code>传输是加密的。会稍微影响一下速度。<li>两台主机之间复制文件必需得同时有两台主机的 复制执行帐号 和 操作权限 。</ul><p>can transfer and zip the file in the same time.</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
</pre><td class="rouge-code"><pre>基础语法:
<span class="nv">$ </span><span class="sb">`</span>scp<span class="sb">`</span> <span class="sb">`</span>source_file_path<span class="sb">`</span> <span class="sb">`</span>destination_file_path<span class="sb">`</span>

scp命令参数
<span class="nt">-1</span> 强制scp命令使用协议ssh1
<span class="nt">-2</span> 强制scp命令使用协议ssh2
<span class="nt">-4</span> 强制scp命令只使用IPv4寻址
<span class="nt">-6</span> 强制scp命令只使用IPv6寻址
<span class="nt">-B</span> 使用批处理模式（传输过程中不询问传输口令或短语）
<span class="nt">-C</span> 允许压缩。（将-C标志传递给ssh，从而打开压缩功能）
<span class="nt">-p</span> 留原文件的修改时间，访问时间和访问权限。
<span class="nt">-q</span> 不显示传输进度条。
<span class="nt">-r</span> 递归复制整个目录。 <span class="o">!!!!!!!!!!!</span>
<span class="nt">-v</span> 详细方式显示输出。scp和ssh<span class="o">(</span>1<span class="o">)</span>会显示出整个过程的调试信息。这些信息用于调试连接，验证和配置问题。
<span class="nt">-c</span> cipher 以cipher将数据传输进行加密，这个选项将直接传递给ssh。
<span class="nt">-F</span> ssh_config 指定一个替代的ssh配置文件，此参数直接传递给ssh。
<span class="nt">-i</span> identity_file : 从指定文件中读取传输时使用的密钥文件，此参数直接传递给ssh。
<span class="nt">-l</span> limit 限定用户所能使用的带宽，以Kbit/s为单位。
<span class="nt">-o</span> ssh_option 如果习惯于使用ssh_config<span class="o">(</span>5<span class="o">)</span>中的参数传递方式，
<span class="nt">-P</span> port 注意是大写的P, port是指定数据传输用到的端口号
<span class="nt">-S</span> program 指定加密传输时所使用的程序。此程序必须能够理解ssh<span class="o">(</span>1<span class="o">)</span>的选项。
<span class="nt">------------------------------------------------------------------------</span>

<span class="c"># 本地复制远程文件</span>
<span class="nv">$ </span>scp root@www.test.com:/val/test/test.tar.gz /val/test/test.tar.gz
<span class="c"># 本地复制远程文件到指定目录：（把远程的文件复制到本地）</span>
<span class="nv">$ </span>scp root@www.test.com:/val/test/test.tar.gz /val/test/
<span class="c"># 远程复制本地文件</span>
<span class="nv">$ </span>scp /val/test.tar.gz root@www.test.com:/val/test.tar.gz
<span class="c"># 远程复制本地文件到指定目录</span>
<span class="nv">$ </span>scp /val/test.tar.gz root@www.test.com:/val/

ps: scp复制文件时只指定服务器地址不加路径默认复制到哪里???

<span class="c"># 在两个远程主机之间复制文件, 从一个远程主机复制到另一个远程主机。</span>
<span class="nv">$ </span>scp user1@host1:/some/remote/dir/foobar.txt user2@host2:/some/remote/dir/

<span class="nt">------------------------------------------------------------------------</span>

<span class="nt">-C</span> 允许压缩。
    - 用压缩来加快传输, 节省时间和带宽！
    - 用C选项来启用压缩功能。文件在传输过程中被压缩，在目的主机上被解压缩。

<span class="c"># 开启压缩选项移动了整个文件夹。速度的增长取决于多少文件能被压缩。</span>
<span class="nv">$ </span>scp <span class="nt">-vrC</span> ~/Downloads root@192.168.1.3:/root/Downloads

<span class="nt">------------------------------------------------------------------------</span>

<span class="nt">-c</span> cipher 以cipher将数据传输进行加密，这个选项将直接传递给ssh。
  - scp默认使用AES加密
  - 用不同的加密可能会加快转移过程，举例:blowfish和arcfour比AES更快（但是安全不如AES）

<span class="nv">$ </span>scp <span class="nt">-c</span> blowfish <span class="nt">-C</span> ~/local_file.txt username@remotehost:/remote/path/file.txt
<span class="c"># 用blowfish加密并同时压缩</span>
<span class="c"># 可以得到显著的速度上的提升，当然也取决于可用的带宽。</span>

<span class="nt">------------------------------------------------------------------------</span>

<span class="nt">-i</span> identity_file 特殊标识文件
  - 从指定文件中读取传输时使用的密钥文件，此参数直接传递给ssh。
  - 当使用基于 秘钥认证（无密码）。你将使用特殊的包含私有秘钥的标识文件。
  - 这个选项直接传递到ssh命令并且以同样的方式工作。

<span class="nv">$ </span>scp <span class="nt">-vCq</span> <span class="nt">-i</span> private_key.pem ~/test.txt root@192.168.1.3:/some/path/test.txt

<span class="nt">------------------------------------------------------------------------</span>

<span class="nt">-l</span> limit 限定用户所能使用的带宽
    - 限制带宽的使用, 不想scp占用所有的带宽
    - 用选项“l”来限制最大传输速度，以Kbit/s为单位

<span class="nv">$ </span>scp <span class="nt">-vrC</span> <span class="nt">-l</span> 400 ~/Downloads root@192.168.1.3:/root/Downloads

<span class="nt">------------------------------------------------------------------------</span>

<span class="nt">-P</span> port 在远程主机上连接一个不同的端口
  - 大写的P, port是指定数据传输用到的端口号
  - 如果 远程服务器 有ssh守护进程运行在不同的端口上（默认是22），那么需要使用“-P”选项来使用指定的端口。

<span class="nv">$ </span>scp <span class="nt">-vC</span> <span class="nt">-P</span> 2200 ~/test.txt root@192.168.1.3:/some/path/test.txt

<span class="nt">------------------------------------------------------------------------</span>

<span class="nt">-p</span> 小写 保存文件属性
  - 保存源文件的修改时间，访问时间以及方式。

<span class="nv">$ </span>scp <span class="nt">-C</span> <span class="nt">-p</span> ~/test.txt root@192.168.1.3:/some/path/test.txt

<span class="nt">------------------------------------------------------------------------</span>

<span class="nt">-q</span> 安静模式 不显示传输进度条
  - scp输出将会减少
  - 不再显示进度表以及警告和诊断信息。

<span class="nv">$ </span>scp <span class="nt">-vCq</span> ~/test.txt root@192.168.1.3:/some/path/test.txt

<span class="nt">------------------------------------------------------------------------</span>

<span class="nt">-F</span> ssh_config 使用不同的ssh_config文件
  - 指定一个替代的ssh配置文件，此参数直接传递给ssh。

<span class="nv">$ </span>scp <span class="nt">-vC</span> <span class="nt">-F</span> /home/user/my_ssh_config ~/test.txt root@192.168.1.3:/some/path/test.txt

<span class="nt">------------------------------------------------------------------------</span>

<span class="nt">-r</span> 递归复制整个目录

<span class="c"># -r: 把远程的目录 复制到 本地</span>
<span class="nv">$ </span>scp <span class="nt">-r</span> root@www.test.com:/val/test/ /val/test/
<span class="c"># -r: 把本地的目录 复制到 远程主机上</span>
<span class="nv">$ </span>scp <span class="nt">-r</span> ./ubuntu_env/ root@192.168.0.111:/home/pipi
pika:/media/pika/files/machine_learning/datasets
<span class="nv">$ </span>scp <span class="nt">-r</span> SocialNetworks/ piting@192.168.0.172:/media/data/pipi/datasets

<span class="c"># 从一个主机往另一个主机复制整个文件夹，需要使用r switch并且指定目录</span>
1 <span class="nv">$ </span>scp <span class="nt">-v</span> <span class="nt">-r</span> ~/Downloads root@192.168.1.3:/root/Downloads
<span class="nt">------------------------------------------------------------------------</span>
详细方式显示输出
<span class="nt">-v</span> scp和ssh<span class="o">(</span>1<span class="o">)</span>会显示出整个过程的调试信息。这些信息用于调试连接，验证和配置问题。
  - SCP的程序将输出大量关于它在后台做什么的信息。
  - 当程序失败或无法完成请求时。详细的输出将正确的指明该程序哪里出了问题。

<span class="nv">$ </span>scp <span class="nt">-v</span>  ~/test.txt  root@192.168.1.3:/root/help2356.txt

    Executing: program /usr/bin/ssh host 192.168.1.3, user root, <span class="nb">command </span>scp <span class="nt">-v</span> <span class="nt">-t</span> /root/help2356.txt
    OpenSSH_6.2p2 Ubuntu-6ubuntu0.1, OpenSSL 1.0.1e 11 Feb 2013
    debug1: Reading configuration data /home/enlightened/.ssh/config
    debug1: Reading configuration data /etc/ssh/ssh_config
    debug1: /etc/ssh/ssh_config line 19: Applying options <span class="k">for</span> <span class="k">*</span>
    debug1: Connecting to 192.168.1.3 <span class="o">[</span>192.168.1.3] port 22.
    debug1: Connection established.
    ..... OUTPUT TRUNCATED
<span class="nt">------------------------------------------------------------------------</span>
多文件传输
<span class="c"># 多个文件可以像下面那样用空格分隔开</span>
<span class="nv">$ </span>scp foo.txt bar.txt username@remotehost:/path/directory/

<span class="c"># 从远程主机复制多个文件到当前目录</span>
<span class="nv">$ </span>scp username@host:path<span class="se">\{</span>afile,bfile<span class="o">}</span>
<span class="nv">$ </span>scp username@remotehost:/path/directory/ <span class="se">\{</span>foo.txt , bar.txt<span class="se">\}</span> <span class="nb">.</span>
<span class="nv">$ </span>scp root@192.168.1.3:~/ <span class="se">\{</span>abc.log , cde.txt<span class="se">\}</span> <span class="nb">.</span>
<span class="nt">------------------------------------------------------------------------</span>
</pre></table></code></div></div><h3 id="rsync"><code class="language-plaintext highlighter-rouge">rsync</code></h3><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>
copy all files including files that begin with <span class="nb">.</span> <span class="o">(</span>1 dot<span class="o">)</span> from one directory to another:

    rsync <span class="nt">-a</span> ./ ../


To show a progress bar of files being copied:

    rsync <span class="nt">--progress</span> /copy/from /copy/to

</pre></table></code></div></div><hr /><h2 id="mv-moving-files-renaming-files"><code class="language-plaintext highlighter-rouge">mv</code> Moving Files, Renaming Files</h2><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>
Moving Files

    <span class="nb">mv </span>currentpath/file.txt ../newpath

Renaming Files

    <span class="nb">mv </span>oldfilename.txt newfilename.txt
</pre></table></code></div></div><hr /><h2 id="compress-and-decompress">compress and decompress</h2><h3 id="zip"><code class="language-plaintext highlighter-rouge">zip</code></h3><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>
<span class="nt">-r</span>: ensures that the file and directories within the parent directory being compressed are also included.


Compressing Files with Zip

    zip <span class="nt">-r</span> compressedfile.zip path/directoryname

Decompressing Zip Files

    unzip filename.zip
</pre></table></code></div></div><h3 id="targz"><code class="language-plaintext highlighter-rouge">tar.gz</code></h3><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>
To create a tar.gz file:

    <span class="nb">tar </span>czvf archivename.tar.gz directoryorfile-to-archive/
    <span class="nb">tar </span>czvf website-backup-2010-11-31.tar.gz httpdocs/

the Flags czvf:
Compress - Creates the new archive.
Zip - Compresses the file.
File - Implies that we have given the compressed file a name.
Verbose - Prints what the <span class="nb">command </span>line is doing, like a progress report.

Decompressing Files with tar.gz

    <span class="nb">tar</span> <span class="nt">-xzf</span> archivename.tar.gz
    <span class="nb">tar</span> <span class="nt">-xzf</span> website-backup-2010-11-31.tar.gz

</pre></table></code></div></div><hr /><h2 id="backing-up">Backing up</h2><h3 id="databases-mysqldump">Databases <code class="language-plaintext highlighter-rouge">mysqldump</code></h3><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre>
To backup a database via ssh:

    mysqldump <span class="nt">-u</span> database_username <span class="nt">-p</span> database_name <span class="o">&gt;</span> name_of_backup.sql
    mysqldump <span class="nt">-u</span> wordpress_bob <span class="nt">-p</span> wordpress_blog <span class="o">&gt;</span> wordpress_blog_20101031.sql


To restore and import a database
first create the bank database <span class="k">then </span>assign a user.
Using these details you must replace the database name and user below:

    mysql <span class="nt">-u</span> database_username <span class="nt">-p</span> database_name &lt; name_of_backup.sql
    mysql <span class="nt">-u</span> wordpress_bob <span class="nt">-p</span> wordpress_blog &lt; wordpress_blog_2011-03-21.sql


</pre></table></code></div></div><h3 id="backing-up-files-and-folders">Backing up Files and Folders</h3><p>To backup files, either use the compressing .tar.gz or .zip methods above.</p><hr /><h2 id="changing-and-setting-owner-group-ssh">Changing and Setting Owner Group SSH</h2><p>chown: change both the owner and group of a directory use the</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>
<span class="nb">chown </span>Owner:Group directoryname/
<span class="nb">chown </span>10000:505 directoryname/

</pre></table></code></div></div><hr /><h2 id="show-system-processes-with-ssh">Show System Processes with SSH</h2><p>To see what the system processes in a human readable way, type:</p><p><code class="language-plaintext highlighter-rouge">ps aux --forest</code></p><hr /><h2 id="get-the-last-30-lines-from-plesk-maillog">Get the last 30 lines from Plesk maillog</h2><p><code class="language-plaintext highlighter-rouge">tail -n 30 -f /usr/local/psa/var/log/maillog</code></p><hr /><h3 id="sshfs-挂载远程文件系统"><code class="language-plaintext highlighter-rouge">sshfs</code> 挂载远程文件系统</h3><p>基于 SSH 的工具: sshfs. 可以在本地直接挂载远程主机的文件系统. $ <code class="language-plaintext highlighter-rouge">sshfs</code> -o idmap=user <code class="language-plaintext highlighter-rouge">user@hostname:/home/user</code> <code class="language-plaintext highlighter-rouge">~/Remotefloder</code></p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># 将远程主机 pi 用户的主目录 挂载到 本地主目录下的 Pi 文件夹.</span>
<span class="nv">$ </span>sshfs <span class="nt">-o</span> <span class="nv">idmap</span><span class="o">=</span>user pi@10.42.0.47:/home/pi ~/Pi
</pre></table></code></div></div><h3 id="ssh--x-x11-图形界面"><code class="language-plaintext highlighter-rouge">ssh -X</code> X11 图形界面</h3><p>假如现在你想要在远程主机运行一个图形界面的程序 用 SSH -X 连接到远程主机即可开启 X11 转发功能. 登录后你可能觉得没什么差别, 但是当你运行一个图形界面程序后就会发现其中的不同的.</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ssh <span class="nt">-X</span> pi@10.42.0.47
<span class="nv">$ </span>pistore
<span class="c"># 如果想在运行图形界面程序的同时做些别的事情</span>
<span class="c"># 只需在命令末尾加一个 &amp; 符号.</span>
<span class="nv">$ </span>pistore&amp;
</pre></table></code></div></div><hr /><h3 id="-d-绑定本地端口"><code class="language-plaintext highlighter-rouge">-D</code> 绑定本地端口</h3><p>既然SSH可以传送数据，那么可以让那些不加密的网络连接，全部走SSH连接，从而提高安全性。</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c"># 让8080端口的数据，都通过SSH传向远程主机，命令就这样写：</span>
<span class="nv">$ </span>ssh <span class="nt">-D</span> 8080 user@host

<span class="c"># SSH会建立一个socket，监听本地的8080端口。</span>
<span class="c"># 一旦有数据传向那个端口，就自动把它转移到SSH连接上面，发往远程主机。</span>
<span class="c"># 8080端口原来是一个不加密端口，现在将变成一个加密端口。</span>
</pre></table></code></div></div><h3 id="-l-本地端口转发-local-forwarding"><code class="language-plaintext highlighter-rouge">-L</code> 本地端口转发 Local forwarding</h3><ul><li>有时，绑定本地端口还不够，还必须指定数据传送的目标主机，从而形成点对点的”端口转发”。<li>为了区别后文的”远程端口转发”，”本地端口转发”（Local forwarding）。</ul><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre>假定host1本地主机，host2远程主机。种种原因这两台主机之间无法连通。
host3可以同时连通前面两台主机。因此，通过host3，将host1连上host2。

<span class="c"># 在host1执行下面的命令：</span>
<span class="nv">$ </span>ssh <span class="nt">-L</span> 2121:host2:21 host3

L参数一共接受三个值 <span class="s2">"本地端口:目标主机:目标主机端口"</span>
指定SSH绑定本地端口2121，然后指定host3将所有数据，转发到目标主机host2的21端口（假定host2运行FTP端口21）
这样一来，只要连接host1的2121端口，就等于连上了host2的21端口。
<span class="nv">$ </span>ftp localhost:2121
<span class="s2">"本地端口转发"</span>使得host1和host3之间形成一个数据传输的秘密<span class="s2">"SSH隧道"</span>。


<span class="nv">$ </span>ssh <span class="nt">-L</span> 5900:localhost:5900 host3
<span class="c"># 将本机的5900端口绑定host3的5900端口</span>
里的localhost指的是host3，因为目标主机是相对host3而言的


<span class="c"># 通过host3的端口转发，ssh登录host2。</span>
<span class="nv">$ </span>ssh <span class="nt">-L</span> 9001:host2:22 host3
<span class="c"># 这时，只要ssh登录本机的9001端口，就相当于登录host2了。</span>
<span class="nv">$ </span>ssh <span class="nt">-p</span> 9001 localhost

上面的-p参数表示指定登录端口。
出错处理：ssh: Could not resolve <span class="nb">hostname </span>192.168.<span class="k">*</span>.<span class="k">*</span>:<span class="k">***</span>: Name or service not known
解决：指定端口不能直接使用ip:端口号，使用-p参数来解决就可以了。

<span class="c"># 从某主机的80端口开启到本地主机2001端口的隧道</span>
ssh <span class="nt">-N</span> <span class="nt">-L</span> 2001:localhost:80 somemachine
<span class="c"># 现在可以直接在浏览器中输入http://localhost:2001访问这个网站。</span>

</pre></table></code></div></div><h4 id="-r-远程端口转发-remote-forwarding"><code class="language-plaintext highlighter-rouge">-R</code> 远程端口转发 remote forwarding</h4><p>“本地端口转发”: 绑定本地端口的转发， “远程端口转发”: 绑定远程端口的转发。</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre>host1与host2之间无法连通，必须借助host3转发。
但是，host3是一台内网机器，它可以连接外网的host1，但是反过来外网的host1连不上内网的host3。
这时，<span class="s2">"本地端口转发"</span>就不能用了

解决办法
host3可以连host1，那么就 <span class="s2">"从host3上建立与host1的SSH连接"</span> ，然后在host1上使用这条连接就可以了。
在host3执行下面的命令：
<span class="nv">$ </span>ssh <span class="nt">-R</span> 2121:host2:21 host1

R参数也是接受三个值，分别是<span class="s2">"远程主机端口:目标主机:目标主机端口"</span>。
让host1监听它自己的2121端口，然后将所有数据经由host3，转发到host2的21端口。
由于对于host3来说，host1是远程主机，所以这种情况就被称为<span class="s2">"远程端口绑定"</span>。

绑定之后，我们在host1就可以连接host2了：
<span class="nv">$ </span>ftp localhost:2121
这里必须指出，<span class="s2">"远程端口转发"</span>的前提条件是，host1和host3两台主机都有sshD和ssh客户端。
</pre></table></code></div></div><h4 id="ssh的其他参数">SSH的其他参数</h4><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
</pre><td class="rouge-code"><pre>1.
N参数，表示只连接远程主机，不打开远程shell；
T参数，表示不为这个连接分配TTY。
<span class="c"># 这两个参数放在一起用，代表这个SSH连接只用来传数据，不执行远程操作。</span>
<span class="nv">$ </span>ssh <span class="nt">-NT</span> <span class="nt">-D</span> 8080 host

2. <span class="nt">-f</span> <span class="c"># 表示SSH连接成功后，转入后台运行。</span>
<span class="c"># 这样一来，你就可以在不中断SSH连接的情况下，在本地shell中执行其他操作。</span>
<span class="nv">$ </span>ssh <span class="nt">-f</span> <span class="nt">-D</span> 8080 host
<span class="c"># 要关闭这个后台连接，就只有用kill命令去杀掉进程。</span>


3. 将你的麦克风输出到远程计算机的扬声器
<span class="c"># 这样来自你麦克风端口的声音将在SSH目标计算机的扬声器端口输出，但声音质量很差，会听到很多嘶嘶声。</span>
<span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/dev/dsp | ssh <span class="nt">-c</span> arcfour <span class="nt">-C</span> username@host <span class="nb">dd </span><span class="nv">of</span><span class="o">=</span>/dev/dsp


4、cat fileA | diff fileB - <span class="c"># 比较远程和本地文件</span>
<span class="nv">$ </span>ssh user@host <span class="nb">cat</span> /path/to/remotefile | diff /path/to/localfile –
在比较本地文件和远程文件是否有差异时这个命令很管用。

5、通过SSH挂载目录/文件系统
<span class="nv">$ </span>sshfs name@server:/path/to/folder /path/to/mount/point
从http://fuse.sourceforge.net/sshfs.html下载sshfs，它允许你跨网络安全挂载一个目录。

6、通过中间主机建立SSH连接
<span class="nv">$ </span>ssh <span class="nt">-t</span> reachable_host ssh unreachable_host
Unreachable_host表示从本地网络无法直接访问的主机，但可以从reachable_host所在网络访问，这个命令通过到reachable_host的“隐藏”连接，创建起到unreachable_host的连接。


8、直接连接到只能通过主机B连接的主机A
ssh <span class="nt">-t</span> hostA ssh hostB
当然，你要能访问主机A才行。

9、创建到目标主机的持久化连接
ssh <span class="nt">-MNf</span> &lt;user&gt;@&lt;host&gt;
在后台创建到目标主机的持久化连接，将这个命令和你~/.ssh/config中的配置结合使用：
Host host
ControlPath ~/.ssh/master-%r@%h:%p
ControlMaster no
所有到目标主机的SSH连接都将使用持久化SSH套接字，如果你使用SSH定期同步文件（使用rsync/sftp/cvs/svn），这个命令将非常有用，因为每次打开一个SSH连接时不会创建新的套接字。

10、通过SSH连接屏幕
ssh <span class="nt">-t</span> remote_host screen –r
直接连接到远程屏幕会话（节省了无用的父bash进程）。

11、端口检测（敲门）
knock &lt;host&gt; 3000 4000 5000 <span class="o">&amp;&amp;</span> ssh <span class="nt">-p</span> &lt;port&gt; user@host <span class="o">&amp;&amp;</span> knock &lt;host&gt; 5000 4000 3000
在一个端口上敲一下打开某个服务的端口（如SSH），再敲一下关闭该端口，需要先安装knockd，下面是一个配置文件示例。
<span class="o">[</span>options]
logfile <span class="o">=</span> /var/log/knockd.log
<span class="o">[</span>openSSH]
sequence <span class="o">=</span> 3000,4000,5000
seq_timeout <span class="o">=</span> 5
<span class="nb">command</span> <span class="o">=</span> /sbin/iptables <span class="nt">-A</span> INPUT <span class="nt">-i</span> eth0 <span class="nt">-s</span> %IP% <span class="nt">-p</span> tcp –dport 22 <span class="nt">-j</span> ACCEPT
tcpflags <span class="o">=</span> syn
<span class="o">[</span>closeSSH]
sequence <span class="o">=</span> 5000,4000,3000
seq_timeout <span class="o">=</span> 5
<span class="nb">command</span> <span class="o">=</span> /sbin/iptables <span class="nt">-D</span> INPUT <span class="nt">-i</span> eth0 <span class="nt">-s</span> %IP% <span class="nt">-p</span> tcp –dport 22 <span class="nt">-j</span> ACCEPT
tcpflags <span class="o">=</span> syn


12、删除文本文件中的一行内容，有用的修复
ssh-keygen <span class="nt">-R</span> &lt;the_offending_host&gt;
在这种情况下，最好使用专业的工具。

13、通过SSH运行复杂的远程shell命令
ssh host <span class="nt">-l</span> user <span class="si">$(</span>&lt;cmd.txt<span class="si">)</span>
更具移植性的版本：
ssh host <span class="nt">-l</span> user “<span class="sb">`</span><span class="nb">cat </span>cmd.txt<span class="sb">`</span>”

14、通过SSH将MySQL数据库复制到新服务器
mysqldump –add-drop-table –extended-insert –force –log-error<span class="o">=</span>error.log <span class="nt">-uUSER</span> <span class="nt">-pPASS</span> OLD_DB_NAME | ssh <span class="nt">-C</span> user@newhost “mysql <span class="nt">-uUSER</span> <span class="nt">-pPASS</span> NEW_DB_NAME”
通过压缩的SSH隧道Dump一个MySQL数据库，将其作为输入传递给mysql命令，我认为这是迁移数据库到新服务器最快最好的方法。

15、删除文本文件中的一行，修复“SSH主机密钥更改”的警告
<span class="nb">sed</span> <span class="nt">-i</span> 8d ~/.ssh/known_hosts

16、从一台没有SSH-COPY-ID命令的主机将你的SSH公钥复制到服务器
<span class="nb">cat</span> ~/.ssh/id_rsa.pub | ssh user@machine “mkdir ~/.ssh<span class="p">;</span> <span class="nb">cat</span> <span class="o">&gt;&gt;</span> ~/.ssh/authorized_keys”
如果你使用Mac OS X或其它没有ssh-copy-id命令的<span class="k">*</span>nix变种，这个命令可以将你的公钥复制到远程主机，因此你照样可以实现无密码SSH登录。

17、实时SSH网络吞吐量测试
<span class="nb">yes</span> | pv | ssh <span class="nv">$host</span> “cat <span class="o">&gt;</span> /dev/null”
通过SSH连接到主机，显示实时的传输速度，将所有传输数据指向/dev/null，需要先安装pv。
如果是Debian：apt-get <span class="nb">install </span>pv
如果是Fedora：yum <span class="nb">install </span>pv
（可能需要启用额外的软件仓库）。

18、如果建立一个可以重新连接的远程GNU screen
ssh <span class="nt">-t</span> user@some.domain.com /usr/bin/screen –xRR
人们总是喜欢在一个文本终端中打开许多shell，如果会话突然中断，或你按下了“Ctrl-a d”，远程主机上的shell不会受到丝毫影响，你可以重新连接，其它有用的screen命令有“Ctrl-a c”（打开新的shell）和“Ctrl-a a”（在shell之间来回切换），请访问http://aperiodic.net/screen/quick_reference阅读更多关于screen命令的快速参考。

19、继续SCP大文件
rsync –partial –progress –rsh<span class="o">=</span>ssh <span class="nv">$file_source</span> <span class="nv">$user</span>@<span class="nv">$host</span>:<span class="nv">$destination_file</span>
它可以恢复失败的rsync命令，当你通过VPN传输大文件，如备份的数据库时这个命令非常有用，需要在两边的主机上安装rsync。
rsync –partial –progress –rsh<span class="o">=</span>ssh <span class="nv">$file_source</span> <span class="nv">$user</span>@<span class="nv">$host</span>:<span class="nv">$destination_file</span> <span class="nb">local</span> -&gt; remote
或
rsync –partial –progress –rsh<span class="o">=</span>ssh <span class="nv">$user</span>@<span class="nv">$host</span>:<span class="nv">$remote_file</span> <span class="nv">$destination_file</span> remote -&gt; <span class="nb">local

</span>20、通过SSH W/ WIRESHARK分析流量
ssh root@server.com ‘tshark <span class="nt">-f</span> “port <span class="o">!</span>22″ <span class="nt">-w</span> -<span class="s1">' | wireshark -k -i –'</span>
使用tshark捕捉远程主机上的网络通信，通过SSH连接发送原始pcap数据，并在wireshark中显示，按下Ctrl+C将停止捕捉，但也会关闭wireshark窗口，可以传递一个“-c <span class="c"># ”参数给tshark，让它只捕捉“#”指定的数据包类型，或通过命名管道重定向数据，而不是直接通过SSH传输给wireshark，我建议你过滤数据包，以节约带宽，tshark可以使用tcpdump替代：</span>
ssh root@example.com tcpdump <span class="nt">-w</span> – ‘port <span class="o">!</span>22′ | wireshark <span class="nt">-k</span> <span class="nt">-i</span> –


21、保持SSH会话永久打开
autossh <span class="nt">-M50000</span> <span class="nt">-t</span> server.example.com ‘screen <span class="nt">-raAd</span> mysession’
打开一个SSH会话后，让其保持永久打开，对于使用笔记本电脑的用户，如果需要在Wi-Fi热点之间切换，可以保证切换后不会丢失连接。


22、更稳定，更快，更强的SSH客户端
ssh <span class="nt">-4</span> <span class="nt">-C</span> <span class="nt">-c</span> blowfish-cbc
强制使用IPv4，压缩数据流，使用Blowfish加密。


23、使用cstream控制带宽
<span class="nb">tar</span> <span class="nt">-cj</span> /backup | cstream <span class="nt">-t</span> 777k | ssh host ‘tar <span class="nt">-xj</span> <span class="nt">-C</span> /backup’
使用bzip压缩文件夹，然后以777k bit/s速率向远程主机传输。Cstream还有更多的功能，请访问http://www.cons.org/cracauer/cstream.html#usage了解详情，例如：
<span class="nb">echo </span>w00t, i’m 733+ | cstream <span class="nt">-b1</span> <span class="nt">-t2</span>


24、一步将SSH公钥传输到另一台机器
ssh-keygen<span class="p">;</span> ssh-copy-id user@host<span class="p">;</span> ssh user@host
这个命令组合允许你无密码SSH登录，注意，如果在本地机器的~/.ssh目录下已经有一个SSH密钥对，ssh-keygen命令生成的新密钥可能会覆盖它们，ssh-copy-id将密钥复制到远程主机，并追加到远程账号的~/.ssh/authorized_keys文件中，使用SSH连接时，如果你没有使用密钥口令，调用ssh user@host后不久就会显示远程shell。


25、将标准输入（stdin）复制到你的X11缓冲区
ssh user@host <span class="nb">cat</span> /path/to/some/file | xclip
你是否使用scp将文件复制到工作用电脑上，以便复制其内容到电子邮件中？xclip可以帮到你，它可以将标准输入复制到X11缓冲区，你需要做的就是点击鼠标中键粘贴缓冲区中的内容。
</pre></table></code></div></div><p>总结</p><ul><li>尽管SCP在安全地传输文件方面是非常有效的，它缺乏文件同步工具必要的功能。它所能做的就是复制粘贴文件从一个位置到另一个位置。<li>一个更强大的工具的 <code class="language-plaintext highlighter-rouge">Rsync</code> 它不仅具有SCP的所有功能，而且增加了更多的功能用来在2个主机智能同步文件。例如，它可以检查并上传只有修改过的文件，忽略现有的文件等等。</ul><hr /><hr /></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/00basic/'>00Basic</a>, <a href='/categories/networkprotocol/'>Networkprotocol</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ssh/" class="post-tag no-text-decoration" >SSH</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Network protocol - SSH - Grace&url=https://ocholuo.github.io//posts/SSH/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Network protocol - SSH - Grace&u=https://ocholuo.github.io//posts/SSH/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Network protocol - SSH - Grace&url=https://ocholuo.github.io//posts/SSH/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Amazon-CloudFront/">AWS Lab - AWS CloudFront</a><li><a href="/posts/Alexa-1stSkill/">AWS Alex First Skill - RedVelvet Time</a><li><a href="/posts/NetworkProtocol-SSL-TLS-Handshake/">NetworkProtocol SSL/TLS Handshake</a><li><a href="/posts/pythonCrash/">Python Crash</a><li><a href="/posts/%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8AAWS/">AWS - 一句话解释AWS</a><li><a href="/posts/GKE/">GCP - Google Cloud Computing - Kubernetes and Kubernetes Engine</a><li><a href="/posts/Go-Note/">Go Note</a><li><a href="/posts/SCPs/">AWS - IdenAccessManage - SCPs (Service Control Policies)</a><li><a href="/posts/CompanyBenefit/">Company Benefit</a><li><a href="/posts/Encryption-SSL&TLS/">Cryptography - SSL/TLS Encryption</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/RDP/"><div class="card-body"> <span class="timeago small" >Jul 16, 2020<i class="unloaded">2020-07-16T11:11:11-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Network protocol - RDP</h3><div class="text-muted small"><p> Network protocol - RDP basic RDP Breakdown ref https://fudosecurity.com/company/blog/ssh-and-rdp-breakdown/ Network protocol - RDP basic Rem...</p></div></div></a></div><div class="card"> <a href="/posts/Overthewire-bandit/"><div class="card-body"> <span class="timeago small" >Feb 17, 2020<i class="unloaded">2020-02-17T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Overthewire - bandit</h3><div class="text-muted small"><p> [toc] 2/17/2020 updated. Lo termino todo~ estos son solución, pienses que si quiere verlo. 休息一下~ 休息一下~ ￣￣￣￣￣＼／￣￣￣￣ 　　　 　∧＿∧　　　　 　　;;（´・ω・） 　 　＿旦_(っ(,,■)＿＿ |l￣l||￣しﾞしﾞ￣|i overthewire - bandi...</p></div></div></a></div><div class="card"> <a href="/posts/Overthewire-natas/"><div class="card-body"> <span class="timeago small" >Feb 20, 2020<i class="unloaded">2020-02-20T10:11:11-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Overthewire - Natas</h3><div class="text-muted small"><p> Overthewire - Natas Overthewire_Natas [toc] Natas teaches the basics of server side web-security. Overthewire_Natas Each level of natas consists of its own website located at http://natas...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/RDP/" class="btn btn-outline-primary" prompt="Older"><p>Network protocol - RDP</p></a> <a href="/posts/CentOSEnterpriseLinuxUserandGroupManagement/" class="btn btn-outline-primary" prompt="Newer"><p>Linux - CentOS Enterprise User and Group Management</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ocholuo">Grace JyL</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/cyberattack/">CyberAttack</a> <a class="post-tag" href="/tags/lab/">Lab</a> <a class="post-tag" href="/tags/cyberattacktools/">CyberAttackTools</a> <a class="post-tag" href="/tags/gcp/">GCP</a> <a class="post-tag" href="/tags/sysadmin/">Sysadmin</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/soc/">SOC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ocholuo.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-179830187-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-179830187-1'); }); </script>
